import{r as O,u as B,j as e,L as q}from"./main-j9d4A_9Q.js";import{H as te}from"./HorizontalNavigation-CTQzO0tR.js";function ae({limit:S=10,showTitle:i=!0,onNavigate:n}){const[c,x]=O.useState("all"),{data:h,loading:r}=B("matches","*",{order:{column:"date",ascending:!1}}),{data:w,loading:G}=B("players","*"),{data:s,loading:g}=B("bans","*",{order:{column:"id",ascending:!1}}),{data:u,loading:R}=B("transactions","*",{order:{column:"date",ascending:!1}}),$=r||G||g||R,t=O.useMemo(()=>{if(!h||!w||!s||!u)return[];const m=[];h==null||h.slice(0,5).forEach(v=>{const b=new Date(v.date);m.push({id:`match-${v.id}`,type:"match",icon:"⚽",title:`AEK ${v.goalsa||0} - ${v.goalsb||0} Real`,description:v.sds?`⭐ SdS: ${v.sds}`:"Spiel gespielt",date:b,dateText:Q(b),action:()=>n==null?void 0:n("matches",{highlightMatch:v.id})})}),s==null||s.slice(0,3).forEach(v=>{const b=w.find(L=>L.id===v.player_id),f=(b==null?void 0:b.name)||v.player_name||"Unbekannt",E=(v.totalgames||0)-(v.matchesserved||0);m.push({id:`ban-${v.id}`,type:"ban",icon:"🚫",title:`Sperre: ${f}`,description:`${v.type} • ${E>0?`${E} Spiele verbleibend`:"Abgelaufen"}`,date:new Date,dateText:"Kürzlich",action:()=>n==null?void 0:n("bans",{highlightBan:v.id})})}),u==null||u.slice(0,5).forEach(v=>{const b=new Date(v.date),f=v.amount||0;m.push({id:`transaction-${v.id}`,type:"transaction",icon:f>0?"💰":"💸",title:`${f>0?"+":""}${f}€`,description:v.description||v.type||"Transaktion",date:b,dateText:Q(b),action:()=>n==null?void 0:n("finanzen",{highlightTransaction:v.id})})});const D=m.sort((v,b)=>b.date-v.date);return(c==="all"?D:D.filter(v=>v.type===c)).slice(0,S)},[h,w,s,u,c,S,n]),j=O.useMemo(()=>{if(!h||!s||!u)return{};const m=new Date,D=new Date(m.getTime()-7*24*60*60*1e3);return{matches:h.filter(k=>new Date(k.date)>=D).length,bans:s.filter(k=>(k.totalgames||0)-(k.matchesserved||0)>0).length,transactions:u.filter(k=>new Date(k.date)>=D).length}},[h,s,u]);return $?e.jsx(q,{message:"Lade Aktivitäten..."}):e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[i&&e.jsxs("div",{className:"p-4 border-b border-border-light",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Letzte Aktivitäten"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded border border-blue-200",children:[j.matches||0," Spiele (7T)"]}),e.jsxs("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded border border-red-200",children:[j.bans||0," aktive Sperren"]}),e.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded border border-green-200",children:[j.transactions||0," Transaktionen (7T)"]})]})})]}),e.jsx("div",{className:"flex gap-2 mt-3",children:[{key:"all",label:"Alle",count:t.length},{key:"match",label:"Spiele",count:t.filter(m=>m.type==="match").length},{key:"transaction",label:"Finanzen",count:t.filter(m=>m.type==="transaction").length},{key:"ban",label:"Sperren",count:t.filter(m=>m.type==="ban").length}].map(({key:m,label:D,count:k})=>e.jsxs("button",{onClick:()=>x(m),className:`px-3 py-1.5 rounded-lg text-sm transition-all duration-200 ${c===m?"bg-primary-green text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-tertiary hover:text-text-primary"}`,children:[D," ",k>0&&`(${k})`]},m))})]}),e.jsx("div",{className:"divide-y divide-border-light",children:t.length===0?e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-2","aria-hidden":"true",children:"📊"}),e.jsx("p",{children:"Keine Aktivitäten gefunden"}),e.jsx("p",{className:"text-sm mt-1",children:c==="all"?"Beginne Daten hinzuzufügen":`Keine ${c==="match"?"Spiele":c==="transaction"?"Transaktionen":"Sperren"} gefunden`})]}):t.map(m=>e.jsx("button",{onClick:m.action,className:"w-full p-4 text-left hover:bg-bg-secondary transition-colors duration-200 focus:outline-none focus:bg-bg-secondary",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:m.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-text-primary truncate",children:m.title}),e.jsx("span",{className:"text-xs text-text-secondary whitespace-nowrap ml-2",children:m.dateText})]}),e.jsx("p",{className:"text-sm text-text-secondary truncate",children:m.description})]})]})},m.id))}),t.length>0&&i&&e.jsx("div",{className:"p-3 border-t border-border-light bg-bg-secondary",children:e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>n==null?void 0:n("stats"),className:"text-sm text-primary-green hover:text-primary-green-dark transition-colors duration-200",children:"Alle Statistiken anzeigen →"})})})]})}function Q(S){const n=Math.floor((new Date-S)/(1e3*60)),c=Math.floor(n/60),x=Math.floor(c/24);return n<1?"Gerade eben":n<60?`vor ${n}m`:c<24?`vor ${c}h`:x<7?`vor ${x}d`:x<30?`vor ${Math.floor(x/7)}w`:S.toLocaleDateString("de-DE",{day:"numeric",month:"short"})}function le({onNavigate:S}){const[i,n]=O.useState("all"),{data:c,loading:x}=B("matches","*",{order:{column:"date",ascending:!1}}),{data:h,loading:r}=B("players","*"),{data:w,loading:G}=B("bans","*"),{data:s,loading:g}=B("transactions","*",{order:{column:"date",ascending:!1}}),{data:u,loading:R}=B("finances","*"),$=x||r||G||g||R,t=O.useMemo(()=>{if(!c||!h||!w||!s||!u)return null;const j=new Date,m={week:new Date(j.getTime()-7*24*60*60*1e3),month:new Date(j.getTime()-30*24*60*60*1e3),all:new Date(0)},D=m[i]||m.all,k=c.filter(p=>new Date(p.date)>=D),v=s.filter(p=>new Date(p.date)>=D),b={AEK:{wins:0,losses:0,goals:0,goalsAgainst:0},Real:{wins:0,losses:0,goals:0,goalsAgainst:0}};k.forEach(p=>{const W=p.goalsa||0,Z=p.goalsb||0;b.AEK.goals+=W,b.AEK.goalsAgainst+=Z,b.Real.goals+=Z,b.Real.goalsAgainst+=W,W>Z?(b.AEK.wins++,b.Real.losses++):Z>W&&(b.Real.wins++,b.AEK.losses++)});const f={};h.forEach(p=>{f[p.id]={name:p.name,team:p.team,goals:0,matches:0,value:p.value||0}}),k.forEach(p=>{["goalscorer1a","goalscorer2a","goalscorer3a","goalscorer4a","goalscorer5a"].forEach(W=>{p[W]&&f[p[W]]&&(f[p[W]].goals++,f[p[W]].matches++)}),["goalscorer1b","goalscorer2b","goalscorer3b","goalscorer4b","goalscorer5b"].forEach(W=>{p[W]&&f[p[W]]&&(f[p[W]].goals++,f[p[W]].matches++)})});const E=u.find(p=>p.team==="AEK")||{balance:0},L=u.find(p=>p.team==="Real")||{balance:0},H=v.filter(p=>p.amount>0).reduce((p,W)=>p+W.amount,0),y=v.filter(p=>p.amount<0).reduce((p,W)=>p+Math.abs(W.amount),0),A=w.filter(p=>(p.totalgames||0)-(p.matchesserved||0)>0),T={AEK:A.filter(p=>{const W=h.find(Z=>Z.id===p.player_id);return(W==null?void 0:W.team)==="AEK"}).length,Real:A.filter(p=>{const W=h.find(Z=>Z.id===p.player_id);return(W==null?void 0:W.team)==="Real"}).length},C=Object.values(f).filter(p=>p.goals>0).sort((p,W)=>W.goals-p.goals).slice(0,5);return{teamRecords:b,playerStats:C,finances:{aek:E.balance||0,real:L.balance||0,income:H,expenses:y,net:H-y},bans:{active:A.length,aek:T.AEK,real:T.Real},totals:{matches:k.length,players:h.length,transactions:v.length}}},[c,h,w,s,u,i]);return $?e.jsx(q,{message:"Lade Dashboard..."}):t?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Dashboard"}),e.jsx("div",{className:"flex gap-2",children:[{key:"week",label:"Woche"},{key:"month",label:"Monat"},{key:"all",label:"Gesamt"}].map(({key:j,label:m})=>e.jsx("button",{onClick:()=>n(j),className:`px-3 py-2 rounded-lg text-sm transition-all duration-200 ${i===j?"bg-primary-green text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-tertiary hover:text-text-primary"}`,children:m},j))})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(U,{icon:"⚽",title:"Spiele",value:t.totals.matches,subtitle:i==="all"?"Gesamt":"Im Zeitraum",color:"blue",onClick:()=>S==null?void 0:S("matches")}),e.jsx(U,{icon:"👥",title:"Spieler",value:t.totals.players,subtitle:"Aktive Spieler",color:"green",onClick:()=>S==null?void 0:S("squad")}),e.jsx(U,{icon:"⚽",title:"Tore",value:t.teamRecords.AEK.goals+t.teamRecords.Real.goals,subtitle:i==="all"?"Gesamt":"Im Zeitraum",color:"green",onClick:()=>S==null?void 0:S("matches")}),e.jsx(U,{icon:"🚫",title:"Sperren",value:t.bans.active,subtitle:"Aktive Sperren",color:"red",onClick:()=>S==null?void 0:S("bans")})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Team-Vergleich"})}),e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"🔵"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-blue-900",children:"AEK"}),e.jsxs("div",{className:"text-sm text-blue-700",children:[t.teamRecords.AEK.wins,"S / ",t.teamRecords.AEK.losses,"N"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-blue-900",children:[t.teamRecords.AEK.goals,":",t.teamRecords.AEK.goalsAgainst]}),e.jsxs("div",{className:"text-sm text-blue-700",children:[t.bans.aek," Sperren"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"🔴"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-red-900",children:"Real"}),e.jsxs("div",{className:"text-sm text-red-700",children:[t.teamRecords.Real.wins,"S / ",t.teamRecords.Real.losses,"N"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-red-900",children:[t.teamRecords.Real.goals,":",t.teamRecords.Real.goalsAgainst]}),e.jsxs("div",{className:"text-sm text-red-700",children:[t.bans.real," Sperren"]})]})]})]})})]}),e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Top Torschützen"})}),e.jsx("div",{className:"p-4",children:t.playerStats.length===0?e.jsxs("div",{className:"text-center text-text-secondary py-4",children:[e.jsx("div",{className:"text-2xl mb-2","aria-hidden":"true",children:"⚽"}),e.jsx("p",{children:"Keine Tore im Zeitraum"})]}):e.jsx("div",{className:"space-y-3",children:t.playerStats.map((j,m)=>{var D;return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-primary-green text-white text-xs flex items-center justify-center font-bold",children:m+1}),e.jsx("span",{className:j.team==="AEK"?"text-blue-600":"text-red-600",children:j.team==="AEK"?"🔵":"🔴"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:j.name}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[(D=j.value)==null?void 0:D.toFixed(1),"M €"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-text-primary",children:[j.goals," Tore"]}),e.jsxs("div",{className:"text-sm text-text-secondary",children:[j.matches," Spiele"]})]})]},j.name)})})})]})]}),e.jsx(ae,{onNavigate:S,limit:5})]}):e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("div",{className:"text-4xl mb-2","aria-hidden":"true",children:"📊"}),e.jsx("p",{children:"Keine Daten verfügbar"})]})}function U({icon:S,title:i,value:n,subtitle:c,color:x="gray",onClick:h}){const r={blue:"bg-blue-50 border-blue-200 text-blue-900",green:"bg-green-50 border-green-200 text-green-900",red:"bg-red-50 border-red-200 text-red-900",gray:"bg-gray-50 border-gray-200 text-gray-900"};return e.jsx("button",{onClick:h,className:`p-4 rounded-lg border transition-all duration-200 hover:shadow-md ${r[x]} ${h?"hover:scale-105 cursor-pointer":"cursor-default"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl","aria-hidden":"true",children:S}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"text-2xl font-bold",children:n}),e.jsx("div",{className:"text-sm opacity-75",children:i}),e.jsx("div",{className:"text-xs opacity-60",children:c})]})]})})}function ie({matches:S}){const[i,n]=O.useState(null),c=O.useMemo(()=>S?S.reduce((s,g)=>{const u=g.date;return s[u]||(s[u]=[]),s[u].push(g),s},{}):{},[S]),x=O.useMemo(()=>Object.keys(c).sort((s,g)=>new Date(g)-new Date(s)),[c]),h=s=>{if(!s||s.length===0)return null;const g=s.reduce((y,A)=>y+(A.goalsa||0)+(A.goalsb||0),0),u=s.length,R=u>0?(g/u).toFixed(1):"0.0",$=s.reduce((y,A)=>{const T=(A.goalsa||0)+(A.goalsb||0),C=(y.goalsa||0)+(y.goalsb||0);return T>C?A:y},s[0]);let t=0,j=0,m=0,D=0;s.forEach(y=>{const A=y.goalsa||0,T=y.goalsb||0;m+=A,D+=T,A>T?t++:T>A&&j++});const k={};s.forEach(y=>{if(y.goalslista)try{const A=typeof y.goalslista=="string"?JSON.parse(y.goalslista):y.goalslista;Array.isArray(A)&&A.forEach(T=>{const C=typeof T=="string"?T:T.player,p=typeof T=="string"?1:T.count||1;k[C]=(k[C]||0)+p})}catch(A){console.warn("Error parsing AEK goals list for match:",y.id,A)}if(y.goalslistb)try{const A=typeof y.goalslistb=="string"?JSON.parse(y.goalslistb):y.goalslistb;Array.isArray(A)&&A.forEach(T=>{const C=typeof T=="string"?T:T.player,p=typeof T=="string"?1:T.count||1;k[C]=(k[C]||0)+p})}catch(A){console.warn("Error parsing Real goals list for match:",y.id,A)}});const v=Object.entries(k).reduce((y,[A,T])=>T>(y.goals||0)?{player:A,goals:T}:y,{player:null,goals:0}),b=s.map(y=>Math.abs((y.goalsa||0)-(y.goalsb||0))),f=b.length>0?(b.reduce((y,A)=>y+A,0)/b.length).toFixed(1):"0.0",E=b.filter(y=>y<=1).length,L=b.filter(y=>y>=3).length,H=[];return s.forEach(y=>{Object.entries(k).forEach(([T,C])=>{C>=3&&H.push({type:"hat-trick",player:T,goals:C,description:`${T} erzielte ${C} Tore`})}),(y.goalsa||0)===0&&H.push({type:"clean-sheet",team:"Real",description:"Real hielt die Null"}),(y.goalsb||0)===0&&H.push({type:"clean-sheet",team:"AEK",description:"AEK hielt die Null"});const A=(y.goalsa||0)+(y.goalsb||0);A>=6&&H.push({type:"high-scoring",goals:A,description:`Torspektakel mit ${A} Toren`})}),{totalMatches:u,totalGoals:g,avgGoalsPerMatch:R,aekWins:t,realWins:j,aekGoals:m,realGoals:D,topScorer:v,highestScoringMatch:$,avgMargin:f,closeGames:E,blowouts:L,specialEvents:H,playerGoals:k}},r=i?h(c[i]):null,w=s=>new Date(s).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),G=s=>new Date(s).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:"📅"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-title3 font-bold text-text-primary",children:"Spieltag-Übersicht"}),e.jsx("p",{className:"text-caption1 text-text-secondary",children:"Detaillierte Analyse pro Spieltag mit interessanten Statistiken"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:["Spieltag auswählen (",x.length," verfügbar)"]}),e.jsxs("select",{value:i||"",onChange:s=>n(s.target.value||null),className:"form-input w-full max-w-md",children:[e.jsx("option",{value:"",children:"-- Spieltag wählen --"}),x.map(s=>e.jsxs("option",{value:s,children:[w(s)," (",c[s].length," Spiel",c[s].length!==1?"e":"",")"]},s))]})]}),!i&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.slice(0,6).map(s=>{const g=h(c[s]);return e.jsxs("div",{onClick:()=>n(s),className:"p-4 bg-bg-secondary rounded-lg border border-border-light hover:border-primary-blue cursor-pointer transition-all duration-200 hover:scale-105",children:[e.jsx("div",{className:"text-sm font-medium text-text-primary mb-2",children:G(s)}),e.jsxs("div",{className:"text-xs text-text-secondary mb-2",children:[g.totalMatches," Spiel",g.totalMatches!==1?"e":""]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore:"}),e.jsx("span",{className:"font-medium",children:g.totalGoals})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"⌀ pro Spiel:"}),e.jsx("span",{className:"font-medium",children:g.avgGoalsPerMatch})]}),g.topScorer.player&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Top:"}),e.jsxs("span",{className:"font-medium text-primary-green",children:[g.topScorer.player.split(" ").slice(-1)[0]," (",g.topScorer.goals,")"]})]})]})]},s)})})]}),i&&r&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-text-primary",children:w(i)}),e.jsxs("p",{className:"text-text-secondary",children:[r.totalMatches," Spiel",r.totalMatches!==1?"e":""," an diesem Tag"]})]}),e.jsx("button",{onClick:()=>n(null),className:"text-text-muted hover:text-text-primary",children:"✕"})]}),r.specialEvents.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-2",children:"🌟 Besondere Ereignisse"}),e.jsx("div",{className:"space-y-2",children:r.specialEvents.map((s,g)=>e.jsx("div",{className:`p-2 rounded-lg text-sm ${s.type==="hat-trick"?"bg-yellow-50 text-yellow-800 border border-yellow-200":s.type==="clean-sheet"?"bg-green-50 text-green-800 border border-green-200":s.type==="high-scoring"?"bg-red-50 text-red-800 border border-red-200":"bg-blue-50 text-blue-800 border border-blue-200"}`,children:s.description},g))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-text-primary",children:r.totalGoals}),e.jsx("div",{className:"text-sm text-text-secondary",children:"Tore insgesamt"}),e.jsxs("div",{className:"text-xs text-text-muted",children:["⌀ ",r.avgGoalsPerMatch," pro Spiel"]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-blue",children:r.aekWins}),e.jsx("div",{className:"text-sm text-text-secondary",children:"AEK Siege"}),e.jsxs("div",{className:"text-xs text-text-muted",children:[r.aekGoals," Tore erzielt"]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-red",children:r.realWins}),e.jsx("div",{className:"text-sm text-text-secondary",children:"Real Siege"}),e.jsxs("div",{className:"text-xs text-text-muted",children:[r.realGoals," Tore erzielt"]})]}),e.jsxs("div",{className:"modern-card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:r.topScorer.player?r.topScorer.goals:"0"}),e.jsx("div",{className:"text-sm text-text-secondary",children:"Meiste Tore"}),e.jsx("div",{className:"text-xs text-text-muted",children:r.topScorer.player?r.topScorer.player.split(" ").slice(-1)[0]:"Kein Torschütze"})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-4",children:"⚽ Spiele im Detail"}),e.jsx("div",{className:"space-y-4",children:c[i].map(s=>e.jsxs("div",{className:"p-4 bg-bg-secondary rounded-lg border border-border-light",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-blue-500 text-white rounded text-xs flex items-center justify-center font-bold",children:"A"}),e.jsx("span",{className:"font-medium",children:"AEK"})]}),e.jsxs("div",{className:"text-xl font-bold",children:[s.goalsa||0," : ",s.goalsb||0]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Real"}),e.jsx("span",{className:"w-6 h-6 bg-red-500 text-white rounded text-xs flex items-center justify-center font-bold",children:"R"})]})]}),e.jsx("div",{className:"text-sm text-text-muted",children:(()=>{const g=(s.goalsa||0)+(s.goalsb||0),u=Math.abs((s.goalsa||0)-(s.goalsb||0));return g===0?"Torlos":g>=6?"Torspektakel":u===0?"Unentschieden":u>=3?"Deutlicher Sieg":u===1?"Knapper Sieg":"Normales Spiel"})()})]}),(s.goalslista||s.goalslistb)&&e.jsxs("div",{className:"space-y-2",children:[s.goalslista&&(()=>{try{const g=typeof s.goalslista=="string"?JSON.parse(s.goalslista):s.goalslista;return Array.isArray(g)&&g.length>0}catch{return!1}})()&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-primary-blue font-medium",children:"AEK Torschützen: "}),(()=>{try{const g=typeof s.goalslista=="string"?JSON.parse(s.goalslista):s.goalslista;return Array.isArray(g)?g.map((u,R)=>{const $=typeof u=="string"?u:u.player,t=typeof u=="string"?1:u.count||1;return e.jsxs("span",{className:"mr-2",children:[$," ",t>1?`(${t})`:""]},R)}):[]}catch(g){return console.warn("Error parsing AEK goals for display:",g),e.jsx("span",{className:"text-red-500 text-xs",children:"Fehler beim Laden der Torschützen"})}})()]}),s.goalslistb&&(()=>{try{const g=typeof s.goalslistb=="string"?JSON.parse(s.goalslistb):s.goalslistb;return Array.isArray(g)&&g.length>0}catch{return!1}})()&&e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-primary-red font-medium",children:"Real Torschützen: "}),(()=>{try{const g=typeof s.goalslistb=="string"?JSON.parse(s.goalslistb):s.goalslistb;return Array.isArray(g)?g.map((u,R)=>{const $=typeof u=="string"?u:u.player,t=typeof u=="string"?1:u.count||1;return e.jsxs("span",{className:"mr-2",children:[$," ",t>1?`(${t})`:""]},R)}):[]}catch(g){return console.warn("Error parsing Real goals for display:",g),e.jsx("span",{className:"text-red-500 text-xs",children:"Fehler beim Laden der Torschützen"})}})()]})]}),s.manofthematch&&e.jsxs("div",{className:"mt-2 text-sm",children:[e.jsx("span",{className:"text-yellow-600 font-medium",children:"⭐ Spieler des Spiels: "}),e.jsx("span",{children:s.manofthematch})]})]},s.id))})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-4",children:"📊 Spielanalyse"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:"Durchschnittliche Tordifferenz:"}),e.jsx("span",{className:"font-medium",children:r.avgMargin})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:"Enge Spiele (≤1 Tor):"}),e.jsx("span",{className:"font-medium",children:r.closeGames})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:"Deutliche Siege (≥3 Tore):"}),e.jsx("span",{className:"font-medium",children:r.blowouts})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-text-secondary",children:"Höchste Toranzahl:"}),e.jsxs("span",{className:"font-medium",children:[(r.highestScoringMatch.goalsa||0)+(r.highestScoringMatch.goalsb||0)," Tore"]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-4",children:"👤 Top-Torschützen des Tages"}),e.jsxs("div",{className:"space-y-2",children:[Object.entries(r.playerGoals).sort(([,s],[,g])=>g-s).slice(0,5).map(([s,g],u)=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${u===0?"bg-yellow-500 text-white":u===1?"bg-gray-400 text-white":u===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:u+1}),e.jsx("span",{className:"font-medium",children:s})]}),e.jsxs("span",{className:"font-bold text-primary-green",children:[g," Tor",g!==1?"e":""]})]},s)),Object.keys(r.playerGoals).length===0&&e.jsx("div",{className:"text-center text-text-muted py-4",children:"Keine Torschützen an diesem Tag"})]})]})]})]})]})}function ne(){const{data:S}=B("matches","*"),[i,n]=O.useState({totalMatches:0,wins:0,draws:0,losses:0,goalsFor:0,goalsAgainst:0,winRate:0,loading:!0}),c=()=>{if(!S||S.length===0){n({totalMatches:0,wins:0,draws:0,losses:0,goalsFor:0,goalsAgainst:0,winRate:0,loading:!1});return}const r=S.length,w=S.filter(t=>(t.goalsa||0)>(t.goalsb||0)).length,G=S.filter(t=>(t.goalsb||0)>(t.goalsa||0)).length,s=S.filter(t=>(t.goalsa||0)===(t.goalsb||0)).length,g=S.reduce((t,j)=>t+(j.goalsa||0),0),u=S.reduce((t,j)=>t+(j.goalsb||0),0),R=S.reduce((t,j)=>t+(j.goalsa||0)+(j.goalsb||0),0),$=r>0?Math.round(w/r*100):0;n({totalMatches:r,wins:w,draws:s,losses:G,goalsFor:g,goalsAgainst:u,totalGoals:R,winRate:$,loading:!1})};if(O.useEffect(()=>{c()},[S]),i.loading)return e.jsxs("div",{className:"modern-card p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-bg-tertiary rounded mb-3"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{className:"h-12 bg-bg-tertiary rounded"}),e.jsx("div",{className:"h-12 bg-bg-tertiary rounded"}),e.jsx("div",{className:"h-12 bg-bg-tertiary rounded"}),e.jsx("div",{className:"h-12 bg-bg-tertiary rounded"})]})]});const h=!S||S.length===0?[]:S.slice(-5).map(w=>{const G=w.goalsa||0,s=w.goalsb||0;return G>s?"W":s>G?"L":"D"});return e.jsxs("div",{className:"modern-card p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"📊 Liga-Statistiken"}),e.jsx("span",{className:"text-xs text-text-muted bg-bg-tertiary px-2 py-1 rounded-full",children:"Gesamt"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-text-primary",children:i.totalMatches}),e.jsx("div",{className:"text-xs text-text-secondary",children:"Spiele"})]}),e.jsxs("div",{className:"text-center p-3 bg-system-green/10 rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-system-green",children:[i.winRate,"%"]}),e.jsx("div",{className:"text-xs text-text-secondary",children:"AEK Siege"})]}),e.jsxs("div",{className:"text-center p-3 bg-system-blue/10 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-system-blue",children:i.totalGoals||i.goalsFor+i.goalsAgainst}),e.jsx("div",{className:"text-xs text-text-secondary",children:"Gesamt Tore"})]}),e.jsxs("div",{className:"text-center p-3 bg-system-orange/10 rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-system-orange",children:[i.goalsFor-i.goalsAgainst>=0?"+":"",i.goalsFor-i.goalsAgainst]}),e.jsx("div",{className:"text-xs text-text-secondary",children:"AEK Differenz"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-text-secondary",children:"AEK Siege:"}),e.jsx("span",{className:"text-system-green font-medium",children:i.wins})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-text-secondary",children:"Unentschieden:"}),e.jsx("span",{className:"text-system-orange font-medium",children:i.draws})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-text-secondary",children:"Real Siege:"}),e.jsx("span",{className:"text-system-red font-medium",children:i.losses})]})]}),h.length>0&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-border-light",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-xs text-text-secondary",children:"Form:"}),e.jsx("div",{className:"flex gap-1",children:h.map((r,w)=>e.jsx("div",{className:`w-4 h-4 rounded-full text-xs flex items-center justify-center font-bold ${r==="W"?"bg-system-green text-white":r==="D"?"bg-system-orange text-white":"bg-system-red text-white"}`,children:r},w))})]}),e.jsxs("div",{className:"text-xs text-text-muted",children:["Letzte ",h.length," Spiele (neueste zuerst)"]})]})]})}class re{constructor(i,n,c,x){this.matches=i||[],this.players=n||[],this.bans=c||[],this.spielerDesSpiels=x||[],this.aekPlayers=(n||[]).filter(h=>h.team==="AEK"),this.realPlayers=(n||[]).filter(h=>h.team==="Real")}calculateTeamRecords(){const i={wins:0,losses:0},n={wins:0,losses:0};return this.matches.forEach(c=>{const x=c.goalsa||0,h=c.goalsb||0;x>h?(i.wins++,n.losses++):h>x&&(n.wins++,i.losses++)}),{aek:i,real:n}}calculateRecentForm(i=5){const n=this.matches.slice(-i),c=[],x=[];return n.forEach(h=>{const r=h.goalsa||0,w=h.goalsb||0;r>w?(c.push("W"),x.push("L")):w>r&&(c.push("L"),x.push("W"))}),{aek:c,real:x}}calculatePlayerStats(){const i=this.matches.length;return this.players.map(n=>{const c=this.countPlayerMatches(n.name,n.team),x=this.bans.filter(g=>g.player_id===n.id),h=this.spielerDesSpiels.find(g=>g.name===n.name&&g.team===n.team),r=h&&h.count||0,w=this.countPlayerGoalsFromMatches(n.name,n.team),G=n.goals||0,s=Math.max(G,w);return{...n,goals:s,matchesPlayed:c,totalMatches:i,sdsCount:r,goalsPerGame:c>0?(s/c).toFixed(2):"0.00",totalBans:x.length,disciplinaryScore:this.calculateDisciplinaryScore(x),goalsPerMatchWhenPlaying:c>0?s/c:0,sdsPercentage:i>0?(r/i*100).toFixed(1):"0.0"}}).sort((n,c)=>(c.goals||0)-(n.goals||0))}countPlayerGoalsFromMatches(i,n){let c=0;return this.matches.forEach(x=>{if(n==="AEK"&&x.goalslista)try{(Array.isArray(x.goalslista)?x.goalslista:typeof x.goalslista=="string"?JSON.parse(x.goalslista):[]).forEach(r=>{const w=typeof r=="string"?r:r.player,G=typeof r=="string"?1:r.count||1;w===i&&(c+=G)})}catch(h){console.warn("Error parsing AEK goals list:",h)}if(n==="Real"&&x.goalslistb)try{(Array.isArray(x.goalslistb)?x.goalslistb:typeof x.goalslistb=="string"?JSON.parse(x.goalslistb):[]).forEach(r=>{const w=typeof r=="string"?r:r.player,G=typeof r=="string"?1:r.count||1;w===i&&(c+=G)})}catch(h){console.warn("Error parsing Real goals list:",h)}}),c}countPlayerMatches(i,n){if(!i||!n)return this.matches.length;let c=0,x=0;this.matches.forEach(r=>{if(n==="AEK"&&r.goalslista)try{(Array.isArray(r.goalslista)?r.goalslista:typeof r.goalslista=="string"?JSON.parse(r.goalslista):[]).some(s=>(typeof s=="string"?s:s.player)===i)&&c++}catch{}if(n==="Real"&&r.goalslistb)try{(Array.isArray(r.goalslistb)?r.goalslistb:typeof r.goalslistb=="string"?JSON.parse(r.goalslistb):[]).some(s=>(typeof s=="string"?s:s.player)===i)&&c++}catch{}r.manofthematch===i&&x++});const h=this.matches.filter(r=>n==="AEK"&&(r.teama==="AEK"||r.teamb==="AEK")||n==="Real"&&(r.teama==="Real"||r.teamb==="Real")).length;return Math.max(c,x,h)}calculateDisciplinaryScore(i){let n=0;return i.forEach(c=>{switch(c.type){case"Gelb-Rote Karte":n+=3;break;case"Rote Karte":n+=5;break;case"Verletzung":n+=1;break;default:n+=1}}),n}calculateMatchAnalytics(){if(this.matches.length<3)return{prediction:"Ungenügend Daten",confidence:0,reasoning:"Mindestens 3 Spiele benötigt für Vorhersage"};const i=this.matches.slice(-5);let n=0,c=0;i.forEach((j,m)=>{const D=(m+1)/i.length,k=j.goalsa||0,v=j.goalsb||0;k>v?n+=3*D:v>k?c+=3*D:(n+=1*D,c+=1*D),n+=(k-v)*.1*D,c+=(v-k)*.1*D});const x=this.matches.reduce((j,m)=>j+(m.goalsa||0),0)/this.matches.length,h=this.matches.reduce((j,m)=>j+(m.goalsb||0),0)/this.matches.length,r=this.bans.filter(j=>j.status==="active"||!j.status),w=r.filter(j=>j.team==="AEK").length,G=r.filter(j=>j.team==="Real").length;n-=w*.5,c-=G*.5;const s=n+c,g=Math.max(.1,Math.min(.9,n/s)),u=Math.max(.1,Math.min(.9,c/s));let R,$;g>u?(R="AEK Sieg",$=Math.round(g*100)):(R="Real Sieg",$=Math.round(u*100));const t=`${Math.round(x)}:${Math.round(h)}`;return{prediction:R,confidence:$,predictedScore:t,aekWinProbability:Math.round(g*100),realWinProbability:Math.round(u*100),reasoning:this.generateAnalyticsReasoning(n,c,w,G)}}generateAnalyticsReasoning(i,n,c,x){const h=[];return i>n?h.push("AEK zeigt bessere Form in den letzten Spielen"):n>i&&h.push("Real zeigt bessere Form in den letzten Spielen"),c>x?h.push(`AEK hat mehr gesperrte Spieler (${c} vs ${x})`):x>c&&h.push(`Real hat mehr gesperrte Spieler (${x} vs ${c})`),h.join(". ")||"Ausgeglichene Teams"}getMatchStatsAnalytics(){const i=this.matches.length;if(i===0)return null;const n=this.matches.filter(s=>(s.goalsa||0)>(s.goalsb||0)).length,c=this.matches.filter(s=>(s.goalsb||0)>(s.goalsa||0)).length,x=this.matches.filter(s=>(s.goalsa||0)===(s.goalsb||0)).length,r=(this.matches.reduce((s,g)=>s+(g.goalsa||0)+(g.goalsb||0),0)/i).toFixed(2),w=this.matches[this.matches.length-1],G=w?`${w.goalsa||0}:${w.goalsb||0} (${w.date})`:"Keine Spiele";return{totalMatches:i,aekWins:n,realWins:c,draws:x,avgGoalsPerMatch:r,lastMatchResult:G,aekWinPercentage:Math.round(n/i*100),realWinPercentage:Math.round(c/i*100),drawPercentage:Math.round(x/i*100)}}calculateAdvancedStats(){const i=this.matches.length,n=this.matches.reduce((t,j)=>t+(j.goalsa||0)+(j.goalsb||0),0),c=this.matches.reduce((t,j)=>t+(j.goalsa||0),0),x=this.matches.reduce((t,j)=>t+(j.goalsb||0),0),h=this.matches.filter(t=>(t.goalsa||0)+(t.goalsb||0)>=5).length,r=this.matches.map(t=>Math.abs((t.goalsa||0)-(t.goalsb||0))).filter(t=>t>0),w=r.length>0?Math.max(...r):0,G=[...this.matches].sort((t,j)=>new Date(j.date)-new Date(t.date)).slice(0,10);let s={type:"none",count:0,team:""};if(G.length>0){const t=G[0],j=t.goalsa||0,m=t.goalsb||0;j>m?(s.type="win",s.team="AEK"):m>j&&(s.type="win",s.team="Real");for(const D of G){const k=D.goalsa||0,v=D.goalsb||0;if(s.type==="win"&&s.team==="AEK"&&k>v)s.count++;else if(s.type==="win"&&s.team==="Real"&&v>k)s.count++;else break}}const g={bothTeamsScore:this.matches.filter(t=>(t.goalsa||0)>0&&(t.goalsb||0)>0).length,oneNilWins:this.matches.filter(t=>t.goalsa===1&&t.goalsb===0||t.goalsa===0&&t.goalsb===1).length,highScoringWins:this.matches.filter(t=>Math.max(t.goalsa||0,t.goalsb||0)>=4).length},u={aekHome:this.matches.filter(t=>t.teama==="AEK").length,aekAway:this.matches.filter(t=>t.teamb==="AEK").length,aekHomeWins:this.matches.filter(t=>t.teama==="AEK"&&(t.goalsa||0)>(t.goalsb||0)).length,aekAwayWins:this.matches.filter(t=>t.teamb==="AEK"&&(t.goalsb||0)>(t.goalsa||0)).length},R={};this.matches.forEach(t=>{t.goalscorers&&typeof t.goalscorers=="string"&&t.goalscorers.split(",").map(m=>m.trim()).filter(m=>m).forEach(m=>{R[m]=(R[m]||0)+1})});const $=Object.entries(R).reduce((t,[j,m])=>m>(t.goals||0)?{player:j,goals:m}:t,{player:"N/A",goals:0});return{avgGoalsPerMatch:i>0?(n/i).toFixed(2):"0.00",totalMatches:i,totalGoals:n,aekTotalGoals:c,realTotalGoals:x,highScoringGames:h,biggestWinMargin:w,currentStreak:s,cleanSheets:{aek:this.matches.filter(t=>t.goalsb===0).length,real:this.matches.filter(t=>t.goalsa===0).length},scoringPatterns:g,homeAwayStats:u,topScorer:$,goalEfficiency:{aekAvg:i>0?(c/i).toFixed(2):"0.00",realAvg:i>0?(x/i).toFixed(2):"0.00"},competitiveness:{closeGames:this.matches.filter(t=>Math.abs((t.goalsa||0)-(t.goalsb||0))<=1).length,blowouts:this.matches.filter(t=>Math.abs((t.goalsa||0)-(t.goalsb||0))>=3).length}}}calculatePerformanceTrends(){const i={};return this.matches.forEach(n=>{const c=new Date(n.date),x=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}`;i[x]||(i[x]={month:x,aekWins:0,realWins:0,totalGoals:0,matchCount:0});const h=n.goalsa||0,r=n.goalsb||0;i[x].totalGoals+=h+r,i[x].matchCount++,h>r?i[x].aekWins++:r>h&&i[x].realWins++}),i}calculateHeadToHead(){const i={totalMatches:this.matches.length,aekWins:0,realWins:0,aekGoals:0,realGoals:0,biggestAekWin:{diff:0,score:"",date:"",opponent:"Real Madrid"},biggestRealWin:{diff:0,score:"",date:"",opponent:"AEK Athen"}};return this.matches.forEach(n=>{const c=n.goalsa||0,x=n.goalsb||0,h=Math.abs(c-x);i.aekGoals+=c,i.realGoals+=x,c>x?(i.aekWins++,h>i.biggestAekWin.diff&&(i.biggestAekWin={diff:h,score:`${c}:${x}`,date:n.date||"",opponent:"Real Madrid"})):x>c&&(i.realWins++,h>i.biggestRealWin.diff&&(i.biggestRealWin={diff:h,score:`${x}:${c}`,date:n.date||"",opponent:"AEK Athen"}))}),i}}function oe({onNavigate:S,showHints:i=!1}){const[n,c]=O.useState("dashboard"),[x,h]=O.useState("all"),{data:r,loading:w}=B("matches","*"),{data:G,loading:s}=B("players","*"),{data:g,loading:u}=B("spieler_des_spiels","*"),{data:R,loading:$}=B("bans","*"),t=w||s||u||$,m=(()=>{if(!r||x==="all")return r||[];const a=new Date;let o;switch(x){case"1week":o=new Date(a.getTime()-7*24*60*60*1e3);break;case"1month":o=new Date(a.getTime()-30*24*60*60*1e3);break;case"3months":o=new Date(a.getTime()-90*24*60*60*1e3);break;case"6months":o=new Date(a.getTime()-180*24*60*60*1e3);break;default:return r}return r.filter(l=>new Date(l.date)>=o)})(),D=new re(m,G,R,g),k=D.calculateTeamRecords(),v=D.calculateRecentForm(5),b=D.calculatePlayerStats(),f=D.calculateAdvancedStats();D.calculatePerformanceTrends();const E=D.calculateHeadToHead(),L=(m==null?void 0:m.length)||0,H=(G==null?void 0:G.filter(a=>a.team==="AEK"))||[],y=(G==null?void 0:G.filter(a=>a.team==="Real"))||[],A=k.aek.wins,T=k.real.wins,C=a=>a.map((o,l)=>e.jsx("span",{className:`inline-block w-6 h-6 text-xs font-bold rounded-full text-center leading-6 mx-0.5 ${o==="W"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:o},l)),p=a=>`${(a||0).toFixed(1)}M €`,W=[{id:"dashboard",label:"Dashboard",icon:"🎯"},{id:"overview",label:"Übersicht",icon:"📊"},{id:"advanced",label:"Erweitert",icon:"⚡"},{id:"matchdays",label:"Spieltage",icon:"📅"},{id:"players",label:"Spieler",icon:"👥"},{id:"teams",label:"Teams",icon:"🏆"},{id:"trends",label:"Trends",icon:"📈"}];if(t)return e.jsx(q,{message:"Lade Statistiken..."});const z=(()=>{if(!m||m.length===0)return{aek:{streak:0,startDate:null,endDate:null},real:{streak:0,startDate:null,endDate:null}};const a={aek:{longest:0,current:0,start:null,end:null,currentStart:null},real:{longest:0,current:0,start:null,end:null,currentStart:null}};return[...m].sort((l,d)=>new Date(l.date)-new Date(d.date)).forEach((l,d)=>{const N=l.goalsa||0,M=l.goalsb||0,F=l.date;N>M?(a.aek.current++,a.aek.current===1&&(a.aek.currentStart=F),a.aek.current>a.aek.longest&&(a.aek.longest=a.aek.current,a.aek.start=a.aek.currentStart,a.aek.end=F),a.real.current=0,a.real.currentStart=null):M>N?(a.real.current++,a.real.current===1&&(a.real.currentStart=F),a.real.current>a.real.longest&&(a.real.longest=a.real.current,a.real.start=a.real.currentStart,a.real.end=F),a.aek.current=0,a.aek.currentStart=null):(a.aek.current=0,a.real.current=0,a.aek.currentStart=null,a.real.currentStart=null)}),{aek:{streak:a.aek.longest,startDate:a.aek.start,endDate:a.aek.end},real:{streak:a.real.longest,startDate:a.real.start,endDate:a.real.end}}})(),_=()=>{const a=b.length>0?b[0]:null,o=b.filter(d=>d.sdsCount>0).sort((d,N)=>N.sdsCount-d.sdsCount)[0],l=m==null?void 0:m.reduce((d,N)=>{const M=P=>{if(!P)return[];try{return typeof P=="string"?JSON.parse(P):P}catch{return[]}},F=M(N.goalslista),K=M(N.goalslistb);return[...F,...K].forEach(P=>{const J=typeof P=="object"?P.player:P,V=typeof P=="object"?P.count:1;V>d.count&&(d={player:J,count:V,match:N})}),d},{player:null,count:0,match:null});return e.jsxs("div",{className:"space-y-6 mobile-card-list",children:[e.jsxs("div",{className:"mobile-grid mobile-grid-2 md:grid-cols-4",children:[e.jsxs("div",{className:"mobile-metric-card animate-mobile-slide-in",children:[e.jsx("div",{className:"mobile-metric-icon bg-gradient-success",children:e.jsx("span",{className:"text-white",children:"⚽"})}),e.jsx("div",{className:"mobile-metric-value",children:L}),e.jsx("div",{className:"mobile-metric-label",children:"Spiele gespielt"})]}),e.jsxs("div",{className:"mobile-metric-card animate-mobile-slide-in",children:[e.jsx("div",{className:"mobile-metric-icon bg-gradient-warning",children:e.jsx("span",{className:"text-white",children:"🎯"})}),e.jsx("div",{className:"mobile-metric-value",children:f.totalGoals}),e.jsx("div",{className:"mobile-metric-label",children:"Tore insgesamt"}),e.jsxs("div",{className:"mobile-metric-sublabel",children:["⌀ ",L>0?(f.totalGoals/L).toFixed(1):"0.0","/Spiel"]})]}),e.jsxs("div",{className:"mobile-metric-card animate-mobile-slide-in",children:[e.jsx("div",{className:"mobile-metric-icon bg-gradient-info",children:e.jsx("span",{className:"text-white",children:"🥇"})}),e.jsx("div",{className:"mobile-metric-value text-subhead font-semibold",children:a?a.name.split(" ").slice(-1)[0]:"–"}),e.jsxs("div",{className:"mobile-metric-label",children:["Topscorer (",a?a.goals:0," Tore)"]}),e.jsx("div",{className:"mobile-metric-sublabel",children:a&&a.matchesPlayed>0?`⌀ ${(a.goals/a.matchesPlayed).toFixed(2)}/Spiel`:"⌀ 0.00/Spiel"})]}),e.jsxs("div",{className:"mobile-metric-card animate-mobile-slide-in",children:[e.jsx("div",{className:"mobile-metric-icon bg-gradient-warning",children:e.jsx("span",{className:"text-white",children:"⭐"})}),e.jsx("div",{className:"mobile-metric-value text-subhead font-semibold",children:o?o.name.split(" ").slice(-1)[0]:"–"}),e.jsxs("div",{className:"mobile-metric-label",children:["Top SdS (",o?o.sdsCount:0,"x)"]}),e.jsx("div",{className:"mobile-metric-sublabel",children:o&&o.matchesPlayed>0?`${(o.sdsCount/o.matchesPlayed*100).toFixed(1)}% Quote`:"0.0% Quote"})]})]}),e.jsxs("div",{className:"mobile-grid mobile-grid-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"mobile-overview-card team-aek animate-mobile-slide-in hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-caption1 font-semibold text-system-blue uppercase tracking-wide",children:"🔵 AEK Athen"}),e.jsx("div",{className:"w-8 h-8 bg-system-blue/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-system-blue text-sm font-bold",children:"A"})})]}),e.jsx("div",{className:"text-title1 font-bold text-text-primary mb-2",children:E.biggestAekWin.diff>0?E.biggestAekWin.score:"–"}),e.jsx("div",{className:"text-callout text-text-secondary mb-3",children:"Größter Sieg"}),E.biggestAekWin.diff>0&&e.jsxs("div",{className:"text-footnote text-text-tertiary space-y-1",children:[e.jsxs("div",{children:["vs ",E.biggestAekWin.opponent]}),e.jsx("div",{className:"text-caption1",children:new Date(E.biggestAekWin.date).toLocaleDateString("de-DE")})]})]}),e.jsxs("div",{className:"mobile-overview-card team-real animate-mobile-slide-in hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-caption1 font-semibold text-system-red uppercase tracking-wide",children:"🔴 Real Madrid"}),e.jsx("div",{className:"w-8 h-8 bg-system-red/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-system-red text-sm font-bold",children:"R"})})]}),e.jsx("div",{className:"text-title1 font-bold text-text-primary mb-2",children:E.biggestRealWin.diff>0?E.biggestRealWin.score:"–"}),e.jsx("div",{className:"text-callout text-text-secondary mb-3",children:"Größter Sieg"}),E.biggestRealWin.diff>0&&e.jsxs("div",{className:"text-footnote text-text-tertiary space-y-1",children:[e.jsxs("div",{children:["vs ",E.biggestRealWin.opponent]}),e.jsx("div",{className:"text-caption1",children:new Date(E.biggestRealWin.date).toLocaleDateString("de-DE")})]})]}),e.jsxs("div",{className:"mobile-overview-card animate-mobile-slide-in hover:scale-105 transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"text-caption1 font-semibold text-system-purple uppercase tracking-wide",children:"⚽ Top Performance"}),e.jsx("div",{className:"w-8 h-8 bg-system-purple/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-system-purple text-sm font-bold",children:"🏆"})})]}),e.jsx("div",{className:"text-title1 font-bold text-text-primary mb-2",children:l!=null&&l.player?l.player.split(" ").slice(-1)[0]:"–"}),e.jsxs("div",{className:"text-callout text-text-secondary mb-3",children:["Meiste Tore (",(l==null?void 0:l.count)||0," in einem Spiel)"]}),(l==null?void 0:l.match)&&e.jsx("div",{className:"text-footnote text-text-tertiary",children:e.jsx("div",{className:"text-caption1",children:new Date(l.match.date).toLocaleDateString("de-DE")})})]})]}),e.jsxs("div",{className:"mobile-overview-card animate-mobile-slide-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-info rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-lg",children:"📊"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-title3 font-bold text-text-primary",children:"Erweiterte Statistiken"}),e.jsx("p",{className:"text-caption1 text-text-secondary",children:"Detaillierte Analyse der Liga"})]})]}),e.jsxs("div",{className:"mobile-grid mobile-grid-auto gap-4",children:[e.jsxs("div",{className:"mobile-metric-card",children:[e.jsx("div",{className:"mobile-metric-icon bg-gradient-warning",children:e.jsx("span",{className:"text-white",children:"⏱️"})}),e.jsx("div",{className:"mobile-metric-value text-title2",children:(()=>{const d=(R==null?void 0:R.reduce((M,F)=>{const K=F.totalgames||0;return M+K},0))||0;return`${(R==null?void 0:R.length)>0?(d/R.length).toFixed(1):"0.0"}`})()}),e.jsx("div",{className:"mobile-metric-label",children:"⌀ Sperrenlänge"}),e.jsx("div",{className:"mobile-metric-sublabel",children:"Spiele"})]}),e.jsxs("div",{className:"mobile-metric-card",children:[e.jsx("div",{className:"mobile-metric-icon bg-gradient-success",children:e.jsx("span",{className:"text-white",children:"🎯"})}),e.jsx("div",{className:"mobile-metric-value text-title2",children:b.filter(d=>d.goals>0).length}),e.jsx("div",{className:"mobile-metric-label",children:"Aktive Torschützen"}),e.jsxs("div",{className:"mobile-metric-sublabel",children:["von ",b.length]})]}),e.jsxs("div",{className:"mobile-metric-card",children:[e.jsx("div",{className:"mobile-metric-icon bg-gradient-danger",children:e.jsx("span",{className:"text-white",children:"🟥"})}),e.jsx("div",{className:"mobile-metric-value text-title2",children:(R==null?void 0:R.length)||0}),e.jsx("div",{className:"mobile-metric-label",children:"Gesamt Sperren"}),e.jsx("div",{className:"mobile-metric-sublabel",children:"aller Zeiten"})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🔥"}),"Längste Siegesserien"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border border-blue-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"AEK"})}),e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[z.aek.streak," Siege"]})]}),z.aek.startDate&&z.aek.endDate?e.jsxs("div",{className:"space-y-1 text-sm text-blue-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-500",children:"📅"}),e.jsxs("span",{children:["Von: ",new Date(z.aek.startDate).toLocaleDateString("de-DE")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-500",children:"🏁"}),e.jsxs("span",{children:["Bis: ",new Date(z.aek.endDate).toLocaleDateString("de-DE")]})]})]}):e.jsx("div",{className:"text-sm text-blue-600",children:z.aek.streak===0?"Keine Siegesserie im Zeitraum":"Kein Datumsbereich verfügbar"})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-red-50 to-pink-50 rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:"RM"})}),e.jsxs("div",{className:"text-lg font-bold text-red-600",children:[z.real.streak," Siege"]})]}),z.real.startDate&&z.real.endDate?e.jsxs("div",{className:"space-y-1 text-sm text-red-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-500",children:"📅"}),e.jsxs("span",{children:["Von: ",new Date(z.real.startDate).toLocaleDateString("de-DE")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-500",children:"🏁"}),e.jsxs("span",{children:["Bis: ",new Date(z.real.endDate).toLocaleDateString("de-DE")]})]})]}):e.jsx("div",{className:"text-sm text-red-600",children:z.real.streak===0?"Keine Siegesserie im Zeitraum":"Kein Datumsbereich verfügbar"})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"🏆"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-orange-800",children:"Beste Siegesserie im Zeitraum"}),e.jsx("div",{className:"text-lg font-bold text-orange-600",children:z.aek.streak>z.real.streak?`AEK: ${z.aek.streak} Siege`:z.real.streak>z.aek.streak?`Real: ${z.real.streak} Siege`:`Unentschieden: ${z.aek.streak} Siege`})]})]})})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"💡 Besondere Statistiken"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"text-xl font-bold text-yellow-600",children:(()=>{let d=0,N="Keine Daten";return b.forEach(M=>{if(M.matchesPlayed>0){const F=M.goals/M.matchesPlayed;F>d&&(d=F,N=M.name)}}),N})()}),e.jsx("div",{className:"text-sm text-yellow-700",children:"🎯 Effizientester Spieler"}),e.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:(()=>{let d=0;return b.forEach(N=>{if(N.matchesPlayed>0){const M=N.goals/N.matchesPlayed;M>d&&(d=M)}}),d>0?`${d.toFixed(2)} Tore/Spiel`:"Keine Daten"})()})]}),e.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:(()=>{const d=k.aek.wins,N=k.real.wins;return d+N===0?"100%":`${(Math.min(d,N)/Math.max(d,N)*100).toFixed(0)}%`})()}),e.jsx("div",{className:"text-sm text-blue-700",children:"⚖️ Team-Balance"}),e.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Ausgeglichenheit (",k.aek.wins,":",k.real.wins,")"]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card-ios",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-fifa-blue/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"🔵"})}),e.jsx("h3",{className:"text-title3 font-bold text-fifa-blue",children:"AEK Athen"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-body text-text-secondary",children:"Siege:"}),e.jsx("span",{className:"text-body font-semibold text-system-green",children:A})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-body text-text-secondary",children:"Niederlagen:"}),e.jsx("span",{className:"text-body font-semibold text-system-red",children:k.aek.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-body text-text-secondary",children:"Zu Null:"}),e.jsx("span",{className:"text-body font-semibold text-text-primary",children:f.cleanSheets.aek})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-caption1 text-text-secondary mb-2",children:"Form (letzte 5):"}),e.jsx("div",{className:"flex",children:C(v.aek)})]})]})]}),e.jsxs("div",{className:"card-ios",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-fifa-red/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"🔴"})}),e.jsx("h3",{className:"text-title3 font-bold text-fifa-red",children:"Real Madrid"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-body text-text-secondary",children:"Siege:"}),e.jsx("span",{className:"text-body font-semibold text-system-green",children:T})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-body text-text-secondary",children:"Niederlagen:"}),e.jsx("span",{className:"text-body font-semibold text-system-red",children:k.real.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-body text-text-secondary",children:"Zu Null:"}),e.jsx("span",{className:"text-body font-semibold text-text-primary",children:f.cleanSheets.real})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-caption1 text-text-secondary mb-2",children:"Form (letzte 5):"}),e.jsx("div",{className:"flex",children:C(v.real)})]})]})]})]}),e.jsxs("div",{className:"card-ios",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-system-yellow/10 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-lg",children:"🏆"})}),e.jsx("h3",{className:"text-title3 font-bold text-text-primary",children:"Top-Torschützen"})]}),e.jsx("div",{className:"space-y-3",children:b.slice(0,5).map((d,N)=>e.jsx("div",{className:"list-item-ios",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-caption2 font-bold ${N===0?"bg-system-yellow text-white":N===1?"bg-text-quaternary text-white":N===2?"bg-system-orange text-white":"bg-bg-tertiary text-text-secondary"}`,children:N+1}),e.jsxs("div",{children:[e.jsx("div",{className:"text-callout font-medium text-text-primary",children:d.name}),e.jsx("div",{className:"text-caption1 text-text-secondary",children:d.team})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-callout font-bold text-text-primary",children:[d.goals," Tore"]}),e.jsxs("div",{className:"text-caption1 text-text-secondary",children:[d.goalsPerGame," ⌀"]})]})]})},d.id))})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"⭐ Top-Spieler des Spiels"}),e.jsx("div",{className:"space-y-2",children:b.filter(d=>d.sdsCount>0).sort((d,N)=>N.sdsCount-d.sdsCount).slice(0,5).map((d,N)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${N===0?"bg-yellow-500 text-white":N===1?"bg-gray-400 text-white":N===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:N+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:d.name}),e.jsx("div",{className:"text-sm text-text-muted",children:d.team})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold",children:[d.sdsCount,"x SdS"]}),e.jsxs("div",{className:"text-sm text-text-muted",children:[d.matchesPlayed>0?(d.sdsCount/d.matchesPlayed*100).toFixed(1):"0.0","% Quote"]})]})]},d.id))}),b.filter(d=>d.sdsCount>0).length===0&&e.jsx("div",{className:"text-center text-text-muted py-4",children:"Noch keine Spieler des Spiels Auszeichnungen vergeben"})]})]})},I=()=>e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"📊 Spielerstatistiken"}),e.jsxs("div",{className:"mb-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-primary-green",children:b.filter(a=>a.goals>0).length}),e.jsx("div",{className:"text-sm text-text-secondary",children:"Aktive Torschützen"})]}),e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-primary-blue",children:b.reduce((a,o)=>a+o.goals,0)}),e.jsx("div",{className:"text-sm text-text-secondary",children:"Tore insgesamt"})]}),e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-primary-orange",children:b.filter(a=>a.sdsCount>0).length}),e.jsx("div",{className:"text-sm text-text-secondary",children:"SdS Träger"})]}),e.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-primary-red",children:b.reduce((a,o)=>a+o.totalBans,0)}),e.jsx("div",{className:"text-sm text-text-secondary",children:"Gesamt Sperren"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border-light",children:[e.jsx("th",{className:"text-left py-2",children:"Spieler"}),e.jsx("th",{className:"text-left py-2",children:"Team"}),e.jsx("th",{className:"text-center py-2",children:"Tore"}),e.jsx("th",{className:"text-center py-2",children:"⌀/Spiel"}),e.jsx("th",{className:"text-center py-2",children:"Spiele"}),e.jsx("th",{className:"text-center py-2",children:"SdS"}),e.jsx("th",{className:"text-center py-2",children:"SdS %"}),e.jsx("th",{className:"text-center py-2",children:"Sperren"}),e.jsx("th",{className:"text-right py-2",children:"Marktwert"})]})}),e.jsx("tbody",{children:b.map(a=>e.jsxs("tr",{className:"border-b border-border-light hover:bg-bg-secondary",children:[e.jsx("td",{className:"py-2 font-medium",children:a.name}),e.jsx("td",{className:"py-2",children:e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${a.team==="AEK"?"bg-blue-100 text-blue-800":a.team==="Ehemalige"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:a.team})}),e.jsx("td",{className:"py-2 text-center font-bold",children:a.goals}),e.jsx("td",{className:"py-2 text-center",children:a.goalsPerGame}),e.jsx("td",{className:"py-2 text-center",children:a.matchesPlayed}),e.jsx("td",{className:"py-2 text-center",children:a.sdsCount}),e.jsx("td",{className:"py-2 text-center",children:e.jsxs("span",{className:`px-1 py-0.5 rounded text-xs ${parseFloat(a.sdsPercentage)>=50?"bg-green-100 text-green-800":parseFloat(a.sdsPercentage)>=25?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600"}`,children:[a.sdsPercentage,"% (",a.sdsCount,"/",a.totalMatches,")"]})}),e.jsx("td",{className:"py-2 text-center",children:e.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${a.totalBans===0?"bg-green-100 text-green-800":a.totalBans<=2?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:a.totalBans})}),e.jsx("td",{className:"py-2 text-right",children:p(a.value)})]},a.id))})]})}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"🏆 Effizienz-Spitze"}),(()=>{const a=b.filter(o=>o.matchesPlayed>=3).sort((o,l)=>l.goalsPerMatchWhenPlaying-o.goalsPerMatchWhenPlaying)[0];return a?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-green-700",children:a.name}),e.jsxs("div",{className:"text-sm text-green-600",children:[a.goalsPerGame," Tore/Spiel (",a.goals," Tore in ",a.matchesPlayed," Spielen)"]})]}):e.jsx("div",{className:"text-gray-500",children:"Nicht genügend Daten"})})()]}),e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"⭐ SdS-König"}),(()=>{const a=b.filter(o=>o.sdsCount>0).sort((o,l)=>parseFloat(l.sdsPercentage)-parseFloat(o.sdsPercentage))[0];return a?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-yellow-700",children:a.name}),e.jsxs("div",{className:"text-sm text-yellow-600",children:[a.sdsPercentage,"% Quote (",a.sdsCount,"x SdS)"]})]}):e.jsx("div",{className:"text-gray-500",children:"Noch keine SdS vergeben"})})()]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"🚫 Disziplin-Problem"}),(()=>{const a=b.filter(o=>o.totalBans>0).sort((o,l)=>l.totalBans-o.totalBans)[0];return a?e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-red-700",children:a.name}),e.jsxs("div",{className:"text-sm text-red-600",children:[a.totalBans," Sperren (Score: ",a.disciplinaryScore,")"]})]}):e.jsx("div",{className:"text-gray-500",children:"Keine Sperren verzeichnet"})})()]})]})]}),Y=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"⚖️ Team-Vergleich"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-blue-600",children:"AEK Athen"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktive Spieler:"}),e.jsx("span",{className:"font-medium",children:H.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-medium",children:A})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-medium",children:k.aek.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsx("span",{className:"font-medium",children:f.cleanSheets.aek})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-red-600",children:"Real Madrid"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktive Spieler:"}),e.jsx("span",{className:"font-medium",children:y.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-medium",children:T})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Niederlagen:"}),e.jsx("span",{className:"font-medium",children:k.real.losses})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Zu Null Spiele:"}),e.jsx("span",{className:"font-medium",children:f.cleanSheets.real})]})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"📈 Erweiterte Statistiken"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Diese Statistiken bieten tiefere Einblicke in die Team-Performance und wichtige Kennzahlen."}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary-green",children:f.highScoringGames}),e.jsx("div",{className:"text-sm text-text-muted",children:"Torspektakel"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Spiele mit 5+ Toren"})]}),e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-orange",children:f.biggestWinMargin}),e.jsx("div",{className:"text-sm text-text-muted",children:"Größter Sieg"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Höchste Tordifferenz"})]}),e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-accent-blue",children:f.avgGoalsPerMatch}),e.jsx("div",{className:"text-sm text-text-muted",children:"⌀ Tore pro Spiel"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Durchschnittswert"})]}),e.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:f.currentStreak.count>0?`${f.currentStreak.count}`:"0"}),e.jsx("div",{className:"text-sm text-text-muted",children:"Siegesserie"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:f.currentStreak.count>0?f.currentStreak.team:"Keine aktuelle Serie"})]})]}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-blue-600",children:"🏠 Home/Away Analyse"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"AEK Heimspiele:"}),e.jsx("span",{className:"font-medium",children:f.homeAwayStats.aekHome})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"AEK Heimsiege:"}),e.jsx("span",{className:"font-medium",children:f.homeAwayStats.aekHomeWins})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"AEK Auswärtssiege:"}),e.jsx("span",{className:"font-medium",children:f.homeAwayStats.aekAwayWins})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Heimstärke AEK:"}),e.jsx("span",{className:"font-medium",children:f.homeAwayStats.aekHome>0?`${(f.homeAwayStats.aekHomeWins/f.homeAwayStats.aekHome*100).toFixed(0)}%`:"0%"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-green-600",children:"⚽ Torstatistiken"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Beide Teams treffen:"}),e.jsx("span",{className:"font-medium",children:f.scoringPatterns.bothTeamsScore})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"1:0 Siege:"}),e.jsx("span",{className:"font-medium",children:f.scoringPatterns.oneNilWins})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"4+ Tore Siege:"}),e.jsx("span",{className:"font-medium",children:f.scoringPatterns.highScoringWins})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Top-Torschütze:"}),e.jsxs("span",{className:"font-medium",children:[f.topScorer.player," (",f.topScorer.goals,")"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-purple-600",children:"🎯 Spielqualität"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Enge Spiele (≤1 Tor):"}),e.jsx("span",{className:"font-medium",children:f.competitiveness.closeGames})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Deutliche Siege (≥3 Tore):"}),e.jsx("span",{className:"font-medium",children:f.competitiveness.blowouts})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"AEK Tor-Schnitt:"}),e.jsx("span",{className:"font-medium",children:f.goalEfficiency.aekAvg})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Real Tor-Schnitt:"}),e.jsx("span",{className:"font-medium",children:f.goalEfficiency.realAvg})]})]})]})]}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:"🎯 Offensive Highlights"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Torreichstes Team:"}),e.jsxs("span",{className:"font-medium",children:[f.aekTotalGoals>=f.realTotalGoals?"AEK Athen":"Real Madrid","(",Math.max(f.aekTotalGoals,f.realTotalGoals)," Tore)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Höchste Einzelspiel-Toranzahl:"}),e.jsxs("span",{className:"font-medium",children:[f.highestScoringMatch," Tore"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktivster Torschütze:"}),e.jsx("span",{className:"font-medium",children:b.length>0?`${b[0].name} (${b[0].goals} Tore)`:"Keine Daten"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-text-primary",children:"⚖️ Team-Balance"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Kader-Unterschied:"}),e.jsxs("span",{className:"font-medium",children:[Math.abs(H.length-y.length)," Spieler"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Marktwert-Verhältnis:"}),e.jsx("span",{className:"font-medium",children:H.reduce((a,o)=>a+(o.value||0),0)>y.reduce((a,o)=>a+(o.value||0),0)?"AEK führt":"Real führt"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Dominanteres Team:"}),e.jsx("span",{className:"font-medium",children:A>T?"AEK Athen":T>A?"Real Madrid":"Ausgeglichen"})]})]})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"⚔️ Head-to-Head Bilanz"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Direkter Vergleich zwischen AEK Athen und Real Madrid über alle Spiele."}),e.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:E.aekWins}),e.jsx("div",{className:"text-sm text-blue-700",children:"AEK Siege"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:E.totalMatches>0?`${(E.aekWins/E.totalMatches*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:E.realWins}),e.jsx("div",{className:"text-sm text-red-700",children:"Real Siege"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:E.totalMatches>0?`${(E.realWins/E.totalMatches*100).toFixed(1)}%`:"0%"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:E.aekGoals+E.realGoals}),e.jsx("div",{className:"text-sm text-green-700",children:"Tore gesamt"}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:E.totalMatches>0?`⌀ ${((E.aekGoals+E.realGoals)/E.totalMatches).toFixed(1)} pro Spiel`:"⌀ 0 pro Spiel"})]})]}),e.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"🔵 Größter AEK Sieg"}),E.biggestAekWin.diff>0?e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:E.biggestAekWin.score}),e.jsxs("div",{className:"text-sm text-blue-700",children:["Unterschied: ",E.biggestAekWin.diff," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(E.biggestAekWin.date).toLocaleDateString("de-DE")})]}):e.jsx("div",{className:"text-gray-500",children:"Noch kein Sieg verzeichnet"})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"🔴 Größter Real Sieg"}),E.biggestRealWin.diff>0?e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600 mb-1",children:E.biggestRealWin.score}),e.jsxs("div",{className:"text-sm text-red-700",children:["Unterschied: ",E.biggestRealWin.diff," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:new Date(E.biggestRealWin.date).toLocaleDateString("de-DE")})]}):e.jsx("div",{className:"text-gray-500",children:"Noch kein Sieg verzeichnet"})]})]})]}),e.jsxs("div",{className:"modern-card",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"🔬 Detailanalyse"}),e.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Erweiterte Metriken für eine tiefgreifende Team-Analyse."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-red-600",children:"🎲 Spielstatistiken"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Spiele gespielt:"}),e.jsx("span",{className:"font-medium",children:L})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Längste Serie:"}),e.jsxs("span",{className:"font-medium",children:[A>=T?"AEK":"Real"," (",Math.max(A,T)," Siege)"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Torreichstes Spiel:"}),e.jsxs("span",{className:"font-medium",children:[f.highestScoringMatch," Tore"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold text-purple-600",children:"🏆 Leistungs-Metriken"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Aktive Spieler:"}),e.jsx("span",{className:"font-medium",children:H.length+y.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Torschützen:"}),e.jsxs("span",{className:"font-medium",children:[b.filter(a=>a.goals>0).length," Spieler"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Erfolgsquote AEK:"}),e.jsx("span",{className:"font-medium",children:L>0?`${(A/L*100).toFixed(0)}%`:"0%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Erfolgsquote Real:"}),e.jsx("span",{className:"font-medium",children:L>0?`${(T/L*100).toFixed(0)}%`:"0%"})]})]})]})]})]})]}),X=()=>{const o=(()=>{if(!m||m.length===0)return[];const l={};return m.forEach(d=>{const N=new Date(d.date),M=`${N.getFullYear()}-${String(N.getMonth()+1).padStart(2,"0")}`,F=N.toLocaleDateString("de-DE",{year:"numeric",month:"long"});l[M]||(l[M]={month:F,key:M,aekWins:0,realWins:0,aekGoals:0,realGoals:0,matchCount:0,matches:[]});const K=d.goalsa||0,P=d.goalsb||0;l[M].aekGoals+=K,l[M].realGoals+=P,l[M].matchCount++,l[M].matches.push(d),K>P?l[M].aekWins++:P>K&&l[M].realWins++}),Object.values(l).sort((d,N)=>N.key.localeCompare(d.key))})();return o.length===0?e.jsxs("div",{className:"text-center py-8 text-text-muted",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📈"}),e.jsx("p",{children:"Keine Spiele für Trends-Analyse im gewählten Zeitraum"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:"📈"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"Performance-Trends"}),e.jsx("p",{className:"text-sm text-text-muted",children:"Monatliche Entwicklung der Teams"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:o.reduce((l,d)=>l+d.aekWins,0)}),e.jsx("div",{className:"text-sm text-blue-700",children:"AEK Siege gesamt"})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-red-600",children:o.reduce((l,d)=>l+d.realWins,0)}),e.jsx("div",{className:"text-sm text-red-700",children:"Real Siege gesamt"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:o.reduce((l,d)=>l+d.matchCount,0)}),e.jsx("div",{className:"text-sm text-green-700",children:"Spiele gesamt"})]})]})]}),e.jsx("div",{className:"space-y-4",children:o.map((l,d)=>{const N=l.aekGoals+l.realGoals,M=l.matchCount>0?(l.aekWins/l.matchCount*100).toFixed(0):0,F=l.matchCount>0?(l.realWins/l.matchCount*100).toFixed(0):0,K=l.matchCount>0?(N/l.matchCount).toFixed(1):"0.0";return e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-info rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-bold",children:d+1})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-text-primary",children:l.month}),e.jsxs("p",{className:"text-sm text-text-muted",children:[l.matchCount," Spiele gespielt"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-text-primary",children:["⌀ ",K]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Tore/Spiel"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"AEK Athens"}),e.jsxs("span",{className:"text-sm text-blue-600",children:[M,"% Siege"]})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-medium",children:l.aekWins})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore:"}),e.jsx("span",{className:"font-medium",children:l.aekGoals})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"⌀ Tore/Spiel:"}),e.jsx("span",{className:"font-medium",children:l.matchCount>0?(l.aekGoals/l.matchCount).toFixed(1):"0.0"})]})]})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-red-700",children:"Real Madrid"}),e.jsxs("span",{className:"text-sm text-red-600",children:[F,"% Siege"]})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siege:"}),e.jsx("span",{className:"font-medium",children:l.realWins})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore:"}),e.jsx("span",{className:"font-medium",children:l.realGoals})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"⌀ Tore/Spiel:"}),e.jsx("span",{className:"font-medium",children:l.matchCount>0?(l.realGoals/l.matchCount).toFixed(1):"0.0"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-text-muted",children:[e.jsx("span",{children:"AEK Dominanz"}),e.jsx("span",{children:"Real Dominanz"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:e.jsxs("div",{className:"h-full flex",children:[e.jsx("div",{className:"bg-blue-500",style:{width:`${M}%`}}),e.jsx("div",{className:"bg-red-500",style:{width:`${F}%`}})]})})]}),l.matchCount>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-border-light",children:e.jsxs("div",{className:"flex items-center gap-4 text-xs text-text-muted",children:[e.jsxs("span",{children:["📊 ",N," Tore insgesamt"]}),e.jsxs("span",{children:["⚽ Bestes Team: ",l.aekWins>l.realWins?"AEK":l.realWins>l.aekWins?"Real":"Ausgeglichen"]}),e.jsxs("span",{children:["🔥 Intensität: ",K>=3?"Hoch":K>=2?"Mittel":"Niedrig"]})]})})]},l.key)})}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h4",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🎯"}),"Trend-Analyse"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-text-primary mb-3",children:"📈 Aufwärtstrends"}),e.jsx("div",{className:"space-y-2 text-sm",children:o.length>=2&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Letzter Monat AEK:"}),e.jsx("span",{className:`font-medium ${o[0].aekWins>=o[1].aekWins?"text-green-600":"text-red-600"}`,children:o[0].aekWins>=o[1].aekWins?"↗️ Besser":"↘️ Schlechter"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Letzter Monat Real:"}),e.jsx("span",{className:`font-medium ${o[0].realWins>=o[1].realWins?"text-green-600":"text-red-600"}`,children:o[0].realWins>=o[1].realWins?"↗️ Besser":"↘️ Schlechter"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-text-primary mb-3",children:"🏆 Beste Performance"}),e.jsx("div",{className:"space-y-2 text-sm",children:(()=>{const l=o.reduce((d,N)=>{const M=N.aekGoals+N.realGoals,F=d.aekGoals+d.realGoals;return M>F?N:d},o[0]);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Torreichster Monat:"}),e.jsx("span",{className:"font-medium text-green-600",children:l==null?void 0:l.month})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tore in diesem Monat:"}),e.jsx("span",{className:"font-medium",children:l?l.aekGoals+l.realGoals:0})]})]})})()})]})]})]})]})},ee=()=>{const o=(()=>{if(!m||m.length===0)return null;const l={firstHalfGoals:0,secondHalfGoals:0,overtimeGoals:0},d={oneGoal:0,twoGoals:0,threeOrMore:0,blowouts:0},N=b.slice(0,10).map(K=>({name:K.name,team:K.team,goals:K.goals||0,matches:K.matchesPlayed||0,efficiency:K.matchesPlayed>0?(K.goals/K.matchesPlayed*100).toFixed(1):0,value:K.value||0,valuePerGoal:K.goals>0?((K.value||0)/K.goals).toFixed(2):"N/A"})),M=m.slice(-10),F={aekWins:0,realWins:0,aekGoals:0,realGoals:0,totalMatches:M.length};return m.forEach(K=>{const P=K.goalsa||0,J=K.goalsb||0,V=Math.abs(P-J);V===1?d.oneGoal++:V===2?d.twoGoals++:V>=3&&V<5?d.threeOrMore++:V>=5&&d.blowouts++}),M.forEach(K=>{const P=K.goalsa||0,J=K.goalsb||0;F.aekGoals+=P,F.realGoals+=J,P>J?F.aekWins++:J>P&&F.realWins++}),{goalTimingAnalysis:l,scoreMargins:d,playerEfficiency:N,recentForm:F}})();return o?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🎯"}),"Spielintensität & Tordifferenzen"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-green-600",children:o.scoreMargins.oneGoal}),e.jsx("div",{className:"text-xs text-text-secondary",children:"1-Tor-Spiele"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Spannend"})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-blue-600",children:o.scoreMargins.twoGoals}),e.jsx("div",{className:"text-xs text-text-secondary",children:"2-Tor-Spiele"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Umkämpft"})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-orange-600",children:o.scoreMargins.threeOrMore}),e.jsx("div",{className:"text-xs text-text-secondary",children:"3-4 Tore Diff."}),e.jsx("div",{className:"text-xs text-text-muted",children:"Deutlich"})]}),e.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-red-600",children:o.scoreMargins.blowouts}),e.jsx("div",{className:"text-xs text-text-secondary",children:"5+ Tore Diff."}),e.jsx("div",{className:"text-xs text-text-muted",children:"Dominant"})]})]})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"⚡"}),"Spieler-Effizienz Rankings"]}),e.jsx("div",{className:"space-y-3",children:o.playerEfficiency.slice(0,8).map((l,d)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${d===0?"bg-yellow-400 text-white":d===1?"bg-gray-400 text-white":d===2?"bg-orange-400 text-white":"bg-bg-tertiary text-text-primary"}`,children:d+1}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:l.name}),e.jsx("div",{className:"text-xs text-text-muted",children:l.team})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-text-primary",children:[l.efficiency,"%"]}),e.jsxs("div",{className:"text-xs text-text-muted",children:[l.goals,"G / ",l.matches,"S"]})]})]},l.name))})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🔥"}),"Aktuelle Form (Letzte ",o.recentForm.totalMatches," Spiele)"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o.recentForm.aekWins}),e.jsx("div",{className:"text-sm text-text-secondary mb-2",children:"AEK Siege"}),e.jsxs("div",{className:"text-xs text-text-muted",children:[o.recentForm.aekGoals," Tore geschossen"]})]}),e.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:o.recentForm.realWins}),e.jsx("div",{className:"text-sm text-text-secondary mb-2",children:"Real Siege"}),e.jsxs("div",{className:"text-xs text-text-muted",children:[o.recentForm.realGoals," Tore geschossen"]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siegesquote AEK:"}),e.jsx("span",{className:"font-medium",children:o.recentForm.totalMatches>0?`${(o.recentForm.aekWins/o.recentForm.totalMatches*100).toFixed(0)}%`:"0%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Siegesquote Real:"}),e.jsx("span",{className:"font-medium",children:o.recentForm.totalMatches>0?`${(o.recentForm.realWins/o.recentForm.totalMatches*100).toFixed(0)}%`:"0%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Durchschnitt Tore/Spiel:"}),e.jsx("span",{className:"font-medium",children:o.recentForm.totalMatches>0?((o.recentForm.aekGoals+o.recentForm.realGoals)/o.recentForm.totalMatches).toFixed(1):"0.0"})]})]})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"💰"}),"Preis-Leistungs-Verhältnis"]}),e.jsx("div",{className:"space-y-3",children:o.playerEfficiency.filter(l=>l.value>0&&l.goals>0).sort((l,d)=>parseFloat(l.valuePerGoal)-parseFloat(d.valuePerGoal)).slice(0,5).map((l,d)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-green-600",children:d+1})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:l.name}),e.jsxs("div",{className:"text-xs text-text-muted",children:[l.team," • ",l.goals," Tore"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-green-600",children:[l.valuePerGoal,"M €"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"pro Tor"})]})]},l.name))})]})]}):e.jsxs("div",{className:"text-center py-8 text-text-muted",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📊"}),e.jsx("p",{children:"Keine Daten für den gewählten Zeitraum verfügbar"})]})},se=()=>{switch(n){case"dashboard":return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ne,{}),e.jsx(le,{onNavigate:S})]});case"advanced":return ee();case"matchdays":return e.jsx(ie,{matches:r});case"players":return I();case"teams":return Y();case"trends":return X();default:return _()}};return e.jsxs("div",{className:"p-4 pb-24 mobile-safe-bottom",children:[e.jsxs("div",{className:"mb-6 animate-mobile-slide-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-info rounded-ios-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl",children:"📊"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-title1 font-bold text-text-primary",children:"Statistiken"}),e.jsx("p",{className:"text-footnote text-text-secondary",children:"Umfassende Liga-Analyse"})]})]}),e.jsx("div",{className:"w-full h-1 bg-bg-tertiary rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-info w-3/4 rounded-full animate-pulse-gentle"})})]}),e.jsxs("div",{className:"mb-4 bg-bg-secondary rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-lg",children:"📅"}),e.jsx("h3",{className:"font-semibold text-text-primary",children:"Zeitraum"})]}),e.jsxs("select",{value:x,onChange:a=>h(a.target.value),className:"w-full px-3 py-2 bg-bg-primary border border-border-light rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors",children:[e.jsx("option",{value:"all",children:"Alle Spiele"}),e.jsx("option",{value:"1week",children:"Letzte Woche"}),e.jsx("option",{value:"1month",children:"Letzter Monat"}),e.jsx("option",{value:"3months",children:"Letzte 3 Monate"}),e.jsx("option",{value:"6months",children:"Letzte 6 Monate"})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Statistiken werden für den gewählten Zeitraum berechnet"})]}),e.jsx(te,{views:W,selectedView:n,onViewChange:c}),e.jsx("div",{className:"form-container animate-mobile-slide-in",children:se()})]})}export{oe as default};
