import{b as q,c as Ne,S as ie,s as z,u as _,r as S,j as e,z as M,t as O,a as de,L as we,d as De,e as Te,f as Fe,h as $e,i as Ie,k as X,l as oe,g as ue,m as Me,n as ze,o as Be,p as Ve}from"./main-KMfuTx-u.js";import{g as Le,r as Re,u as Ke,a as Ge,s as Oe,c as _e,b as Pe}from"./versionTeamManager-BhGDGBez.js";import{B as re}from"./banTypes-DuNOJEIt.js";import{d as Q}from"./dataManager-ClREz_GZ.js";const Ue="alcoholCalculatorValues",xe="2.0",ne=(r=null)=>{const s=r||q();return{aekPlayer:"",realPlayer:"",aekGoals:0,realGoals:0,mode:"manual",gameDay:new Date().toISOString().split("T")[0],beerCount:{aek:0,real:0},alexanderShots:{cl40:0,cl20:0},philipShots:{cl40:0,cl20:0},cumulativeShots:{aek:0,real:0,total:0,lastMatchId:null,lastUpdated:null},lastUpdated:new Date().toISOString(),drinkingStartTime:null,version:xe,season:s}},ge=(r=null)=>{try{const s=r||q(),a=Ne("alcoholCalculator",s);let t=localStorage.getItem(a);if(!t&&s===ie.LEGACY&&(t=localStorage.getItem(Ue),t&&(console.log("Migrating legacy alcohol calculator data to season-based storage"),localStorage.setItem(a,t))),!t)return ne(s);const l=JSON.parse(t);if(!l.version||l.version!==xe&&l.version!=="1.0")return console.log("Alcohol calculator: Version mismatch, using defaults"),ne(s);const c=ne(s);return{...c,...l,season:s,beerCount:{...c.beerCount,...l.beerCount||{}},alexanderShots:{...c.alexanderShots,...l.alexanderShots||{}},philipShots:{...c.philipShots,...l.philipShots||{}},cumulativeShots:{...c.cumulativeShots,...l.cumulativeShots||{}}}}catch(s){return console.error("Error loading alcohol calculator values:",s),ne(r)}},He=(r,s=null)=>{try{const a=s||q(),t={...r,lastUpdated:new Date().toISOString(),version:xe,season:a},l=Ne("alcoholCalculator",a);return localStorage.setItem(l,JSON.stringify(t)),typeof window<"u"&&window.dispatchEvent(new CustomEvent("alcoholCalculatorValuesChanged",{detail:{...t,season:a}})),!0}catch(a){return console.error("Error saving alcohol calculator values:",a),!1}},Ze=(r,s,a=null)=>{const t=a||q(),l={...s,...r,lastUpdated:new Date().toISOString(),season:t};return r.beerCount&&(l.beerCount={...s.beerCount,...r.beerCount}),r.cumulativeShots&&(l.cumulativeShots={...s.cumulativeShots,...r.cumulativeShots}),He(l,t),l},Se=(r,s=null,a=null)=>{try{const t=a||q(),l=s||ge(t);if(!r||typeof r!="object")return console.warn("Invalid match object provided to addShotsFromNewMatch"),l;const c=r.goalsa||0,b=r.goalsb||0,g=Math.floor(b/2)*2,o=Math.floor(c/2)*2;return Ze({cumulativeShots:{aek:l.cumulativeShots.aek+g,real:l.cumulativeShots.real+o,total:l.cumulativeShots.total+g+o,lastMatchId:r.id,lastUpdated:new Date().toISOString()}},l,t)}catch(t){return console.error("Error adding shots from new match:",t),s||ge(a)}};typeof window<"u"&&(window.updateAlcoholCalculatorFromMatch=r=>{try{Se(r)}catch(s){console.warn("Failed to update alcohol calculator from match:",s)}});async function me(r){var s,a;try{if(console.log(`Starting deletion of match ${r}`),r==null)throw new Error("No match ID provided for deletion");console.log(`Processing match ID for deletion: ${r} (type: ${typeof r})`);let t;if(typeof r=="string"){if(r.trim()==="")throw new Error("Empty string provided as match ID");if(t=parseInt(r,10),isNaN(t))throw new Error(`Invalid match ID string: "${r}" cannot be converted to number`)}else if(typeof r=="bigint"){const x=Number(r);BigInt(x)===r?t=x:t=r}else if(typeof r=="number")t=r;else throw new Error(`Unsupported match ID type: ${typeof r}. Expected string, number, or bigint.`);const l=typeof t=="number"&&Number.isInteger(t)&&t>0,c=typeof t=="bigint"&&t>0n;if(!l&&!c)throw new Error(`Invalid match ID after conversion: ${t} (type: ${typeof t}). Must be a positive integer.`);console.log(`Converted match ID: ${t} (type: ${typeof t})`);const{data:b,error:g}=await z.select("matches","date,prizeaek,prizereal,goalslista,goalslistb,manofthematch,yellowa,reda,yellowb,redb",{id:t});if(g)throw console.error("Error fetching match:",g),g;if(!b||b.length===0){const x=`Match with ID ${t} not found in database`;throw console.error(x),new Error(x)}const o=b[0];o.date||console.warn(`Match ${t} has no date - this may cause issues with transaction cleanup`),console.log("Deleting match data:",o),console.log(`Fetching transactions for match ${t} before deletion`);const{data:m,error:i}=await z.select("transactions","team,amount,type",{match_id:t});if(i)throw console.error("Error fetching transactions:",i),i;const u=m||[];if(console.log(`Found ${u.length} transactions to reverse:`,u.map(x=>`${x.type}: ${x.amount} (${x.team})`)),console.log(`Reversing financial changes for ${(u==null?void 0:u.length)||0} transactions`),u&&u.length>0)for(const x of u)if(x.type==="Echtgeld-Ausgleich"){const{data:w,error:n}=await z.select("finances","debt",{team:x.team});if(n){console.error(`Error fetching finances for team ${x.team}:`,n);continue}const d=w&&w.length>0?w[0]:null;let E=((d==null?void 0:d.debt)||0)-x.amount;E<0&&(E=0),await z.update("finances",{debt:E},{team:x.team})}else{const{data:w,error:n}=await z.select("finances","balance",{team:x.team});if(n){console.error(`Error fetching finances for team ${x.team}:`,n);continue}const d=w&&w.length>0?w[0]:null;let E=((d==null?void 0:d.balance)||0)-x.amount;E<0&&(E=0),await z.update("finances",{balance:E},{team:x.team})}if(typeof o.prizeaek=="number"&&o.prizeaek!==0){const{data:x,error:w}=await z.select("finances","balance",{team:"AEK"});if(w)console.error("Error fetching AEK finances:",w);else if(x&&x.length>0){const n=x[0];let d=((n==null?void 0:n.balance)||0)-o.prizeaek;d<0&&(d=0),await z.update("finances",{balance:d},{team:"AEK"})}}if(typeof o.prizereal=="number"&&o.prizereal!==0){const{data:x,error:w}=await z.select("finances","balance",{team:"Real"});if(w)console.error("Error fetching Real finances:",w);else if(x&&x.length>0){const n=x[0];let d=((n==null?void 0:n.balance)||0)-o.prizereal;d<0&&(d=0),await z.update("finances",{balance:d},{team:"Real"})}}console.log(`Deleting ${(u==null?void 0:u.length)||0} transactions for match ${t}`);const{error:N}=await z.delete("transactions",{match_id:t});if(N)throw console.error("Error deleting transactions:",N),N;const{data:p,error:h}=await z.select("transactions","id",{match_id:t});if(h)console.warn("Could not verify transaction deletion:",h);else{if(p&&p.length>0)throw console.error(`‚ùå Failed to delete ${p.length} transactions for match ${t}`),new Error(`Transaction deletion incomplete: ${p.length} transactions still exist`);console.log(`‚úÖ Successfully deleted all transactions for match ${t}`)}const D=async(x,w)=>{if(!x||!Array.isArray(x))return;const n={};if(x.length>0&&typeof x[0]=="object"&&x[0].player!==void 0)x.forEach(d=>{d.player&&(n[d.player]=(n[d.player]||0)+(d.count||1))});else for(const d of x)d&&(n[d]=(n[d]||0)+1);for(const[d,y]of Object.entries(n)){const{data:E,error:v}=await z.select("players","goals",{name:d,team:w});if(v){console.error(`Error fetching player ${d} for goal removal:`,v);continue}if(!E||E.length===0){console.warn(`Player ${d} not found in team ${w} for goal removal`);continue}const I=E[0];let R=((I==null?void 0:I.goals)||0)-y;R<0&&(R=0);const{error:A}=await z.update("players",{goals:R},{name:d,team:w});A?console.error(`Error updating goals for player ${d}:`,A):console.log(`‚úÖ Updated goals for ${d} (${w}): ${I.goals} ‚Üí ${R}`)}};if(await D(o.goalslista,"AEK"),await D(o.goalslistb,"Real"),o.manofthematch){let x=null;const w=(n,d)=>!n||!n.length?!1:typeof n[0]=="object"&&n[0].player!==void 0?n.some(y=>y.player===d):n.includes(d);if(w(o.goalslista,o.manofthematch))x="AEK";else if(w(o.goalslistb,o.manofthematch))x="Real";else{const{data:n,error:d}=await z.select("players","team",{name:o.manofthematch});d?console.error(`Error fetching player ${o.manofthematch} for team lookup:`,d):n&&n.length>0?x=n[0].team:console.warn(`Player ${o.manofthematch} not found for SdS team determination`)}if(x){const{data:n,error:d}=await z.select("spieler_des_spiels","count",{name:o.manofthematch,team:x});if(d)console.error(`Error fetching SdS entry for ${o.manofthematch}:`,d);else if(n&&n.length>0){const y=n[0],E=Math.max(0,y.count-1),{error:v}=await z.update("spieler_des_spiels",{count:E},{name:o.manofthematch,team:x});v?console.error(`Error updating SdS count for ${o.manofthematch}:`,v):console.log(`‚úÖ Updated SdS count for ${o.manofthematch} (${x}): ${y.count} ‚Üí ${E}`)}else console.warn(`SdS entry for ${o.manofthematch} in team ${x} not found`)}}(o.yellowa>0||o.reda>0||o.yellowb>0||o.redb>0)&&console.log(`Match had cards: AEK(${o.yellowa}Y,${o.reda}R) Real(${o.yellowb}Y,${o.redb}R)`),console.log(`Deleting match ${t} from matches table`);const{error:f}=await z.delete("matches",{id:t});if(f)throw console.error("Error deleting match:",f),f;const{data:$,error:k}=await z.select("matches","id",{id:t});if(k)console.warn("Could not verify match deletion:",k);else{if($&&$.length>0)throw console.error(`‚ùå Failed to delete match ${t}`),new Error(`Match deletion failed: match ${t} still exists`);console.log(`‚úÖ Successfully deleted match ${t}`)}console.log(`‚úÖ Successfully deleted match ${t} and all related data`),console.log(`üìã Deletion Summary for Match ${t}:`),console.log("   - Match record: deleted"),console.log(`   - Transactions: ${u.length} deleted`),console.log(`   - Player goals: updated for ${((s=o.goalslista)==null?void 0:s.length)||0} AEK + ${((a=o.goalslistb)==null?void 0:a.length)||0} Real goals`),console.log(`   - Player of the match: ${o.manofthematch?"updated":"none"}`),console.log(`   - Prize money: AEK ${o.prizeaek||0}, Real ${o.prizereal||0} (reversed)`),console.log(`   - Match date: ${o.date}`)}catch(t){throw console.error(`Failed to delete match ${typeof matchId<"u"?matchId:r||"unknown"}:`,t),console.error("Error details:",{matchId:typeof matchId<"u"?matchId:"undefined",matchIdType:typeof matchId,originalId:r,originalIdType:typeof r,errorMessage:t.message,errorStack:t.stack}),t}}class be{static async submitMatch(s){var $;const{date:a,teama:t="AEK",teamb:l="Real",goalsa:c,goalsb:b,goalslista:g=[],goalslistb:o=[],ownGoalsA:m=0,ownGoalsB:i=0,yellowa:u=0,reda:N=0,yellowb:p=0,redb:h=0,manofthematch:D,editId:f=null}=s;try{const{prizeaek:k,prizereal:x,winner:w,loser:n}=this.calculatePrizeMoney(c,b,u,N,p,h);f&&await this.deleteMatchTransactions(f);const d=[...g],y=[...o];m>0&&y.push({count:m,player:"Eigentore_AEK"}),i>0&&d.push({count:i,player:"Eigentore_Real"});const E={date:a,teama:t,teamb:l,goalsa:parseInt(c)||0,goalsb:parseInt(b)||0,goalslista:g,goalslistb:o,yellowa:parseInt(u)||0,reda:parseInt(N)||0,yellowb:parseInt(p)||0,redb:parseInt(h)||0,manofthematch:D||null,prizeaek:k,prizereal:x},v=await z.insert("matches",E);if(v.error)throw new Error(`Match insert failed: ${v.error.message}`);const I=($=v.data)==null?void 0:$.id,R=new Date().toISOString().slice(0,10);if(d.length>0){const A=d.filter(V=>typeof V=="object"&&V.player?!V.player.startsWith("Eigentore_"):!V.startsWith("Eigentore_"));await this.updatePlayersGoals(A,"AEK")}if(y.length>0){const A=y.filter(V=>typeof V=="object"&&V.player?!V.player.startsWith("Eigentore_"):!V.startsWith("Eigentore_"));await this.updatePlayersGoals(A,"Real")}D&&await this.updatePlayerOfTheMatchStats(D),await this.processFinancialTransactions({matchId:I,date:R,prizeaek:k,prizereal:x,manofthematch:D,winner:w,loser:n}),await this.decrementBansAfterMatch();try{Se({id:I,goalsa:parseInt(c)||0,goalsb:parseInt(b)||0,date:a})}catch(A){console.warn("Failed to update alcohol calculator:",A)}return{success:!0,matchId:I,message:`Match ${t} vs ${l} (${c}:${b}) erfolgreich hinzugef√ºgt`}}catch(k){throw console.error("Error in submitMatch:",k),new Error(`Fehler beim Speichern des Matches: ${k.message}`)}}static calculatePrizeMoney(s,a,t,l,c,b){let g=0,o=0,m=null,i=null;return s>a?(m="AEK",i="Real"):s<a&&(m="Real",i="AEK"),m&&i&&(m==="AEK"?(g=1e6-a*5e4-t*2e4-l*5e4,o=-(5e5+s*5e4+c*2e4+b*5e4)):(o=1e6-s*5e4-c*2e4-b*5e4,g=-(5e5+a*5e4+t*2e4+l*5e4))),{prizeaek:g,prizereal:o,winner:m,loser:i}}static async updatePlayersGoals(s,a){const t={};if(s.length>0&&typeof s[0]=="object"&&s[0].player!==void 0)s.forEach(l=>{l.player&&!l.player.startsWith("Eigentore_")&&(t[l.player]=(t[l.player]||0)+(l.count||1))});else for(const l of s)!l||!l.trim()||l.startsWith("Eigentore_")||(t[l]=(t[l]||0)+1);for(const[l,c]of Object.entries(t))try{const b=await z.select("players","id, goals",{eq:{name:l,team:a}});if(b.data&&b.data.length>0){const g=b.data[0],o=(g.goals||0)+c;await z.update("players",{goals:o},g.id)}}catch(b){console.warn(`Failed to update goals for player ${l}:`,b)}}static async updatePlayerOfTheMatchStats(s){try{const a=await z.select("players","team",{eq:{name:s}});if(!a.data||a.data.length===0){console.warn(`Player ${s} not found for SdS stats`);return}const t=a.data[0].team,l=await z.select("spieler_des_spiels","*",{eq:{name:s,team:t}});if(l.data&&l.data.length>0){const c=l.data[0];await z.update("spieler_des_spiels",{count:c.count+1},c.id)}else await z.insert("spieler_des_spiels",{name:s,team:t,count:1})}catch(a){console.warn(`Failed to update SdS stats for ${s}:`,a)}}static async processFinancialTransactions({matchId:s,date:a,prizeaek:t,prizereal:l,manofthematch:c,winner:b,loser:g}){const o=await this.getTeamFinance("AEK"),m=await this.getTeamFinance("Real");let i=o.balance||0,u=m.balance||0;const N=c?await this.getSdSBonus(c,"AEK"):0,p=c?await this.getSdSBonus(c,"Real"):0;N>0&&(i+=N,await this.insertTransaction({date:a,type:"SdS Bonus",team:"AEK",amount:N,match_id:s,info:"SdS Bonus"}),await this.updateTeamBalance("AEK",i)),p>0&&(u+=p,await this.insertTransaction({date:a,type:"SdS Bonus",team:"Real",amount:p,match_id:s,info:"SdS Bonus"}),await this.updateTeamBalance("Real",u)),t!==0&&(i+=t,i<0&&(i=0),await this.insertTransaction({date:a,type:"Preisgeld",team:"AEK",amount:t,match_id:s,info:"Preisgeld"}),await this.updateTeamBalance("AEK",i)),l!==0&&(u+=l,u<0&&(u=0),await this.insertTransaction({date:a,type:"Preisgeld",team:"Real",amount:l,match_id:s,info:"Preisgeld"}),await this.updateTeamBalance("Real",u)),b&&g&&await this.processEchtgeldAusgleich({date:a,matchId:s,winner:b,loser:g,aekBalance:i,realBalance:u,prizeaek:t,prizereal:l,sdsBonusAek:N>0?1:0,sdsBonusReal:p>0?1:0,manofthematch:c})}static async getTeamFinance(s){const a=await z.select("finances","*",{eq:{team:s}});return a.data&&a.data.length>0?a.data[0]:{balance:0,debt:0}}static async getSdSBonus(s,a){const t=await z.select("players","team",{eq:{name:s}});return t.data&&t.data.length>0&&t.data[0].team===a?1e5:0}static async insertTransaction(s){return await z.insert("transactions",s)}static async updateTeamBalance(s,a){const t=await z.select("finances","id",{eq:{team:s}});return t.data&&t.data.length>0?await z.update("finances",{balance:a},t.data[0].id):await z.insert("finances",{team:s,balance:a,debt:0})}static async processEchtgeldAusgleich({date:s,matchId:a,winner:t,loser:l,aekBalance:c,realBalance:b,prizeaek:g,prizereal:o,sdsBonusAek:m,sdsBonusReal:i,manofthematch:u}){const N=await this.getTeamFinance("AEK"),p=await this.getTeamFinance("Real"),h={AEK:N.debt||0,Real:p.debt||0},D=(I,R,A)=>{let V=I;A&&(V+=1e5);let G=(Math.abs(R)-V)/1e5;return G<0&&(G=0),5+Math.round(G)},f=D(c,g,m),$=D(b,o,i),k=l==="AEK"?f:$,x=h[t],w=h[l],n=Math.min(x,k*1),d=Math.max(0,x-n),y=k*1-n,E=w+Math.max(0,y),v=await z.select("finances","id",{eq:{team:t}});if(v.data&&v.data.length>0&&await z.update("finances",{debt:d},v.data[0].id),y>0){await this.insertTransaction({date:s,type:"Echtgeld-Ausgleich",team:l,amount:Math.max(0,y),match_id:a,info:"Echtgeld-Ausgleich"});const I=await z.select("finances","id",{eq:{team:l}});I.data&&I.data.length>0&&await z.update("finances",{debt:E},I.data[0].id)}n>0&&await this.insertTransaction({date:s,type:"Echtgeld-Ausgleich (getilgt)",team:t,amount:-n,match_id:a,info:"Echtgeld-Ausgleich (getilgt)"})}static async deleteMatchTransactions(s){try{await me(s)}catch(a){throw console.error(`Failed to delete match ${s} comprehensively:`,a),a}}static async decrementBansAfterMatch(){try{const s=await z.select("bans","*");if(!s.data)return;for(const a of s.data)if(a.matchesserved<a.totalgames){const t=a.matchesserved+1;await z.update("bans",{matchesserved:t},a.id)}}catch(s){console.warn("Failed to decrement bans:",s)}}}function qe(){const{data:r}=_("players","*"),[s,a]=S.useState(!1),[t,l]=S.useState({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),[c,b]=S.useState(!1),g=(n,d,y)=>n.reduce((v,I)=>v+I.count,0)+y,o=n=>{l(d=>{const y={...d,...n};y.goalsa=g(y.goalslista,y.ownGoalsA,y.ownGoalsB),y.goalsb=g(y.goalslistb,y.ownGoalsB,y.ownGoalsA);const{prizeaek:E,prizereal:v}=be.calculatePrizeMoney(y.goalsa,y.goalsb,y.yellowa,y.reda,y.yellowb,y.redb);return y.prizeaek=E,y.prizereal=v,y})},m=(n,d)=>{o({[n]:d})},i=async n=>{n.preventDefault(),b(!0);try{const d=await be.submitMatch({date:t.date,teama:t.teama.trim(),teamb:t.teamb.trim(),goalsa:t.goalsa,goalsb:t.goalsb,goalslista:t.goalslista,goalslistb:t.goalslistb,ownGoalsA:t.ownGoalsA,ownGoalsB:t.ownGoalsB,yellowa:parseInt(t.yellowa)||0,reda:parseInt(t.reda)||0,yellowb:parseInt(t.yellowb)||0,redb:parseInt(t.redb)||0,manofthematch:t.manofthematch||null});l({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),a(!1),M.success(d.message),O("match-created",{matchId:d.matchId||"latest",date:t.date,teama:t.teama,teamb:t.teamb,goalsa:t.goalsa,goalsb:t.goalsb,manofthematch:t.manofthematch})}catch(d){console.error("Match submission error:",d),M.error(d.message||"Fehler beim Hinzuf√ºgen des Spiels")}finally{b(!1)}},u=()=>{if(!t.date||t.goalsa===t.goalsb||t.goalsa===0&&t.goalsb===0||!t.manofthematch||t.manofthematch.trim()==="")return!1;if(t.goalsa>0){const n=t.goalslista.reduce((y,E)=>y+E.count,0),d=t.ownGoalsB||0;if(n+d<t.goalsa)return!1}if(t.goalsb>0){const n=t.goalslistb.reduce((y,E)=>y+E.count,0),d=t.ownGoalsA||0;if(n+d<t.goalsb)return!1}return!0},N=()=>{const n=[];if(t.date||n.push("Datum fehlt"),t.goalsa===0&&t.goalsb===0&&n.push("Mindestens ein Tor erforderlich"),t.goalsa===t.goalsb&&(t.goalsa>0||t.goalsb>0)&&n.push("Unentschieden nicht erlaubt"),(!t.manofthematch||t.manofthematch.trim()==="")&&n.push("Spieler des Spiels fehlt"),t.goalsa>0){const d=t.goalslista.reduce((E,v)=>E+v.count,0),y=t.ownGoalsB||0;d+y<t.goalsa&&n.push(`AEK Torsch√ºtzen fehlen (${d+y}/${t.goalsa})`)}if(t.goalsb>0){const d=t.goalslistb.reduce((E,v)=>E+v.count,0),y=t.ownGoalsA||0;d+y<t.goalsb&&n.push(`Real Torsch√ºtzen fehlen (${d+y}/${t.goalsb})`)}return{isValid:n.length===0,issues:n}},p=(n,d)=>{const y=Math.max(0,(t[n]||0)+d);o({[n]:y})},h=n=>r?r.filter(d=>d.team===n):[],D=()=>r?t.motmTeamFilter==="all"?r:r.filter(n=>n.team===t.motmTeamFilter):[],f=(n,d)=>{const y=n==="AEK"?"goalslista":"goalslistb";o({[y]:t[y].map(E=>E.player===d?{...E,count:E.count+1}:E).concat(t[y].find(E=>E.player===d)?[]:[{player:d,count:1}])})},$=(n,d)=>{const y=n==="AEK"?"goalslista":"goalslistb";o({[y]:t[y].map(E=>E.player===d?{...E,count:Math.max(0,E.count-1)}:E).filter(E=>E.count>0)})},k=(n,d)=>{const y=n==="AEK"?"ownGoalsA":"ownGoalsB",E=Math.max(0,t[y]+d);o({[y]:E})},x=(n,d)=>{if(!d)return;const y=n==="AEK"?"goalslista":"goalslistb",E=t[y].find(v=>v.player===d);o(E?{[y]:t[y].map(v=>v.player===d?{...v,count:v.count+1}:v)}:{[y]:[...t[y],{player:d,count:1}]})},w=(n,d)=>{const y=n==="AEK"?"goalslista":"goalslistb";o({[y]:t[y].filter(E=>E.player!==d)})};return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neues Spiel hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"F√ºgen Sie ein neues Spiel zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"‚öΩ"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Spiel hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um ein neues Spiel zu erfassen."}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary inline-flex items-center px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neues Spiel erfassen"]})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center z-[60] p-2 sm:p-4 overflow-y-auto",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg w-full max-w-lg modal-content match-modal-content modal-mobile-safe my-4 sm:my-8",style:{maxHeight:"calc(100vh - 2rem)"},children:e.jsxs("div",{className:"p-4 sm:p-6 overflow-y-auto mobile-safe-bottom",style:{maxHeight:"calc(100vh - 4rem)"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-bg-secondary z-10 pb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neues Spiel"}),e.jsx("button",{onClick:()=>a(!1),className:"text-text-secondary hover:text-text-primary text-2xl font-bold bg-bg-tertiary hover:bg-bg-hover rounded-full w-8 h-8 flex items-center justify-center transition-colors",disabled:c,children:"√ó"})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"‚öΩ Spielpaarung"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-medium",children:"AEK Athen"}),e.jsx("div",{className:"text-gray-500 font-bold text-xl",children:"vs"}),e.jsx("div",{className:"bg-red-100 text-red-800 px-4 py-2 rounded-lg font-medium",children:"Real Madrid"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:t.date,onChange:n=>m("date",n.target.value),className:"form-input",required:!0,disabled:c})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"‚öΩ Live Torwertung"}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-red-50 rounded-xl p-6 mb-4 text-center border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"text-4xl font-bold text-gray-800 mb-2",children:[e.jsx("span",{className:"text-blue-600",children:t.goalsa}),e.jsx("span",{className:"mx-4 text-gray-400",children:":"}),e.jsx("span",{className:"text-red-600",children:t.goalsb})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"AEK Athen"}),e.jsx("span",{className:"mx-2",children:"vs"}),e.jsx("span",{className:"font-medium text-red-700",children:"Real Madrid"})]}),(t.goalsa>0||t.goalsb>0)&&e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:t.goalsa>t.goalsb?"üèÜ AEK f√ºhrt":t.goalsb>t.goalsa?"üèÜ Real f√ºhrt":"‚öñÔ∏è Unentschieden"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-blue-600 mb-3",children:"‚öΩ AEK Athen Torsch√ºtzen"})}),e.jsx("div",{className:"space-y-2",children:t.goalslista.map((n,d)=>e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:n.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[n.count," Tor",n.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>$("AEK",n.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c,children:"‚àí"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:n.count}),e.jsx("button",{type:"button",onClick:()=>f("AEK",n.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c,children:"+"}),e.jsx("button",{type:"button",onClick:()=>w("AEK",n.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:c,title:"Torsch√ºtze entfernen",children:"‚úï"})]})]},`aek-${n.player}-${d}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:n=>{n.target.value&&(x("AEK",n.target.value),n.target.value="")},className:"w-full form-input bg-blue-100 border-blue-300 text-blue-800",disabled:c,children:[e.jsx("option",{value:"",children:"+ Torsch√ºtze hinzuf√ºgen"}),h("AEK").map(n=>e.jsxs("option",{value:n.name,children:[n.name," (",n.position,")"]},n.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Z√§hlen f√ºr Real Madrid"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>k("AEK",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c||t.ownGoalsA===0,children:"‚àí"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:t.ownGoalsA}),e.jsx("button",{type:"button",onClick:()=>k("AEK",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c,children:"+"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-red-600 mb-3",children:"‚öΩ Real Madrid Torsch√ºtzen"})}),e.jsx("div",{className:"space-y-2",children:t.goalslistb.map((n,d)=>e.jsxs("div",{className:"flex items-center justify-between bg-red-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:n.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[n.count," Tor",n.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>$("Real",n.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c,children:"‚àí"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:n.count}),e.jsx("button",{type:"button",onClick:()=>f("Real",n.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c,children:"+"}),e.jsx("button",{type:"button",onClick:()=>w("Real",n.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:c,title:"Torsch√ºtze entfernen",children:"‚úï"})]})]},`real-${n.player}-${d}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:n=>{n.target.value&&(x("Real",n.target.value),n.target.value="")},className:"w-full form-input bg-red-100 border-red-300 text-red-800",disabled:c,children:[e.jsx("option",{value:"",children:"+ Torsch√ºtze hinzuf√ºgen"}),h("Real").map(n=>e.jsxs("option",{value:n.name,children:[n.name," (",n.position,")"]},n.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Z√§hlen f√ºr AEK Athen"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>k("Real",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c||t.ownGoalsB===0,children:"‚àí"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:t.ownGoalsB}),e.jsx("button",{type:"button",onClick:()=>k("Real",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c,children:"+"})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"üü®üü• Karten"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"AEK Athen"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"üü® Gelbe Karten"}),e.jsxs("div",{className:"flex items-center justify-center bg-yellow-50 border border-yellow-300 rounded-lg p-2",children:[e.jsx("button",{type:"button",onClick:()=>p("yellowa",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c||t.yellowa<=0,children:"‚àí"}),e.jsx("span",{className:"mx-3 text-lg font-bold text-gray-700 min-w-[2rem] text-center",children:t.yellowa}),e.jsx("button",{type:"button",onClick:()=>p("yellowa",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c,children:"+"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"üü• Rote Karten"}),e.jsxs("div",{className:"flex items-center justify-center bg-red-50 border border-red-300 rounded-lg p-2",children:[e.jsx("button",{type:"button",onClick:()=>p("reda",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c||t.reda<=0,children:"‚àí"}),e.jsx("span",{className:"mx-3 text-lg font-bold text-gray-700 min-w-[2rem] text-center",children:t.reda}),e.jsx("button",{type:"button",onClick:()=>p("reda",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c,children:"+"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Real Madrid"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"üü® Gelbe Karten"}),e.jsxs("div",{className:"flex items-center justify-center bg-yellow-50 border border-yellow-300 rounded-lg p-2",children:[e.jsx("button",{type:"button",onClick:()=>p("yellowb",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c||t.yellowb<=0,children:"‚àí"}),e.jsx("span",{className:"mx-3 text-lg font-bold text-gray-700 min-w-[2rem] text-center",children:t.yellowb}),e.jsx("button",{type:"button",onClick:()=>p("yellowb",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c,children:"+"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"üü• Rote Karten"}),e.jsxs("div",{className:"flex items-center justify-center bg-red-50 border border-red-300 rounded-lg p-2",children:[e.jsx("button",{type:"button",onClick:()=>p("redb",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c||t.redb<=0,children:"‚àí"}),e.jsx("span",{className:"mx-3 text-lg font-bold text-gray-700 min-w-[2rem] text-center",children:t.redb}),e.jsx("button",{type:"button",onClick:()=>p("redb",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:c,children:"+"})]})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"‚≠ê Spieler des Spiels"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-text-muted mb-2",children:"Team Filter:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>m("motmTeamFilter","all"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="all"?"bg-gray-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:c,children:"Alle"}),e.jsx("button",{type:"button",onClick:()=>m("motmTeamFilter","AEK"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="AEK"?"bg-blue-600 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,disabled:c,children:"AEK"}),e.jsx("button",{type:"button",onClick:()=>m("motmTeamFilter","Real"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="Real"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,disabled:c,children:"Real"})]})]}),e.jsxs("select",{value:t.manofthematch,onChange:n=>m("manofthematch",n.target.value),className:"form-input",disabled:c,children:[e.jsx("option",{value:"",children:"Keinen Spieler ausw√§hlen"}),D().map(n=>e.jsxs("option",{value:n.name,children:[n.name," (",n.team," - ",n.position,")"]},n.id))]}),!r||r.length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler verf√ºgbar. Bitte f√ºgen Sie erst Spieler hinzu."})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"üí∞ Preisgelder (automatisch berechnet)"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld AEK (‚Ç¨)"}),e.jsx("input",{type:"number",value:t.prizeaek,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld Real (‚Ç¨)"}),e.jsx("input",{type:"number",value:t.prizereal,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Basierend auf Ergebnis und Karten: Gewinner 1M‚Ç¨ - (Verlierer-Tore √ó 50k‚Ç¨) - (Karten √ó 20k‚Ç¨/50k‚Ç¨)"})]}),t.goalsa===t.goalsb&&(t.goalsa>0||t.goalsb>0)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-600 mr-2",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-red-800",children:"Unentschieden nicht erlaubt"}),e.jsx("p",{className:"text-sm text-red-700",children:"Ein Team muss gewinnen. Unentschieden sind in dieser App nicht m√∂glich."})]})]})}),!t.manofthematch&&(t.goalsa>0||t.goalsb>0)&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-yellow-600 mr-2",children:"‚≠ê"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-yellow-800",children:"Spieler des Spiels erforderlich"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Bitte w√§hlen Sie einen Spieler des Spiels aus, bevor Sie das Match speichern."})]})]})}),u()&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("h5",{className:"font-medium text-green-800 mb-3 flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle mr-2"}),"Spiel-Zusammenfassung"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Datum:"}),e.jsx("span",{className:"font-medium text-green-800",children:new Date(t.date).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Ergebnis:"}),e.jsxs("span",{className:"font-medium text-green-800",children:["AEK ",t.goalsa," : ",t.goalsb," Real"]})]}),t.manofthematch&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Spieler des Spiels:"}),e.jsx("span",{className:"font-medium text-green-800",children:t.manofthematch})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Preisgelder:"}),e.jsxs("span",{className:"font-medium text-green-800",children:["AEK ",t.prizeaek.toLocaleString(),"‚Ç¨, Real ",t.prizereal.toLocaleString(),"‚Ç¨"]})]})]})]}),!u()&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-red-600 mr-2 mt-1",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-red-800 mb-1",children:"Formular unvollst√§ndig"}),e.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:N().issues.map((n,d)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"‚Ä¢"}),e.jsx("span",{children:n})]},d))})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4 pb-20 sm:pb-4",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:c,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:c||!u(),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors ${u()?"bg-green-600 hover:bg-green-700 text-white":"bg-red-500 text-white cursor-not-allowed opacity-75"} ${c?"opacity-50 cursor-not-allowed":""}`,children:c?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):u()?"‚úÖ Spiel speichern":`‚ùå ${N().issues[0]||"Eingaben unvollst√§ndig"}`})]})]})]})})})]})}const P=[{value:"AEK",label:"AEK Athen",color:"blue",icon:"aek"},{value:"Real",label:"Real Madrid",color:"red",icon:"real"},{value:"Ehemalige",label:"Ehemalige",color:"gray",icon:"‚ö´"}],ee=(r,s=null)=>{try{return Le(r,s).label}catch(a){console.error("Error getting team display:",a);const t=P.find(l=>l.value===r);return t?t.label:r}};function We(){const{data:r}=_("players","*"),[s,a]=S.useState(!1),[t,l]=S.useState(""),[c,b]=S.useState({player_id:"",type:"",reason:"",customDuration:1}),[g,o]=S.useState(!1),m=(h,D)=>{b(f=>({...f,[h]:D})),h==="team"&&b(f=>({...f,player_id:""}))},i=()=>!r||!t?[]:r.filter(h=>h.team===t),u=async h=>{var D;h.preventDefault(),o(!0);try{const f=r==null?void 0:r.find(d=>d.id===parseInt(c.player_id)),$=re.find(d=>d.value===c.type);if(!f)throw new Error("Spieler nicht gefunden");if(!$)throw new Error("Sperrart nicht gefunden");const x=(D=(await z.select("bans","*",{eq:{player_id:f.id}})).data)==null?void 0:D.find(d=>(d.matchesserved||0)<(d.totalgames||0));if(x)throw new Error(`Spieler "${f.name}" ist bereits gesperrt (${x.totalgames-x.matchesserved} Spiele verbleibend)`);const w=$.fixedDuration?$.duration:c.customDuration,n=await z.insert("bans",{player_id:f.id,team:f.team,type:$.value,totalgames:w,matchesserved:0,reason:c.reason||$.value});if(n.error)throw new Error(`Ban insert failed: ${n.error.message}`);b({player_id:"",type:"",reason:"",customDuration:1}),l(""),a(!1),M.success(`Sperre f√ºr "${f.name}" erfolgreich hinzugef√ºgt!`)}catch(f){console.error("Ban submission error:",f),M.error(f.message||"Fehler beim Hinzuf√ºgen der Sperre")}finally{o(!1)}},N=t&&c.player_id&&c.type,p=re.find(h=>h.value===c.type);return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Sperre hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erstellen Sie eine neue Spielersperre in der Datenbank."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üö´"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Sperre hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Spielersperre zu erfassen."}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Sperre erfassen"]})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content modal-mobile-safe",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Sperre"}),e.jsx("button",{onClick:()=>a(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:g,children:"√ó"})]}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:t,onChange:h=>{l(h.target.value),b(D=>({...D,player_id:""}))},className:"form-input",required:!0,disabled:g,children:[e.jsx("option",{value:"",children:"Team w√§hlen"}),P.filter(h=>h.value!=="Ehemalige").map(h=>e.jsx("option",{value:h.value,children:ee(h.value)},h.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spieler *"}),e.jsxs("select",{value:c.player_id,onChange:h=>m("player_id",h.target.value),className:"form-input",required:!0,disabled:g||!t,children:[e.jsx("option",{value:"",children:t?"Spieler w√§hlen":"Bitte zuerst Team w√§hlen"}),i().map(h=>e.jsxs("option",{value:h.id,children:[h.name," (",h.position,")"]},h.id))]}),t&&i().length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler im gew√§hlten Team verf√ºgbar."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Sperrart *"}),e.jsxs("select",{value:c.type,onChange:h=>m("type",h.target.value),className:"form-input",required:!0,disabled:g,children:[e.jsx("option",{value:"",children:"Sperrart w√§hlen"}),re.map(h=>e.jsxs("option",{value:h.value,children:[h.icon," ",h.label,h.fixedDuration?` (${h.duration} Spiel${h.duration!==1?"e":""})`:` (1-${h.maxDuration} Spiele)`]},h.value))]})]}),p&&!p.fixedDuration&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Spiele *"}),e.jsx("select",{value:c.customDuration,onChange:h=>m("customDuration",parseInt(h.target.value)),className:"form-input",required:!0,disabled:g,children:Array.from({length:p.maxDuration},(h,D)=>D+1).map(h=>e.jsxs("option",{value:h,children:[h," Spiel",h!==1?"e":""]},h))}),e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["W√§hlen Sie zwischen ",p.minDuration," und ",p.maxDuration," Spielen"]})]}),p&&p.fixedDuration&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"Gelb-Rote Karten haben immer eine feste Sperre von 1 Spiel."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Zus√§tzlicher Grund (optional)"}),e.jsx("input",{type:"text",value:c.reason,onChange:h=>m("reason",h.target.value),className:"form-input",placeholder:"Weitere Details zur Sperre...",disabled:g})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:g,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!N||g||!r||r.length===0,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verf√ºgbare Sperrarten"}),e.jsx("div",{className:"space-y-2",children:re.map(h=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:h.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:h.label})]}),e.jsx("span",{className:"text-sm text-text-muted",children:h.fixedDuration?`${h.duration} Spiel${h.duration!==1?"e":""} (fest)`:`1-${h.maxDuration} Spiele (variabel)`})]},h.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-yellow-50 border-yellow-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-yellow-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Nach dem Hinzuf√ºgen k√∂nnen Sie die Sperre in der Sperren-√úbersicht einsehen und verwalten."})]})]})})]})}const pe=[{value:"TH",label:"Torwart (TH)"},{value:"IV",label:"Innenverteidiger (IV)"},{value:"AV",label:"Au√üenverteidiger (AV)"},{value:"ZM",label:"Zentrales Mittelfeld (ZM)"},{value:"OM",label:"Offensives Mittelfeld (OM)"},{value:"ST",label:"St√ºrmer (ST)"}];function Je(){const[r,s]=S.useState(!1),[a,t]=S.useState({name:"",team:"",position:"",goals:0,value:0}),[l,c]=S.useState(!1),b=(m,i)=>{t(u=>({...u,[m]:i}))},g=async m=>{m.preventDefault(),c(!0);try{const i=await z.select("players","*",{eq:{name:a.name.trim(),team:a.team.trim()}});if(i.data&&i.data.length>0)throw new Error(`Spieler "${a.name}" existiert bereits im Team "${a.team}"`);const u=await z.insert("players",{name:a.name.trim(),team:a.team.trim(),position:a.position.trim().toUpperCase(),goals:parseInt(a.goals)||0,value:parseFloat(a.value)||0});if(u.error)throw new Error(`Player insert failed: ${u.error.message}`);t({name:"",team:"",position:"",goals:0,value:0}),s(!1),M.success(`Spieler "${a.name}" erfolgreich hinzugef√ºgt!`)}catch(i){console.error("Player submission error:",i),M.error(i.message||"Fehler beim Hinzuf√ºgen des Spielers")}finally{c(!1)}},o=a.name&&a.team&&a.position&&a.value!=="";return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neuen Spieler hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"F√ºgen Sie einen neuen Spieler zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üë§"}),e.jsxs("h4",{className:"text-lg font-medium text-text-primary mb-2",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"}),"Spieler hinzuf√ºgen"]}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um einen neuen Spieler zu erfassen."}),e.jsxs("button",{onClick:()=>s(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neuen Spieler erfassen"]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content modal-mobile-safe",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neuer Spieler"}),e.jsx("button",{onClick:()=>s(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:l,children:"√ó"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spielername *"}),e.jsx("input",{type:"text",value:a.name,onChange:m=>b("name",m.target.value),className:"form-input",placeholder:"z.B. Max Mustermann",required:!0,disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:a.team,onChange:m=>b("team",m.target.value),className:"form-input",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Team w√§hlen"}),P.map(m=>e.jsx("option",{value:m.value,children:ee(m.value)},m.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Position *"}),e.jsxs("select",{value:a.position,onChange:m=>b("position",m.target.value),className:"form-input",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Position w√§hlen"}),pe.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Marktwert (Millionen ‚Ç¨) *"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:a.value,onChange:m=>b("value",m.target.value),onFocus:m=>m.target.select(),className:"form-input",placeholder:"0.0",disabled:l}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Marktwert in Millionen Euro (z.B. 1.5 f√ºr 1.5M ‚Ç¨)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Tore"}),e.jsx("input",{type:"number",min:"0",value:a.goals,onChange:m=>b("goals",m.target.value),onFocus:m=>m.target.select(),className:"form-input",placeholder:"0",disabled:l})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>s(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:l,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!o||l,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verf√ºgbare Teams"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:P.map(m=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("span",{className:`font-medium ${m.color==="blue"?"text-blue-600":m.color==="red"?"text-red-600":"text-gray-600"}`,children:ee(m.value)}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",m.value,")"]})]},m.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verf√ºgbare Positionen"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:pe.map(m=>e.jsx("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:e.jsx("span",{className:"font-medium text-text-primary text-sm",children:m.label})},m.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-green-50 border-green-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-green-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-green-700 text-sm",children:"Nach dem Hinzuf√ºgen k√∂nnen Sie den Spieler in der Kader-√úbersicht einsehen und verwalten."})]})]})})]})}const fe=[{value:"Preisgeld",label:"Preisgeld",icon:"üèÜ"},{value:"Strafe",label:"Strafe",icon:"üìâ"},{value:"Spielerkauf",label:"Spielerkauf",icon:"üë§"},{value:"Spielerverkauf",label:"Spielerverkauf",icon:"üí∞"},{value:"Echtgeld-Ausgleich",label:"Echtgeld-Ausgleich",icon:"üí≥"},{value:"SdS Bonus",label:"Spieler des Spiels Bonus",icon:"‚≠ê"},{value:"Sonstiges",label:"Sonstiges",icon:"üìà"}];function Ye(){const[r,s]=S.useState(!1),[a,t]=S.useState({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),[l,c]=S.useState(!1),b=(i,u)=>{t(N=>({...N,[i]:u}))},g=async i=>{i.preventDefault(),c(!0);try{const u=parseFloat(a.amount),N=await z.insert("transactions",{date:a.date,type:a.type.trim(),team:a.team.trim(),amount:u,info:a.info.trim(),match_id:null});if(N.error)throw new Error(`Transaction insert failed: ${N.error.message}`);await o(a.team.trim(),a.type.trim(),u),t({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),s(!1),M.success("Transaktion erfolgreich hinzugef√ºgt!")}catch(u){console.error("Transaction submission error:",u),M.error(u.message||"Fehler beim Hinzuf√ºgen der Transaktion")}finally{c(!1)}},o=async(i,u,N)=>{try{const p=await z.select("finances","*",{eq:{team:i}});let h=p.data&&p.data.length>0?p.data[0]:{team:i,balance:0,debt:0},D={};if(u==="Echtgeld-Ausgleich")D.debt=(h.debt||0)+N;else{let f=(h.balance||0)+N;f<0&&(f=0),D.balance=f}h.id?await z.update("finances",D,h.id):await z.insert("finances",{team:i,balance:D.balance||0,debt:D.debt||0})}catch(p){console.warn("Failed to update finances:",p)}},m=a.team&&a.type&&a.amount&&a.date;return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Transaktion hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erfassen Sie eine neue finanzielle Transaktion."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üí∞"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Transaktion hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Transaktion zu erfassen."}),e.jsxs("button",{onClick:()=>s(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Transaktion erfassen"]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content modal-mobile-safe",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Transaktion"}),e.jsx("button",{onClick:()=>s(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:l,children:"√ó"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:a.team,onChange:i=>b("team",i.target.value),className:"form-input",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Team w√§hlen"}),P.filter(i=>i.value!=="Ehemalige").map(i=>e.jsx("option",{value:i.value,children:ee(i.value)},i.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Transaktionsart *"}),e.jsxs("select",{value:a.type,onChange:i=>b("type",i.target.value),className:"form-input",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Typ w√§hlen"}),fe.map(i=>e.jsxs("option",{value:i.value,children:[i.icon," ",i.label]},i.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Betrag (‚Ç¨) *"}),e.jsx("input",{type:"number",step:"0.01",value:a.amount,onChange:i=>b("amount",i.target.value),onFocus:i=>i.target.select(),className:"form-input",placeholder:"0.00",required:!0,disabled:l}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Negative Werte f√ºr Ausgaben, positive f√ºr Einnahmen"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Beschreibung"}),e.jsx("input",{type:"text",value:a.info,onChange:i=>b("info",i.target.value),className:"form-input",placeholder:"Zus√§tzliche Informationen...",disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:a.date,onChange:i=>b("date",i.target.value),className:"form-input",required:!0,disabled:l})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>s(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:l,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!m||l,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Transaktionsarten"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:fe.map(i=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:i.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:i.label})]},i.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verf√ºgbare Teams"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:P.filter(i=>i.value!=="Ehemalige").map(i=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("span",{className:`font-medium ${i.color==="blue"?"text-blue-600":"text-red-600"}`,children:ee(i.value)}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",i.value,")"]})]},i.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Nach dem Hinzuf√ºgen k√∂nnen Sie die Transaktion in der Finanzen-√úbersicht einsehen."})]})]})})]})}function Qe(){var he;const[r,s]=S.useState("players"),[a,t]=S.useState(!1),[l,c]=S.useState(""),[b,g]=S.useState(new Set),{data:o,refetch:m}=_("players","*",{order:{column:"id",ascending:!1}}),{data:i,refetch:u}=_("matches","*",{order:{column:"date",ascending:!1}}),{data:N,refetch:p}=_("bans","*",{order:{column:"id",ascending:!1}}),{data:h,refetch:D}=_("transactions","*",{order:{column:"date",ascending:!1}}),{remove:f}=de("players"),{remove:$}=de("bans"),{remove:k}=de("transactions"),x=[{id:"players",label:"Spieler l√∂schen",icon:"fas fa-users"},{id:"matches",label:"Spiele l√∂schen (Einzel & Bulk)",icon:"fas fa-futbol"},{id:"bans",label:"Sperren l√∂schen",icon:"fas fa-ban"},{id:"transactions",label:"Transaktionen l√∂schen",icon:"fas fa-euro-sign"}],w=j=>{s(j),c(""),g(new Set)},n=(j,T)=>{const F=new Set(b);T?F.add(j):F.delete(j),g(F)},d=j=>{const T=U(j);b.size===T.length?g(new Set):g(new Set(T.map(F=>F.id)))},y=async()=>{if(b.size===0){M.error("Keine Spiele ausgew√§hlt");return}const T=((i==null?void 0:i.filter(L=>b.has(L.id)))||[]).reduce((L,Z)=>L+((h==null?void 0:h.filter(ce=>ce.match_id===Z.id).length)||0),0);let F=`Sind Sie sicher, dass Sie ${b.size} ausgew√§hlte Spiele l√∂schen m√∂chten?`;if(T>0&&(F+=`

Achtung: ${T} zugeh√∂rige Transaktion(en) werden ebenfalls gel√∂scht.`),F+=`

Dieser Vorgang kann nicht r√ºckg√§ngig gemacht werden!`,!confirm(F))return;t(!0);let C=0,B=0;try{for(const L of b)try{console.log(`Deleting match ${L}`),await me(L),C++}catch(Z){console.error(`Failed to delete match ${L}:`,Z),B++}g(new Set),C>0&&B===0?M.success(`Alle ${C} Spiele erfolgreich gel√∂scht`):C>0&&B>0?M.success(`${C} Spiele gel√∂scht, ${B} fehlgeschlagen`):M.error(`Alle ${B} L√∂schvorg√§nge fehlgeschlagen`),u(),D(),setTimeout(()=>{u(),D()},1e3)}catch(L){console.error("Bulk delete error:",L),M.error("Fehler beim Bulk-L√∂schen: "+L.message),g(new Set)}finally{t(!1)}},E=()=>{switch(r){case"players":return{total:(o==null?void 0:o.length)||0,filtered:G(o).length};case"matches":return{total:(i==null?void 0:i.length)||0,filtered:U(i).length};case"bans":return{total:(N==null?void 0:N.length)||0,filtered:W(N).length};case"transactions":return{total:(h==null?void 0:h.length)||0,filtered:J(h).length};default:return{total:0,filtered:0}}},v=async j=>{const T=(N==null?void 0:N.filter(C=>C.player_id===j.id||C.player_name===j.name))||[];let F=`Sind Sie sicher, dass Sie ${j.name} (${j.team}) l√∂schen m√∂chten?`;if(T.length>0&&(F+=`

Achtung: ${T.length} zugeh√∂rige Sperre(n) werden ebenfalls gel√∂scht.`),j.goals&&j.goals>0&&(F+=`
Der Spieler hat ${j.goals} Tor(e) erzielt.`),!!confirm(F)){t(!0);try{await f(j.id),M.success(`Spieler ${j.name} erfolgreich gel√∂scht`),m(),T.length>0&&p()}catch(C){M.error("Fehler beim L√∂schen des Spielers: "+C.message)}finally{t(!1)}}},I=async j=>{const T=(h==null?void 0:h.filter(B=>B.match_id===j.id))||[],F=`AEK ${j.goalsa||0} - ${j.goalsb||0} Real`;let C=`Sind Sie sicher, dass Sie das Spiel vom ${new Date(j.date).toLocaleDateString("de-DE")} (${F}) l√∂schen m√∂chten?`;if(T.length>0&&(C+=`

Achtung: ${T.length} zugeh√∂rige Transaktion(en) werden ebenfalls gel√∂scht.`),j.manofthematch&&(C+=`
Spieler des Spiels: ${j.manofthematch}`),!!confirm(C)){t(!0);try{console.log(`Attempting to delete match ${j.id}`),await me(j.id),console.log(`Successfully deleted match ${j.id}`),M.success("Spiel erfolgreich gel√∂scht"),u(),D(),setTimeout(()=>{u(),D()},1e3)}catch(B){console.error("Error deleting match:",B);let L="Fehler beim L√∂schen des Spiels: ";B.message.includes("not found")?L+=`Spiel mit ID ${j.id} wurde nicht in der Datenbank gefunden. M√∂glicherweise wurde es bereits gel√∂scht.`:B.message.includes("Invalid match ID")?L+=`Ung√ºltige Spiel-ID: ${j.id}`:B.message.includes("fetch failed")||B.message.includes("network")?L+="Netzwerkfehler. Bitte √ºberpr√ºfen Sie Ihre Internetverbindung.":L+=B.message,M.error(L)}finally{t(!1)}}},R=async j=>{var B;const T=j.player_name||(j.player_id&&o?(B=o.find(L=>L.id===j.player_id))==null?void 0:B.name:"Unbekannter Spieler"),F=Math.max(0,(j.totalgames||0)-(j.matchesserved||0));let C=`Sind Sie sicher, dass Sie die Sperre f√ºr ${T} l√∂schen m√∂chten?`;if(C+=`
Sperrtyp: ${j.type}`,F>0?C+=`
Noch ${F} Spiel(e) verbleibend`:C+=`
Sperre bereits abgesessen`,j.reason&&(C+=`
Grund: ${j.reason}`),!!confirm(C)){t(!0);try{await $(j.id),M.success(`Sperre f√ºr ${T} erfolgreich gel√∂scht`),p()}catch(L){M.error("Fehler beim L√∂schen der Sperre: "+L.message)}finally{t(!1)}}},A=async j=>{const T=j.match_id&&i?i.find(C=>C.id===j.match_id):null;let F=`Sind Sie sicher, dass Sie die Transaktion "${j.type}" l√∂schen m√∂chten?`;if(F+=`
Betrag: ${j.amount>0?"+":""}${j.amount}M ‚Ç¨ (${j.team})`,j.date&&(F+=`
Datum: ${new Date(j.date).toLocaleDateString("de-DE")}`),j.info&&(F+=`
Info: ${j.info}`),T&&(F+=`
Zugeh√∂riges Spiel: ${new Date(T.date).toLocaleDateString("de-DE")} (AEK ${T.goalsa||0} - ${T.goalsb||0} Real)`),!!confirm(F)){t(!0);try{await k(j.id),M.success("Transaktion erfolgreich gel√∂scht"),D()}catch(C){M.error("Fehler beim L√∂schen der Transaktion: "+C.message)}finally{t(!1)}}},V=j=>{const T=P.find(F=>F.value===j);return T?T.icon:"‚ö´"},G=j=>l?(j||[]).filter(T=>{var F,C,B;return((F=T.name)==null?void 0:F.toLowerCase().includes(l.toLowerCase()))||((C=T.team)==null?void 0:C.toLowerCase().includes(l.toLowerCase()))||((B=T.position)==null?void 0:B.toLowerCase().includes(l.toLowerCase()))}):j||[],U=j=>l?(j||[]).filter(T=>{var F;return new Date(T.date).toLocaleDateString("de-DE").includes(l)||((F=T.manofthematch)==null?void 0:F.toLowerCase().includes(l.toLowerCase()))}):j||[],W=j=>l?(j||[]).filter(T=>{var C,B,L,Z;const F=T.player_name||(T.player_id&&o?(C=o.find(ce=>ce.id===T.player_id))==null?void 0:C.name:"");return(F==null?void 0:F.toLowerCase().includes(l.toLowerCase()))||((B=T.type)==null?void 0:B.toLowerCase().includes(l.toLowerCase()))||((L=T.team)==null?void 0:L.toLowerCase().includes(l.toLowerCase()))||((Z=T.reason)==null?void 0:Z.toLowerCase().includes(l.toLowerCase()))}):j||[],J=j=>l?(j||[]).filter(T=>{var F,C,B,L;return((F=T.type)==null?void 0:F.toLowerCase().includes(l.toLowerCase()))||((C=T.team)==null?void 0:C.toLowerCase().includes(l.toLowerCase()))||((B=T.info)==null?void 0:B.toLowerCase().includes(l.toLowerCase()))||((L=T.amount)==null?void 0:L.toString().includes(l))}):j||[],Y=()=>{const j=G(o);return!j||j.length===0?e.jsx("p",{className:"text-text-muted text-center py-4",children:l?"Keine Spieler gefunden":"Keine Spieler vorhanden"}):e.jsx("div",{className:"space-y-2",children:j.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:V(T.team)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary",children:T.name}),e.jsxs("p",{className:"text-sm text-text-muted",children:[T.team," ‚Ä¢ ",T.position,T.goals!==void 0&&e.jsxs("span",{className:"ml-2",children:["‚Ä¢ ",T.goals," Tore"]})]})]})]}),e.jsxs("button",{onClick:()=>v(T),disabled:a,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"L√∂schen"]})]},T.id))})},H=()=>{const j=U(i);if(!j||j.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:l?"Keine Spiele gefunden":"Keine Spiele vorhanden"});const T=j.length>0&&j.every(C=>b.has(C.id)),F=b.size>0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:()=>d(i),className:"w-4 h-4 text-accent-primary focus:ring-accent-primary border-gray-300 rounded"}),e.jsxs("span",{className:"text-sm text-text-primary",children:[T?"Alle abw√§hlen":"Alle ausw√§hlen"," (",j.length,")"]})]}),b.size>0&&e.jsxs("span",{className:"text-sm text-accent-primary font-medium",children:[b.size," ausgew√§hlt"]})]}),F&&e.jsxs("button",{onClick:y,disabled:a,className:"btn-primary btn-sm bg-red-600 hover:bg-red-700 text-white disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),b.size," Spiele l√∂schen"]})]}),e.jsx("div",{className:"space-y-2",children:j.map(C=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-bg-tertiary rounded-lg",children:[e.jsx("label",{className:"flex items-center cursor-pointer",children:e.jsx("input",{type:"checkbox",checked:b.has(C.id),onChange:B=>n(C.id,B.target.checked),className:"w-4 h-4 text-accent-primary focus:ring-accent-primary border-gray-300 rounded"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-text-primary",children:["ID ",C.id," ‚Ä¢ ",new Date(C.date).toLocaleDateString("de-DE")]}),e.jsxs("p",{className:"text-sm text-text-muted",children:["AEK ",C.goalsa||0," - ",C.goalsb||0," Real"]}),C.manofthematch&&e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:[e.jsx("i",{className:"fas fa-star mr-1"}),"SdS: ",C.manofthematch]})]}),e.jsxs("button",{onClick:()=>I(C),disabled:a,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Einzeln l√∂schen"]})]})})]},C.id))})]})},te=()=>{const j=W(N);if(!j||j.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:l?"Keine Sperren gefunden":"Keine Sperren vorhanden"});const T=C=>{if(C.player_name)return C.player_name;if(C.player_id&&o){const B=o.find(L=>L.id===C.player_id);return B?B.name:"Unbekannter Spieler"}return"Unbekannter Spieler"},F=C=>{const B=(C.totalgames||0)-(C.matchesserved||0);return Math.max(0,B)};return e.jsx("div",{className:"space-y-2",children:j.map(C=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:V(C.team)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary",children:T(C)}),e.jsxs("p",{className:"text-sm text-text-muted",children:[C.type," ‚Ä¢ ",C.totalgames||0," Spiele",F(C)>0?` (${F(C)} verbleibend)`:" (abgesessen)"]}),C.reason&&e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["Grund: ",C.reason]})]})]}),e.jsxs("button",{onClick:()=>R(C),disabled:a,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"L√∂schen"]})]},C.id))})},se=()=>{const j=J(h);if(!j||j.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:l?"Keine Transaktionen gefunden":"Keine Transaktionen vorhanden"});const T=F=>{if(!F.match_id||!i)return null;const C=i.find(B=>B.id===F.match_id);return C?`Match: ${new Date(C.date).toLocaleDateString("de-DE")} (AEK ${C.goalsa||0} - ${C.goalsb||0} Real)`:null};return e.jsx("div",{className:"space-y-2",children:j.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:V(F.team)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-text-primary",children:F.type}),e.jsxs("p",{className:"text-sm text-text-muted",children:[e.jsxs("span",{className:F.amount>0?"text-green-600":"text-red-600",children:[F.amount>0?"+":"",F.amount,"M ‚Ç¨"]}),F.date&&e.jsxs("span",{className:"ml-2",children:["‚Ä¢ ",new Date(F.date).toLocaleDateString("de-DE")]})]}),F.info&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:F.info}),T(F)&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[e.jsx("i",{className:"fas fa-futbol mr-1"}),T(F)]})]})]}),e.jsxs("button",{onClick:()=>A(F),disabled:a,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"L√∂schen"]})]},F.id))})},ae=()=>{switch(r){case"players":return Y();case"matches":return H();case"bans":return te();case"transactions":return se();default:return Y()}};return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Daten l√∂schen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Verwalten Sie die L√∂schung von Spielern, Spielen, Sperren und Transaktionen."})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:x.map(j=>e.jsxs("button",{onClick:()=>w(j.id),className:`p-3 rounded-lg text-sm font-medium transition-colors ${r===j.id?"bg-accent-red text-white":"bg-bg-tertiary text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[e.jsx("i",{className:`${j.icon} mr-2`}),j.label]},j.id))}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:`${(he=x.find(j=>j.id===r))==null?void 0:he.label.replace(" l√∂schen","")} durchsuchen...`,value:l,onChange:j=>c(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent-red focus:border-transparent text-text-primary bg-bg-secondary"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-search text-text-muted"})}),l&&e.jsx("button",{onClick:()=>c(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-text-muted hover:text-text-primary",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l&&e.jsxs("p",{className:"text-xs text-text-muted",children:[e.jsx("i",{className:"fas fa-filter mr-1"}),"Gefiltert nach: ‚Äú",l,"‚Äù"]}),e.jsx("p",{className:"text-xs text-text-muted ml-auto",children:(()=>{const j=E();return l?`${j.filtered} von ${j.total} Eintr√§gen`:`${j.total} Eintr√§ge`})()})]})]}),e.jsxs("div",{className:"modern-card",children:[a&&e.jsx(we,{message:"L√∂sche..."}),!a&&ae()]}),e.jsx("div",{className:"mt-6 modern-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-red-600 mr-3",children:e.jsx("i",{className:"fas fa-exclamation-triangle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-1",children:"Achtung"}),e.jsx("p",{className:"text-red-700 text-sm",children:"Das L√∂schen von Daten ist permanent und kann nicht r√ºckg√§ngig gemacht werden. Bitte √ºberpr√ºfen Sie Ihre Auswahl sorgf√§ltig, bevor Sie fortfahren."})]})]})})]})}function Xe({data:r=[],searchFields:s=[],filterOptions:a=[],onResults:t,placeholder:l="Suchen...",showCount:c=!0,searchExtractor:b}){const[g,o]=S.useState(""),[m,i]=S.useState({}),[u,N]=S.useState(""),[p,h]=S.useState("asc"),D=S.useRef(null),f=S.useMemo(()=>{let n=[...r];if(g.trim()){const d=g.toLowerCase().trim();n=n.filter(y=>{if(b){const E=b(y);return E&&E.toLowerCase().includes(d)}return s.some(E=>{const v=le(y,E);return v&&v.toString().toLowerCase().includes(d)})})}return Object.entries(m).forEach(([d,y])=>{if(y&&y!=="all"){const E=a.find(v=>v.key===d);E&&E.filterFn?n=n.filter(v=>E.filterFn(v,y)):n=n.filter(v=>le(v,d)===y)}}),u&&n.sort((d,y)=>{const E=le(d,u),v=le(y,u);let I=0;return typeof E=="number"&&typeof v=="number"?I=E-v:E instanceof Date&&v instanceof Date?I=E.getTime()-v.getTime():I=String(E).localeCompare(String(v)),p==="desc"?-I:I}),n},[r,g,m,u,p,s,a,b]);S.useEffect(()=>{t&&JSON.stringify(f)!==D.current&&(D.current=JSON.stringify(f),t(f))},[f,t]);const $=(n,d)=>{i(y=>({...y,[n]:d}))},k=n=>{u===n?h(p==="asc"?"desc":"asc"):(N(n),h("asc"))},x=()=>{o(""),i({}),N(""),h("asc")},w=g||Object.values(m).some(n=>n&&n!=="all")||u;return e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm mb-4",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:e.jsx("span",{className:"text-text-secondary","aria-hidden":"true",children:"üîç"})}),e.jsx("input",{type:"text",value:g,onChange:n=>o(n.target.value),placeholder:`${l} (Strg+K f√ºr globale Suche)`,className:"w-full pl-10 pr-20 py-2 bg-bg-secondary border border-border-light rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary-green focus:border-transparent"}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center gap-1 pr-3",children:[e.jsx("button",{onClick:()=>{const n=new CustomEvent("global-search-toggle");window.dispatchEvent(n)},className:"text-text-secondary hover:text-primary-green transition-colors p-1 rounded",title:"Globale Suche √∂ffnen (Strg+K)",children:e.jsx("span",{"aria-hidden":"true",children:"üåê"})}),g&&e.jsx("button",{onClick:()=>o(""),className:"text-text-secondary hover:text-text-primary transition-colors p-1 rounded",title:"Suchfeld leeren",children:e.jsx("span",{"aria-hidden":"true",children:"‚úï"})})]})]})}),(a.length>0||u)&&e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.map(n=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-text-primary",children:[n.label,":"]}),e.jsxs("select",{value:m[n.key]||"",onChange:d=>$(n.key,d.target.value),className:"px-3 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"",children:"Alle"}),n.options.map(d=>e.jsx("option",{value:d.value,children:d.label},d.value))]})]},n.key)),s.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Sortieren:"}),e.jsxs("select",{value:u,onChange:n=>N(n.target.value),className:"px-3 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"",children:"Standard"}),s.map(n=>e.jsx("option",{value:n,children:ye(n)},n))]}),u&&e.jsx("button",{onClick:()=>k(u),className:"px-2 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary hover:bg-bg-tertiary transition-colors duration-200",title:`Sortierung: ${p==="asc"?"Aufsteigend":"Absteigend"}`,children:p==="asc"?"‚Üë":"‚Üì"})]}),w&&e.jsx("button",{onClick:x,className:"px-3 py-1 bg-red-100 text-red-800 border border-red-200 rounded text-sm hover:bg-red-200 transition-colors duration-200",children:"Filter zur√ºcksetzen"})]})}),c&&e.jsx("div",{className:"px-4 py-2 bg-bg-secondary border-b border-border-light",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-text-secondary",children:f.length===r.length?`${r.length} Eintr√§ge`:`${f.length} von ${r.length} Eintr√§gen`}),w&&e.jsxs("div",{className:"flex items-center gap-2",children:[g&&e.jsxs("span",{className:"bg-primary-green bg-opacity-10 text-primary-green px-2 py-1 rounded text-xs",children:['üîç "',g,'"']}),Object.entries(m).filter(([,n])=>n&&n!=="all").map(([n,d])=>{const y=a.find(v=>v.key===n),E=y==null?void 0:y.options.find(v=>v.value===d);return e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:[y==null?void 0:y.label,": ",(E==null?void 0:E.label)||d]},n)}),u&&e.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:["üìä ",ye(u)," ",p==="asc"?"‚Üë":"‚Üì"]})]})]})})]})}function le(r,s){return!r||!s?"":s.split(".").reduce((a,t)=>a&&a[t]!==void 0?a[t]:"",r)}function ye(r){return{name:"Name",team:"Team",position:"Position",value:"Wert",date:"Datum",goalsa:"AEK Tore",goalsb:"Real Tore",type:"Typ",amount:"Betrag",description:"Beschreibung",totalgames:"Gesamt Spiele",matchesserved:"Gespielte Spiele"}[r]||r.charAt(0).toUpperCase()+r.slice(1)}function je({onNavigate:r}){const[s,a]=S.useState("players"),[t,l]=S.useState([]),{data:c,loading:b}=_("players","*"),{data:g,loading:o}=_("matches","*",{order:{column:"date",ascending:!1}}),{data:m,loading:i}=_("transactions","*",{order:{column:"date",ascending:!1}}),{data:u,loading:N}=_("bans","*",{order:{column:"id",ascending:!1}}),p=b||o||i||N,h=[{id:"players",label:"Spieler",icon:"fas fa-users",data:c||[],searchFields:["name","position","team","value"],filterOptions:[{key:"team",label:"Team",options:[{value:"AEK",label:"AEK Athen"},{value:"Real",label:"Real Madrid"},{value:"Ehemalige",label:"Ehemalige"}]},{key:"position",label:"Position",options:[{value:"TH",label:"Torwart"},{value:"IV",label:"Innenverteidiger"},{value:"LV",label:"Linksverteidiger"},{value:"RV",label:"Rechtsverteidiger"},{value:"ZDM",label:"Defensives Mittelfeld"},{value:"ZM",label:"Zentrales Mittelfeld"},{value:"ZOM",label:"Offensives Mittelfeld"},{value:"LM",label:"Linkes Mittelfeld"},{value:"RM",label:"Rechtes Mittelfeld"},{value:"LF",label:"Linker Fl√ºgel"},{value:"RF",label:"Rechter Fl√ºgel"},{value:"ST",label:"St√ºrmer"}]}]},{id:"matches",label:"Spiele",icon:"fas fa-futbol",data:g||[],searchFields:["date","goalsa","goalsb","goalscorers","manofthematch","teama","teamb"],filterOptions:[],searchExtractor:k=>{const x=[];if(k.date&&x.push(new Date(k.date).toLocaleDateString("de-DE")),k.teama&&x.push(k.teama),k.teamb&&x.push(k.teamb),k.goalsa!==void 0&&x.push(k.goalsa.toString()),k.goalsb!==void 0&&x.push(k.goalsb.toString()),k.goalslista)try{const w=typeof k.goalslista=="string"?JSON.parse(k.goalslista):k.goalslista;Array.isArray(w)&&w.forEach(n=>{typeof n=="string"?x.push(n):n&&n.player&&x.push(n.player)})}catch{}if(k.goalslistb)try{const w=typeof k.goalslistb=="string"?JSON.parse(k.goalslistb):k.goalslistb;Array.isArray(w)&&w.forEach(n=>{typeof n=="string"?x.push(n):n&&n.player&&x.push(n.player)})}catch{}return k.manofthematch&&(x.push(k.manofthematch),x.push("Spieler des Spiels"),x.push("SdS")),x.join(" ").toLowerCase()}},{id:"transactions",label:"Transaktionen",icon:"fas fa-euro-sign",data:m||[],searchFields:["type","description","amount","date"],filterOptions:[{key:"type",label:"Typ",options:[{value:"transfer",label:"Transfer"},{value:"preis",label:"Preisgeld"},{value:"strafe",label:"Strafe"},{value:"sonstige",label:"Sonstige"}],filterFn:(k,x)=>{var d,y;const w=((d=k.type)==null?void 0:d.toLowerCase())||"",n=((y=k.description)==null?void 0:y.toLowerCase())||"";switch(x){case"transfer":return w.includes("transfer")||n.includes("transfer");case"preis":return w.includes("preis")||n.includes("preis")||k.amount>0;case"strafe":return w.includes("strafe")||n.includes("strafe");case"sonstige":return!w.includes("transfer")&&!w.includes("preis")&&!w.includes("strafe");default:return!0}}}]},{id:"bans",label:"Sperren",icon:"fas fa-ban",data:u||[],searchFields:["player_name","team","type","reason"],filterOptions:[{key:"team",label:"Team",options:[{value:"AEK",label:"AEK Athen"},{value:"Real",label:"Real Madrid"}]},{key:"type",label:"Typ",options:[{value:"Gelbe Karte",label:"Gelbe Karte"},{value:"Gelb-Rote Karte",label:"Gelb-Rote Karte"},{value:"Rote Karte",label:"Rote Karte"},{value:"Verletzung",label:"Verletzung"}]}]}],D=h.find(k=>k.id===s),f=(k,x)=>{switch(x){case"players":r==null||r("squad");break;case"matches":r==null||r("matches");break;case"transactions":r==null||r("finances");break;case"bans":r==null||r("bans");break}},$=()=>{const k=t.length>0?t:D.data;return k.length===0?e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("i",{className:`${D.icon} text-4xl mb-2`}),e.jsxs("p",{children:["Keine ",D.label.toLowerCase()," gefunden"]})]}):e.jsx("div",{className:"divide-y divide-border-light",children:k.map(x=>e.jsxs("button",{onClick:()=>f(x,s),className:"w-full p-4 hover:bg-bg-secondary transition-colors text-left focus:outline-none focus:ring-2 focus:ring-primary-green focus:ring-inset",children:[s==="players"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:x.name}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[x.position," ‚Ä¢ ",x.team," ‚Ä¢ ",x.value||0,"M ‚Ç¨"]}),(x.goals||0)>0&&e.jsxs("p",{className:"text-xs text-primary-green",children:["‚öΩ ",x.goals||0," Tore"]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[x.value||0,"M ‚Ç¨"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zum Spieler ‚Üí"})]})]}),s==="matches"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:new Date(x.date).toLocaleDateString("de-DE")}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[x.teama||"AEK"," ",x.goalsa||0," - ",x.goalsb||0," ",x.teamb||"Real"]}),(()=>{const w=[];try{if(x.goalslista){const n=typeof x.goalslista=="string"?JSON.parse(x.goalslista):x.goalslista;Array.isArray(n)&&n.forEach(d=>{const y=typeof d=="string"?d:d==null?void 0:d.player;y&&w.push(`${y} (AEK)`)})}if(x.goalslistb){const n=typeof x.goalslistb=="string"?JSON.parse(x.goalslistb):x.goalslistb;Array.isArray(n)&&n.forEach(d=>{const y=typeof d=="string"?d:d==null?void 0:d.player;y&&w.push(`${y} (Real)`)})}}catch{}return w.length>0?e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["‚öΩ ",w.slice(0,3).join(", "),w.length>3?"...":""]}):null})(),x.manofthematch&&e.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:["‚≠ê SdS: ",x.manofthematch]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[(x.goalsa||0)+(x.goalsb||0)," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zum Spiel ‚Üí"})]})]}),s==="transactions"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:x.type||"Transaktion"}),e.jsx("p",{className:"text-sm text-text-secondary",children:x.description||"Keine Beschreibung"}),e.jsx("p",{className:"text-xs text-text-secondary",children:new Date(x.date).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:`text-lg font-bold ${(x.amount||0)>=0?"text-green-600":"text-red-600"}`,children:[(x.amount||0)>0?"+":"",x.amount||0,"‚Ç¨"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zu Finanzen ‚Üí"})]})]}),s==="bans"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:x.player_name}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[x.team," ‚Ä¢ ",x.type]}),x.reason&&e.jsx("p",{className:"text-xs text-text-secondary",children:x.reason})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-sm text-accent-red",children:[x.duration||1," Spiel",(x.duration||1)!==1?"e":""]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zu Sperren ‚Üí"})]})]})]},x.id))})};return p?e.jsx(we,{message:"Lade Daten..."}):e.jsxs("div",{className:"p-4 pb-20 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-1",children:"üîç Globale Suche"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Durchsuche alle Daten zentral an einem Ort"})]}),e.jsx("div",{className:"icon-only-nav flex overflow-x-auto space-x-2 pb-2",children:h.map(k=>e.jsxs("button",{onClick:()=>{a(k.id),l([])},className:`search-nav-button flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${s===k.id?"bg-primary-green text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary"}`,title:k.label,"aria-label":k.label,children:[e.jsx("i",{className:k.icon}),e.jsx("span",{className:"font-medium hidden sm:inline",children:k.label}),e.jsxs("span",{className:"text-xs opacity-75",children:["(",k.data.length,")"]})]},k.id))}),e.jsx(Xe,{data:D.data,searchFields:D.searchFields,filterOptions:D.filterOptions,searchExtractor:D.searchExtractor,onResults:l,placeholder:`${D.label} durchsuchen...`}),e.jsxs("div",{className:"modern-card",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("h4",{className:"font-medium text-text-primary",children:[t.length>0?"Suchergebnisse":`Alle ${D.label}`,e.jsxs("span",{className:"text-text-secondary ml-2",children:["(",t.length>0?t.length:D.data.length,")"]})]})}),$()]})]})}function et(){const{theme:r,autoMode:s,toggleTheme:a,setAutoTheme:t,setManualTheme:l}=De();return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"üé®"}),"Design & Darstellung"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Darstellungsmodus"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>t(!0),className:`p-4 rounded-lg border-2 transition-all duration-300 flex flex-col items-center space-y-2 ${s?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsx("div",{className:"text-2xl",children:"üåó"}),e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Automatisch"}),e.jsx("div",{className:"text-xs text-text-muted text-center",children:"Folgt den Systemeinstellungen"})]}),e.jsxs("button",{onClick:()=>l("light"),className:`p-4 rounded-lg border-2 transition-all duration-300 flex flex-col items-center space-y-2 ${!s&&r==="light"?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsx("div",{className:"text-2xl",children:"‚òÄÔ∏è"}),e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Hell"}),e.jsx("div",{className:"text-xs text-text-muted text-center",children:"Helle Darstellung"})]}),e.jsxs("button",{onClick:()=>l("dark"),className:`p-4 rounded-lg border-2 transition-all duration-300 flex flex-col items-center space-y-2 ${!s&&r==="dark"?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsx("div",{className:"text-2xl",children:"üåô"}),e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Dunkel"}),e.jsx("div",{className:"text-xs text-text-muted text-center",children:"Dunkle Darstellung"})]})]})]}),e.jsx("div",{className:"bg-bg-tertiary rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Aktueller Modus"}),e.jsx("div",{className:"text-xs text-text-muted",children:s?`Automatisch (${r==="dark"?"Dunkel":"Hell"} - basierend auf Systemeinstellung)`:`Manuell (${r==="dark"?"Dunkel":"Hell"})`})]}),e.jsx("div",{className:"text-2xl",children:r==="dark"?"üåô":"‚òÄÔ∏è"})]})}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Schnellwechsel"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Wechselt zwischen Hell und Dunkel"})]}),e.jsxs("button",{onClick:a,className:"bg-primary-green hover:bg-primary-green-dark text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center space-x-2",children:[e.jsx("span",{children:r==="dark"?"‚òÄÔ∏è":"üåô"}),e.jsxs("span",{className:"text-sm font-medium",children:["Zu ",r==="dark"?"Hell":"Dunkel"]})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-500 text-xl flex-shrink-0",children:"üí°"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"Darstellungshinweise"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Automatisch:"})," Wechselt automatisch basierend auf Ihren Systemeinstellungen"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Hell:"})," Optimiert f√ºr helle Umgebungen und bessere Akkulaufzeit"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Dunkel:"})," Reduziert Augenbelastung bei schwachem Licht"]}),e.jsx("p",{children:"‚Ä¢ Alle Karten, Modals und UI-Elemente passen sich automatisch an"})]})]})]})})]})})}function tt(){const[r,s]=S.useState({primaryGreen:"#10B981",primaryGreenDark:"#059669",primaryGreenLight:"#34D399",accentOrange:"#F59E0B",accentRed:"#EF4444",accentBlue:"#3B82F6"}),[a]=S.useState([{name:"Standard",colors:{primaryGreen:"#10B981",primaryGreenDark:"#059669",primaryGreenLight:"#34D399",accentOrange:"#F59E0B",accentRed:"#EF4444",accentBlue:"#3B82F6"}},{name:"AEK Blau",colors:{primaryGreen:"#1E40AF",primaryGreenDark:"#1E3A8A",primaryGreenLight:"#3B82F6",accentOrange:"#F59E0B",accentRed:"#EF4444",accentBlue:"#60A5FA"}},{name:"Real Rot",colors:{primaryGreen:"#DC2626",primaryGreenDark:"#B91C1C",primaryGreenLight:"#EF4444",accentOrange:"#F59E0B",accentRed:"#F87171",accentBlue:"#3B82F6"}},{name:"Dunkles Gold",colors:{primaryGreen:"#D97706",primaryGreenDark:"#B45309",primaryGreenLight:"#F59E0B",accentOrange:"#FBBF24",accentRed:"#EF4444",accentBlue:"#3B82F6"}}]),[t,l]=S.useState(!1),[c,b]=S.useState("Standard");S.useEffect(()=>{const p=localStorage.getItem("fifa-tracker-custom-colors");if(p)try{const h=JSON.parse(p);s(h),g(h)}catch(h){console.error("Error loading custom colors:",h)}},[]);const g=p=>{const h=document.documentElement;h.style.setProperty("--primary-green",p.primaryGreen),h.style.setProperty("--primary-green-dark",p.primaryGreenDark),h.style.setProperty("--primary-green-light",p.primaryGreenLight),h.style.setProperty("--accent-orange",p.accentOrange),h.style.setProperty("--accent-red",p.accentRed),h.style.setProperty("--accent-blue",p.accentBlue)},o=(p,h)=>{const D={...r,[p]:h};s(D),l(!0),b("Benutzerdefiniert"),g(D)},m=p=>{s(p.colors),b(p.name),l(!0),g(p.colors)},i=()=>{localStorage.setItem("fifa-tracker-custom-colors",JSON.stringify(r)),l(!1);const p=new CustomEvent("show-toast",{detail:{message:"Farbschema gespeichert!",type:"success"}});window.dispatchEvent(p)},u=()=>{const p=a[0].colors;s(p),b("Standard"),l(!0),g(p)},N=({label:p,colorKey:h,value:D,description:f})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary",children:p}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"color",value:D,onChange:$=>o(h,$.target.value),className:"w-12 h-12 rounded-lg border-2 border-border-medium cursor-pointer appearance-none",style:{background:D}}),e.jsx("div",{className:"absolute inset-0 w-12 h-12 rounded-lg border-2 border-white pointer-events-none shadow-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",value:D,onChange:$=>o(h,$.target.value),className:"w-full px-3 py-2 text-sm border border-border-medium rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green/50",placeholder:"#000000"}),f&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:f})]})]})]});return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"üé®"}),"Farbkonfiguration"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-3",children:"Vorgefertigte Farbschemata"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:a.map(p=>e.jsxs("button",{onClick:()=>m(p),className:`p-3 rounded-lg border-2 transition-all duration-300 ${c===p.name?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border border-white/50",style:{backgroundColor:p.colors.primaryGreen}}),e.jsx("div",{className:"w-4 h-4 rounded-full border border-white/50",style:{backgroundColor:p.colors.accentRed}}),e.jsx("div",{className:"w-4 h-4 rounded-full border border-white/50",style:{backgroundColor:p.colors.accentBlue}})]}),e.jsx("div",{className:"text-xs font-medium text-text-primary",children:p.name})]},p.name))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-text-primary",children:"Individuelle Farbanpassung"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(N,{label:"Prim√§rfarbe",colorKey:"primaryGreen",value:r.primaryGreen,description:"Hauptfarbe f√ºr Buttons und Akzente"}),e.jsx(N,{label:"Prim√§rfarbe (Dunkel)",colorKey:"primaryGreenDark",value:r.primaryGreenDark,description:"Dunklere Variante f√ºr Hover-Effekte"}),e.jsx(N,{label:"Prim√§rfarbe (Hell)",colorKey:"primaryGreenLight",value:r.primaryGreenLight,description:"Hellere Variante f√ºr Highlights"}),e.jsx(N,{label:"Akzentfarbe Orange",colorKey:"accentOrange",value:r.accentOrange,description:"Orange Akzente und Warnungen"}),e.jsx(N,{label:"Akzentfarbe Rot",colorKey:"accentRed",value:r.accentRed,description:"Rote Akzente und Fehler"}),e.jsx(N,{label:"Akzentfarbe Blau",colorKey:"accentBlue",value:r.accentBlue,description:"Blaue Akzente und Informationen"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-border-light",children:[e.jsx("button",{onClick:i,disabled:!t,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all duration-300 ${t?"bg-primary-green hover:bg-primary-green-dark text-white":"bg-border-medium text-text-muted cursor-not-allowed"}`,children:t?"Farben speichern":"Keine √Ñnderungen"}),e.jsx("button",{onClick:u,className:"py-3 px-4 bg-bg-tertiary hover:bg-border-light text-text-primary border border-border-medium rounded-lg font-medium transition-all duration-300",children:"Zur√ºcksetzen"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-bg-tertiary rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-text-primary mb-3",children:"Vorschau"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{className:"btn-primary text-sm py-2 px-4",style:{backgroundColor:r.primaryGreen,borderColor:r.primaryGreen},children:"Prim√§r Button"}),e.jsx("div",{className:"px-3 py-2 rounded text-white text-sm",style:{backgroundColor:r.accentRed},children:"Rot Akzent"}),e.jsx("div",{className:"px-3 py-2 rounded text-white text-sm",style:{backgroundColor:r.accentBlue},children:"Blau Akzent"}),e.jsx("div",{className:"px-3 py-2 rounded text-white text-sm",style:{backgroundColor:r.accentOrange},children:"Orange Akzent"})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-500 text-xl flex-shrink-0",children:"üí°"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"Farbhinweise"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("p",{children:"‚Ä¢ √Ñnderungen werden sofort in der Vorschau angezeigt"}),e.jsx("p",{children:"‚Ä¢ Gespeicherte Farben werden automatisch bei der n√§chsten Anmeldung geladen"}),e.jsx("p",{children:"‚Ä¢ Verwenden Sie Hex-Codes (#RRGGBB) f√ºr pr√§zise Farben"}),e.jsx("p",{children:"‚Ä¢ Team-spezifische Presets helfen bei der schnellen Anpassung"})]})]})]})})]})})}class st{constructor(){this.isSupported="serviceWorker"in navigator&&"PushManager"in window,this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent),this.permission=Notification.permission,this.subscription=null,this.settings=this.loadSettings()}async initialize(){if(!this.isSupported)return console.warn("Push notifications not supported"),!1;try{if("serviceWorker"in navigator){const s=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",s)}return this.permission=Notification.permission,!0}catch(s){return console.error("Failed to initialize notifications:",s),!1}}async requestPermission(){if(!this.isSupported)throw new Error("Notifications not supported");if(this.permission==="granted")return!0;try{if(this.isIOS){const s=await Notification.requestPermission();return this.permission=s,s==="granted"}else{const s=await Notification.requestPermission();return this.permission=s,s==="granted"}}catch(s){return console.error("Permission request failed:",s),!1}}async subscribe(){if(!this.isSupported||this.permission!=="granted")throw new Error("Cannot subscribe: permission not granted");try{const s=await navigator.serviceWorker.ready,a=await s.pushManager.getSubscription();if(a)return this.subscription=a,a;const t=await s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.getVAPIDKey()});return this.subscription=t,await this.sendSubscriptionToServer(t),t}catch(s){throw console.error("Subscription failed:",s),s}}async unsubscribe(){if(!this.subscription)return!0;try{return await this.subscription.unsubscribe(),await this.removeSubscriptionFromServer(this.subscription),this.subscription=null,!0}catch(s){return console.error("Unsubscribe failed:",s),!1}}async scheduleMatchReminder(s,a=30){if(!this.settings.matchReminders)return;const t=new Date(s.date),l=new Date(t.getTime()-a*60*1e3),c=new Date;if(l<=c)return;const b=l.getTime()-c.getTime();setTimeout(()=>{this.showNotification({title:"‚öΩ FIFA Match Reminder",body:`Match starting in ${a} minutes: AEK vs Real Madrid`,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`match-reminder-${s.id}`,data:{type:"match_reminder",matchId:s.id,url:"/matches"},actions:[{action:"view",title:"View Match",icon:"/assets/icon-180.png"},{action:"dismiss",title:"Dismiss"}]})},b)}async notifyAchievement(s){this.settings.achievements&&await this.showNotification({title:"üèÜ Achievement Unlocked!",body:s.title,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`achievement-${s.id}`,data:{type:"achievement",achievementId:s.id,url:"/stats"}})}async notifyGoal(s,a,t){this.settings.goals&&await this.showNotification({title:"‚öΩ GOAL!",body:`${t} scored for ${a}!`,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`goal-${s.id}-${Date.now()}`,data:{type:"goal",matchId:s.id,url:"/matches"}})}async notifyEvent(s){this.settings.events&&await this.showNotification({title:`üéâ ${s.name}`,body:s.description,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`event-${s.id}`,data:{type:"event",eventId:s.id,url:"/events"}})}async showNotification(s){if(this.permission!=="granted"){console.warn("Cannot show notification: permission not granted");return}try{"serviceWorker"in navigator?await(await navigator.serviceWorker.ready).showNotification(s.title,{body:s.body,icon:s.icon,badge:s.badge,tag:s.tag,data:s.data,actions:s.actions||[],vibrate:this.isIOS?void 0:[200,100,200],requireInteraction:!1,silent:!1}):new Notification(s.title,{body:s.body,icon:s.icon,tag:s.tag,data:s.data})}catch(a){console.error("Failed to show notification:",a)}}updateSettings(s){this.settings={...this.settings,...s},localStorage.setItem("fifa-tracker-notification-settings",JSON.stringify(this.settings))}loadSettings(){const s=localStorage.getItem("fifa-tracker-notification-settings"),a={matchReminders:!0,goals:!0,achievements:!0,events:!0,reminderTime:30};return s?{...a,...JSON.parse(s)}:a}getVAPIDKey(){return"BEl62iUYgUivxIkv69yViEuiBIa40HI0DLLuxazjqak_7kYDjLE2cI5GkJM-5z9z9LzsQI7JClZgZmKjgKrRxfQ"}async sendSubscriptionToServer(s){try{console.log("Would send subscription to server:",s)}catch(a){console.error("Failed to send subscription to server:",a)}}async removeSubscriptionFromServer(s){try{console.log("Would remove subscription from server:",s)}catch(a){console.error("Failed to remove subscription from server:",a)}}async testNotification(){await this.showNotification({title:"üß™ Test Notification",body:"FUSTA notifications are working!",icon:"/assets/icon-180.png",tag:"test-notification"})}getStatus(){return{supported:this.isSupported,permission:this.permission,subscribed:!!this.subscription,isIOS:this.isIOS,settings:this.settings}}}const K=new st;typeof window<"u"&&(window.NotificationService=K,K.initialize());function at(){const[r,s]=S.useState(K.getStatus()),[a,t]=S.useState(K.settings),[l,c]=S.useState(!1);S.useEffect(()=>{s(K.getStatus()),t(K.settings)},[]);const b=async()=>{c(!0);try{await K.requestPermission()&&await K.subscribe(),s(K.getStatus())}catch(i){console.error("Permission request failed:",i);const u=new CustomEvent("show-toast",{detail:{message:"Benachrichtigungen konnten nicht aktiviert werden.",type:"error"}});window.dispatchEvent(u)}finally{c(!1)}},g=async()=>{c(!0);try{await K.unsubscribe(),s(K.getStatus())}catch(i){console.error("Unsubscribe failed:",i)}finally{c(!1)}},o=(i,u)=>{const N={...a,[i]:u};t(N),K.updateSettings(N)},m=async()=>{try{await K.testNotification();const i=new CustomEvent("show-toast",{detail:{message:"Test-Benachrichtigung gesendet!",type:"success"}});window.dispatchEvent(i)}catch(i){console.error("Test notification failed:",i)}};return r.supported?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"üì±"}),"Push-Benachrichtigungen"]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Status"}),e.jsxs("div",{className:"text-xs text-text-muted",children:[r.permission==="granted"?"Benachrichtigungen aktiviert":r.permission==="denied"?"Benachrichtigungen blockiert":"Berechtigung ausstehend",r.isIOS&&" (iOS)"]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${r.permission==="granted"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300":r.permission==="denied"?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-300"}`,children:r.permission==="granted"?"Aktiv":r.permission==="denied"?"Blockiert":"Ausstehend"})]})}),r.permission!=="granted"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("button",{onClick:b,disabled:l||r.permission==="denied",className:`w-full py-3 px-4 rounded-lg font-medium transition-all duration-300 ${r.permission==="denied"?"bg-border-medium text-text-muted cursor-not-allowed":"bg-primary-green hover:bg-primary-green-dark text-white"}`,children:l?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Aktiviere..."]}):r.permission==="denied"?"In Browsereinstellungen aktivieren":"Benachrichtigungen aktivieren"}),r.permission==="denied"&&e.jsx("p",{className:"text-xs text-text-muted mt-2 text-center",children:"√ñffnen Sie die Browsereinstellungen und erlauben Sie Benachrichtigungen f√ºr diese Seite."})]}),r.permission==="granted"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-text-primary",children:"Benachrichtigungseinstellungen"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"‚öΩ Spiel-Erinnerungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Erinnerungen vor Spielbeginn"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.matchReminders,onChange:i=>o("matchReminders",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]}),a.matchReminders&&e.jsxs("div",{className:"ml-4 p-3 bg-bg-tertiary rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Erinnerungszeit (Minuten vor Spielbeginn)"}),e.jsxs("select",{value:a.reminderTime,onChange:i=>o("reminderTime",parseInt(i.target.value)),className:"w-full px-3 py-2 text-sm border border-border-medium rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green/50",children:[e.jsx("option",{value:5,children:"5 Minuten"}),e.jsx("option",{value:15,children:"15 Minuten"}),e.jsx("option",{value:30,children:"30 Minuten"}),e.jsx("option",{value:60,children:"1 Stunde"}),e.jsx("option",{value:120,children:"2 Stunden"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"‚öΩ Tor-Benachrichtigungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Bei Toren w√§hrend Live-Matches"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.goals,onChange:i=>o("goals",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"üèÜ Achievement-Benachrichtigungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Bei freigeschalteten Erfolgen"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.achievements,onChange:i=>o("achievements",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"üéâ Event-Benachrichtigungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Bei neuen Events und Turnieren"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.events,onChange:i=>o("events",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-border-light",children:[e.jsx("button",{onClick:m,className:"flex-1 py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all duration-300",children:"Test-Benachrichtigung"}),e.jsx("button",{onClick:g,disabled:l,className:"py-2 px-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-all duration-300 disabled:opacity-50",children:l?"Deaktiviere...":"Deaktivieren"})]})]}),r.isIOS&&e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-500 text-xl flex-shrink-0",children:"üì±"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"iOS-Hinweis"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("p",{children:'‚Ä¢ Installieren Sie die App √ºber "Zum Home-Bildschirm hinzuf√ºgen" f√ºr beste Benachrichtigungen'}),e.jsx("p",{children:"‚Ä¢ Benachrichtigungen funktionieren nur bei aktiver App oder im Hintergrund"}),e.jsx("p",{children:"‚Ä¢ √úberpr√ºfen Sie die iOS-Einstellungen f√ºr App-Benachrichtigungen"})]})]})]})})]})}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"üì±"}),"Push-Benachrichtigungen"]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-yellow-500 text-xl flex-shrink-0",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-1",children:"Nicht unterst√ºtzt"}),e.jsx("div",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:"Ihr Browser unterst√ºtzt keine Push-Benachrichtigungen. Verwenden Sie einen modernen Browser oder installieren Sie die App f√ºr Benachrichtigungen."})]})]})})]})})}function rt(){const[r,s]=S.useState({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}}),[a,t]=S.useState(!1),[l,c]=S.useState(!0);S.useEffect(()=>{b()},[]);const b=async()=>{try{c(!0),console.log("üîÑ [AdminTab] Loading managers from database...");const u=await Q.getManagers();if(console.log("üìä [AdminTab] Manager data result:",u),u&&u.data&&Array.isArray(u.data)&&u.data.length>=2){console.log("‚úÖ [AdminTab] Manager data loaded successfully:",u.data);const N=u.data.find(h=>h.id===1)||{name:"Alexander",gewicht:110,age:30},p=u.data.find(h=>h.id===2)||{name:"Philip",gewicht:105,age:30};console.log("üë§ [AdminTab] AEK Manager:",N),console.log("üë§ [AdminTab] Real Manager:",p),s({aek:{name:N.name,age:N.age||30,weight:N.gewicht},real:{name:p.name,age:p.age||30,weight:p.gewicht}})}else console.warn("‚ö†Ô∏è [AdminTab] No manager data found, using defaults. Result:",u),await g()}catch(u){console.error("‚ùå [AdminTab] Error loading manager settings from database:",u),await g()}finally{c(!1)}},g=async()=>{try{console.log("üîß [AdminTab] Initializing default managers...");const u={name:"Alexander",gewicht:110,age:30},N=await Q.insertManager(u);console.log("‚úÖ [AdminTab] AEK manager created:",N);const p={name:"Philip",gewicht:105,age:30},h=await Q.insertManager(p);console.log("‚úÖ [AdminTab] Real manager created:",h),s({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}})}catch(u){console.error("‚ùå [AdminTab] Error initializing managers:",u),s({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}})}},o=(u,N,p)=>{s(h=>({...h,[u]:{...h[u],[N]:N==="name"?p:parseInt(p)||0}})),t(!0)},m=async()=>{try{c(!0),console.log("üíæ [TeamSettings] Saving manager settings:",r);const u={name:r.aek.name,gewicht:r.aek.weight,age:r.aek.age},N={name:r.real.name,gewicht:r.real.weight,age:r.real.age};console.log("üíæ [TeamSettings] AEK Data:",u),console.log("üíæ [TeamSettings] Real Data:",N);const p=await Q.updateManager(1,u);console.log("üíæ [TeamSettings] AEK Update Result:",p);const h=await Q.updateManager(2,N);console.log("üíæ [TeamSettings] Real Update Result:",h),t(!1),window.dispatchEvent(new CustomEvent("managerSettingsChanged"));const D=document.createElement("div");D.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",D.textContent="Manager-Einstellungen gespeichert!",document.body.appendChild(D),setTimeout(()=>{document.body.contains(D)&&document.body.removeChild(D)},3e3)}catch(u){console.error("Error saving manager settings:",u);const N=document.createElement("div");N.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",N.textContent="Fehler beim Speichern!",document.body.appendChild(N),setTimeout(()=>{document.body.contains(N)&&document.body.removeChild(N)},3e3)}finally{c(!1)}},i=()=>{s({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}}),t(!0)};return e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx(et,{}),e.jsx(tt,{}),e.jsx(at,{}),l?e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-green"}),e.jsx("span",{className:"ml-2 text-text-muted",children:"Lade Manager-Einstellungen..."})]})}):e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"üèÜ Team-Manager Einstellungen"}),a&&e.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Ungespeicherte √Ñnderungen"})]}),e.jsx("div",{className:"text-sm text-text-muted mb-6",children:"Hier k√∂nnen Sie die Daten der Team-Manager f√ºr die BAK-Berechnung anpassen."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsxs("h4",{className:"font-medium text-blue-800 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded mr-2"}),"AEK Manager"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:r.aek.name,onChange:u=>o("aek","name",u.target.value),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Manager Name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alter"}),e.jsx("input",{type:"number",min:"18",max:"80",value:r.aek.age,onChange:u=>o("aek","age",u.target.value),onFocus:u=>u.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gewicht (kg)"}),e.jsx("input",{type:"number",min:"40",max:"200",value:r.aek.weight,onChange:u=>o("aek","weight",u.target.value),onFocus:u=>u.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 border border-red-200 rounded-lg bg-red-50",children:[e.jsxs("h4",{className:"font-medium text-red-800 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-red-600 rounded mr-2"}),"Real Manager"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:r.real.name,onChange:u=>o("real","name",u.target.value),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Manager Name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alter"}),e.jsx("input",{type:"number",min:"18",max:"80",value:r.real.age,onChange:u=>o("real","age",u.target.value),onFocus:u=>u.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gewicht (kg)"}),e.jsx("input",{type:"number",min:"40",max:"200",value:r.real.weight,onChange:u=>o("real","weight",u.target.value),onFocus:u=>u.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-border-light",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors",children:"Standardwerte wiederherstellen"}),e.jsx("button",{onClick:m,disabled:!a||l,className:`px-4 py-2 text-sm rounded-lg transition-colors ${a&&!l?"bg-primary-green text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l?"Speichern...":"Einstellungen speichern"})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Hinweis:"})," Diese Einstellungen werden f√ºr die BAK-Berechnung in der Statistik verwendet. Die Werte werden in der Datenbank gespeichert."]})})]})]})}function nt(){const[r,s]=S.useState(()=>{const m=localStorage.getItem("eventsTabEnabled");return m!==null?JSON.parse(m):!1}),[a,t]=S.useState({title:"",message:"",type:"general"}),[l,c]=S.useState(()=>{const m=localStorage.getItem("customEvents");return m?JSON.parse(m):[]}),b=m=>{s(m),localStorage.setItem("eventsTabEnabled",JSON.stringify(m)),setTimeout(()=>{window.location.reload()},500)},g=()=>{if(!a.title||!a.message){alert("Bitte Titel und Nachricht eingeben");return}O(a.type,{title:a.title,message:a.message,timestamp:new Date().toISOString(),custom:!0});const i=[{id:Date.now(),...a,timestamp:new Date().toISOString()},...l.slice(0,9)];c(i),localStorage.setItem("customEvents",JSON.stringify(i)),t({title:"",message:"",type:"general"}),alert("Benachrichtigung gesendet!")},o=[{value:"general",label:"üì¢ Allgemein",color:"bg-gray-500"},{value:"match-created",label:"‚öΩ Spiel erstellt",color:"bg-green-500"},{value:"player-ban",label:"üö´ Spieler gesperrt",color:"bg-red-500"},{value:"financial-milestone",label:"üí∞ Finanzmeilenstein",color:"bg-yellow-500"},{value:"achievement-unlocked",label:"üèÖ Achievement",color:"bg-purple-500"},{value:"system-update",label:"üîÑ System Update",color:"bg-blue-500"}];return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üéâ"}),"Events Tab Konfiguration"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-secondary rounded-lg border border-border-light",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:"Events Tab anzeigen"}),e.jsx("div",{className:"text-sm text-text-muted",children:"Zeigt den Events Tab in der Navigation an oder blendet ihn aus"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:m=>b(m.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Hinweis:"})," Der Events Tab ist standardm√§√üig ausgeblendet. Nach dem Aktivieren wird die Seite neu geladen um die Navigation zu aktualisieren."]})})]})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üöÄ"}),"Schnell-Tests f√ºr Push-Benachrichtigungen"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>O("match-result",{goalsa:3,goalsb:1,manofthematch:"Max M√ºller",date:new Date().toISOString()}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"‚öΩ"}),"Spielergebnis-Test"]}),e.jsxs("button",{onClick:()=>O("player-ban",{playerName:"Tom Schmidt",games:3}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üö´"}),"Spieler-Sperre"]}),e.jsxs("button",{onClick:()=>O("financial-milestone",{team:"AEK Athen",amount:250}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üí∞"}),"Finanzmeilenstein"]}),e.jsxs("button",{onClick:()=>O("achievement-unlocked",{name:"Torj√§ger",description:"10 Tore in einer Saison"}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üèÖ"}),"Achievement"]}),e.jsxs("button",{onClick:()=>O("system-update",{message:"Neue Funktionen verf√ºgbar!"}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üîÑ"}),"System-Update"]}),e.jsxs("button",{onClick:()=>{setTimeout(()=>O("match-created",{date:new Date().toISOString()}),0),setTimeout(()=>O("player-ban",{playerName:"Test Player",games:1}),300),setTimeout(()=>O("financial-milestone",{team:"Real Madrid",amount:100}),600)},className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üìö"}),"Mehrere Tests"]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Tipp:"})," Diese Buttons testen die neuen Push-Up Benachrichtigungen mit realistischen Daten und Animationen."]})})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üì¢"}),"Individuelle Push-Benachrichtigungen"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Nachrichtentyp"}),e.jsx("select",{value:a.type,onChange:m=>t(i=>({...i,type:m.target.value})),className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors",children:o.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Titel"}),e.jsx("input",{type:"text",value:a.title,onChange:m=>t(i=>({...i,title:m.target.value})),placeholder:"z.B. Neues Tournament startet",className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Nachricht"}),e.jsx("textarea",{value:a.message,onChange:m=>t(i=>({...i,message:m.target.value})),placeholder:"z.B. Das Weihnachts-Tournament beginnt morgen um 19:00 Uhr!",rows:3,className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors resize-none"})]}),e.jsxs("button",{onClick:g,disabled:!a.title||!a.message,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:"fas fa-paper-plane mr-2"}),"Benachrichtigung senden"]})]})]}),l.length>0&&e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üìã"}),"Gesendete Benachrichtigungen"]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:l.map(m=>{var i;return e.jsx("div",{className:"p-3 bg-bg-secondary rounded-lg border border-border-light",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-text-primary text-sm flex items-center",children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${((i=o.find(u=>u.value===m.type))==null?void 0:i.color)||"bg-gray-500"}`}),m.title]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:m.message}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:new Date(m.timestamp).toLocaleString("de-DE")})]})})},m.id)})}),l.length>=10&&e.jsx("div",{className:"text-xs text-text-muted mt-2 text-center",children:"Nur die letzten 10 Benachrichtigungen werden angezeigt"})]})]})}const lt=()=>{const[r,s]=S.useState(q());return S.useEffect(()=>{const a=t=>{s(t.detail.newSeason)};return window.addEventListener("seasonChanged",a),()=>window.removeEventListener("seasonChanged",a)},[]),{currentSeason:r,isLegacy:r===ie.LEGACY,isFC26:r===ie.FC26}},ve=()=>{const[r,s]=S.useState([]),[a,t]=S.useState(!1),{currentSeason:l}=lt();S.useEffect(()=>{const g=()=>{s($e())};g();const o=()=>{setTimeout(g,100)};return window.addEventListener("seasonChanged",o),window.addEventListener("legacyDataMigrated",o),window.addEventListener("fc26EnvironmentInitialized",o),()=>{window.removeEventListener("seasonChanged",o),window.removeEventListener("legacyDataMigrated",o),window.removeEventListener("fc26EnvironmentInitialized",o)}},[]);const c=async g=>{try{t(!0);const o=Ie(g);if(o){const m=new Blob([JSON.stringify(o,null,2)],{type:"application/json"}),i=URL.createObjectURL(m),u=document.createElement("a");u.href=i,u.download=`fifa-tracker-${g}-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(i),console.log(`Exported ${g} data successfully`)}else console.error("Failed to export season data")}catch(o){console.error("Error exporting season data:",o)}finally{t(!1)}},b=g=>{const o=["matches","players","bans","transactions","alcoholCalculator"],m={};return o.forEach(i=>{try{const u=`fifa_season_${g}_${i}`,N=localStorage.getItem(u);if(N){const p=JSON.parse(N);Array.isArray(p)?m[i]=p.length:typeof p=="object"&&(m[i]=1)}else m[i]=0}catch{m[i]=0}}),m};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl \r
                        flex items-center justify-center text-white text-xl font-bold`,children:"üìÖ"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Saison-Manager"}),e.jsx("p",{className:"text-gray-600",children:"Verwalten Sie Legacy- und FC26-Daten"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Aktuelle Saison"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:Te[l]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Alle Aktionen werden in dieser Saison gespeichert"})]}),e.jsx("div",{className:"text-4xl",children:l===ie.FC26?"‚ö°":"üìö"})]})}),e.jsx(Fe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Daten√ºbersicht pro Saison"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.map(g=>{const o=b(g.id),m=Object.values(o).reduce((i,u)=>i+u,0);return e.jsxs("div",{className:`p-6 rounded-xl border-2 ${g.isActive?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-xl",style:{backgroundColor:g.color+"20",color:g.color},children:g.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:g.name}),e.jsx("p",{className:"text-sm text-gray-600",children:g.description})]})]}),g.isActive&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"Aktiv"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Gesamt Eintr√§ge:"}),e.jsx("span",{className:"font-medium text-gray-800",children:m})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"‚öΩ Spiele:"}),e.jsx("span",{className:"font-medium",children:o.matches||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"üë• Spieler:"}),e.jsx("span",{className:"font-medium",children:o.players||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"üö´ Sperren:"}),e.jsx("span",{className:"font-medium",children:o.bans||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"üí∞ Transaktionen:"}),e.jsx("span",{className:"font-medium",children:o.transactions||0})]})]}),o.alcoholCalculator>0&&e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"üç∫ Alkohol-Tracker:"}),e.jsx("span",{className:"font-medium text-green-600",children:"Konfiguriert"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>c(g.id),disabled:!g.hasData||a,className:`flex-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 \r
                                 rounded-lg text-sm transition-colors disabled:opacity-50 \r
                                 disabled:cursor-not-allowed`,children:a?"Exportiert...":"üì• Export"}),g.hasData&&e.jsx("div",{className:"flex-1 px-3 py-2 text-center text-sm",children:e.jsx("span",{className:"text-green-600 font-medium",children:"‚úì Daten vorhanden"})})]})})]},g.id)})})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-amber-600 text-2xl",children:"üí°"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"FC26 Saison-System"}),e.jsxs("div",{className:"space-y-2 text-sm text-amber-700",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Legacy:"})," Alle bisherigen FIFA-Daten bleiben erhalten und zug√§nglich"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"FC26:"})," Neue Saison mit frischen Daten f√ºr FIFA Club 26"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Isolation:"})," Jede Saison hat separate Speicherbereiche"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Wechsel:"})," Beliebig zwischen Saisons wechseln m√∂glich"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Export:"})," Backup-Funktion f√ºr alle Saisondaten"]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Technische Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Speicher-System:"}),e.jsx("br",{}),"‚Ä¢ Lokaler Browser-Speicher",e.jsx("br",{}),"‚Ä¢ Automatische Datenmigration",e.jsx("br",{}),"‚Ä¢ Versionsverwaltung"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Datentypen:"}),e.jsx("br",{}),"‚Ä¢ Spiele und Ergebnisse",e.jsx("br",{}),"‚Ä¢ Spieler und Teams",e.jsx("br",{}),"‚Ä¢ Finanzen und Statistiken"]})]})]})]})},it=()=>{const[r,s]=S.useState([]),[a,t]=S.useState(""),[l,c]=S.useState(!1),[b,g]=S.useState({version:"",displayName:"",description:""}),[o,m]=S.useState(!1),i=()=>{const f=oe(),$=ue(),k=f.sort((x,w)=>{if(!x.isCustom&&w.isCustom)return-1;if(x.isCustom&&!w.isCustom)return 1;if(!x.isCustom&&!w.isCustom)return x.id==="FC25"?-1:w.id==="FC25"?1:0;const n=new Date(x.createdAt||0);return new Date(w.createdAt||0)-n});s(k),t($)};S.useEffect(()=>{i();const f=()=>{i()};return window.addEventListener("fifaVersionChanged",f),window.addEventListener("fifaVersionAdded",f),window.addEventListener("fifaVersionRemoved",f),()=>{window.removeEventListener("fifaVersionChanged",f),window.removeEventListener("fifaVersionAdded",f),window.removeEventListener("fifaVersionRemoved",f)}},[]);const u=async f=>{f.preventDefault(),m(!0);try{const{version:$,displayName:k,description:x}=b;if(!$.trim())throw new Error("Version identifier ist erforderlich");const w=$.trim().toUpperCase();if(!/^[A-Za-z]+\d*$/.test(w))throw new Error("Version Format ung√ºltig. Verwenden Sie Formate wie FC27, EA25, etc.");const n={displayName:k.trim()||w,description:x.trim()||`Custom FIFA Version ${w}`,createdAt:new Date().toISOString(),createdBy:"admin"};await Me(w,n),g({version:"",displayName:"",description:""}),c(!1),M.success(`FIFA Version ${w} erfolgreich hinzugef√ºgt!`)}catch($){M.error($.message)}finally{m(!1)}},N=async f=>{if(window.confirm(`Sind Sie sicher, dass Sie Version "${f}" l√∂schen m√∂chten?`))try{await Be(f),M.success(`Version ${f} erfolgreich entfernt!`)}catch($){M.error($.message)}},p=async f=>{try{ze(f),M.success(`Zu Version ${X(f)} gewechselt!`),setTimeout(()=>{window.location.reload()},1e3)}catch($){M.error(`Fehler beim Wechseln der Version: ${$.message}`)}},h=f=>f.isLegacy?"bg-gray-100 text-gray-700":f.isCurrent?"bg-blue-100 text-blue-700":f.isCustom?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700",D=f=>f.isLegacy?"Legacy":f.isCurrent?"Standard":f.isCustom?"Custom":"Standard";return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-600 rounded-xl \r
                          flex items-center justify-center text-white text-xl font-bold`,children:"üéÆ"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"FIFA Versionen-Manager"}),e.jsx("p",{className:"text-gray-600",children:"Verwalten und erstellen Sie FIFA Versionen f√ºr zukunftssichere Datenorganisation"})]})]}),e.jsxs("button",{onClick:()=>c(!l),className:`px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg \r
                     transition-colors flex items-center gap-2`,children:[e.jsx("span",{className:"text-lg",children:"+"}),"Neue Version"]})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Aktuelle FIFA Version"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:a}),e.jsxs("p",{className:"text-lg text-gray-600",children:["(",X(a),")"]})]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Alle neuen Daten werden in dieser Version gespeichert"})]}),e.jsx("div",{className:"text-4xl",children:"üéÆ"})]})}),l&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Neue FIFA Version hinzuf√ºgen"}),e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Version Identifier *"}),e.jsx("input",{type:"text",value:b.version,onChange:f=>g($=>({...$,version:f.target.value})),placeholder:"z.B. FC27, EA25, FIFA28",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 \r
                           focus:ring-purple-500 focus:border-purple-500`,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: Buchstaben gefolgt von optionalen Zahlen (FC27, EA25, etc.)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Anzeigename"}),e.jsx("input",{type:"text",value:b.displayName,onChange:f=>g($=>({...$,displayName:f.target.value})),placeholder:"z.B. FIFA Club 27",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 \r
                           focus:ring-purple-500 focus:border-purple-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Beschreibung"}),e.jsx("textarea",{value:b.description,onChange:f=>g($=>({...$,description:f.target.value})),placeholder:"Beschreibung der neuen Version...",rows:3,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 \r
                         focus:ring-purple-500 focus:border-purple-500`})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:o,className:`px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg \r
                         transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:o?"Wird hinzugef√ºgt...":"Version hinzuf√ºgen"}),e.jsx("button",{type:"button",onClick:()=>c(!1),className:`px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg \r
                         transition-colors`,children:"Abbrechen"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Verf√ºgbare FIFA Versionen"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:r.map(f=>{var $;return e.jsxs("div",{className:`p-6 rounded-xl border-2 ${f.isActive?"border-purple-500 bg-purple-50":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-800",children:f.id}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",f.name,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${h(f)}`,children:D(f)}),f.isActive&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"Aktiv"})]})]})}),e.jsx("div",{className:"text-2xl",children:f.isLegacy?"üìö":f.isCurrent?"‚ö°":"üéÆ"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:f.description||(($=f.metadata)==null?void 0:$.description)||"Keine Beschreibung verf√ºgbar"}),f.createdAt&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Erstellt: ",new Date(f.createdAt).toLocaleDateString("de-DE")]})]}),e.jsxs("div",{className:"flex gap-2",children:[!f.isActive&&e.jsx("button",{onClick:()=>p(f.id),className:`flex-1 px-3 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 \r
                             rounded-lg text-sm transition-colors`,children:"Aktivieren"}),f.isCustom&&e.jsx("button",{onClick:()=>N(f.id),disabled:f.isActive,className:`px-3 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg \r
                             text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:"L√∂schen"}),f.isActive&&e.jsx("div",{className:"flex-1 px-3 py-2 text-center text-sm",children:e.jsx("span",{className:"text-green-600 font-medium",children:"‚úì Aktive Version"})})]})]},f.id)})})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-amber-600 text-2xl",children:"üí°"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"FIFA Versionen-System"}),e.jsxs("div",{className:"space-y-2 text-sm text-amber-700",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Built-in Versionen:"})," FC25 (Legacy) und FC26 (Standard) sind vorinstalliert"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Custom Versionen:"})," Erstellen Sie eigene Versionen f√ºr zuk√ºnftige FIFA-Editionen"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Datenisolation:"})," Jede Version hat separate Datenbanken"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Zukunftssicher:"})," System ist bereit f√ºr FC27, FC28 und weitere Versionen"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Flexibilit√§t:"})," Wechseln Sie beliebig zwischen Versionen"]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Technische Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Version-Management:"}),e.jsx("br",{}),"‚Ä¢ Dynamisches Hinzuf√ºgen neuer Versionen",e.jsx("br",{}),"‚Ä¢ Automatische Datenbankfilterung",e.jsx("br",{}),"‚Ä¢ Metadaten-Unterst√ºtzung"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Datenformat:"}),e.jsx("br",{}),"‚Ä¢ Version Identifier (FC27, EA25, etc.)",e.jsx("br",{}),"‚Ä¢ Anzeigename und Beschreibung",e.jsx("br",{}),"‚Ä¢ Erstellungsdatum und Metadaten"]})]})]})]})},ot=()=>{const[r,s]=S.useState(""),[a,t]=S.useState([]),[l,c]=S.useState({}),[b,g]=S.useState(""),[o,m]=S.useState(!1),[i,u]=S.useState(!1),[N,p]=S.useState(!1),[h,D]=S.useState("");S.useEffect(()=>(()=>{f();const I=()=>{f()},R=()=>{b&&$(b)};return window.addEventListener("fifaVersionChanged",I),window.addEventListener("versionTeamsChanged",R),()=>{window.removeEventListener("fifaVersionChanged",I),window.removeEventListener("versionTeamsChanged",R)}})(),[b]);const f=()=>{const v=ue(),I=oe();s(v),t(I),b||(g(v),$(v))},$=v=>{const I=Pe(v);c(I),u(!1)},k=v=>{i&&!window.confirm("Sie haben ungespeicherte √Ñnderungen. M√∂chten Sie trotzdem die Version wechseln?")||(g(v),$(v))},x=(v,I,R)=>{c(A=>({...A,[v]:{...A[v],[I]:R}})),u(!0)},w=async(v,I)=>{if(I){if(!I.type.startsWith("image/")){M.error("Bitte w√§hlen Sie eine Bilddatei aus");return}if(I.size>2*1024*1024){M.error("Bild zu gro√ü. Maximum 2MB erlaubt.");return}try{m(!0),await Ke(v,I,b)?(M.success("Icon erfolgreich hochgeladen"),$(b)):M.error("Fehler beim Hochladen des Icons")}catch(R){console.error("Error uploading icon:",R),M.error("Fehler beim Hochladen des Icons")}finally{m(!1)}}},n=async v=>{try{m(!0),await Ge(v,b)?(M.success("Icon entfernt"),$(b)):M.error("Fehler beim Entfernen des Icons")}catch(I){console.error("Error removing icon:",I),M.error("Fehler beim Entfernen des Icons")}finally{m(!1)}},d=async()=>{try{m(!0),Oe(l,b)?(M.success("Team-Einstellungen gespeichert"),u(!1)):M.error("Fehler beim Speichern")}catch(v){console.error("Error saving teams:",v),M.error("Fehler beim Speichern")}finally{m(!1)}},y=async()=>{if(!h){M.error("Bitte w√§hlen Sie eine Quell-Version aus");return}try{m(!0),_e(h,b)?(M.success(`Team-Einstellungen von ${X(h)} kopiert`),$(b),p(!1),D("")):M.error("Fehler beim Kopieren")}catch(v){console.error("Error copying teams:",v),M.error("Fehler beim Kopieren")}finally{m(!1)}},E=async()=>{if(window.confirm("M√∂chten Sie die Team-Einstellungen f√ºr diese Version auf die Standardwerte zur√ºcksetzen?"))try{m(!0),Re(b)?(M.success("Team-Einstellungen zur√ºckgesetzt"),$(b)):M.error("Fehler beim Zur√ºcksetzen")}catch(I){console.error("Error resetting teams:",I),M.error("Fehler beim Zur√ºcksetzen")}finally{m(!1)}};return e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Versions-spezifische Team-Einstellungen"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Konfigurieren Sie Team-Namen und Icons f√ºr verschiedene FIFA Versionen"})]}),e.jsx("div",{className:"text-4xl",children:"‚öΩ"})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Version ausw√§hlen"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:a.map(v=>e.jsxs("button",{onClick:()=>k(v.id),className:`p-4 rounded-lg border-2 transition-all ${b===v.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[e.jsx("div",{className:"text-sm font-semibold",children:v.id}),e.jsx("div",{className:"text-xs mt-1",children:v.name}),v.id===r&&e.jsx("div",{className:"text-xs text-green-600 font-medium mt-1",children:"Aktiv"})]},v.id))})]}),b&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-800",children:["Team-Konfiguration f√ºr ",X(b)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>p(!0),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Kopieren von..."}),e.jsx("button",{onClick:E,className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Zur√ºcksetzen"})]})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(l).map(([v,I])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg border-2 border-gray-200 flex items-center justify-center overflow-hidden",children:I.customIcon?e.jsx("img",{src:I.customIcon,alt:I.label,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-2xl",children:I.icon==="aek"?"üîµ":I.icon==="real"?"üî¥":I.icon})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-800",children:v}),e.jsx("p",{className:"text-sm text-gray-600",children:I.label})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team-Name"}),e.jsx("input",{type:"text",value:I.label,onChange:R=>x(v,"label",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Team-Name eingeben"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Farbe"}),e.jsxs("select",{value:I.color,onChange:R=>x(v,"color",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"blue",children:"Blau"}),e.jsx("option",{value:"red",children:"Rot"}),e.jsx("option",{value:"green",children:"Gr√ºn"}),e.jsx("option",{value:"yellow",children:"Gelb"}),e.jsx("option",{value:"purple",children:"Lila"}),e.jsx("option",{value:"orange",children:"Orange"}),e.jsx("option",{value:"gray",children:"Grau"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon hochladen"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:R=>w(v,R.target.files[0]),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),I.customIcon&&e.jsx("button",{onClick:()=>n(v),className:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Entfernen"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximale Dateigr√∂√üe: 2MB. Unterst√ºtzte Formate: JPG, PNG, GIF"})]})]})]},v))}),i&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsx("button",{onClick:d,disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?"Speichern...":"√Ñnderungen speichern"})})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Team-Einstellungen kopieren"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Von welcher Version m√∂chten Sie die Team-Einstellungen kopieren?"}),e.jsxs("select",{value:h,onChange:v=>D(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Version ausw√§hlen..."}),a.filter(v=>v.id!==b).map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{p(!1),D("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Abbrechen"}),e.jsx("button",{onClick:y,disabled:!h||o,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Kopieren"})]})]})})]})},ct=["alcoholCalculatorValues","fifa_matches","fifa_players","fifa_bans","fifa_transactions","fifa_finances"],dt=["matches","players","bans","transactions","finances","alcoholCalculator"],ke=()=>{try{const r={};let s=!1;return ct.forEach(a=>{const t=localStorage.getItem(a);if(t&&t!=="[]"&&t!=="{}")try{r[a]=JSON.parse(t),s=!0}catch{r[a]=t,s=!0}}),s?r:null}catch(r){return console.error("Error getting legacy data:",r),null}},Ee=r=>{try{const s={};let a=!1;return dt.forEach(t=>{const l=`fifa_${r}_${t}`,c=localStorage.getItem(l);if(c&&c!=="[]"&&c!=="{}")try{s[t]=JSON.parse(c),a=!0}catch{s[t]=c,a=!0}}),a?s:null}catch(s){return console.error(`Error getting data for version ${r}:`,s),null}},mt=()=>{try{const r=ke();if(!r)throw new Error("Keine Legacy-Daten gefunden");const s={exportType:"legacy",exportDate:new Date().toISOString(),appVersion:"1.0.0",data:r,metadata:{recordCount:Ce(r),description:"Legacy Datenexport vor FIFA Versioning System"}};return Ae(s,`legacy-data-export-${new Date().toISOString().slice(0,10)}.json`),!0}catch(r){throw console.error("Error exporting legacy data:",r),r}},ut=r=>{try{const s=Ee(r);if(!s)throw new Error(`Keine Daten f√ºr Version ${r} gefunden`);const a={exportType:"version",version:r,exportDate:new Date().toISOString(),appVersion:"1.0.0",data:s,metadata:{recordCount:Ce(s),description:`Datenexport f√ºr FIFA Version ${r}`}};return Ae(a,`${r}-data-export-${new Date().toISOString().slice(0,10)}.json`),!0}catch(s){throw console.error(`Error exporting data for version ${r}:`,s),s}},xt=(r,s,a=!1)=>{try{const t=r==="legacy"?"fifa_transactions":`fifa_${r}_transactions`,l=r==="legacy"?"fifa_finances":`fifa_${r}_finances`,c=localStorage.getItem(t),b=localStorage.getItem(l);if(!c&&!b)throw new Error(`Keine Finanzdaten in Version ${r} gefunden`);const g=s==="legacy"?"fifa_transactions":`fifa_${s}_transactions`,o=s==="legacy"?"fifa_finances":`fifa_${s}_finances`,m=localStorage.getItem(g),i=localStorage.getItem(o);if((m||i)&&!a)throw new Error(`Version ${s} enth√§lt bereits Finanzdaten. Verwenden Sie '√úberschreiben' Option.`);return c&&localStorage.setItem(g,c),b&&localStorage.setItem(o,b),window.dispatchEvent(new CustomEvent("financialDataCopied",{detail:{fromVersion:r,toVersion:s,timestamp:new Date().toISOString()}})),!0}catch(t){throw console.error("Error copying financial data:",t),t}},ht=()=>{try{const r=[],s=localStorage.getItem("fifa_transactions"),a=localStorage.getItem("fifa_finances");(s||a)&&r.push({id:"legacy",name:"Legacy Daten",hasTransactions:!!s,hasFinances:!!a});const t=Ve();return Object.keys(t).forEach(l=>{const c=`fifa_${l}_transactions`,b=`fifa_${l}_finances`,g=!!localStorage.getItem(c),o=!!localStorage.getItem(b);(g||o)&&r.push({id:l,name:`${l} (${t[l]})`,hasTransactions:g,hasFinances:o})}),r}catch(r){return console.error("Error getting versions with financial data:",r),[]}},Ce=r=>{let s=0;return Object.values(r).forEach(a=>{Array.isArray(a)?s+=a.length:typeof a=="object"&&a!==null?s+=Object.keys(a).length:s+=1}),s},Ae=(r,s)=>{const a=JSON.stringify(r,null,2),t=new Blob([a],{type:"application/json"}),l=URL.createObjectURL(t),c=document.createElement("a");c.href=l,c.download=s,c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l)},gt=async(r,s)=>{try{const a=await pt(r),t=JSON.parse(a);if(!t.data||!t.exportType)throw new Error("Ung√ºltiges Datenformat");const{data:l,exportType:c}=t;return c==="legacy"?Object.entries(l).forEach(([b,g])=>{const o=bt(b);if(o){const m=`fifa_${s}_${o}`;localStorage.setItem(m,JSON.stringify(g))}}):c==="version"&&Object.entries(l).forEach(([b,g])=>{const o=`fifa_${s}_${b}`;localStorage.setItem(o,JSON.stringify(g))}),!0}catch(a){throw console.error("Error importing data:",a),a}},bt=r=>({fifa_matches:"matches",fifa_players:"players",fifa_bans:"bans",fifa_transactions:"transactions",fifa_finances:"finances",alcoholCalculatorValues:"alcoholCalculator"})[r]||null,pt=r=>new Promise((s,a)=>{const t=new FileReader;t.onload=()=>s(t.result),t.onerror=a,t.readAsText(r)}),ft=()=>{const[r,s]=S.useState([]),[a,t]=S.useState([]),[l,c]=S.useState(!1),[b,g]=S.useState(!1),[o,m]=S.useState(!1),[i,u]=S.useState(""),[N,p]=S.useState(""),[h,D]=S.useState(!1),[f,$]=S.useState(null),[k,x]=S.useState(""),[w,n]=S.useState({});S.useEffect(()=>(()=>{d();const V=()=>{d()};return window.addEventListener("financialDataCopied",V),window.addEventListener("fifaVersionChanged",V),()=>{window.removeEventListener("financialDataCopied",V),window.removeEventListener("fifaVersionChanged",V)}})(),[]);const d=()=>{const A=oe(),V=ht(),G=ue();s(A),t(V),N||p(G),k||x(G),y()},y=()=>{var U,W,J;const A={},V=ke();V&&(A.legacy={matches:((U=V.fifa_matches)==null?void 0:U.length)||0,players:((W=V.fifa_players)==null?void 0:W.length)||0,transactions:((J=V.fifa_transactions)==null?void 0:J.length)||0,hasData:!0}),oe().forEach(Y=>{var te,se,ae;const H=Ee(Y.id);H&&(A[Y.id]={matches:((te=H.matches)==null?void 0:te.length)||0,players:((se=H.players)==null?void 0:se.length)||0,transactions:((ae=H.transactions)==null?void 0:ae.length)||0,hasData:!0})}),n(A)},E=async()=>{try{c(!0),await mt(),M.success("Legacy-Daten erfolgreich exportiert")}catch(A){console.error("Error exporting legacy data:",A),M.error(`Fehler beim Export: ${A.message}`)}finally{c(!1)}},v=async A=>{try{c(!0),await ut(A),M.success(`Daten f√ºr ${X(A)} erfolgreich exportiert`)}catch(V){console.error(`Error exporting version ${A}:`,V),M.error(`Fehler beim Export: ${V.message}`)}finally{c(!1)}},I=async()=>{if(!i||!N){M.error("Bitte w√§hlen Sie Quell- und Ziel-Version aus");return}if(i===N){M.error("Quell- und Ziel-Version m√ºssen unterschiedlich sein");return}try{c(!0),await xt(i,N,h),M.success(`Finanzdaten von ${i} nach ${N} kopiert`),g(!1),d()}catch(A){console.error("Error copying financial data:",A),M.error(`Fehler beim Kopieren: ${A.message}`)}finally{c(!1)}},R=async()=>{if(!f||!k){M.error("Bitte w√§hlen Sie eine Datei und Ziel-Version aus");return}try{c(!0),await gt(f,k),M.success(`Daten erfolgreich in ${k} importiert`),m(!1),$(null),d()}catch(A){console.error("Error importing data:",A),M.error(`Fehler beim Import: ${A.message}`)}finally{c(!1)}};return e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-6 border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Daten Export & Import"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Legacy-Daten downloaden und Finanzdaten zwischen Versionen kopieren"})]}),e.jsx("div",{className:"text-4xl",children:"üìä"})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Daten√ºbersicht"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[w.legacy&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-amber-800 mb-2",children:"Legacy Daten"}),e.jsxs("div",{className:"space-y-1 text-sm text-amber-700",children:[e.jsxs("div",{children:["Matches: ",w.legacy.matches]}),e.jsxs("div",{children:["Spieler: ",w.legacy.players]}),e.jsxs("div",{children:["Transaktionen: ",w.legacy.transactions]})]})]}),r.map(A=>w[A.id]&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:A.name}),e.jsxs("div",{className:"space-y-1 text-sm text-blue-700",children:[e.jsxs("div",{children:["Matches: ",w[A.id].matches]}),e.jsxs("div",{children:["Spieler: ",w[A.id].players]}),e.jsxs("div",{children:["Transaktionen: ",w[A.id].transactions]})]})]},A.id))]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Daten exportieren"}),e.jsxs("div",{className:"space-y-4",children:[w.legacy&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-amber-800",children:"Legacy Daten"}),e.jsx("p",{className:"text-sm text-amber-600",children:"Urspr√ºngliche Daten vor dem Versioning-System"})]}),e.jsx("button",{onClick:E,disabled:l,className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Exportiere...":"Download"})]}),r.map(A=>w[A.id]&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-blue-800",children:A.name}),e.jsx("p",{className:"text-sm text-blue-600",children:"Versionsspezifische Daten"})]}),e.jsx("button",{onClick:()=>v(A.id),disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Exportiere...":"Download"})]},A.id))]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:"Finanzdaten kopieren"}),e.jsx("button",{onClick:()=>g(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Finanzen kopieren"})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsx("p",{className:"text-green-800 text-sm",children:"Kopieren Sie Transaktionen und Finanzst√§nde zwischen verschiedenen FIFA Versionen. Dies ist n√ºtzlich beim Wechsel zwischen Versionen oder beim √úbertragen historischer Daten."})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:"Daten importieren"}),e.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Daten importieren"})]}),e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsx("p",{className:"text-purple-800 text-sm",children:"Importieren Sie zuvor exportierte Daten in eine bestimmte FIFA Version. Unterst√ºtzt sowohl Legacy- als auch Versionsdatenformate."})})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Finanzdaten kopieren"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Von Version"}),e.jsxs("select",{value:i,onChange:A=>u(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Version ausw√§hlen..."}),a.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zu Version"}),e.jsxs("select",{value:N,onChange:A=>p(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Version ausw√§hlen..."}),r.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"overwrite",checked:h,onChange:A=>D(A.target.checked),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"overwrite",className:"ml-2 text-sm text-gray-700",children:"Bestehende Daten √ºberschreiben"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Abbrechen"}),e.jsx("button",{onClick:I,disabled:!i||!N||l,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Kopiere...":"Kopieren"})]})]})}),o&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Daten importieren"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Datei ausw√§hlen"}),e.jsx("input",{type:"file",accept:".json",onChange:A=>$(A.target.files[0]),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ziel-Version"}),e.jsxs("select",{value:k,onChange:A=>x(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[e.jsx("option",{value:"",children:"Version ausw√§hlen..."}),r.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{m(!1),$(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Abbrechen"}),e.jsx("button",{onClick:R,disabled:!f||!k||l,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Importiere...":"Importieren"})]})]})})]})},yt=()=>{const[r,s]=S.useState("season"),a=[{id:"season",label:"Saison-Manager",icon:"fas fa-calendar-alt",description:"Verwalten Sie Legacy- und FC26-Daten"},{id:"fifa-versions",label:"FIFA Versionen",icon:"fas fa-gamepad",description:"Verwalten und erstellen Sie FIFA Versionen"},{id:"version-teams",label:"Versions-Teams",icon:"fas fa-users-cog",description:"Konfigurieren Sie Team-Namen und Icons pro Version"},{id:"data-export",label:"Daten-Export",icon:"fas fa-download",description:"Legacy-Daten exportieren und Finanzen kopieren"}],t=()=>{switch(r){case"season":return e.jsx(ve,{});case"fifa-versions":return e.jsx(it,{});case"version-teams":return e.jsx(ot,{});case"data-export":return e.jsx(ft,{});default:return e.jsx(ve,{})}};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl \r
                          flex items-center justify-center text-white text-xl font-bold`,children:"‚öôÔ∏è"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"System-Manager"}),e.jsx("p",{className:"text-gray-600",children:"Zentrale Verwaltung f√ºr Saisons, FIFA Versionen und Teams"})]})]}),e.jsx("div",{className:"flex space-x-1 bg-white rounded-lg p-1 shadow-sm overflow-x-auto",children:a.map(l=>e.jsxs("button",{onClick:()=>s(l.id),className:`flex-shrink-0 flex items-center justify-center gap-2 px-3 py-2 rounded-md text-xs sm:text-sm font-medium transition-all duration-200 ${r===l.id?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,title:l.description,children:[e.jsx("i",{className:l.icon}),e.jsx("span",{className:"hidden sm:inline whitespace-nowrap",children:l.label})]},l.id))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:t()})]})};function St({onLogout:r,onNavigate:s,showHints:a=!1}){const[t,l]=S.useState("search"),c=[{id:"search",label:"",icon:"fas fa-search"},{id:"matches",label:"Spiele hinzuf√ºgen",icon:"fas fa-futbol"},{id:"bans",label:"Sperren hinzuf√ºgen",icon:"fas fa-ban"},{id:"players",label:"Spieler hinzuf√ºgen",icon:"fas fa-users"},{id:"transactions",label:"Transaktionen hinzuf√ºgen",icon:"fas fa-euro-sign"},{id:"settings",label:"Team-Einstellungen",icon:"fas fa-cog"},{id:"events",label:"Events & Benachrichtigungen",icon:"fas fa-bell"},{id:"delete",label:"Daten l√∂schen",icon:"fas fa-trash"},{id:"manager",label:"System-Manager",icon:"fas fa-tools"}],b=()=>{switch(t){case"search":return e.jsx(je,{onNavigate:s});case"matches":return e.jsx(qe,{});case"bans":return e.jsx(We,{});case"players":return e.jsx(Je,{});case"transactions":return e.jsx(Ye,{});case"settings":return e.jsx(rt,{});case"events":return e.jsx(nt,{});case"delete":return e.jsx(Qe,{});case"manager":return e.jsx(yt,{});default:return e.jsx(je,{onNavigate:s})}};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 bg-bg-secondary border-b border-border-light flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-1",children:"Verwaltung"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Hinzuf√ºgen und verwalten von Daten"})]}),e.jsxs("button",{onClick:r,className:"flex items-center px-3 py-2 bg-accent-red text-white rounded-lg hover:bg-red-600 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50","aria-label":"Abmelden",children:[e.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),e.jsx("span",{className:"text-sm",children:"Logout"})]})]}),e.jsx("div",{className:"bg-bg-secondary border-b border-border-light",children:e.jsx("div",{className:"flex overflow-x-auto",children:c.map(g=>e.jsxs("button",{onClick:()=>l(g.id),className:`flex-shrink-0 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${t===g.id?"text-primary-green border-b-2 border-primary-green bg-bg-primary":"text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,title:g.id==="search"?"Globale Suche":g.label,"aria-label":g.id==="search"?"Globale Suche":g.label,children:[e.jsx("i",{className:`${g.icon} ${g.label?"mr-2":""}`}),g.label]},g.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:b()})]})}export{St as default};
