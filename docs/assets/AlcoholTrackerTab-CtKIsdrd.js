import{r as k,j as e}from"./main-B7Bp0tSy.js";import{d as se}from"./dataManager-vPjGDfZQ.js";const ae=({managers:C,beerConsumption:B,shotConsumption:N,drinkingStartTime:w})=>{var L,V,J,U;const[c,H]=k.useState(!1),[r,O]=k.useState([]),[l,K]=k.useState([]),x=k.useRef(null),D=(i,m,o,g,y)=>{if(!o.weight||i===0&&(!m||m.shots20===0&&m.shots40===0))return 0;const j=i*25*.789;let p=0;m&&(p=m.shots20*20*.2*.789+m.shots40*20*.4*.789);const b=j+p,v=o.gender==="male"?.7:.6;let R=b/(v*o.weight);if(g&&y){const A=new Date(g),G=(new Date(y)-A)/(1e3*60*60)*.15;R=Math.max(0,R-G)}return R};k.useEffect(()=>{if(!w)return;const i=localStorage.getItem("drinkEvents");if(i)try{K(JSON.parse(i))}catch(m){console.error("Error loading drink events:",m)}},[w]),k.useEffect(()=>{if(!w)return;const i=B.alexander+N.alexander.shots20+N.alexander.shots40,m=B.philip+N.philip.shots20+N.philip.shots40,o=l[l.length-1],g=new Date().toISOString();if(!o||o.alexanderTotal!==i||o.philipTotal!==m){const y={timestamp:g,alexanderTotal:i,philipTotal:m,alexanderChange:o?i-o.alexanderTotal:i,philipChange:o?m-o.philipTotal:m,beers:{alexander:B.alexander,philip:B.philip},shots:{alexander:N.alexander,philip:N.philip}},j=[...l,y];K(j),localStorage.setItem("drinkEvents",JSON.stringify(j))}},[B,N,w,l]),k.useEffect(()=>{if(!w){O([]);return}const i=()=>{const m=new Date(w),o=new Date,g=[],y=5,j=Math.ceil((o-m)/(1e3*60)),p=Math.min(Math.ceil(j/y),144);for(let b=0;b<=p;b++){const v=new Date(m.getTime()+b*y*60*1e3),R=D(B.alexander,N.alexander,{weight:C.aek.weight,gender:"male"},w,v.toISOString()),A=D(B.philip,N.philip,{weight:C.real.weight,gender:"male"},w,v.toISOString());g.push({time:v,timeLabel:v.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}),alexander:R,philip:A})}O(g)};return i(),x.current=setInterval(i,6e4),()=>{x.current&&clearInterval(x.current)}},[w,B,N,C]);const E=Math.max(...r.map(i=>Math.max(i.alexander,i.philip)),1),s=i=>i>=1?"text-red-500":i>=.5?"text-orange-500":i>=.3?"text-yellow-500":"text-green-500",z=()=>{const i=window.innerWidth<768,m=i?Math.min(window.innerWidth-32,450):900,o=i?280:400,g=i?{top:35,right:45,bottom:55,left:45}:{top:40,right:100,bottom:60,left:60},y=m-g.left-g.right,j=o-g.top-g.bottom;if(r.length===0)return e.jsx("div",{className:"flex items-center justify-center bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",style:{width:`${m}px`,height:`${o}px`},children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📊"}),e.jsx("p",{children:"Keine Daten zum Anzeigen"}),e.jsx("p",{className:"text-sm",children:"Trinken starten, um den Verlauf zu sehen"})]})});const p=a=>a/(r.length-1)*y,b=a=>j-a/E*j,v=(a,d)=>{if(a.length===0)return"";const u=a.map((f,S)=>({x:p(S),y:b(d(f))}));let h=`M ${u[0].x} ${u[0].y}`;for(let f=1;f<u.length;f++){const S=u[f-1],M=u[f],P=S.x+(M.x-S.x)*.4,T=S.y,I=M.x-(M.x-S.x)*.4,W=M.y;h+=` C ${P} ${T}, ${I} ${W}, ${M.x} ${M.y}`}return h},R=v(r,a=>a.alexander),A=v(r,a=>a.philip),$=[];[.3,.5,1,1.5,2].forEach(a=>{a<=E&&$.push(e.jsxs("g",{children:[e.jsx("line",{x1:0,y1:b(a),x2:y,y2:b(a),stroke:a===.5?"#f59e0b":a===1?"#ef4444":"#e5e7eb",strokeWidth:a===.5||a===1?2:1,strokeDasharray:a===.5||a===1?"5,5":"none"}),e.jsxs("text",{x:-10,y:b(a)+4,textAnchor:"end",fontSize:"12",fill:a===.5?"#d97706":a===1?"#dc2626":"#6b7280",className:"font-medium",children:[a.toFixed(1),"‰"]})]},a))});const G=[],t=new Date(w);r.forEach((a,d)=>{(a.time-t)/6e4%60===0&&d<r.length-1&&G.push(e.jsxs("g",{children:[e.jsx("line",{x1:p(d),y1:0,x2:p(d),y2:j,stroke:"#d1d5db",strokeWidth:"1",strokeDasharray:"3,3"}),e.jsx("text",{x:p(d),y:j+20,textAnchor:"middle",fontSize:"11",fill:"#6b7280",children:a.timeLabel})]},d))});const n=l.map((a,d)=>{var M,P,T,I,W,X,Y,_;const u=new Date(a.timestamp),h=new Date(w),f=(u-h)/(1e3*60),S=Math.round(f/5);if(S>=0&&S<r.length){const Z=p(S),ee=a.alexanderChange>0&&a.beers||a.philipChange>0&&a.beers,te=((P=(M=a.shots)==null?void 0:M.alexander)==null?void 0:P.shots20)>0||((I=(T=a.shots)==null?void 0:T.alexander)==null?void 0:I.shots40)>0||((X=(W=a.shots)==null?void 0:W.philip)==null?void 0:X.shots20)>0||((_=(Y=a.shots)==null?void 0:Y.philip)==null?void 0:_.shots40)>0;let Q="🍺",q="#8b5cf6";return te&&!ee?(Q="🥃",q="#f59e0b"):te&&ee&&(Q="🍻",q="#10b981"),e.jsxs("g",{children:[e.jsx("line",{x1:Z,y1:0,x2:Z,y2:j,stroke:q,strokeWidth:i?"1.5":"2",strokeDasharray:"4,2",opacity:"0.7"}),e.jsx("circle",{cx:Z,cy:-15,r:i?"8":"10",fill:q,stroke:"white",strokeWidth:i?"2":"3",style:{filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))"}}),e.jsx("text",{x:Z,y:i?"-10":"-7",textAnchor:"middle",fontSize:i?"11":"13",fill:"white",className:"font-bold",style:{filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5))"},children:Q})]},d)}return null});return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-3 md:p-4 overflow-x-auto",children:[e.jsxs("svg",{width:m,height:o,className:"overflow-visible mx-auto block",viewBox:i?`0 0 ${m} ${o}`:void 0,style:i?{maxWidth:"100%",height:"auto"}:{},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"backgroundGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#f8fafc"}),e.jsx("stop",{offset:"100%",stopColor:"#f1f5f9"})]}),e.jsxs("filter",{id:"alexanderGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"philipGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("rect",{x:g.left,y:g.top,width:y,height:j,fill:"url(#backgroundGradient)",rx:"8"}),e.jsxs("g",{transform:`translate(${g.left}, ${g.top})`,children:[$,G,e.jsxs("defs",{children:[e.jsxs("pattern",{id:"warningZone",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:[e.jsx("rect",{width:"4",height:"4",fill:"#fef3c7"}),e.jsx("path",{d:"M 0,2 L 2,0 M 2,4 L 4,2",stroke:"#f59e0b",strokeWidth:"0.3"})]}),e.jsxs("pattern",{id:"dangerZone",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:[e.jsx("rect",{width:"4",height:"4",fill:"#fee2e2"}),e.jsx("path",{d:"M 0,2 L 2,0 M 2,4 L 4,2",stroke:"#ef4444",strokeWidth:"0.3"})]})]}),E>.5&&e.jsx("rect",{x:0,y:b(Math.min(1,E)),width:y,height:b(.5)-b(Math.min(1,E)),fill:"url(#warningZone)",opacity:"0.4"}),E>1&&e.jsx("rect",{x:0,y:0,width:y,height:b(1),fill:"url(#dangerZone)",opacity:"0.4"}),n,r.filter((a,d)=>d%Math.ceil(r.length/8)===0).map((a,d)=>e.jsx("text",{x:p(d*Math.ceil(r.length/8)),y:j+35,textAnchor:"middle",fontSize:"11",fill:"#6b7280",className:"font-medium",children:a.timeLabel},d)),e.jsx("path",{d:R,fill:"none",stroke:"#3b82f6",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#alexanderGlow)",opacity:"0.9"}),e.jsx("path",{d:A,fill:"none",stroke:"#10b981",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#philipGlow)",opacity:"0.9"}),r.map((a,d)=>d%3!==0&&d!==r.length-1?null:e.jsxs("g",{children:[e.jsx("circle",{cx:p(d),cy:b(a.alexander),r:"6",fill:"#3b82f6",stroke:"white",strokeWidth:"3",style:{filter:"drop-shadow(0 2px 4px rgba(59, 130, 246, 0.3))"}}),e.jsx("circle",{cx:p(d),cy:b(a.philip),r:"6",fill:"#10b981",stroke:"white",strokeWidth:"3",style:{filter:"drop-shadow(0 2px 4px rgba(16, 185, 129, 0.3))"}})]},d))]}),!i&&e.jsxs("g",{transform:`translate(${m-g.right+15}, ${g.top+20})`,children:[e.jsx("rect",{x:-10,y:-15,width:85,height:110,fill:"white",stroke:"#e5e7eb",strokeWidth:"2",rx:"8",style:{filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))"}}),e.jsx("text",{x:30,y:-5,textAnchor:"middle",fontSize:"12",fill:"#374151",className:"font-bold",children:"Legende"}),e.jsx("line",{x1:5,y1:10,x2:20,y2:10,stroke:"#3b82f6",strokeWidth:"4"}),e.jsx("text",{x:25,y:14,fontSize:"11",fill:"#374151",className:"font-medium",children:"Alexander"}),e.jsx("line",{x1:5,y1:30,x2:20,y2:30,stroke:"#10b981",strokeWidth:"4"}),e.jsx("text",{x:25,y:34,fontSize:"11",fill:"#374151",className:"font-medium",children:"Philip"}),e.jsx("line",{x1:5,y1:50,x2:20,y2:50,stroke:"#8b5cf6",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("text",{x:25,y:54,fontSize:"11",fill:"#374151",className:"font-medium",children:"🍺 Bier"}),e.jsx("line",{x1:5,y1:70,x2:20,y2:70,stroke:"#f59e0b",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("text",{x:25,y:74,fontSize:"11",fill:"#374151",className:"font-medium",children:"🥃 Shots"}),e.jsx("line",{x1:5,y1:90,x2:20,y2:90,stroke:"#10b981",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("text",{x:25,y:94,fontSize:"11",fill:"#374151",className:"font-medium",children:"🍻 Mix"})]})]}),i&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2 text-center",children:"Legende"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:"w-5 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Alexander"})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:"w-5 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Philip"})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("span",{className:"text-lg",children:"🍺"}),e.jsx("span",{className:"text-sm",children:"Bier"})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("span",{className:"text-lg",children:"🥃"}),e.jsx("span",{className:"text-sm",children:"Shots"})]})]})]})]})};return w?e.jsxs("div",{className:"modern-card mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>H(!c),children:[e.jsx("h3",{className:"font-bold text-lg text-text-primary",children:"📈 Alkoholverlauf beider Manager"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Alexander: "}),e.jsxs("span",{className:`font-bold ${s(((L=r[r.length-1])==null?void 0:L.alexander)||0)}`,children:[(((V=r[r.length-1])==null?void 0:V.alexander)||0).toFixed(2),"‰"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{children:"Philip: "}),e.jsxs("span",{className:`font-bold ${s(((J=r[r.length-1])==null?void 0:J.philip)||0)}`,children:[(((U=r[r.length-1])==null?void 0:U.philip)||0).toFixed(2),"‰"]})]})]}),e.jsx("button",{className:"text-2xl transition-transform duration-200",children:c?"📉":"📊"})]})]}),c&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"mb-4 text-sm text-text-muted",children:["BAK-Verlauf seit Trinkbeginn (",new Date(w).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit"}),")"]}),e.jsx(z,{}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("div",{className:"font-medium text-yellow-800 mb-1",children:"⚠️ Grenzwerte"}),e.jsxs("div",{className:"text-yellow-700 space-y-1",children:[e.jsx("div",{children:"0,3‰: Reaktionszeit verlangsamt"}),e.jsx("div",{children:"0,5‰: Fahruntüchtig"}),e.jsx("div",{children:"1,0‰: Schwer betrunken"})]})]}),e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"font-medium text-blue-800 mb-1",children:"🔵 Alexander aktuell"}),e.jsxs("div",{className:"text-blue-700",children:[e.jsxs("div",{children:["Gewicht: ",C.aek.weight,"kg"]}),e.jsxs("div",{children:["Biere: ",B.alexander]}),e.jsxs("div",{children:["Shots: ",N.alexander.shots20+N.alexander.shots40]})]})]}),e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("div",{className:"font-medium text-green-800 mb-1",children:"🟢 Philip aktuell"}),e.jsxs("div",{className:"text-green-700",children:[e.jsxs("div",{children:["Gewicht: ",C.real.weight,"kg"]}),e.jsxs("div",{children:["Biere: ",B.philip]}),e.jsxs("div",{children:["Shots: ",N.philip.shots20+N.philip.shots40]})]})]})]}),l.length>0&&e.jsxs("div",{className:"mt-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsxs("div",{className:"font-medium text-purple-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"🍺"}),e.jsx("span",{children:"Getränke-Timeline (letzte 5)"})]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto custom-scrollbar",children:l.slice(-5).reverse().map((i,m)=>{var p,b,v,R,A,$,F,G,t,n;const o=((p=i.beers)==null?void 0:p.alexander)||0,g=((b=i.beers)==null?void 0:b.philip)||0,y=(((R=(v=i.shots)==null?void 0:v.alexander)==null?void 0:R.shots20)||0)+((($=(A=i.shots)==null?void 0:A.alexander)==null?void 0:$.shots40)||0),j=(((G=(F=i.shots)==null?void 0:F.philip)==null?void 0:G.shots20)||0)+(((n=(t=i.shots)==null?void 0:t.philip)==null?void 0:n.shots40)||0);return e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded-md border border-purple-100",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-xs text-purple-600 font-mono",children:new Date(i.timestamp).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[i.alexanderChange>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Alex:"}),o>0&&e.jsxs("span",{className:"flex items-center text-sm",children:["🍺",e.jsxs("span",{className:"text-xs text-blue-600 ml-0.5",children:["+",i.alexanderChange]})]}),y>0&&e.jsxs("span",{className:"flex items-center text-sm",children:["🥃",e.jsxs("span",{className:"text-xs text-blue-600 ml-0.5",children:["+",i.alexanderChange]})]})]}),i.philipChange>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Phil:"}),g>0&&e.jsxs("span",{className:"flex items-center text-sm",children:["🍺",e.jsxs("span",{className:"text-xs text-green-600 ml-0.5",children:["+",i.philipChange]})]}),j>0&&e.jsxs("span",{className:"flex items-center text-sm",children:["🥃",e.jsxs("span",{className:"text-xs text-green-600 ml-0.5",children:["+",i.philipChange]})]})]})]})]},m)})})]})]})]}):null};function ne({onNavigate:C,showHints:B=!1}){var G;const[N,w]=k.useState("alcohol"),[c,H]=k.useState({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}}),[r,O]=k.useState({alexander:0,philip:0}),[l,K]=k.useState({alexander:{shots20:0,shots40:0},philip:{shots20:0,shots40:0}}),[x,D]=k.useState(null),E=k.useCallback(async()=>{try{console.log("🔄 Loading managers from database...");const t=await se.getManagers();if(console.log("📊 Manager data result:",t),t&&t.data&&Array.isArray(t.data)&&t.data.length>=2){console.log("✅ Manager data loaded successfully:",t.data);const n=t.data.find(d=>d.id===1)||{name:"Alexander",gewicht:110},a=t.data.find(d=>d.id===2)||{name:"Philip",gewicht:105};console.log("👤 AEK Manager:",n),console.log("👤 Real Manager:",a),H({aek:{name:n.name,age:n.age||30,weight:n.gewicht},real:{name:a.name,age:a.age||30,weight:a.gewicht}})}else console.warn("⚠️ No manager data found, using defaults. Result:",t),H({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}})}catch(t){console.error("❌ Error loading manager settings from database:",t),H({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}})}},[]),[s,z]=k.useState({alexander:{totalEarnings:0,gamesPlayed:0},philip:{totalEarnings:0,gamesPlayed:0},gameHistory:[],currentMatch:{active:!1,alexanderRoundEarnings:0,philipRoundEarnings:0,completedGames:[],currentRoundGames:0,targetGamesPerRound:10,matchHistory:[]},currentRound:{active:!1,alexanderBet:0,philipBet:0}});k.useEffect(()=>{E();const t=localStorage.getItem("beerConsumption");if(t)try{O(JSON.parse(t))}catch(h){console.error("Error loading beer consumption:",h)}const n=localStorage.getItem("shotConsumption");if(n)try{K(JSON.parse(n))}catch(h){console.error("Error loading shot consumption:",h)}const a=localStorage.getItem("drinkingStartTime");a&&D(a);const d=localStorage.getItem("blackjackGames");if(d)try{const h=JSON.parse(d);if(h.alexander&&("wins"in h.alexander||"blackjacks"in h.alexander)){console.log("🔄 Migrating old blackjack data format to new simplified structure");const f={alexander:{totalEarnings:h.alexander.totalEarnings||0,gamesPlayed:0},philip:{totalEarnings:h.philip.totalEarnings||0,gamesPlayed:0},gameHistory:[],currentMatch:{active:!1,alexanderRoundEarnings:0,philipRoundEarnings:0,completedGames:[],currentRoundGames:0,targetGamesPerRound:10,matchHistory:[]},currentRound:{active:!1,alexanderBet:0,philipBet:0}};z(f),localStorage.setItem("blackjackGames",JSON.stringify(f))}else z(h)}catch(h){console.error("Error loading blackjack data:",h),z({alexander:{totalEarnings:0,gamesPlayed:0},philip:{totalEarnings:0,gamesPlayed:0},gameHistory:[],currentMatch:{active:!1,alexanderRoundEarnings:0,philipRoundEarnings:0,completedGames:[],currentRoundGames:0,targetGamesPerRound:10,matchHistory:[]},currentRound:{active:!1,alexanderBet:0,philipBet:0}})}const u=()=>{E()};return window.addEventListener("managerSettingsChanged",u),()=>window.removeEventListener("managerSettingsChanged",u)},[E]);const L=t=>{O(t),localStorage.setItem("beerConsumption",JSON.stringify(t))},V=t=>{K(t),localStorage.setItem("shotConsumption",JSON.stringify(t))},J=t=>{const n={...r,[t]:r[t]+1};if(L(n),!x){const a=new Date().toISOString();D(a),localStorage.setItem("drinkingStartTime",a)}},U=()=>{const t={alexander:r.alexander+1,philip:r.philip+1};if(L(t),!x){const n=new Date().toISOString();D(n),localStorage.setItem("drinkingStartTime",n)}},i=(t,n)=>{const a=n===40?"shots40":"shots20",d={...l,[t]:{...l[t],[a]:l[t][a]+1}};if(V(d),!x){const u=new Date().toISOString();D(u),localStorage.setItem("drinkingStartTime",u)}},m=()=>{L({alexander:0,philip:0}),V({alexander:{shots20:0,shots40:0},philip:{shots20:0,shots40:0}}),D(null),localStorage.removeItem("drinkingStartTime")},o=(t,n,a,d=null)=>{if(!a.weight||t===0&&(!n||n.shots20===0&&n.shots40===0))return"0.00";const u=t*25*.789;let h=0;n&&(h=n.shots20*20*.2*.789+n.shots40*20*.4*.789);const f=u+h,S=a.gender==="male"?.7:.6;let M=f/(S*a.weight);if(d){const P=new Date,T=new Date(d),W=(P-T)/(1e3*60*60)*.15;M=Math.max(0,M-W)}return M.toFixed(2)},g=(t,n,a,d)=>{if(!a.weight||t===0&&(!n||n.shots20===0&&n.shots40===0)||!d)return null;const u=t*25*.789;let h=0;n&&(h=n.shots20*20*.2*.789+n.shots40*20*.4*.789);const f=u+h,S=a.gender==="male"?.7:.6,P=f/(S*a.weight)/.15,T=new Date(d);return new Date(T.getTime()+P*60*60*1e3)},y=({bac:t,name:n})=>{const a=parseFloat(t),u=Math.min(a/2*100,100),h=f=>f>=1?"bg-red-500":f>=.5?"bg-orange-500":f>=.3?"bg-yellow-500":"bg-green-500";return e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"0‰"}),e.jsxs("span",{children:[n," BAC"]}),e.jsx("span",{children:"2‰"})]}),e.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-4 relative",children:[e.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${h(a)}`,style:{width:`${u}%`}}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-white",children:[t,"‰"]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"Nüchtern"}),e.jsx("span",{children:"Betrunken"})]})]})},j=()=>{if(!x)return null;const t=new Date,n=new Date(x),a=(t-n)/(1e3*60*60);return a<1?`${Math.floor(a*60)} Minuten`:`${a.toFixed(1)} Stunden`},p=t=>{z(t),localStorage.setItem("blackjackGames",JSON.stringify(t))},b=()=>{const t={...s,currentRound:{active:!0,alexanderBet:0,philipBet:0}};p(t)},v=(t,n)=>{const a={...s,currentRound:{...s.currentRound,[t+"Bet"]:n}};p(a)},R=()=>{const t=s.currentRound,n={alexander:t.alexanderBet,philip:t.philipBet},a={id:Date.now(),timestamp:new Date().toISOString(),results:{...n},gameNumber:s.currentMatch.currentRoundGames+1,description:`Game ${s.currentMatch.currentRoundGames+1}: Alex ${n.alexander>=0?"+":""}${n.alexander.toFixed(2)}€, Phil ${n.philip>=0?"+":""}${n.philip.toFixed(2)}€`,dateText:new Date().toLocaleString("de-DE",{hour:"2-digit",minute:"2-digit"})},d={alexander:{...s.alexander,totalEarnings:s.alexander.totalEarnings+n.alexander,gamesPlayed:s.alexander.gamesPlayed+1},philip:{...s.philip,totalEarnings:s.philip.totalEarnings+n.philip,gamesPlayed:s.philip.gamesPlayed+1},gameHistory:[...s.gameHistory,a].slice(-50),currentMatch:{...s.currentMatch,alexanderRoundEarnings:s.currentMatch.alexanderRoundEarnings+n.alexander,philipRoundEarnings:s.currentMatch.philipRoundEarnings+n.philip,completedGames:[...s.currentMatch.completedGames,a],currentRoundGames:s.currentMatch.currentRoundGames+1},currentRound:{active:!1,alexanderBet:0,philipBet:0}};p(d)},A=()=>{p({alexander:{totalEarnings:0,gamesPlayed:0},philip:{totalEarnings:0,gamesPlayed:0},gameHistory:[],currentMatch:{active:!1,alexanderRoundEarnings:0,philipRoundEarnings:0,completedGames:[],currentRoundGames:0,targetGamesPerRound:10,matchHistory:[]},currentRound:{active:!1,alexanderBet:0,philipBet:0}})},$=()=>{const t={...s,currentMatch:{...s.currentMatch,active:!0,alexanderRoundEarnings:0,philipRoundEarnings:0,completedRounds:[]}};p(t)},F=()=>{const t=s.currentMatch.alexanderRoundEarnings,n=s.currentMatch.philipRoundEarnings;let a="";const d=t-n;d>0?a=`Philip schuldet Alexander ${d.toFixed(2)}€`:d<0?a=`Alexander schuldet Philip ${Math.abs(d).toFixed(2)}€`:a="Ausgeglichenes Spiel - Niemand schuldet etwas";const u={id:Date.now(),timestamp:new Date().toISOString(),alexanderTotal:t,philipTotal:n,debtResult:a,roundCount:s.currentMatch.completedRounds.length,rounds:[...s.currentMatch.completedRounds],dateText:new Date().toLocaleString("de-DE")},h={...s,currentMatch:{active:!1,alexanderRoundEarnings:0,philipRoundEarnings:0,completedRounds:[],matchHistory:[...s.currentMatch.matchHistory,u].slice(-10)}};p(h),alert(`🃏 Match beendet!

${a}

Alexander: ${t.toFixed(2)}€
Philip: ${n.toFixed(2)}€
Runden gespielt: ${s.currentMatch.completedRounds.length}`)};return e.jsxs("div",{className:"p-4 pb-24 mobile-safe-bottom",children:[e.jsxs("div",{className:"mb-6 animate-mobile-slide-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-info rounded-ios-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl",children:"🍺"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-title1 font-bold text-text-primary",children:"Alkohol & Blackjack"}),e.jsx("p",{className:"text-footnote text-text-secondary",children:"Alexander vs Philip - Getränke und Kartenspiele verfolgen"})]})]}),e.jsx("div",{className:"w-full h-1 bg-bg-tertiary rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-info w-3/4 rounded-full animate-pulse-gentle"})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>w("alcohol"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 ${N==="alcohol"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"🍺 Alkohol-Tracker"}),e.jsx("button",{onClick:()=>w("blackjack"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 ${N==="blackjack"?"bg-white text-red-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"🃏 Blackjack-Tracker"})]})}),N==="alcohol"&&e.jsxs(e.Fragment,{children:[x&&e.jsxs("div",{className:"mb-4 text-sm text-text-muted",children:["📅 Trinken gestartet vor: ",j()]}),e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-blue-50 to-green-50 border-2 border-blue-200",children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"⚡"}),e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:"Schnell-Aktionen"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("button",{onClick:U,className:"bg-gradient-to-r from-blue-600 to-green-600 hover:from-blue-700 hover:to-green-700 text-white px-6 py-4 rounded-xl transition-all duration-200 font-medium text-lg shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🍻"}),e.jsx("span",{children:"Beiden ein Bier hinzufügen"})]}),e.jsxs("button",{onClick:m,className:"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-4 py-3 rounded-xl transition-all duration-200 font-medium shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🔄"}),e.jsx("span",{children:"Zurücksetzen"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-blue-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🔵"}),e.jsx("span",{children:c.aek.name})]}),e.jsxs("div",{className:"text-sm text-blue-600 bg-blue-200 px-3 py-1 rounded-full font-medium",children:[c.aek.weight,"kg"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsx("button",{onClick:()=>J("alexander"),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🍺 + Bier"}),e.jsx("button",{onClick:()=>i("alexander",20),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🥃 Shot 20%"}),e.jsx("button",{onClick:()=>i("alexander",40),className:"bg-blue-700 hover:bg-blue-800 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🥃 Shot 40%"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-blue-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-blue-700",children:r.alexander}),e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"🍺"})]}),e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-blue-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-blue-700",children:l.alexander.shots20}),e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"🥃20%"})]}),e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-blue-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-blue-700",children:l.alexander.shots40}),e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"🥃40%"})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-100 to-blue-50 border border-blue-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-700 mb-2",children:[o(r.alexander,l.alexander,{weight:c.aek.weight,gender:"male"},x),"‰"]}),e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Blutalkoholkonzentration (BAK)"}),(r.alexander>0||l.alexander.shots20>0||l.alexander.shots40>0)&&e.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:[r.alexander>0&&`${r.alexander} × 0,5L Bier`,r.alexander>0&&(l.alexander.shots20>0||l.alexander.shots40>0)&&" + ",l.alexander.shots20>0&&`${l.alexander.shots20} × 2cl (20%)`,l.alexander.shots20>0&&l.alexander.shots40>0&&" + ",l.alexander.shots40>0&&`${l.alexander.shots40} × 2cl (40%)`]})]}),e.jsx(y,{bac:o(r.alexander,l.alexander,{weight:c.aek.weight,gender:"male"},x),name:"Alexander"}),x&&(r.alexander>0||l.alexander.shots20>0||l.alexander.shots40>0)&&e.jsx("div",{className:"mt-3 text-center text-sm text-blue-600",children:(()=>{const t=g(r.alexander,l.alexander,{weight:c.aek.weight,gender:"male"},x);return t&&t>new Date?`🕐 Wieder nüchtern: ${t.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})}`:parseFloat(o(r.alexander,l.alexander,{weight:c.aek.weight,gender:"male"},x))===0?"✅ Bereits nüchtern":null})()})]})]}),e.jsxs("div",{className:"modern-card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-300 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-green-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🟢"}),e.jsx("span",{children:c.real.name})]}),e.jsxs("div",{className:"text-sm text-green-600 bg-green-200 px-3 py-1 rounded-full font-medium",children:[c.real.weight,"kg"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsx("button",{onClick:()=>J("philip"),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🍺 + Bier"}),e.jsx("button",{onClick:()=>i("philip",20),className:"bg-green-500 hover:bg-green-600 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🥃 Shot 20%"}),e.jsx("button",{onClick:()=>i("philip",40),className:"bg-green-700 hover:bg-green-800 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🥃 Shot 40%"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-green-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-green-700",children:r.philip}),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"🍺"})]}),e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-green-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-green-700",children:l.philip.shots20}),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"🥃20%"})]}),e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-green-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-green-700",children:l.philip.shots40}),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"🥃40%"})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-100 to-green-50 border border-green-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-700 mb-2",children:[o(r.philip,l.philip,{weight:c.real.weight,gender:"male"},x),"‰"]}),e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Blutalkoholkonzentration (BAK)"}),(r.philip>0||l.philip.shots20>0||l.philip.shots40>0)&&e.jsxs("div",{className:"text-xs text-green-500 mt-1",children:[r.philip>0&&`${r.philip} × 0,5L Bier`,r.philip>0&&(l.philip.shots20>0||l.philip.shots40>0)&&" + ",l.philip.shots20>0&&`${l.philip.shots20} × 2cl (20%)`,l.philip.shots20>0&&l.philip.shots40>0&&" + ",l.philip.shots40>0&&`${l.philip.shots40} × 2cl (40%)`]})]}),e.jsx(y,{bac:o(r.philip,l.philip,{weight:c.real.weight,gender:"male"},x),name:"Philip"}),x&&(r.philip>0||l.philip.shots20>0||l.philip.shots40>0)&&e.jsx("div",{className:"mt-3 text-center text-sm text-green-600",children:(()=>{const t=g(r.philip,l.philip,{weight:c.real.weight,gender:"male"},x);return t&&t>new Date?`🕐 Wieder nüchtern: ${t.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})}`:parseFloat(o(r.philip,l.philip,{weight:c.real.weight,gender:"male"},x))===0?"✅ Bereits nüchtern":null})()})]})]})]}),e.jsxs("div",{className:"modern-card mt-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"📊 Erweiterte Statistiken"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"🍻 Aktuelle Session"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-text-primary",children:r.alexander+r.philip}),e.jsx("div",{className:"text-sm text-text-muted",children:"Biere gesamt"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-text-primary",children:[((r.alexander+r.philip)*.5).toFixed(1),"L"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Biervolumen"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-text-primary",children:l.alexander.shots20+l.alexander.shots40+l.philip.shots20+l.philip.shots40}),e.jsx("div",{className:"text-sm text-text-muted",children:"Shots gesamt"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-text-primary",children:[(l.alexander.shots20+l.alexander.shots40+l.philip.shots20+l.philip.shots40)*2,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Shot-Volumen"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"👥 Spieler-Vergleich"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("h5",{className:"font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🔵"}),c.aek.name]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Biere:"}),e.jsx("span",{className:"font-semibold",children:r.alexander})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shots (20%):"}),e.jsx("span",{className:"font-semibold",children:l.alexander.shots20})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shots (40%):"}),e.jsx("span",{className:"font-semibold",children:l.alexander.shots40})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{children:"Aktueller BAK:"}),e.jsxs("span",{className:"font-bold text-blue-700",children:[o(r.alexander,l.alexander,c.aek,x),"‰"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Alkohol-Volumen:"}),e.jsxs("span",{className:"font-semibold",children:[(r.alexander*.5*.05+l.alexander.shots20*.02*.2+l.alexander.shots40*.02*.4).toFixed(2),"L"]})]})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("h5",{className:"font-semibold text-green-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🟢"}),c.real.name]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Biere:"}),e.jsx("span",{className:"font-semibold",children:r.philip})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shots (20%):"}),e.jsx("span",{className:"font-semibold",children:l.philip.shots20})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shots (40%):"}),e.jsx("span",{className:"font-semibold",children:l.philip.shots40})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{children:"Aktueller BAK:"}),e.jsxs("span",{className:"font-bold text-green-700",children:[o(r.philip,l.philip,c.real,x),"‰"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Alkohol-Volumen:"}),e.jsxs("span",{className:"font-semibold",children:[(r.philip*.5*.05+l.philip.shots20*.02*.2+l.philip.shots40*.02*.4).toFixed(2),"L"]})]})]})]})]})]}),x&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"⏰ Session-Info"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsx("div",{className:"text-lg font-bold text-indigo-700",children:j()}),e.jsx("div",{className:"text-sm text-indigo-600",children:"Trinkdauer"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"text-lg font-bold text-purple-700",children:[Math.max(parseFloat(o(r.alexander,l.alexander,c.aek,x)),parseFloat(o(r.philip,l.philip,c.real,x))).toFixed(2),"‰"]}),e.jsx("div",{className:"text-sm text-purple-600",children:"Höchster BAK"})]}),e.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("div",{className:"text-lg font-bold text-orange-700",children:((r.alexander+r.philip)/Math.max(1,parseFloat(((G=j())==null?void 0:G.split(" ")[0])||"1"))).toFixed(1)}),e.jsx("div",{className:"text-sm text-orange-600",children:"Biere/Stunde"})]})]})]}),x&&(r.alexander>0||r.philip>0||l.alexander.shots20>0||l.alexander.shots40>0||l.philip.shots20>0||l.philip.shots40>0)&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"🕐 Nüchternzeit-Prognose"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(()=>{const t=g(r.alexander,l.alexander,c.aek,x),n=g(r.philip,l.philip,c.real,x);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:c.aek.name}),e.jsx("div",{className:"text-lg font-bold text-blue-800",children:t?t.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}):"Bereits nüchtern"}),e.jsx("div",{className:"text-xs text-blue-600",children:t?`${Math.ceil((t-new Date)/(1e3*60*60))}h verbleibend`:"✅"})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-green-700 mb-1",children:c.real.name}),e.jsx("div",{className:"text-lg font-bold text-green-800",children:n?n.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}):"Bereits nüchtern"}),e.jsx("div",{className:"text-xs text-green-600",children:n?`${Math.ceil((n-new Date)/(1e3*60*60))}h verbleibend`:"✅"})]})]})})()})]})]}),e.jsx(ae,{managers:c,beerConsumption:r,shotConsumption:l,drinkingStartTime:x}),B&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"ℹ️ Hinweise"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsx("li",{children:"• BAK-Berechnung basiert auf der Widmark-Formel"}),e.jsx("li",{children:"• Annahme: 0,5L Bier mit 5% Alkoholgehalt"}),e.jsx("li",{children:"• Shots: 2cl mit 20% oder 40% Alkoholgehalt"}),e.jsx("li",{children:"• Abbau: 0,15‰ pro Stunde"}),e.jsx("li",{children:"• Farbkodierung: Grün (0-0,3‰), Gelb (0,3-0,5‰), Orange (0,5-1,0‰), Rot (>1,0‰)"}),e.jsx("li",{children:"• Manager-Daten können unter Admin → Team-Verwaltung angepasst werden"})]})]})]}),N==="blackjack"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"🃏 Blackjack Arena: Beide vs Bank"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Neue Regeln: Beide spielen gegen die Bank • Komplexe Gewinn-/Verlustberechnung mit Double/Split"})]}),s.currentMatch.active&&e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-400",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-amber-700 flex items-center gap-2",children:"🏆 Aktuelles Match - Live Counter"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"p-4 bg-blue-50 rounded-lg border-2 border-blue-300",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h5",{className:"font-bold text-blue-700 mb-2 flex items-center justify-center gap-2",children:["🔵 ",c.aek.name]}),e.jsx("div",{className:"text-4xl font-bold mb-2",children:e.jsxs("span",{className:`${s.currentMatch.alexanderRoundEarnings>=0?"text-green-600":"text-red-600"}`,children:[s.currentMatch.alexanderRoundEarnings>=0?"+":"",s.currentMatch.alexanderRoundEarnings.toFixed(2),"€"]})}),e.jsx("div",{className:"text-sm text-blue-600",children:"Aktuelle Match-Bilanz"}),e.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:["Spiele: ",s.currentMatch.currentRoundGames,"/",s.currentMatch.targetGamesPerRound,s.currentMatch.currentRoundGames>=s.currentMatch.targetGamesPerRound&&e.jsx("span",{className:"ml-2 text-green-600 font-bold",children:"Runde vollständig!"})]})]})}),e.jsx("div",{className:"p-4 bg-green-50 rounded-lg border-2 border-green-300",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h5",{className:"font-bold text-green-700 mb-2 flex items-center justify-center gap-2",children:["🟢 ",c.real.name]}),e.jsx("div",{className:"text-4xl font-bold mb-2",children:e.jsxs("span",{className:`${s.currentMatch.philipRoundEarnings>=0?"text-green-600":"text-red-600"}`,children:[s.currentMatch.philipRoundEarnings>=0?"+":"",s.currentMatch.philipRoundEarnings.toFixed(2),"€"]})}),e.jsx("div",{className:"text-sm text-green-600",children:"Aktuelle Match-Bilanz"}),e.jsxs("div",{className:"text-xs text-green-500 mt-1",children:["Spiele: ",s.currentMatch.currentRoundGames,"/",s.currentMatch.targetGamesPerRound,s.currentMatch.currentRoundGames>=s.currentMatch.targetGamesPerRound&&e.jsx("span",{className:"ml-2 text-green-600 font-bold",children:"Runde vollständig!"})]})]})})]}),e.jsx("div",{className:"mt-4 p-3 bg-white rounded-lg border border-amber-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-medium text-amber-700 mb-1",children:"Aktueller Schuldenstand:"}),e.jsx("div",{className:"text-lg font-bold text-amber-800",children:(()=>{const t=s.currentMatch.alexanderRoundEarnings-s.currentMatch.philipRoundEarnings;return t>0?`Philip schuldet Alexander ${t.toFixed(2)}€`:t<0?`Alexander schuldet Philip ${Math.abs(t).toFixed(2)}€`:"Ausgeglichen - Niemand schuldet etwas"})()})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"modern-card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-bold text-lg text-blue-700 flex items-center gap-2",children:["🔵 ",c.aek.name]}),e.jsx("div",{className:"text-xs text-blue-600 bg-blue-200 px-2 py-1 rounded-full",children:"Gesamt-Statistiken"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-blue-700 text-sm",children:"Spiele gespielt:"}),e.jsx("span",{className:"font-bold text-blue-600",children:s.alexander.gamesPlayed})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-blue-700 text-sm",children:"Gesamt-Bilanz:"}),e.jsxs("span",{className:`font-bold ${s.alexander.totalEarnings>=0?"text-green-600":"text-red-600"}`,children:[s.alexander.totalEarnings>=0?"+":"",s.alexander.totalEarnings.toFixed(2),"€"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-blue-700 text-sm",children:"Durchschnitt pro Spiel:"}),e.jsx("span",{className:`font-bold text-sm ${s.alexander.gamesPlayed>0?s.alexander.totalEarnings/s.alexander.gamesPlayed>=0?"text-green-600":"text-red-600":"text-gray-500"}`,children:s.alexander.gamesPlayed>0?`${s.alexander.totalEarnings/s.alexander.gamesPlayed>=0?"+":""}${(s.alexander.totalEarnings/s.alexander.gamesPlayed).toFixed(2)}€`:"0.00€"})]})]})]}),e.jsxs("div",{className:"modern-card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h4",{className:"font-bold text-lg text-green-700 flex items-center gap-2",children:["🟢 ",c.real.name]}),e.jsx("div",{className:"text-xs text-green-600 bg-green-200 px-2 py-1 rounded-full",children:"Gesamt-Statistiken"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-green-700 text-sm",children:"Spiele gespielt:"}),e.jsx("span",{className:"font-bold text-green-600",children:s.philip.gamesPlayed})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-green-700 text-sm",children:"Gesamt-Bilanz:"}),e.jsxs("span",{className:`font-bold ${s.philip.totalEarnings>=0?"text-green-600":"text-red-600"}`,children:[s.philip.totalEarnings>=0?"+":"",s.philip.totalEarnings.toFixed(2),"€"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-green-700 text-sm",children:"Durchschnitt pro Spiel:"}),e.jsx("span",{className:`font-bold text-sm ${s.philip.gamesPlayed>0?s.philip.totalEarnings/s.philip.gamesPlayed>=0?"text-green-600":"text-red-600":"text-gray-500"}`,children:s.philip.gamesPlayed>0?`${s.philip.totalEarnings/s.philip.gamesPlayed>=0?"+":""}${(s.philip.totalEarnings/s.philip.gamesPlayed).toFixed(2)}€`:"0.00€"})]})]})]})]}),s.currentMatch.active?s.currentRound.active?e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-300",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-orange-700 flex items-center gap-2",children:"🎯 Aktuelles Spiel - Einsätze eingeben"}),e.jsx("div",{className:"mb-6 p-3 bg-white rounded-lg border border-orange-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("h5",{className:"font-medium text-orange-700 mb-2",children:["🎮 Spiel ",s.currentMatch.currentRoundGames+1," von ",s.currentMatch.targetGamesPerRound]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Aktuelle Einsätze: Alexander ",s.currentRound.alexanderBet>=0?"+":"",s.currentRound.alexanderBet.toFixed(2),"€, Philip ",s.currentRound.philipBet>=0?"+":"",s.currentRound.philipBet.toFixed(2),"€"]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("h5",{className:"font-medium text-blue-700 mb-4",children:["🔵 ",c.aek.name," Einsätze:"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[2.5,5,7.5,10,12.5,15,17.5,20,22.5,25,27.5,30].map(t=>e.jsxs("button",{onClick:()=>v("alexander",t),className:`px-2 py-2 rounded-md text-sm font-medium transition-all ${s.currentRound.alexanderBet===t?"bg-blue-600 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,children:["+",t.toFixed(2),"€"]},t))}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[-2.5,-5,-7.5,-10,-12.5,-15,-17.5,-20,-22.5,-25,-27.5,-30].map(t=>e.jsxs("button",{onClick:()=>v("alexander",t),className:`px-2 py-2 rounded-md text-sm font-medium transition-all ${s.currentRound.alexanderBet===t?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[t.toFixed(2),"€"]},t))}),e.jsx("button",{onClick:()=>v("alexander",0),className:`w-full px-2 py-2 rounded-md text-sm font-medium transition-all ${s.currentRound.alexanderBet===0?"bg-gray-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"0.00€ (Unentschieden)"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("h5",{className:"font-medium text-green-700 mb-4",children:["🟢 ",c.real.name," Einsätze:"]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[2.5,5,7.5,10,12.5,15,17.5,20,22.5,25,27.5,30].map(t=>e.jsxs("button",{onClick:()=>v("philip",t),className:`px-2 py-2 rounded-md text-sm font-medium transition-all ${s.currentRound.philipBet===t?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:["+",t.toFixed(2),"€"]},t))}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[-2.5,-5,-7.5,-10,-12.5,-15,-17.5,-20,-22.5,-25,-27.5,-30].map(t=>e.jsxs("button",{onClick:()=>v("philip",t),className:`px-2 py-2 rounded-md text-sm font-medium transition-all ${s.currentRound.philipBet===t?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,children:[t.toFixed(2),"€"]},t))}),e.jsx("button",{onClick:()=>v("philip",0),className:`w-full px-2 py-2 rounded-md text-sm font-medium transition-all ${s.currentRound.philipBet===0?"bg-gray-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"0.00€ (Unentschieden)"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-orange-200",children:[e.jsx("button",{onClick:R,disabled:s.currentRound.alexanderBet===0&&s.currentRound.philipBet===0,className:`flex-1 px-6 py-3 rounded-lg transition-all duration-200 font-bold shadow-md hover:shadow-lg transform hover:scale-105 ${s.currentRound.alexanderBet===0&&s.currentRound.philipBet===0?"bg-gray-400 text-gray-600 cursor-not-allowed":"bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white"}`,children:"✅ Spiel abschließen"}),e.jsx("button",{onClick:F,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-3 rounded-lg transition-all duration-200 font-bold shadow-md hover:shadow-lg transform hover:scale-105",children:"🏁 Match beenden"})]})]})]}):e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-green-50 to-teal-50 border-2 border-green-200",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-green-700 flex items-center gap-2",children:"🎯 Neue Runde im laufenden Match"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"🃏"}),e.jsx("p",{className:"text-green-600 mb-4",children:"Nächste Runde eingeben"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{onClick:b,className:"bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white px-6 py-3 rounded-lg transition-all duration-200 font-bold shadow-md hover:shadow-lg transform hover:scale-105",children:"▶️ Runde starten"}),e.jsx("button",{onClick:F,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-3 rounded-lg transition-all duration-200 font-bold shadow-md hover:shadow-lg transform hover:scale-105",children:"🏁 Match abschließen"})]})]})]}):e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-indigo-700 flex items-center gap-2",children:"🎰 Neues Blackjack-Match starten"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🃏"}),e.jsx("p",{className:"text-indigo-600 mb-4",children:"Beide Manager vs Bank • Bis zur Match-Abschließung"}),e.jsx("button",{onClick:$,className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white px-8 py-3 rounded-lg transition-all duration-200 font-bold text-lg shadow-md hover:shadow-lg transform hover:scale-105",children:"🚀 Match starten"})]})]}),s.currentMatch.active&&s.currentMatch.completedRounds.length>0&&e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-gray-700 flex items-center gap-2",children:"🎯 Abgeschlossene Runden im aktuellen Match"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:s.currentMatch.completedRounds.map((t,n)=>e.jsxs("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-green-50 rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"text-sm font-medium text-gray-700",children:["Runde ",n+1]}),e.jsx("div",{className:"text-xs text-gray-500",children:t.dateText})]}),e.jsx("div",{className:"text-xs font-medium text-gray-600 mb-2",children:t.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"🔵 Alex:"}),e.jsxs("span",{className:`font-bold ${t.results.alexander>=0?"text-green-600":"text-red-600"}`,children:[t.results.alexander>=0?"+":"",t.results.alexander.toFixed(2),"€"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600",children:"🟢 Phil:"}),e.jsxs("span",{className:`font-bold ${t.results.philip>=0?"text-green-600":"text-red-600"}`,children:[t.results.philip>=0?"+":"",t.results.philip.toFixed(2),"€"]})]})]})]},t.id))})]}),s.currentMatch.matchHistory.length>0&&e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-gray-700 flex items-center gap-2",children:"🏆 Abgeschlossene Matches"}),e.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto custom-scrollbar",children:s.currentMatch.matchHistory.slice().reverse().map(t=>e.jsxs("div",{className:"p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"text-sm font-medium text-purple-700",children:t.dateText}),e.jsxs("div",{className:"text-sm text-purple-600",children:[t.roundCount," Runden"]})]}),e.jsx("div",{className:"text-lg font-bold text-purple-800 mb-2",children:t.debtResult}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"🔵 Alexander:"}),e.jsxs("span",{className:`font-bold ${t.alexanderTotal>=0?"text-green-600":"text-red-600"}`,children:[t.alexanderTotal>=0?"+":"",t.alexanderTotal.toFixed(2),"€"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600",children:"🟢 Philip:"}),e.jsxs("span",{className:`font-bold ${t.philipTotal>=0?"text-green-600":"text-red-600"}`,children:[t.philipTotal>=0?"+":"",t.philipTotal.toFixed(2),"€"]})]})]})]},t.id))})]}),s.gameHistory.length>0&&e.jsxs("div",{className:"modern-card",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-gray-700 flex items-center gap-2",children:"📜 Spielverlauf (letzte 20 Runden)"}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto custom-scrollbar",children:s.gameHistory.slice().reverse().map(t=>e.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"text-sm text-gray-600",children:t.dateText}),e.jsx("div",{className:"text-lg",children:"🃏"})]}),e.jsx("div",{className:"text-sm font-medium text-gray-800 mb-2",children:t.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-600",children:"🔵 Alexander:"}),e.jsxs("span",{className:`font-bold ${t.results.alexander>=0?"text-green-600":"text-red-600"}`,children:[t.results.alexander>=0?"+":"",t.results.alexander.toFixed(2),"€"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-600",children:"🟢 Philip:"}),e.jsxs("span",{className:`font-bold ${t.results.philip>=0?"text-green-600":"text-red-600"}`,children:[t.results.philip>=0?"+":"",t.results.philip.toFixed(2),"€"]})]})]})]},t.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-6",children:[e.jsxs("div",{className:"modern-card bg-gray-50",children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-3",children:"🔄 Daten zurücksetzen"}),e.jsx("button",{onClick:A,className:"w-full bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-4 py-2 rounded-lg transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg",children:"🗑️ Alle Statistiken löschen"})]}),e.jsxs("div",{className:"modern-card bg-blue-50 border border-blue-200",children:[e.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:"🎮 Neue vereinfachte Blackjack Regeln"}),e.jsxs("ul",{className:"text-xs text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Einfaches Einsatz-System mit vordefinierten Beträgen"}),e.jsx("li",{children:"• Positive Beträge: +2,50€ bis +30,00€ (Gewinn)"}),e.jsx("li",{children:"• Negative Beträge: -2,50€ bis -30,00€ (Verlust)"}),e.jsx("li",{children:"• 0,00€ für Unentschieden"}),e.jsx("li",{children:"• Bank-Interface entfernt - nur Spieler vs Spieler Tracking"}),e.jsx("li",{children:"• 10 Spiele pro Runde"}),e.jsx("li",{children:"• Match-System: Spiele → Runden → Match abschließen"}),e.jsx("li",{children:"• Einfache Statistiken: Spiele gespielt & Gesamtbilanz"}),e.jsx("li",{children:"• Durchschnitt pro Spiel wird automatisch berechnet"})]})]})]})]})]})}export{ne as default};
