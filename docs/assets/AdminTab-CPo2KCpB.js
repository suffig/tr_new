import{g as U,b as be,S as Q,s as $,u as P,r as T,j as e,z,t as V,a as te,L as fe,c as we,d as Se,e as ke,f as Ee,h as Ae,i as oe,k as Ce,l as Te,m as De,n as Fe,o as $e}from"./main-B7Bp0tSy.js";import{B as Z}from"./banTypes-DuNOJEIt.js";import{d as q}from"./dataManager-vPjGDfZQ.js";const Me="alcoholCalculatorValues",ae="2.0",J=(n=null)=>{const a=n||U();return{aekPlayer:"",realPlayer:"",aekGoals:0,realGoals:0,mode:"manual",gameDay:new Date().toISOString().split("T")[0],beerCount:{aek:0,real:0},alexanderShots:{cl40:0,cl20:0},philipShots:{cl40:0,cl20:0},cumulativeShots:{aek:0,real:0,total:0,lastMatchId:null,lastUpdated:null},lastUpdated:new Date().toISOString(),drinkingStartTime:null,version:ae,season:a}},ce=(n=null)=>{try{const a=n||U(),r=be("alcoholCalculator",a);let t=localStorage.getItem(r);if(!t&&a===Q.LEGACY&&(t=localStorage.getItem(Me),t&&(console.log("Migrating legacy alcohol calculator data to season-based storage"),localStorage.setItem(r,t))),!t)return J(a);const l=JSON.parse(t);if(!l.version||l.version!==ae&&l.version!=="1.0")return console.log("Alcohol calculator: Version mismatch, using defaults"),J(a);const h=J(a);return{...h,...l,season:a,beerCount:{...h.beerCount,...l.beerCount||{}},alexanderShots:{...h.alexanderShots,...l.alexanderShots||{}},philipShots:{...h.philipShots,...l.philipShots||{}},cumulativeShots:{...h.cumulativeShots,...l.cumulativeShots||{}}}}catch(a){return console.error("Error loading alcohol calculator values:",a),J(n)}},Be=(n,a=null)=>{try{const r=a||U(),t={...n,lastUpdated:new Date().toISOString(),version:ae,season:r},l=be("alcoholCalculator",r);return localStorage.setItem(l,JSON.stringify(t)),typeof window<"u"&&window.dispatchEvent(new CustomEvent("alcoholCalculatorValuesChanged",{detail:{...t,season:r}})),!0}catch(r){return console.error("Error saving alcohol calculator values:",r),!1}},ze=(n,a,r=null)=>{const t=r||U(),l={...a,...n,lastUpdated:new Date().toISOString(),season:t};return n.beerCount&&(l.beerCount={...a.beerCount,...n.beerCount}),n.cumulativeShots&&(l.cumulativeShots={...a.cumulativeShots,...n.cumulativeShots}),Be(l,t),l},pe=(n,a=null,r=null)=>{try{const t=r||U(),l=a||ce(t);if(!n||typeof n!="object")return console.warn("Invalid match object provided to addShotsFromNewMatch"),l;const h=n.goalsa||0,j=n.goalsb||0,g=Math.floor(j/2)*2,d=Math.floor(h/2)*2;return ze({cumulativeShots:{aek:l.cumulativeShots.aek+g,real:l.cumulativeShots.real+d,total:l.cumulativeShots.total+g+d,lastMatchId:n.id,lastUpdated:new Date().toISOString()}},l,t)}catch(t){return console.error("Error adding shots from new match:",t),a||ce(r)}};typeof window<"u"&&(window.updateAlcoholCalculatorFromMatch=n=>{try{pe(n)}catch(a){console.warn("Failed to update alcohol calculator from match:",a)}});async function se(n){var a,r;try{if(console.log(`Starting deletion of match ${n}`),n==null)throw new Error("No match ID provided for deletion");console.log(`Processing match ID for deletion: ${n} (type: ${typeof n})`);let t;if(typeof n=="string"){if(n.trim()==="")throw new Error("Empty string provided as match ID");if(t=parseInt(n,10),isNaN(t))throw new Error(`Invalid match ID string: "${n}" cannot be converted to number`)}else if(typeof n=="bigint"){const m=Number(n);BigInt(m)===n?t=m:t=n}else if(typeof n=="number")t=n;else throw new Error(`Unsupported match ID type: ${typeof n}. Expected string, number, or bigint.`);const l=typeof t=="number"&&Number.isInteger(t)&&t>0,h=typeof t=="bigint"&&t>0n;if(!l&&!h)throw new Error(`Invalid match ID after conversion: ${t} (type: ${typeof t}). Must be a positive integer.`);console.log(`Converted match ID: ${t} (type: ${typeof t})`);const{data:j,error:g}=await $.select("matches","date,prizeaek,prizereal,goalslista,goalslistb,manofthematch,yellowa,reda,yellowb,redb",{id:t});if(g)throw console.error("Error fetching match:",g),g;if(!j||j.length===0){const m=`Match with ID ${t} not found in database`;throw console.error(m),new Error(m)}const d=j[0];d.date||console.warn(`Match ${t} has no date - this may cause issues with transaction cleanup`),console.log("Deleting match data:",d),console.log(`Fetching transactions for match ${t} before deletion`);const{data:u,error:i}=await $.select("transactions","team,amount,type",{match_id:t});if(i)throw console.error("Error fetching transactions:",i),i;const c=u||[];if(console.log(`Found ${c.length} transactions to reverse:`,c.map(m=>`${m.type}: ${m.amount} (${m.team})`)),console.log(`Reversing financial changes for ${(c==null?void 0:c.length)||0} transactions`),c&&c.length>0)for(const m of c)if(m.type==="Echtgeld-Ausgleich"){const{data:S,error:s}=await $.select("finances","debt",{team:m.team});if(s){console.error(`Error fetching finances for team ${m.team}:`,s);continue}const o=S&&S.length>0?S[0]:null;let N=((o==null?void 0:o.debt)||0)-m.amount;N<0&&(N=0),await $.update("finances",{debt:N},{team:m.team})}else{const{data:S,error:s}=await $.select("finances","balance",{team:m.team});if(s){console.error(`Error fetching finances for team ${m.team}:`,s);continue}const o=S&&S.length>0?S[0]:null;let N=((o==null?void 0:o.balance)||0)-m.amount;N<0&&(N=0),await $.update("finances",{balance:N},{team:m.team})}if(typeof d.prizeaek=="number"&&d.prizeaek!==0){const{data:m,error:S}=await $.select("finances","balance",{team:"AEK"});if(S)console.error("Error fetching AEK finances:",S);else if(m&&m.length>0){const s=m[0];let o=((s==null?void 0:s.balance)||0)-d.prizeaek;o<0&&(o=0),await $.update("finances",{balance:o},{team:"AEK"})}}if(typeof d.prizereal=="number"&&d.prizereal!==0){const{data:m,error:S}=await $.select("finances","balance",{team:"Real"});if(S)console.error("Error fetching Real finances:",S);else if(m&&m.length>0){const s=m[0];let o=((s==null?void 0:s.balance)||0)-d.prizereal;o<0&&(o=0),await $.update("finances",{balance:o},{team:"Real"})}}console.log(`Deleting ${(c==null?void 0:c.length)||0} transactions for match ${t}`);const{error:v}=await $.delete("transactions",{match_id:t});if(v)throw console.error("Error deleting transactions:",v),v;const{data:b,error:x}=await $.select("transactions","id",{match_id:t});if(x)console.warn("Could not verify transaction deletion:",x);else{if(b&&b.length>0)throw console.error(`‚ùå Failed to delete ${b.length} transactions for match ${t}`),new Error(`Transaction deletion incomplete: ${b.length} transactions still exist`);console.log(`‚úÖ Successfully deleted all transactions for match ${t}`)}const E=async(m,S)=>{if(!m||!Array.isArray(m))return;const s={};if(m.length>0&&typeof m[0]=="object"&&m[0].player!==void 0)m.forEach(o=>{o.player&&(s[o.player]=(s[o.player]||0)+(o.count||1))});else for(const o of m)o&&(s[o]=(s[o]||0)+1);for(const[o,p]of Object.entries(s)){const{data:N,error:D}=await $.select("players","goals",{name:o,team:S});if(D){console.error(`Error fetching player ${o} for goal removal:`,D);continue}if(!N||N.length===0){console.warn(`Player ${o} not found in team ${S} for goal removal`);continue}const I=N[0];let G=((I==null?void 0:I.goals)||0)-p;G<0&&(G=0);const{error:K}=await $.update("players",{goals:G},{name:o,team:S});K?console.error(`Error updating goals for player ${o}:`,K):console.log(`‚úÖ Updated goals for ${o} (${S}): ${I.goals} ‚Üí ${G}`)}};if(await E(d.goalslista,"AEK"),await E(d.goalslistb,"Real"),d.manofthematch){let m=null;const S=(s,o)=>!s||!s.length?!1:typeof s[0]=="object"&&s[0].player!==void 0?s.some(p=>p.player===o):s.includes(o);if(S(d.goalslista,d.manofthematch))m="AEK";else if(S(d.goalslistb,d.manofthematch))m="Real";else{const{data:s,error:o}=await $.select("players","team",{name:d.manofthematch});o?console.error(`Error fetching player ${d.manofthematch} for team lookup:`,o):s&&s.length>0?m=s[0].team:console.warn(`Player ${d.manofthematch} not found for SdS team determination`)}if(m){const{data:s,error:o}=await $.select("spieler_des_spiels","count",{name:d.manofthematch,team:m});if(o)console.error(`Error fetching SdS entry for ${d.manofthematch}:`,o);else if(s&&s.length>0){const p=s[0],N=Math.max(0,p.count-1),{error:D}=await $.update("spieler_des_spiels",{count:N},{name:d.manofthematch,team:m});D?console.error(`Error updating SdS count for ${d.manofthematch}:`,D):console.log(`‚úÖ Updated SdS count for ${d.manofthematch} (${m}): ${p.count} ‚Üí ${N}`)}else console.warn(`SdS entry for ${d.manofthematch} in team ${m} not found`)}}(d.yellowa>0||d.reda>0||d.yellowb>0||d.redb>0)&&console.log(`Match had cards: AEK(${d.yellowa}Y,${d.reda}R) Real(${d.yellowb}Y,${d.redb}R)`),console.log(`Deleting match ${t} from matches table`);const{error:y}=await $.delete("matches",{id:t});if(y)throw console.error("Error deleting match:",y),y;const{data:F,error:k}=await $.select("matches","id",{id:t});if(k)console.warn("Could not verify match deletion:",k);else{if(F&&F.length>0)throw console.error(`‚ùå Failed to delete match ${t}`),new Error(`Match deletion failed: match ${t} still exists`);console.log(`‚úÖ Successfully deleted match ${t}`)}console.log(`‚úÖ Successfully deleted match ${t} and all related data`),console.log(`üìã Deletion Summary for Match ${t}:`),console.log("   - Match record: deleted"),console.log(`   - Transactions: ${c.length} deleted`),console.log(`   - Player goals: updated for ${((a=d.goalslista)==null?void 0:a.length)||0} AEK + ${((r=d.goalslistb)==null?void 0:r.length)||0} Real goals`),console.log(`   - Player of the match: ${d.manofthematch?"updated":"none"}`),console.log(`   - Prize money: AEK ${d.prizeaek||0}, Real ${d.prizereal||0} (reversed)`),console.log(`   - Match date: ${d.date}`)}catch(t){throw console.error(`Failed to delete match ${typeof matchId<"u"?matchId:n||"unknown"}:`,t),console.error("Error details:",{matchId:typeof matchId<"u"?matchId:"undefined",matchIdType:typeof matchId,originalId:n,originalIdType:typeof n,errorMessage:t.message,errorStack:t.stack}),t}}class de{static async submitMatch(a){var F;const{date:r,teama:t="AEK",teamb:l="Real",goalsa:h,goalsb:j,goalslista:g=[],goalslistb:d=[],ownGoalsA:u=0,ownGoalsB:i=0,yellowa:c=0,reda:v=0,yellowb:b=0,redb:x=0,manofthematch:E,editId:y=null}=a;try{const{prizeaek:k,prizereal:m,winner:S,loser:s}=this.calculatePrizeMoney(h,j,c,v,b,x);y&&await this.deleteMatchTransactions(y);const o=[...g],p=[...d];u>0&&p.push({count:u,player:"Eigentore_AEK"}),i>0&&o.push({count:i,player:"Eigentore_Real"});const N={date:r,teama:t,teamb:l,goalsa:parseInt(h)||0,goalsb:parseInt(j)||0,goalslista:g,goalslistb:d,yellowa:parseInt(c)||0,reda:parseInt(v)||0,yellowb:parseInt(b)||0,redb:parseInt(x)||0,manofthematch:E||null,prizeaek:k,prizereal:m},D=await $.insert("matches",N);if(D.error)throw new Error(`Match insert failed: ${D.error.message}`);const I=(F=D.data)==null?void 0:F.id,G=new Date().toISOString().slice(0,10);if(o.length>0){const K=o.filter(R=>typeof R=="object"&&R.player?!R.player.startsWith("Eigentore_"):!R.startsWith("Eigentore_"));await this.updatePlayersGoals(K,"AEK")}if(p.length>0){const K=p.filter(R=>typeof R=="object"&&R.player?!R.player.startsWith("Eigentore_"):!R.startsWith("Eigentore_"));await this.updatePlayersGoals(K,"Real")}E&&await this.updatePlayerOfTheMatchStats(E),await this.processFinancialTransactions({matchId:I,date:G,prizeaek:k,prizereal:m,manofthematch:E,winner:S,loser:s}),await this.decrementBansAfterMatch();try{pe({id:I,goalsa:parseInt(h)||0,goalsb:parseInt(j)||0,date:r})}catch(K){console.warn("Failed to update alcohol calculator:",K)}return{success:!0,matchId:I,message:`Match ${t} vs ${l} (${h}:${j}) erfolgreich hinzugef√ºgt`}}catch(k){throw console.error("Error in submitMatch:",k),new Error(`Fehler beim Speichern des Matches: ${k.message}`)}}static calculatePrizeMoney(a,r,t,l,h,j){let g=0,d=0,u=null,i=null;return a>r?(u="AEK",i="Real"):a<r&&(u="Real",i="AEK"),u&&i&&(u==="AEK"?(g=1e6-r*5e4-t*2e4-l*5e4,d=-(5e5+a*5e4+h*2e4+j*5e4)):(d=1e6-a*5e4-h*2e4-j*5e4,g=-(5e5+r*5e4+t*2e4+l*5e4))),{prizeaek:g,prizereal:d,winner:u,loser:i}}static async updatePlayersGoals(a,r){const t={};if(a.length>0&&typeof a[0]=="object"&&a[0].player!==void 0)a.forEach(l=>{l.player&&!l.player.startsWith("Eigentore_")&&(t[l.player]=(t[l.player]||0)+(l.count||1))});else for(const l of a)!l||!l.trim()||l.startsWith("Eigentore_")||(t[l]=(t[l]||0)+1);for(const[l,h]of Object.entries(t))try{const j=await $.select("players","id, goals",{eq:{name:l,team:r}});if(j.data&&j.data.length>0){const g=j.data[0],d=(g.goals||0)+h;await $.update("players",{goals:d},g.id)}}catch(j){console.warn(`Failed to update goals for player ${l}:`,j)}}static async updatePlayerOfTheMatchStats(a){try{const r=await $.select("players","team",{eq:{name:a}});if(!r.data||r.data.length===0){console.warn(`Player ${a} not found for SdS stats`);return}const t=r.data[0].team,l=await $.select("spieler_des_spiels","*",{eq:{name:a,team:t}});if(l.data&&l.data.length>0){const h=l.data[0];await $.update("spieler_des_spiels",{count:h.count+1},h.id)}else await $.insert("spieler_des_spiels",{name:a,team:t,count:1})}catch(r){console.warn(`Failed to update SdS stats for ${a}:`,r)}}static async processFinancialTransactions({matchId:a,date:r,prizeaek:t,prizereal:l,manofthematch:h,winner:j,loser:g}){const d=await this.getTeamFinance("AEK"),u=await this.getTeamFinance("Real");let i=d.balance||0,c=u.balance||0;const v=h?await this.getSdSBonus(h,"AEK"):0,b=h?await this.getSdSBonus(h,"Real"):0;v>0&&(i+=v,await this.insertTransaction({date:r,type:"SdS Bonus",team:"AEK",amount:v,match_id:a,info:"SdS Bonus"}),await this.updateTeamBalance("AEK",i)),b>0&&(c+=b,await this.insertTransaction({date:r,type:"SdS Bonus",team:"Real",amount:b,match_id:a,info:"SdS Bonus"}),await this.updateTeamBalance("Real",c)),t!==0&&(i+=t,i<0&&(i=0),await this.insertTransaction({date:r,type:"Preisgeld",team:"AEK",amount:t,match_id:a,info:"Preisgeld"}),await this.updateTeamBalance("AEK",i)),l!==0&&(c+=l,c<0&&(c=0),await this.insertTransaction({date:r,type:"Preisgeld",team:"Real",amount:l,match_id:a,info:"Preisgeld"}),await this.updateTeamBalance("Real",c)),j&&g&&await this.processEchtgeldAusgleich({date:r,matchId:a,winner:j,loser:g,aekBalance:i,realBalance:c,prizeaek:t,prizereal:l,sdsBonusAek:v>0?1:0,sdsBonusReal:b>0?1:0,manofthematch:h})}static async getTeamFinance(a){const r=await $.select("finances","*",{eq:{team:a}});return r.data&&r.data.length>0?r.data[0]:{balance:0,debt:0}}static async getSdSBonus(a,r){const t=await $.select("players","team",{eq:{name:a}});return t.data&&t.data.length>0&&t.data[0].team===r?1e5:0}static async insertTransaction(a){return await $.insert("transactions",a)}static async updateTeamBalance(a,r){const t=await $.select("finances","id",{eq:{team:a}});return t.data&&t.data.length>0?await $.update("finances",{balance:r},t.data[0].id):await $.insert("finances",{team:a,balance:r,debt:0})}static async processEchtgeldAusgleich({date:a,matchId:r,winner:t,loser:l,aekBalance:h,realBalance:j,prizeaek:g,prizereal:d,sdsBonusAek:u,sdsBonusReal:i,manofthematch:c}){const v=await this.getTeamFinance("AEK"),b=await this.getTeamFinance("Real"),x={AEK:v.debt||0,Real:b.debt||0},E=(I,G,K)=>{let R=I;K&&(R+=1e5);let _=(Math.abs(G)-R)/1e5;return _<0&&(_=0),5+Math.round(_)},y=E(h,g,u),F=E(j,d,i),k=l==="AEK"?y:F,m=x[t],S=x[l],s=Math.min(m,k*1),o=Math.max(0,m-s),p=k*1-s,N=S+Math.max(0,p),D=await $.select("finances","id",{eq:{team:t}});if(D.data&&D.data.length>0&&await $.update("finances",{debt:o},D.data[0].id),p>0){await this.insertTransaction({date:a,type:"Echtgeld-Ausgleich",team:l,amount:Math.max(0,p),match_id:r,info:"Echtgeld-Ausgleich"});const I=await $.select("finances","id",{eq:{team:l}});I.data&&I.data.length>0&&await $.update("finances",{debt:N},I.data[0].id)}s>0&&await this.insertTransaction({date:a,type:"Echtgeld-Ausgleich (getilgt)",team:t,amount:-s,match_id:r,info:"Echtgeld-Ausgleich (getilgt)"})}static async deleteMatchTransactions(a){try{await se(a)}catch(r){throw console.error(`Failed to delete match ${a} comprehensively:`,r),r}}static async decrementBansAfterMatch(){try{const a=await $.select("bans","*");if(!a.data)return;for(const r of a.data)if(r.matchesserved<r.totalgames){const t=r.matchesserved+1;await $.update("bans",{matchesserved:t},r.id)}}catch(a){console.warn("Failed to decrement bans:",a)}}}function Ie(){const{data:n}=P("players","*"),[a,r]=T.useState(!1),[t,l]=T.useState({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),[h,j]=T.useState(!1),g=(s,o,p)=>s.reduce((D,I)=>D+I.count,0)+p,d=s=>{l(o=>{const p={...o,...s};p.goalsa=g(p.goalslista,p.ownGoalsA,p.ownGoalsB),p.goalsb=g(p.goalslistb,p.ownGoalsB,p.ownGoalsA);const{prizeaek:N,prizereal:D}=de.calculatePrizeMoney(p.goalsa,p.goalsb,p.yellowa,p.reda,p.yellowb,p.redb);return p.prizeaek=N,p.prizereal=D,p})},u=(s,o)=>{d({[s]:o})},i=async s=>{s.preventDefault(),j(!0);try{const o=await de.submitMatch({date:t.date,teama:t.teama.trim(),teamb:t.teamb.trim(),goalsa:t.goalsa,goalsb:t.goalsb,goalslista:t.goalslista,goalslistb:t.goalslistb,ownGoalsA:t.ownGoalsA,ownGoalsB:t.ownGoalsB,yellowa:parseInt(t.yellowa)||0,reda:parseInt(t.reda)||0,yellowb:parseInt(t.yellowb)||0,redb:parseInt(t.redb)||0,manofthematch:t.manofthematch||null});l({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),r(!1),z.success(o.message),V("match-created",{matchId:o.matchId||"latest",date:t.date,teama:t.teama,teamb:t.teamb,goalsa:t.goalsa,goalsb:t.goalsb,manofthematch:t.manofthematch})}catch(o){console.error("Match submission error:",o),z.error(o.message||"Fehler beim Hinzuf√ºgen des Spiels")}finally{j(!1)}},c=()=>{if(!t.date||t.goalsa===t.goalsb||t.goalsa===0&&t.goalsb===0||!t.manofthematch||t.manofthematch.trim()==="")return!1;if(t.goalsa>0){const s=t.goalslista.reduce((p,N)=>p+N.count,0),o=t.ownGoalsB||0;if(s+o<t.goalsa)return!1}if(t.goalsb>0){const s=t.goalslistb.reduce((p,N)=>p+N.count,0),o=t.ownGoalsA||0;if(s+o<t.goalsb)return!1}return!0},v=()=>{const s=[];if(t.date||s.push("Datum fehlt"),t.goalsa===0&&t.goalsb===0&&s.push("Mindestens ein Tor erforderlich"),t.goalsa===t.goalsb&&(t.goalsa>0||t.goalsb>0)&&s.push("Unentschieden nicht erlaubt"),(!t.manofthematch||t.manofthematch.trim()==="")&&s.push("Spieler des Spiels fehlt"),t.goalsa>0){const o=t.goalslista.reduce((N,D)=>N+D.count,0),p=t.ownGoalsB||0;o+p<t.goalsa&&s.push(`AEK Torsch√ºtzen fehlen (${o+p}/${t.goalsa})`)}if(t.goalsb>0){const o=t.goalslistb.reduce((N,D)=>N+D.count,0),p=t.ownGoalsA||0;o+p<t.goalsb&&s.push(`Real Torsch√ºtzen fehlen (${o+p}/${t.goalsb})`)}return{isValid:s.length===0,issues:s}},b=(s,o)=>{const p=Math.max(0,(t[s]||0)+o);d({[s]:p})},x=s=>n?n.filter(o=>o.team===s):[],E=()=>n?t.motmTeamFilter==="all"?n:n.filter(s=>s.team===t.motmTeamFilter):[],y=(s,o)=>{const p=s==="AEK"?"goalslista":"goalslistb";d({[p]:t[p].map(N=>N.player===o?{...N,count:N.count+1}:N).concat(t[p].find(N=>N.player===o)?[]:[{player:o,count:1}])})},F=(s,o)=>{const p=s==="AEK"?"goalslista":"goalslistb";d({[p]:t[p].map(N=>N.player===o?{...N,count:Math.max(0,N.count-1)}:N).filter(N=>N.count>0)})},k=(s,o)=>{const p=s==="AEK"?"ownGoalsA":"ownGoalsB",N=Math.max(0,t[p]+o);d({[p]:N})},m=(s,o)=>{if(!o)return;const p=s==="AEK"?"goalslista":"goalslistb",N=t[p].find(D=>D.player===o);d(N?{[p]:t[p].map(D=>D.player===o?{...D,count:D.count+1}:D)}:{[p]:[...t[p],{player:o,count:1}]})},S=(s,o)=>{const p=s==="AEK"?"goalslista":"goalslistb";d({[p]:t[p].filter(N=>N.player!==o)})};return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neues Spiel hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"F√ºgen Sie ein neues Spiel zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"‚öΩ"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Spiel hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um ein neues Spiel zu erfassen."}),e.jsxs("button",{onClick:()=>r(!0),className:"btn-primary inline-flex items-center px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neues Spiel erfassen"]})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center z-[60] p-2 sm:p-4 overflow-y-auto",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg w-full max-w-lg modal-content match-modal-content modal-mobile-safe my-4 sm:my-8",style:{maxHeight:"calc(100vh - 2rem)"},children:e.jsxs("div",{className:"p-4 sm:p-6 overflow-y-auto mobile-safe-bottom",style:{maxHeight:"calc(100vh - 4rem)"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-bg-secondary z-10 pb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neues Spiel"}),e.jsx("button",{onClick:()=>r(!1),className:"text-text-secondary hover:text-text-primary text-2xl font-bold bg-bg-tertiary hover:bg-bg-hover rounded-full w-8 h-8 flex items-center justify-center transition-colors",disabled:h,children:"√ó"})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"‚öΩ Spielpaarung"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-medium",children:"AEK Athen"}),e.jsx("div",{className:"text-gray-500 font-bold text-xl",children:"vs"}),e.jsx("div",{className:"bg-red-100 text-red-800 px-4 py-2 rounded-lg font-medium",children:"Real Madrid"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:t.date,onChange:s=>u("date",s.target.value),className:"form-input",required:!0,disabled:h})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"‚öΩ Live Torwertung"}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-red-50 rounded-xl p-6 mb-4 text-center border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"text-4xl font-bold text-gray-800 mb-2",children:[e.jsx("span",{className:"text-blue-600",children:t.goalsa}),e.jsx("span",{className:"mx-4 text-gray-400",children:":"}),e.jsx("span",{className:"text-red-600",children:t.goalsb})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"AEK Athen"}),e.jsx("span",{className:"mx-2",children:"vs"}),e.jsx("span",{className:"font-medium text-red-700",children:"Real Madrid"})]}),(t.goalsa>0||t.goalsb>0)&&e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:t.goalsa>t.goalsb?"üèÜ AEK f√ºhrt":t.goalsb>t.goalsa?"üèÜ Real f√ºhrt":"‚öñÔ∏è Unentschieden"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-blue-600 mb-3",children:"‚öΩ AEK Athen Torsch√ºtzen"})}),e.jsx("div",{className:"space-y-2",children:t.goalslista.map((s,o)=>e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:s.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.count," Tor",s.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>F("AEK",s.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h,children:"‚àí"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:s.count}),e.jsx("button",{type:"button",onClick:()=>y("AEK",s.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h,children:"+"}),e.jsx("button",{type:"button",onClick:()=>S("AEK",s.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:h,title:"Torsch√ºtze entfernen",children:"‚úï"})]})]},`aek-${s.player}-${o}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:s=>{s.target.value&&(m("AEK",s.target.value),s.target.value="")},className:"w-full form-input bg-blue-100 border-blue-300 text-blue-800",disabled:h,children:[e.jsx("option",{value:"",children:"+ Torsch√ºtze hinzuf√ºgen"}),x("AEK").map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.position,")"]},s.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Z√§hlen f√ºr Real Madrid"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>k("AEK",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h||t.ownGoalsA===0,children:"‚àí"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:t.ownGoalsA}),e.jsx("button",{type:"button",onClick:()=>k("AEK",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h,children:"+"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-red-600 mb-3",children:"‚öΩ Real Madrid Torsch√ºtzen"})}),e.jsx("div",{className:"space-y-2",children:t.goalslistb.map((s,o)=>e.jsxs("div",{className:"flex items-center justify-between bg-red-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:s.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.count," Tor",s.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>F("Real",s.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h,children:"‚àí"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:s.count}),e.jsx("button",{type:"button",onClick:()=>y("Real",s.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h,children:"+"}),e.jsx("button",{type:"button",onClick:()=>S("Real",s.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:h,title:"Torsch√ºtze entfernen",children:"‚úï"})]})]},`real-${s.player}-${o}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:s=>{s.target.value&&(m("Real",s.target.value),s.target.value="")},className:"w-full form-input bg-red-100 border-red-300 text-red-800",disabled:h,children:[e.jsx("option",{value:"",children:"+ Torsch√ºtze hinzuf√ºgen"}),x("Real").map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.position,")"]},s.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Z√§hlen f√ºr AEK Athen"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>k("Real",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h||t.ownGoalsB===0,children:"‚àí"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:t.ownGoalsB}),e.jsx("button",{type:"button",onClick:()=>k("Real",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h,children:"+"})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"üü®üü• Karten"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"AEK Athen"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"üü® Gelbe Karten"}),e.jsxs("div",{className:"flex items-center justify-center bg-yellow-50 border border-yellow-300 rounded-lg p-2",children:[e.jsx("button",{type:"button",onClick:()=>b("yellowa",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h||t.yellowa<=0,children:"‚àí"}),e.jsx("span",{className:"mx-3 text-lg font-bold text-gray-700 min-w-[2rem] text-center",children:t.yellowa}),e.jsx("button",{type:"button",onClick:()=>b("yellowa",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h,children:"+"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"üü• Rote Karten"}),e.jsxs("div",{className:"flex items-center justify-center bg-red-50 border border-red-300 rounded-lg p-2",children:[e.jsx("button",{type:"button",onClick:()=>b("reda",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h||t.reda<=0,children:"‚àí"}),e.jsx("span",{className:"mx-3 text-lg font-bold text-gray-700 min-w-[2rem] text-center",children:t.reda}),e.jsx("button",{type:"button",onClick:()=>b("reda",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h,children:"+"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Real Madrid"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"üü® Gelbe Karten"}),e.jsxs("div",{className:"flex items-center justify-center bg-yellow-50 border border-yellow-300 rounded-lg p-2",children:[e.jsx("button",{type:"button",onClick:()=>b("yellowb",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h||t.yellowb<=0,children:"‚àí"}),e.jsx("span",{className:"mx-3 text-lg font-bold text-gray-700 min-w-[2rem] text-center",children:t.yellowb}),e.jsx("button",{type:"button",onClick:()=>b("yellowb",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h,children:"+"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"üü• Rote Karten"}),e.jsxs("div",{className:"flex items-center justify-center bg-red-50 border border-red-300 rounded-lg p-2",children:[e.jsx("button",{type:"button",onClick:()=>b("redb",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h||t.redb<=0,children:"‚àí"}),e.jsx("span",{className:"mx-3 text-lg font-bold text-gray-700 min-w-[2rem] text-center",children:t.redb}),e.jsx("button",{type:"button",onClick:()=>b("redb",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:h,children:"+"})]})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"‚≠ê Spieler des Spiels"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-text-muted mb-2",children:"Team Filter:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>u("motmTeamFilter","all"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="all"?"bg-gray-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:h,children:"Alle"}),e.jsx("button",{type:"button",onClick:()=>u("motmTeamFilter","AEK"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="AEK"?"bg-blue-600 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,disabled:h,children:"AEK"}),e.jsx("button",{type:"button",onClick:()=>u("motmTeamFilter","Real"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="Real"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,disabled:h,children:"Real"})]})]}),e.jsxs("select",{value:t.manofthematch,onChange:s=>u("manofthematch",s.target.value),className:"form-input",disabled:h,children:[e.jsx("option",{value:"",children:"Keinen Spieler ausw√§hlen"}),E().map(s=>e.jsxs("option",{value:s.name,children:[s.name," (",s.team," - ",s.position,")"]},s.id))]}),!n||n.length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler verf√ºgbar. Bitte f√ºgen Sie erst Spieler hinzu."})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"üí∞ Preisgelder (automatisch berechnet)"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld AEK (‚Ç¨)"}),e.jsx("input",{type:"number",value:t.prizeaek,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld Real (‚Ç¨)"}),e.jsx("input",{type:"number",value:t.prizereal,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Basierend auf Ergebnis und Karten: Gewinner 1M‚Ç¨ - (Verlierer-Tore √ó 50k‚Ç¨) - (Karten √ó 20k‚Ç¨/50k‚Ç¨)"})]}),t.goalsa===t.goalsb&&(t.goalsa>0||t.goalsb>0)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-600 mr-2",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-red-800",children:"Unentschieden nicht erlaubt"}),e.jsx("p",{className:"text-sm text-red-700",children:"Ein Team muss gewinnen. Unentschieden sind in dieser App nicht m√∂glich."})]})]})}),!t.manofthematch&&(t.goalsa>0||t.goalsb>0)&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-yellow-600 mr-2",children:"‚≠ê"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-yellow-800",children:"Spieler des Spiels erforderlich"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Bitte w√§hlen Sie einen Spieler des Spiels aus, bevor Sie das Match speichern."})]})]})}),c()&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("h5",{className:"font-medium text-green-800 mb-3 flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle mr-2"}),"Spiel-Zusammenfassung"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Datum:"}),e.jsx("span",{className:"font-medium text-green-800",children:new Date(t.date).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Ergebnis:"}),e.jsxs("span",{className:"font-medium text-green-800",children:["AEK ",t.goalsa," : ",t.goalsb," Real"]})]}),t.manofthematch&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Spieler des Spiels:"}),e.jsx("span",{className:"font-medium text-green-800",children:t.manofthematch})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Preisgelder:"}),e.jsxs("span",{className:"font-medium text-green-800",children:["AEK ",t.prizeaek.toLocaleString(),"‚Ç¨, Real ",t.prizereal.toLocaleString(),"‚Ç¨"]})]})]})]}),!c()&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-red-600 mr-2 mt-1",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-red-800 mb-1",children:"Formular unvollst√§ndig"}),e.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:v().issues.map((s,o)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"‚Ä¢"}),e.jsx("span",{children:s})]},o))})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4 pb-20 sm:pb-4",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:h,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:h||!c(),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors ${c()?"bg-green-600 hover:bg-green-700 text-white":"bg-red-500 text-white cursor-not-allowed opacity-75"} ${h?"opacity-50 cursor-not-allowed":""}`,children:h?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):c()?"‚úÖ Spiel speichern":`‚ùå ${v().issues[0]||"Eingaben unvollst√§ndig"}`})]})]})]})})})]})}const O=[{value:"AEK",label:"AEK Athen",color:"blue",icon:"aek"},{value:"Real",label:"Real Madrid",color:"red",icon:"real"},{value:"Ehemalige",label:"Ehemalige",color:"gray",icon:"‚ö´"}],W=n=>{const a=O.find(r=>r.value===n);return a?a.label:n};function Re(){const{data:n}=P("players","*"),[a,r]=T.useState(!1),[t,l]=T.useState(""),[h,j]=T.useState({player_id:"",type:"",reason:"",customDuration:1}),[g,d]=T.useState(!1),u=(x,E)=>{j(y=>({...y,[x]:E})),x==="team"&&j(y=>({...y,player_id:""}))},i=()=>!n||!t?[]:n.filter(x=>x.team===t),c=async x=>{var E;x.preventDefault(),d(!0);try{const y=n==null?void 0:n.find(o=>o.id===parseInt(h.player_id)),F=Z.find(o=>o.value===h.type);if(!y)throw new Error("Spieler nicht gefunden");if(!F)throw new Error("Sperrart nicht gefunden");const m=(E=(await $.select("bans","*",{eq:{player_id:y.id}})).data)==null?void 0:E.find(o=>(o.matchesserved||0)<(o.totalgames||0));if(m)throw new Error(`Spieler "${y.name}" ist bereits gesperrt (${m.totalgames-m.matchesserved} Spiele verbleibend)`);const S=F.fixedDuration?F.duration:h.customDuration,s=await $.insert("bans",{player_id:y.id,team:y.team,type:F.value,totalgames:S,matchesserved:0,reason:h.reason||F.value});if(s.error)throw new Error(`Ban insert failed: ${s.error.message}`);j({player_id:"",type:"",reason:"",customDuration:1}),l(""),r(!1),z.success(`Sperre f√ºr "${y.name}" erfolgreich hinzugef√ºgt!`)}catch(y){console.error("Ban submission error:",y),z.error(y.message||"Fehler beim Hinzuf√ºgen der Sperre")}finally{d(!1)}},v=t&&h.player_id&&h.type,b=Z.find(x=>x.value===h.type);return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Sperre hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erstellen Sie eine neue Spielersperre in der Datenbank."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üö´"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Sperre hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Spielersperre zu erfassen."}),e.jsxs("button",{onClick:()=>r(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Sperre erfassen"]})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content modal-mobile-safe",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Sperre"}),e.jsx("button",{onClick:()=>r(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:g,children:"√ó"})]}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:t,onChange:x=>{l(x.target.value),j(E=>({...E,player_id:""}))},className:"form-input",required:!0,disabled:g,children:[e.jsx("option",{value:"",children:"Team w√§hlen"}),O.filter(x=>x.value!=="Ehemalige").map(x=>e.jsx("option",{value:x.value,children:W(x.value)},x.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spieler *"}),e.jsxs("select",{value:h.player_id,onChange:x=>u("player_id",x.target.value),className:"form-input",required:!0,disabled:g||!t,children:[e.jsx("option",{value:"",children:t?"Spieler w√§hlen":"Bitte zuerst Team w√§hlen"}),i().map(x=>e.jsxs("option",{value:x.id,children:[x.name," (",x.position,")"]},x.id))]}),t&&i().length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler im gew√§hlten Team verf√ºgbar."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Sperrart *"}),e.jsxs("select",{value:h.type,onChange:x=>u("type",x.target.value),className:"form-input",required:!0,disabled:g,children:[e.jsx("option",{value:"",children:"Sperrart w√§hlen"}),Z.map(x=>e.jsxs("option",{value:x.value,children:[x.icon," ",x.label,x.fixedDuration?` (${x.duration} Spiel${x.duration!==1?"e":""})`:` (1-${x.maxDuration} Spiele)`]},x.value))]})]}),b&&!b.fixedDuration&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Spiele *"}),e.jsx("select",{value:h.customDuration,onChange:x=>u("customDuration",parseInt(x.target.value)),className:"form-input",required:!0,disabled:g,children:Array.from({length:b.maxDuration},(x,E)=>E+1).map(x=>e.jsxs("option",{value:x,children:[x," Spiel",x!==1?"e":""]},x))}),e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["W√§hlen Sie zwischen ",b.minDuration," und ",b.maxDuration," Spielen"]})]}),b&&b.fixedDuration&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"Gelb-Rote Karten haben immer eine feste Sperre von 1 Spiel."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Zus√§tzlicher Grund (optional)"}),e.jsx("input",{type:"text",value:h.reason,onChange:x=>u("reason",x.target.value),className:"form-input",placeholder:"Weitere Details zur Sperre...",disabled:g})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>r(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:g,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!v||g||!n||n.length===0,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verf√ºgbare Sperrarten"}),e.jsx("div",{className:"space-y-2",children:Z.map(x=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:x.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:x.label})]}),e.jsx("span",{className:"text-sm text-text-muted",children:x.fixedDuration?`${x.duration} Spiel${x.duration!==1?"e":""} (fest)`:`1-${x.maxDuration} Spiele (variabel)`})]},x.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-yellow-50 border-yellow-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-yellow-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Nach dem Hinzuf√ºgen k√∂nnen Sie die Sperre in der Sperren-√úbersicht einsehen und verwalten."})]})]})})]})}const me=[{value:"TH",label:"Torwart (TH)"},{value:"IV",label:"Innenverteidiger (IV)"},{value:"AV",label:"Au√üenverteidiger (AV)"},{value:"ZM",label:"Zentrales Mittelfeld (ZM)"},{value:"OM",label:"Offensives Mittelfeld (OM)"},{value:"ST",label:"St√ºrmer (ST)"}];function Le(){const[n,a]=T.useState(!1),[r,t]=T.useState({name:"",team:"",position:"",goals:0,value:0}),[l,h]=T.useState(!1),j=(u,i)=>{t(c=>({...c,[u]:i}))},g=async u=>{u.preventDefault(),h(!0);try{const i=await $.select("players","*",{eq:{name:r.name.trim(),team:r.team.trim()}});if(i.data&&i.data.length>0)throw new Error(`Spieler "${r.name}" existiert bereits im Team "${r.team}"`);const c=await $.insert("players",{name:r.name.trim(),team:r.team.trim(),position:r.position.trim().toUpperCase(),goals:parseInt(r.goals)||0,value:parseFloat(r.value)||0});if(c.error)throw new Error(`Player insert failed: ${c.error.message}`);t({name:"",team:"",position:"",goals:0,value:0}),a(!1),z.success(`Spieler "${r.name}" erfolgreich hinzugef√ºgt!`)}catch(i){console.error("Player submission error:",i),z.error(i.message||"Fehler beim Hinzuf√ºgen des Spielers")}finally{h(!1)}},d=r.name&&r.team&&r.position&&r.value!=="";return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neuen Spieler hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"F√ºgen Sie einen neuen Spieler zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üë§"}),e.jsxs("h4",{className:"text-lg font-medium text-text-primary mb-2",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"}),"Spieler hinzuf√ºgen"]}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um einen neuen Spieler zu erfassen."}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neuen Spieler erfassen"]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content modal-mobile-safe",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neuer Spieler"}),e.jsx("button",{onClick:()=>a(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:l,children:"√ó"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spielername *"}),e.jsx("input",{type:"text",value:r.name,onChange:u=>j("name",u.target.value),className:"form-input",placeholder:"z.B. Max Mustermann",required:!0,disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:r.team,onChange:u=>j("team",u.target.value),className:"form-input",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Team w√§hlen"}),O.map(u=>e.jsx("option",{value:u.value,children:W(u.value)},u.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Position *"}),e.jsxs("select",{value:r.position,onChange:u=>j("position",u.target.value),className:"form-input",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Position w√§hlen"}),me.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Marktwert (Millionen ‚Ç¨) *"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:r.value,onChange:u=>j("value",u.target.value),onFocus:u=>u.target.select(),className:"form-input",placeholder:"0.0",disabled:l}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Marktwert in Millionen Euro (z.B. 1.5 f√ºr 1.5M ‚Ç¨)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Tore"}),e.jsx("input",{type:"number",min:"0",value:r.goals,onChange:u=>j("goals",u.target.value),onFocus:u=>u.target.select(),className:"form-input",placeholder:"0",disabled:l})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:l,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!d||l,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verf√ºgbare Teams"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:O.map(u=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("span",{className:`font-medium ${u.color==="blue"?"text-blue-600":u.color==="red"?"text-red-600":"text-gray-600"}`,children:W(u.value)}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",u.value,")"]})]},u.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verf√ºgbare Positionen"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:me.map(u=>e.jsx("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:e.jsx("span",{className:"font-medium text-text-primary text-sm",children:u.label})},u.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-green-50 border-green-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-green-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-green-700 text-sm",children:"Nach dem Hinzuf√ºgen k√∂nnen Sie den Spieler in der Kader-√úbersicht einsehen und verwalten."})]})]})})]})}const ue=[{value:"Preisgeld",label:"Preisgeld",icon:"üèÜ"},{value:"Strafe",label:"Strafe",icon:"üìâ"},{value:"Spielerkauf",label:"Spielerkauf",icon:"üë§"},{value:"Spielerverkauf",label:"Spielerverkauf",icon:"üí∞"},{value:"Echtgeld-Ausgleich",label:"Echtgeld-Ausgleich",icon:"üí≥"},{value:"SdS Bonus",label:"Spieler des Spiels Bonus",icon:"‚≠ê"},{value:"Sonstiges",label:"Sonstiges",icon:"üìà"}];function Ke(){const[n,a]=T.useState(!1),[r,t]=T.useState({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),[l,h]=T.useState(!1),j=(i,c)=>{t(v=>({...v,[i]:c}))},g=async i=>{i.preventDefault(),h(!0);try{const c=parseFloat(r.amount),v=await $.insert("transactions",{date:r.date,type:r.type.trim(),team:r.team.trim(),amount:c,info:r.info.trim(),match_id:null});if(v.error)throw new Error(`Transaction insert failed: ${v.error.message}`);await d(r.team.trim(),r.type.trim(),c),t({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),a(!1),z.success("Transaktion erfolgreich hinzugef√ºgt!")}catch(c){console.error("Transaction submission error:",c),z.error(c.message||"Fehler beim Hinzuf√ºgen der Transaktion")}finally{h(!1)}},d=async(i,c,v)=>{try{const b=await $.select("finances","*",{eq:{team:i}});let x=b.data&&b.data.length>0?b.data[0]:{team:i,balance:0,debt:0},E={};if(c==="Echtgeld-Ausgleich")E.debt=(x.debt||0)+v;else{let y=(x.balance||0)+v;y<0&&(y=0),E.balance=y}x.id?await $.update("finances",E,x.id):await $.insert("finances",{team:i,balance:E.balance||0,debt:E.debt||0})}catch(b){console.warn("Failed to update finances:",b)}},u=r.team&&r.type&&r.amount&&r.date;return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Transaktion hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erfassen Sie eine neue finanzielle Transaktion."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üí∞"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Transaktion hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Transaktion zu erfassen."}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Transaktion erfassen"]})]})}),n&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content modal-mobile-safe",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Transaktion"}),e.jsx("button",{onClick:()=>a(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:l,children:"√ó"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:r.team,onChange:i=>j("team",i.target.value),className:"form-input",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Team w√§hlen"}),O.filter(i=>i.value!=="Ehemalige").map(i=>e.jsx("option",{value:i.value,children:W(i.value)},i.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Transaktionsart *"}),e.jsxs("select",{value:r.type,onChange:i=>j("type",i.target.value),className:"form-input",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Typ w√§hlen"}),ue.map(i=>e.jsxs("option",{value:i.value,children:[i.icon," ",i.label]},i.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Betrag (‚Ç¨) *"}),e.jsx("input",{type:"number",step:"0.01",value:r.amount,onChange:i=>j("amount",i.target.value),onFocus:i=>i.target.select(),className:"form-input",placeholder:"0.00",required:!0,disabled:l}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Negative Werte f√ºr Ausgaben, positive f√ºr Einnahmen"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Beschreibung"}),e.jsx("input",{type:"text",value:r.info,onChange:i=>j("info",i.target.value),className:"form-input",placeholder:"Zus√§tzliche Informationen...",disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:r.date,onChange:i=>j("date",i.target.value),className:"form-input",required:!0,disabled:l})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:l,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!u||l,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Transaktionsarten"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ue.map(i=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:i.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:i.label})]},i.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verf√ºgbare Teams"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:O.filter(i=>i.value!=="Ehemalige").map(i=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("span",{className:`font-medium ${i.color==="blue"?"text-blue-600":"text-red-600"}`,children:W(i.value)}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",i.value,")"]})]},i.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Nach dem Hinzuf√ºgen k√∂nnen Sie die Transaktion in der Finanzen-√úbersicht einsehen."})]})]})})]})}function Ge(){var ie;const[n,a]=T.useState("players"),[r,t]=T.useState(!1),[l,h]=T.useState(""),[j,g]=T.useState(new Set),{data:d,refetch:u}=P("players","*",{order:{column:"id",ascending:!1}}),{data:i,refetch:c}=P("matches","*",{order:{column:"date",ascending:!1}}),{data:v,refetch:b}=P("bans","*",{order:{column:"id",ascending:!1}}),{data:x,refetch:E}=P("transactions","*",{order:{column:"date",ascending:!1}}),{remove:y}=te("players"),{remove:F}=te("bans"),{remove:k}=te("transactions"),m=[{id:"players",label:"Spieler l√∂schen",icon:"fas fa-users"},{id:"matches",label:"Spiele l√∂schen (Einzel & Bulk)",icon:"fas fa-futbol"},{id:"bans",label:"Sperren l√∂schen",icon:"fas fa-ban"},{id:"transactions",label:"Transaktionen l√∂schen",icon:"fas fa-euro-sign"}],S=f=>{a(f),h(""),g(new Set)},s=(f,A)=>{const C=new Set(j);A?C.add(f):C.delete(f),g(C)},o=f=>{const A=X(f);j.size===A.length?g(new Set):g(new Set(A.map(C=>C.id)))},p=async()=>{if(j.size===0){z.error("Keine Spiele ausgew√§hlt");return}const A=((i==null?void 0:i.filter(B=>j.has(B.id)))||[]).reduce((B,H)=>B+((x==null?void 0:x.filter(ee=>ee.match_id===H.id).length)||0),0);let C=`Sind Sie sicher, dass Sie ${j.size} ausgew√§hlte Spiele l√∂schen m√∂chten?`;if(A>0&&(C+=`

Achtung: ${A} zugeh√∂rige Transaktion(en) werden ebenfalls gel√∂scht.`),C+=`

Dieser Vorgang kann nicht r√ºckg√§ngig gemacht werden!`,!confirm(C))return;t(!0);let w=0,M=0;try{for(const B of j)try{console.log(`Deleting match ${B}`),await se(B),w++}catch(H){console.error(`Failed to delete match ${B}:`,H),M++}g(new Set),w>0&&M===0?z.success(`Alle ${w} Spiele erfolgreich gel√∂scht`):w>0&&M>0?z.success(`${w} Spiele gel√∂scht, ${M} fehlgeschlagen`):z.error(`Alle ${M} L√∂schvorg√§nge fehlgeschlagen`),c(),E(),setTimeout(()=>{c(),E()},1e3)}catch(B){console.error("Bulk delete error:",B),z.error("Fehler beim Bulk-L√∂schen: "+B.message),g(new Set)}finally{t(!1)}},N=()=>{switch(n){case"players":return{total:(d==null?void 0:d.length)||0,filtered:_(d).length};case"matches":return{total:(i==null?void 0:i.length)||0,filtered:X(i).length};case"bans":return{total:(v==null?void 0:v.length)||0,filtered:re(v).length};case"transactions":return{total:(x==null?void 0:x.length)||0,filtered:ne(x).length};default:return{total:0,filtered:0}}},D=async f=>{const A=(v==null?void 0:v.filter(w=>w.player_id===f.id||w.player_name===f.name))||[];let C=`Sind Sie sicher, dass Sie ${f.name} (${f.team}) l√∂schen m√∂chten?`;if(A.length>0&&(C+=`

Achtung: ${A.length} zugeh√∂rige Sperre(n) werden ebenfalls gel√∂scht.`),f.goals&&f.goals>0&&(C+=`
Der Spieler hat ${f.goals} Tor(e) erzielt.`),!!confirm(C)){t(!0);try{await y(f.id),z.success(`Spieler ${f.name} erfolgreich gel√∂scht`),u(),A.length>0&&b()}catch(w){z.error("Fehler beim L√∂schen des Spielers: "+w.message)}finally{t(!1)}}},I=async f=>{const A=(x==null?void 0:x.filter(M=>M.match_id===f.id))||[],C=`AEK ${f.goalsa||0} - ${f.goalsb||0} Real`;let w=`Sind Sie sicher, dass Sie das Spiel vom ${new Date(f.date).toLocaleDateString("de-DE")} (${C}) l√∂schen m√∂chten?`;if(A.length>0&&(w+=`

Achtung: ${A.length} zugeh√∂rige Transaktion(en) werden ebenfalls gel√∂scht.`),f.manofthematch&&(w+=`
Spieler des Spiels: ${f.manofthematch}`),!!confirm(w)){t(!0);try{console.log(`Attempting to delete match ${f.id}`),await se(f.id),console.log(`Successfully deleted match ${f.id}`),z.success("Spiel erfolgreich gel√∂scht"),c(),E(),setTimeout(()=>{c(),E()},1e3)}catch(M){console.error("Error deleting match:",M);let B="Fehler beim L√∂schen des Spiels: ";M.message.includes("not found")?B+=`Spiel mit ID ${f.id} wurde nicht in der Datenbank gefunden. M√∂glicherweise wurde es bereits gel√∂scht.`:M.message.includes("Invalid match ID")?B+=`Ung√ºltige Spiel-ID: ${f.id}`:M.message.includes("fetch failed")||M.message.includes("network")?B+="Netzwerkfehler. Bitte √ºberpr√ºfen Sie Ihre Internetverbindung.":B+=M.message,z.error(B)}finally{t(!1)}}},G=async f=>{var M;const A=f.player_name||(f.player_id&&d?(M=d.find(B=>B.id===f.player_id))==null?void 0:M.name:"Unbekannter Spieler"),C=Math.max(0,(f.totalgames||0)-(f.matchesserved||0));let w=`Sind Sie sicher, dass Sie die Sperre f√ºr ${A} l√∂schen m√∂chten?`;if(w+=`
Sperrtyp: ${f.type}`,C>0?w+=`
Noch ${C} Spiel(e) verbleibend`:w+=`
Sperre bereits abgesessen`,f.reason&&(w+=`
Grund: ${f.reason}`),!!confirm(w)){t(!0);try{await F(f.id),z.success(`Sperre f√ºr ${A} erfolgreich gel√∂scht`),b()}catch(B){z.error("Fehler beim L√∂schen der Sperre: "+B.message)}finally{t(!1)}}},K=async f=>{const A=f.match_id&&i?i.find(w=>w.id===f.match_id):null;let C=`Sind Sie sicher, dass Sie die Transaktion "${f.type}" l√∂schen m√∂chten?`;if(C+=`
Betrag: ${f.amount>0?"+":""}${f.amount}M ‚Ç¨ (${f.team})`,f.date&&(C+=`
Datum: ${new Date(f.date).toLocaleDateString("de-DE")}`),f.info&&(C+=`
Info: ${f.info}`),A&&(C+=`
Zugeh√∂riges Spiel: ${new Date(A.date).toLocaleDateString("de-DE")} (AEK ${A.goalsa||0} - ${A.goalsb||0} Real)`),!!confirm(C)){t(!0);try{await k(f.id),z.success("Transaktion erfolgreich gel√∂scht"),E()}catch(w){z.error("Fehler beim L√∂schen der Transaktion: "+w.message)}finally{t(!1)}}},R=f=>{const A=O.find(C=>C.value===f);return A?A.icon:"‚ö´"},_=f=>l?(f||[]).filter(A=>{var C,w,M;return((C=A.name)==null?void 0:C.toLowerCase().includes(l.toLowerCase()))||((w=A.team)==null?void 0:w.toLowerCase().includes(l.toLowerCase()))||((M=A.position)==null?void 0:M.toLowerCase().includes(l.toLowerCase()))}):f||[],X=f=>l?(f||[]).filter(A=>{var C;return new Date(A.date).toLocaleDateString("de-DE").includes(l)||((C=A.manofthematch)==null?void 0:C.toLowerCase().includes(l.toLowerCase()))}):f||[],re=f=>l?(f||[]).filter(A=>{var w,M,B,H;const C=A.player_name||(A.player_id&&d?(w=d.find(ee=>ee.id===A.player_id))==null?void 0:w.name:"");return(C==null?void 0:C.toLowerCase().includes(l.toLowerCase()))||((M=A.type)==null?void 0:M.toLowerCase().includes(l.toLowerCase()))||((B=A.team)==null?void 0:B.toLowerCase().includes(l.toLowerCase()))||((H=A.reason)==null?void 0:H.toLowerCase().includes(l.toLowerCase()))}):f||[],ne=f=>l?(f||[]).filter(A=>{var C,w,M,B;return((C=A.type)==null?void 0:C.toLowerCase().includes(l.toLowerCase()))||((w=A.team)==null?void 0:w.toLowerCase().includes(l.toLowerCase()))||((M=A.info)==null?void 0:M.toLowerCase().includes(l.toLowerCase()))||((B=A.amount)==null?void 0:B.toString().includes(l))}):f||[],le=()=>{const f=_(d);return!f||f.length===0?e.jsx("p",{className:"text-text-muted text-center py-4",children:l?"Keine Spieler gefunden":"Keine Spieler vorhanden"}):e.jsx("div",{className:"space-y-2",children:f.map(A=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:R(A.team)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary",children:A.name}),e.jsxs("p",{className:"text-sm text-text-muted",children:[A.team," ‚Ä¢ ",A.position,A.goals!==void 0&&e.jsxs("span",{className:"ml-2",children:["‚Ä¢ ",A.goals," Tore"]})]})]})]}),e.jsxs("button",{onClick:()=>D(A),disabled:r,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"L√∂schen"]})]},A.id))})},ye=()=>{const f=X(i);if(!f||f.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:l?"Keine Spiele gefunden":"Keine Spiele vorhanden"});const A=f.length>0&&f.every(w=>j.has(w.id)),C=j.size>0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:A,onChange:()=>o(i),className:"w-4 h-4 text-accent-primary focus:ring-accent-primary border-gray-300 rounded"}),e.jsxs("span",{className:"text-sm text-text-primary",children:[A?"Alle abw√§hlen":"Alle ausw√§hlen"," (",f.length,")"]})]}),j.size>0&&e.jsxs("span",{className:"text-sm text-accent-primary font-medium",children:[j.size," ausgew√§hlt"]})]}),C&&e.jsxs("button",{onClick:p,disabled:r,className:"btn-primary btn-sm bg-red-600 hover:bg-red-700 text-white disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),j.size," Spiele l√∂schen"]})]}),e.jsx("div",{className:"space-y-2",children:f.map(w=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-bg-tertiary rounded-lg",children:[e.jsx("label",{className:"flex items-center cursor-pointer",children:e.jsx("input",{type:"checkbox",checked:j.has(w.id),onChange:M=>s(w.id,M.target.checked),className:"w-4 h-4 text-accent-primary focus:ring-accent-primary border-gray-300 rounded"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-text-primary",children:["ID ",w.id," ‚Ä¢ ",new Date(w.date).toLocaleDateString("de-DE")]}),e.jsxs("p",{className:"text-sm text-text-muted",children:["AEK ",w.goalsa||0," - ",w.goalsb||0," Real"]}),w.manofthematch&&e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:[e.jsx("i",{className:"fas fa-star mr-1"}),"SdS: ",w.manofthematch]})]}),e.jsxs("button",{onClick:()=>I(w),disabled:r,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Einzeln l√∂schen"]})]})})]},w.id))})]})},je=()=>{const f=re(v);if(!f||f.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:l?"Keine Sperren gefunden":"Keine Sperren vorhanden"});const A=w=>{if(w.player_name)return w.player_name;if(w.player_id&&d){const M=d.find(B=>B.id===w.player_id);return M?M.name:"Unbekannter Spieler"}return"Unbekannter Spieler"},C=w=>{const M=(w.totalgames||0)-(w.matchesserved||0);return Math.max(0,M)};return e.jsx("div",{className:"space-y-2",children:f.map(w=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:R(w.team)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary",children:A(w)}),e.jsxs("p",{className:"text-sm text-text-muted",children:[w.type," ‚Ä¢ ",w.totalgames||0," Spiele",C(w)>0?` (${C(w)} verbleibend)`:" (abgesessen)"]}),w.reason&&e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["Grund: ",w.reason]})]})]}),e.jsxs("button",{onClick:()=>G(w),disabled:r,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"L√∂schen"]})]},w.id))})},ve=()=>{const f=ne(x);if(!f||f.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:l?"Keine Transaktionen gefunden":"Keine Transaktionen vorhanden"});const A=C=>{if(!C.match_id||!i)return null;const w=i.find(M=>M.id===C.match_id);return w?`Match: ${new Date(w.date).toLocaleDateString("de-DE")} (AEK ${w.goalsa||0} - ${w.goalsb||0} Real)`:null};return e.jsx("div",{className:"space-y-2",children:f.map(C=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:R(C.team)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-text-primary",children:C.type}),e.jsxs("p",{className:"text-sm text-text-muted",children:[e.jsxs("span",{className:C.amount>0?"text-green-600":"text-red-600",children:[C.amount>0?"+":"",C.amount,"M ‚Ç¨"]}),C.date&&e.jsxs("span",{className:"ml-2",children:["‚Ä¢ ",new Date(C.date).toLocaleDateString("de-DE")]})]}),C.info&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:C.info}),A(C)&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[e.jsx("i",{className:"fas fa-futbol mr-1"}),A(C)]})]})]}),e.jsxs("button",{onClick:()=>K(C),disabled:r,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"L√∂schen"]})]},C.id))})},Ne=()=>{switch(n){case"players":return le();case"matches":return ye();case"bans":return je();case"transactions":return ve();default:return le()}};return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Daten l√∂schen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Verwalten Sie die L√∂schung von Spielern, Spielen, Sperren und Transaktionen."})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:m.map(f=>e.jsxs("button",{onClick:()=>S(f.id),className:`p-3 rounded-lg text-sm font-medium transition-colors ${n===f.id?"bg-accent-red text-white":"bg-bg-tertiary text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[e.jsx("i",{className:`${f.icon} mr-2`}),f.label]},f.id))}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:`${(ie=m.find(f=>f.id===n))==null?void 0:ie.label.replace(" l√∂schen","")} durchsuchen...`,value:l,onChange:f=>h(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent-red focus:border-transparent text-text-primary bg-bg-secondary"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-search text-text-muted"})}),l&&e.jsx("button",{onClick:()=>h(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-text-muted hover:text-text-primary",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l&&e.jsxs("p",{className:"text-xs text-text-muted",children:[e.jsx("i",{className:"fas fa-filter mr-1"}),"Gefiltert nach: ‚Äú",l,"‚Äù"]}),e.jsx("p",{className:"text-xs text-text-muted ml-auto",children:(()=>{const f=N();return l?`${f.filtered} von ${f.total} Eintr√§gen`:`${f.total} Eintr√§ge`})()})]})]}),e.jsxs("div",{className:"modern-card",children:[r&&e.jsx(fe,{message:"L√∂sche..."}),!r&&Ne()]}),e.jsx("div",{className:"mt-6 modern-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-red-600 mr-3",children:e.jsx("i",{className:"fas fa-exclamation-triangle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-1",children:"Achtung"}),e.jsx("p",{className:"text-red-700 text-sm",children:"Das L√∂schen von Daten ist permanent und kann nicht r√ºckg√§ngig gemacht werden. Bitte √ºberpr√ºfen Sie Ihre Auswahl sorgf√§ltig, bevor Sie fortfahren."})]})]})})]})}function Ve({data:n=[],searchFields:a=[],filterOptions:r=[],onResults:t,placeholder:l="Suchen...",showCount:h=!0,searchExtractor:j}){const[g,d]=T.useState(""),[u,i]=T.useState({}),[c,v]=T.useState(""),[b,x]=T.useState("asc"),E=T.useRef(null),y=T.useMemo(()=>{let s=[...n];if(g.trim()){const o=g.toLowerCase().trim();s=s.filter(p=>{if(j){const N=j(p);return N&&N.toLowerCase().includes(o)}return a.some(N=>{const D=Y(p,N);return D&&D.toString().toLowerCase().includes(o)})})}return Object.entries(u).forEach(([o,p])=>{if(p&&p!=="all"){const N=r.find(D=>D.key===o);N&&N.filterFn?s=s.filter(D=>N.filterFn(D,p)):s=s.filter(D=>Y(D,o)===p)}}),c&&s.sort((o,p)=>{const N=Y(o,c),D=Y(p,c);let I=0;return typeof N=="number"&&typeof D=="number"?I=N-D:N instanceof Date&&D instanceof Date?I=N.getTime()-D.getTime():I=String(N).localeCompare(String(D)),b==="desc"?-I:I}),s},[n,g,u,c,b,a,r,j]);T.useEffect(()=>{t&&JSON.stringify(y)!==E.current&&(E.current=JSON.stringify(y),t(y))},[y,t]);const F=(s,o)=>{i(p=>({...p,[s]:o}))},k=s=>{c===s?x(b==="asc"?"desc":"asc"):(v(s),x("asc"))},m=()=>{d(""),i({}),v(""),x("asc")},S=g||Object.values(u).some(s=>s&&s!=="all")||c;return e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm mb-4",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:e.jsx("span",{className:"text-text-secondary","aria-hidden":"true",children:"üîç"})}),e.jsx("input",{type:"text",value:g,onChange:s=>d(s.target.value),placeholder:`${l} (Strg+K f√ºr globale Suche)`,className:"w-full pl-10 pr-20 py-2 bg-bg-secondary border border-border-light rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary-green focus:border-transparent"}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center gap-1 pr-3",children:[e.jsx("button",{onClick:()=>{const s=new CustomEvent("global-search-toggle");window.dispatchEvent(s)},className:"text-text-secondary hover:text-primary-green transition-colors p-1 rounded",title:"Globale Suche √∂ffnen (Strg+K)",children:e.jsx("span",{"aria-hidden":"true",children:"üåê"})}),g&&e.jsx("button",{onClick:()=>d(""),className:"text-text-secondary hover:text-text-primary transition-colors p-1 rounded",title:"Suchfeld leeren",children:e.jsx("span",{"aria-hidden":"true",children:"‚úï"})})]})]})}),(r.length>0||c)&&e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[r.map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-text-primary",children:[s.label,":"]}),e.jsxs("select",{value:u[s.key]||"",onChange:o=>F(s.key,o.target.value),className:"px-3 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"",children:"Alle"}),s.options.map(o=>e.jsx("option",{value:o.value,children:o.label},o.value))]})]},s.key)),a.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Sortieren:"}),e.jsxs("select",{value:c,onChange:s=>v(s.target.value),className:"px-3 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"",children:"Standard"}),a.map(s=>e.jsx("option",{value:s,children:xe(s)},s))]}),c&&e.jsx("button",{onClick:()=>k(c),className:"px-2 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary hover:bg-bg-tertiary transition-colors duration-200",title:`Sortierung: ${b==="asc"?"Aufsteigend":"Absteigend"}`,children:b==="asc"?"‚Üë":"‚Üì"})]}),S&&e.jsx("button",{onClick:m,className:"px-3 py-1 bg-red-100 text-red-800 border border-red-200 rounded text-sm hover:bg-red-200 transition-colors duration-200",children:"Filter zur√ºcksetzen"})]})}),h&&e.jsx("div",{className:"px-4 py-2 bg-bg-secondary border-b border-border-light",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-text-secondary",children:y.length===n.length?`${n.length} Eintr√§ge`:`${y.length} von ${n.length} Eintr√§gen`}),S&&e.jsxs("div",{className:"flex items-center gap-2",children:[g&&e.jsxs("span",{className:"bg-primary-green bg-opacity-10 text-primary-green px-2 py-1 rounded text-xs",children:['üîç "',g,'"']}),Object.entries(u).filter(([,s])=>s&&s!=="all").map(([s,o])=>{const p=r.find(D=>D.key===s),N=p==null?void 0:p.options.find(D=>D.value===o);return e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:[p==null?void 0:p.label,": ",(N==null?void 0:N.label)||o]},s)}),c&&e.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:["üìä ",xe(c)," ",b==="asc"?"‚Üë":"‚Üì"]})]})]})})]})}function Y(n,a){return!n||!a?"":a.split(".").reduce((r,t)=>r&&r[t]!==void 0?r[t]:"",n)}function xe(n){return{name:"Name",team:"Team",position:"Position",value:"Wert",date:"Datum",goalsa:"AEK Tore",goalsb:"Real Tore",type:"Typ",amount:"Betrag",description:"Beschreibung",totalgames:"Gesamt Spiele",matchesserved:"Gespielte Spiele"}[n]||n.charAt(0).toUpperCase()+n.slice(1)}function he({onNavigate:n}){const[a,r]=T.useState("players"),[t,l]=T.useState([]),{data:h,loading:j}=P("players","*"),{data:g,loading:d}=P("matches","*",{order:{column:"date",ascending:!1}}),{data:u,loading:i}=P("transactions","*",{order:{column:"date",ascending:!1}}),{data:c,loading:v}=P("bans","*",{order:{column:"id",ascending:!1}}),b=j||d||i||v,x=[{id:"players",label:"Spieler",icon:"fas fa-users",data:h||[],searchFields:["name","position","team","value"],filterOptions:[{key:"team",label:"Team",options:[{value:"AEK",label:"AEK Athen"},{value:"Real",label:"Real Madrid"},{value:"Ehemalige",label:"Ehemalige"}]},{key:"position",label:"Position",options:[{value:"TH",label:"Torwart"},{value:"IV",label:"Innenverteidiger"},{value:"LV",label:"Linksverteidiger"},{value:"RV",label:"Rechtsverteidiger"},{value:"ZDM",label:"Defensives Mittelfeld"},{value:"ZM",label:"Zentrales Mittelfeld"},{value:"ZOM",label:"Offensives Mittelfeld"},{value:"LM",label:"Linkes Mittelfeld"},{value:"RM",label:"Rechtes Mittelfeld"},{value:"LF",label:"Linker Fl√ºgel"},{value:"RF",label:"Rechter Fl√ºgel"},{value:"ST",label:"St√ºrmer"}]}]},{id:"matches",label:"Spiele",icon:"fas fa-futbol",data:g||[],searchFields:["date","goalsa","goalsb","goalscorers","manofthematch","teama","teamb"],filterOptions:[],searchExtractor:k=>{const m=[];if(k.date&&m.push(new Date(k.date).toLocaleDateString("de-DE")),k.teama&&m.push(k.teama),k.teamb&&m.push(k.teamb),k.goalsa!==void 0&&m.push(k.goalsa.toString()),k.goalsb!==void 0&&m.push(k.goalsb.toString()),k.goalslista)try{const S=typeof k.goalslista=="string"?JSON.parse(k.goalslista):k.goalslista;Array.isArray(S)&&S.forEach(s=>{typeof s=="string"?m.push(s):s&&s.player&&m.push(s.player)})}catch{}if(k.goalslistb)try{const S=typeof k.goalslistb=="string"?JSON.parse(k.goalslistb):k.goalslistb;Array.isArray(S)&&S.forEach(s=>{typeof s=="string"?m.push(s):s&&s.player&&m.push(s.player)})}catch{}return k.manofthematch&&(m.push(k.manofthematch),m.push("Spieler des Spiels"),m.push("SdS")),m.join(" ").toLowerCase()}},{id:"transactions",label:"Transaktionen",icon:"fas fa-euro-sign",data:u||[],searchFields:["type","description","amount","date"],filterOptions:[{key:"type",label:"Typ",options:[{value:"transfer",label:"Transfer"},{value:"preis",label:"Preisgeld"},{value:"strafe",label:"Strafe"},{value:"sonstige",label:"Sonstige"}],filterFn:(k,m)=>{var o,p;const S=((o=k.type)==null?void 0:o.toLowerCase())||"",s=((p=k.description)==null?void 0:p.toLowerCase())||"";switch(m){case"transfer":return S.includes("transfer")||s.includes("transfer");case"preis":return S.includes("preis")||s.includes("preis")||k.amount>0;case"strafe":return S.includes("strafe")||s.includes("strafe");case"sonstige":return!S.includes("transfer")&&!S.includes("preis")&&!S.includes("strafe");default:return!0}}}]},{id:"bans",label:"Sperren",icon:"fas fa-ban",data:c||[],searchFields:["player_name","team","type","reason"],filterOptions:[{key:"team",label:"Team",options:[{value:"AEK",label:"AEK Athen"},{value:"Real",label:"Real Madrid"}]},{key:"type",label:"Typ",options:[{value:"Gelbe Karte",label:"Gelbe Karte"},{value:"Gelb-Rote Karte",label:"Gelb-Rote Karte"},{value:"Rote Karte",label:"Rote Karte"},{value:"Verletzung",label:"Verletzung"}]}]}],E=x.find(k=>k.id===a),y=(k,m)=>{switch(m){case"players":n==null||n("squad");break;case"matches":n==null||n("matches");break;case"transactions":n==null||n("finances");break;case"bans":n==null||n("bans");break}},F=()=>{const k=t.length>0?t:E.data;return k.length===0?e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("i",{className:`${E.icon} text-4xl mb-2`}),e.jsxs("p",{children:["Keine ",E.label.toLowerCase()," gefunden"]})]}):e.jsx("div",{className:"divide-y divide-border-light",children:k.map(m=>e.jsxs("button",{onClick:()=>y(m,a),className:"w-full p-4 hover:bg-bg-secondary transition-colors text-left focus:outline-none focus:ring-2 focus:ring-primary-green focus:ring-inset",children:[a==="players"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:m.name}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[m.position," ‚Ä¢ ",m.team," ‚Ä¢ ",m.value||0,"M ‚Ç¨"]}),(m.goals||0)>0&&e.jsxs("p",{className:"text-xs text-primary-green",children:["‚öΩ ",m.goals||0," Tore"]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[m.value||0,"M ‚Ç¨"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zum Spieler ‚Üí"})]})]}),a==="matches"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:new Date(m.date).toLocaleDateString("de-DE")}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[m.teama||"AEK"," ",m.goalsa||0," - ",m.goalsb||0," ",m.teamb||"Real"]}),(()=>{const S=[];try{if(m.goalslista){const s=typeof m.goalslista=="string"?JSON.parse(m.goalslista):m.goalslista;Array.isArray(s)&&s.forEach(o=>{const p=typeof o=="string"?o:o==null?void 0:o.player;p&&S.push(`${p} (AEK)`)})}if(m.goalslistb){const s=typeof m.goalslistb=="string"?JSON.parse(m.goalslistb):m.goalslistb;Array.isArray(s)&&s.forEach(o=>{const p=typeof o=="string"?o:o==null?void 0:o.player;p&&S.push(`${p} (Real)`)})}}catch{}return S.length>0?e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["‚öΩ ",S.slice(0,3).join(", "),S.length>3?"...":""]}):null})(),m.manofthematch&&e.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:["‚≠ê SdS: ",m.manofthematch]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[(m.goalsa||0)+(m.goalsb||0)," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zum Spiel ‚Üí"})]})]}),a==="transactions"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:m.type||"Transaktion"}),e.jsx("p",{className:"text-sm text-text-secondary",children:m.description||"Keine Beschreibung"}),e.jsx("p",{className:"text-xs text-text-secondary",children:new Date(m.date).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:`text-lg font-bold ${(m.amount||0)>=0?"text-green-600":"text-red-600"}`,children:[(m.amount||0)>0?"+":"",m.amount||0,"‚Ç¨"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zu Finanzen ‚Üí"})]})]}),a==="bans"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:m.player_name}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[m.team," ‚Ä¢ ",m.type]}),m.reason&&e.jsx("p",{className:"text-xs text-text-secondary",children:m.reason})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-sm text-accent-red",children:[m.duration||1," Spiel",(m.duration||1)!==1?"e":""]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zu Sperren ‚Üí"})]})]})]},m.id))})};return b?e.jsx(fe,{message:"Lade Daten..."}):e.jsxs("div",{className:"p-4 pb-20 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-1",children:"üîç Globale Suche"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Durchsuche alle Daten zentral an einem Ort"})]}),e.jsx("div",{className:"icon-only-nav flex overflow-x-auto space-x-2 pb-2",children:x.map(k=>e.jsxs("button",{onClick:()=>{r(k.id),l([])},className:`search-nav-button flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${a===k.id?"bg-primary-green text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary"}`,title:k.label,"aria-label":k.label,children:[e.jsx("i",{className:k.icon}),e.jsx("span",{className:"font-medium hidden sm:inline",children:k.label}),e.jsxs("span",{className:"text-xs opacity-75",children:["(",k.data.length,")"]})]},k.id))}),e.jsx(Ve,{data:E.data,searchFields:E.searchFields,filterOptions:E.filterOptions,searchExtractor:E.searchExtractor,onResults:l,placeholder:`${E.label} durchsuchen...`}),e.jsxs("div",{className:"modern-card",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("h4",{className:"font-medium text-text-primary",children:[t.length>0?"Suchergebnisse":`Alle ${E.label}`,e.jsxs("span",{className:"text-text-secondary ml-2",children:["(",t.length>0?t.length:E.data.length,")"]})]})}),F()]})]})}function Pe(){const{theme:n,autoMode:a,toggleTheme:r,setAutoTheme:t,setManualTheme:l}=we();return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"üé®"}),"Design & Darstellung"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Darstellungsmodus"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>t(!0),className:`p-4 rounded-lg border-2 transition-all duration-300 flex flex-col items-center space-y-2 ${a?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsx("div",{className:"text-2xl",children:"üåó"}),e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Automatisch"}),e.jsx("div",{className:"text-xs text-text-muted text-center",children:"Folgt den Systemeinstellungen"})]}),e.jsxs("button",{onClick:()=>l("light"),className:`p-4 rounded-lg border-2 transition-all duration-300 flex flex-col items-center space-y-2 ${!a&&n==="light"?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsx("div",{className:"text-2xl",children:"‚òÄÔ∏è"}),e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Hell"}),e.jsx("div",{className:"text-xs text-text-muted text-center",children:"Helle Darstellung"})]}),e.jsxs("button",{onClick:()=>l("dark"),className:`p-4 rounded-lg border-2 transition-all duration-300 flex flex-col items-center space-y-2 ${!a&&n==="dark"?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsx("div",{className:"text-2xl",children:"üåô"}),e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Dunkel"}),e.jsx("div",{className:"text-xs text-text-muted text-center",children:"Dunkle Darstellung"})]})]})]}),e.jsx("div",{className:"bg-bg-tertiary rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Aktueller Modus"}),e.jsx("div",{className:"text-xs text-text-muted",children:a?`Automatisch (${n==="dark"?"Dunkel":"Hell"} - basierend auf Systemeinstellung)`:`Manuell (${n==="dark"?"Dunkel":"Hell"})`})]}),e.jsx("div",{className:"text-2xl",children:n==="dark"?"üåô":"‚òÄÔ∏è"})]})}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Schnellwechsel"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Wechselt zwischen Hell und Dunkel"})]}),e.jsxs("button",{onClick:r,className:"bg-primary-green hover:bg-primary-green-dark text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center space-x-2",children:[e.jsx("span",{children:n==="dark"?"‚òÄÔ∏è":"üåô"}),e.jsxs("span",{className:"text-sm font-medium",children:["Zu ",n==="dark"?"Hell":"Dunkel"]})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-500 text-xl flex-shrink-0",children:"üí°"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"Darstellungshinweise"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Automatisch:"})," Wechselt automatisch basierend auf Ihren Systemeinstellungen"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Hell:"})," Optimiert f√ºr helle Umgebungen und bessere Akkulaufzeit"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Dunkel:"})," Reduziert Augenbelastung bei schwachem Licht"]}),e.jsx("p",{children:"‚Ä¢ Alle Karten, Modals und UI-Elemente passen sich automatisch an"})]})]})]})})]})})}function Oe(){const[n,a]=T.useState({primaryGreen:"#10B981",primaryGreenDark:"#059669",primaryGreenLight:"#34D399",accentOrange:"#F59E0B",accentRed:"#EF4444",accentBlue:"#3B82F6"}),[r]=T.useState([{name:"Standard",colors:{primaryGreen:"#10B981",primaryGreenDark:"#059669",primaryGreenLight:"#34D399",accentOrange:"#F59E0B",accentRed:"#EF4444",accentBlue:"#3B82F6"}},{name:"AEK Blau",colors:{primaryGreen:"#1E40AF",primaryGreenDark:"#1E3A8A",primaryGreenLight:"#3B82F6",accentOrange:"#F59E0B",accentRed:"#EF4444",accentBlue:"#60A5FA"}},{name:"Real Rot",colors:{primaryGreen:"#DC2626",primaryGreenDark:"#B91C1C",primaryGreenLight:"#EF4444",accentOrange:"#F59E0B",accentRed:"#F87171",accentBlue:"#3B82F6"}},{name:"Dunkles Gold",colors:{primaryGreen:"#D97706",primaryGreenDark:"#B45309",primaryGreenLight:"#F59E0B",accentOrange:"#FBBF24",accentRed:"#EF4444",accentBlue:"#3B82F6"}}]),[t,l]=T.useState(!1),[h,j]=T.useState("Standard");T.useEffect(()=>{const b=localStorage.getItem("fifa-tracker-custom-colors");if(b)try{const x=JSON.parse(b);a(x),g(x)}catch(x){console.error("Error loading custom colors:",x)}},[]);const g=b=>{const x=document.documentElement;x.style.setProperty("--primary-green",b.primaryGreen),x.style.setProperty("--primary-green-dark",b.primaryGreenDark),x.style.setProperty("--primary-green-light",b.primaryGreenLight),x.style.setProperty("--accent-orange",b.accentOrange),x.style.setProperty("--accent-red",b.accentRed),x.style.setProperty("--accent-blue",b.accentBlue)},d=(b,x)=>{const E={...n,[b]:x};a(E),l(!0),j("Benutzerdefiniert"),g(E)},u=b=>{a(b.colors),j(b.name),l(!0),g(b.colors)},i=()=>{localStorage.setItem("fifa-tracker-custom-colors",JSON.stringify(n)),l(!1);const b=new CustomEvent("show-toast",{detail:{message:"Farbschema gespeichert!",type:"success"}});window.dispatchEvent(b)},c=()=>{const b=r[0].colors;a(b),j("Standard"),l(!0),g(b)},v=({label:b,colorKey:x,value:E,description:y})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary",children:b}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"color",value:E,onChange:F=>d(x,F.target.value),className:"w-12 h-12 rounded-lg border-2 border-border-medium cursor-pointer appearance-none",style:{background:E}}),e.jsx("div",{className:"absolute inset-0 w-12 h-12 rounded-lg border-2 border-white pointer-events-none shadow-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",value:E,onChange:F=>d(x,F.target.value),className:"w-full px-3 py-2 text-sm border border-border-medium rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green/50",placeholder:"#000000"}),y&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:y})]})]})]});return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"üé®"}),"Farbkonfiguration"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-3",children:"Vorgefertigte Farbschemata"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:r.map(b=>e.jsxs("button",{onClick:()=>u(b),className:`p-3 rounded-lg border-2 transition-all duration-300 ${h===b.name?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border border-white/50",style:{backgroundColor:b.colors.primaryGreen}}),e.jsx("div",{className:"w-4 h-4 rounded-full border border-white/50",style:{backgroundColor:b.colors.accentRed}}),e.jsx("div",{className:"w-4 h-4 rounded-full border border-white/50",style:{backgroundColor:b.colors.accentBlue}})]}),e.jsx("div",{className:"text-xs font-medium text-text-primary",children:b.name})]},b.name))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-text-primary",children:"Individuelle Farbanpassung"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(v,{label:"Prim√§rfarbe",colorKey:"primaryGreen",value:n.primaryGreen,description:"Hauptfarbe f√ºr Buttons und Akzente"}),e.jsx(v,{label:"Prim√§rfarbe (Dunkel)",colorKey:"primaryGreenDark",value:n.primaryGreenDark,description:"Dunklere Variante f√ºr Hover-Effekte"}),e.jsx(v,{label:"Prim√§rfarbe (Hell)",colorKey:"primaryGreenLight",value:n.primaryGreenLight,description:"Hellere Variante f√ºr Highlights"}),e.jsx(v,{label:"Akzentfarbe Orange",colorKey:"accentOrange",value:n.accentOrange,description:"Orange Akzente und Warnungen"}),e.jsx(v,{label:"Akzentfarbe Rot",colorKey:"accentRed",value:n.accentRed,description:"Rote Akzente und Fehler"}),e.jsx(v,{label:"Akzentfarbe Blau",colorKey:"accentBlue",value:n.accentBlue,description:"Blaue Akzente und Informationen"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-border-light",children:[e.jsx("button",{onClick:i,disabled:!t,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all duration-300 ${t?"bg-primary-green hover:bg-primary-green-dark text-white":"bg-border-medium text-text-muted cursor-not-allowed"}`,children:t?"Farben speichern":"Keine √Ñnderungen"}),e.jsx("button",{onClick:c,className:"py-3 px-4 bg-bg-tertiary hover:bg-border-light text-text-primary border border-border-medium rounded-lg font-medium transition-all duration-300",children:"Zur√ºcksetzen"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-bg-tertiary rounded-lg",children:[e.jsx("h5",{className:"text-sm font-medium text-text-primary mb-3",children:"Vorschau"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{className:"btn-primary text-sm py-2 px-4",style:{backgroundColor:n.primaryGreen,borderColor:n.primaryGreen},children:"Prim√§r Button"}),e.jsx("div",{className:"px-3 py-2 rounded text-white text-sm",style:{backgroundColor:n.accentRed},children:"Rot Akzent"}),e.jsx("div",{className:"px-3 py-2 rounded text-white text-sm",style:{backgroundColor:n.accentBlue},children:"Blau Akzent"}),e.jsx("div",{className:"px-3 py-2 rounded text-white text-sm",style:{backgroundColor:n.accentOrange},children:"Orange Akzent"})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-500 text-xl flex-shrink-0",children:"üí°"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"Farbhinweise"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("p",{children:"‚Ä¢ √Ñnderungen werden sofort in der Vorschau angezeigt"}),e.jsx("p",{children:"‚Ä¢ Gespeicherte Farben werden automatisch bei der n√§chsten Anmeldung geladen"}),e.jsx("p",{children:"‚Ä¢ Verwenden Sie Hex-Codes (#RRGGBB) f√ºr pr√§zise Farben"}),e.jsx("p",{children:"‚Ä¢ Team-spezifische Presets helfen bei der schnellen Anpassung"})]})]})]})})]})})}class _e{constructor(){this.isSupported="serviceWorker"in navigator&&"PushManager"in window,this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent),this.permission=Notification.permission,this.subscription=null,this.settings=this.loadSettings()}async initialize(){if(!this.isSupported)return console.warn("Push notifications not supported"),!1;try{if("serviceWorker"in navigator){const a=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",a)}return this.permission=Notification.permission,!0}catch(a){return console.error("Failed to initialize notifications:",a),!1}}async requestPermission(){if(!this.isSupported)throw new Error("Notifications not supported");if(this.permission==="granted")return!0;try{if(this.isIOS){const a=await Notification.requestPermission();return this.permission=a,a==="granted"}else{const a=await Notification.requestPermission();return this.permission=a,a==="granted"}}catch(a){return console.error("Permission request failed:",a),!1}}async subscribe(){if(!this.isSupported||this.permission!=="granted")throw new Error("Cannot subscribe: permission not granted");try{const a=await navigator.serviceWorker.ready,r=await a.pushManager.getSubscription();if(r)return this.subscription=r,r;const t=await a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.getVAPIDKey()});return this.subscription=t,await this.sendSubscriptionToServer(t),t}catch(a){throw console.error("Subscription failed:",a),a}}async unsubscribe(){if(!this.subscription)return!0;try{return await this.subscription.unsubscribe(),await this.removeSubscriptionFromServer(this.subscription),this.subscription=null,!0}catch(a){return console.error("Unsubscribe failed:",a),!1}}async scheduleMatchReminder(a,r=30){if(!this.settings.matchReminders)return;const t=new Date(a.date),l=new Date(t.getTime()-r*60*1e3),h=new Date;if(l<=h)return;const j=l.getTime()-h.getTime();setTimeout(()=>{this.showNotification({title:"‚öΩ FIFA Match Reminder",body:`Match starting in ${r} minutes: AEK vs Real Madrid`,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`match-reminder-${a.id}`,data:{type:"match_reminder",matchId:a.id,url:"/matches"},actions:[{action:"view",title:"View Match",icon:"/assets/icon-180.png"},{action:"dismiss",title:"Dismiss"}]})},j)}async notifyAchievement(a){this.settings.achievements&&await this.showNotification({title:"üèÜ Achievement Unlocked!",body:a.title,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`achievement-${a.id}`,data:{type:"achievement",achievementId:a.id,url:"/stats"}})}async notifyGoal(a,r,t){this.settings.goals&&await this.showNotification({title:"‚öΩ GOAL!",body:`${t} scored for ${r}!`,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`goal-${a.id}-${Date.now()}`,data:{type:"goal",matchId:a.id,url:"/matches"}})}async notifyEvent(a){this.settings.events&&await this.showNotification({title:`üéâ ${a.name}`,body:a.description,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`event-${a.id}`,data:{type:"event",eventId:a.id,url:"/events"}})}async showNotification(a){if(this.permission!=="granted"){console.warn("Cannot show notification: permission not granted");return}try{"serviceWorker"in navigator?await(await navigator.serviceWorker.ready).showNotification(a.title,{body:a.body,icon:a.icon,badge:a.badge,tag:a.tag,data:a.data,actions:a.actions||[],vibrate:this.isIOS?void 0:[200,100,200],requireInteraction:!1,silent:!1}):new Notification(a.title,{body:a.body,icon:a.icon,tag:a.tag,data:a.data})}catch(r){console.error("Failed to show notification:",r)}}updateSettings(a){this.settings={...this.settings,...a},localStorage.setItem("fifa-tracker-notification-settings",JSON.stringify(this.settings))}loadSettings(){const a=localStorage.getItem("fifa-tracker-notification-settings"),r={matchReminders:!0,goals:!0,achievements:!0,events:!0,reminderTime:30};return a?{...r,...JSON.parse(a)}:r}getVAPIDKey(){return"BEl62iUYgUivxIkv69yViEuiBIa40HI0DLLuxazjqak_7kYDjLE2cI5GkJM-5z9z9LzsQI7JClZgZmKjgKrRxfQ"}async sendSubscriptionToServer(a){try{console.log("Would send subscription to server:",a)}catch(r){console.error("Failed to send subscription to server:",r)}}async removeSubscriptionFromServer(a){try{console.log("Would remove subscription from server:",a)}catch(r){console.error("Failed to remove subscription from server:",r)}}async testNotification(){await this.showNotification({title:"üß™ Test Notification",body:"FUSTA notifications are working!",icon:"/assets/icon-180.png",tag:"test-notification"})}getStatus(){return{supported:this.isSupported,permission:this.permission,subscribed:!!this.subscription,isIOS:this.isIOS,settings:this.settings}}}const L=new _e;typeof window<"u"&&(window.NotificationService=L,L.initialize());function He(){const[n,a]=T.useState(L.getStatus()),[r,t]=T.useState(L.settings),[l,h]=T.useState(!1);T.useEffect(()=>{a(L.getStatus()),t(L.settings)},[]);const j=async()=>{h(!0);try{await L.requestPermission()&&await L.subscribe(),a(L.getStatus())}catch(i){console.error("Permission request failed:",i);const c=new CustomEvent("show-toast",{detail:{message:"Benachrichtigungen konnten nicht aktiviert werden.",type:"error"}});window.dispatchEvent(c)}finally{h(!1)}},g=async()=>{h(!0);try{await L.unsubscribe(),a(L.getStatus())}catch(i){console.error("Unsubscribe failed:",i)}finally{h(!1)}},d=(i,c)=>{const v={...r,[i]:c};t(v),L.updateSettings(v)},u=async()=>{try{await L.testNotification();const i=new CustomEvent("show-toast",{detail:{message:"Test-Benachrichtigung gesendet!",type:"success"}});window.dispatchEvent(i)}catch(i){console.error("Test notification failed:",i)}};return n.supported?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"üì±"}),"Push-Benachrichtigungen"]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Status"}),e.jsxs("div",{className:"text-xs text-text-muted",children:[n.permission==="granted"?"Benachrichtigungen aktiviert":n.permission==="denied"?"Benachrichtigungen blockiert":"Berechtigung ausstehend",n.isIOS&&" (iOS)"]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${n.permission==="granted"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300":n.permission==="denied"?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-300"}`,children:n.permission==="granted"?"Aktiv":n.permission==="denied"?"Blockiert":"Ausstehend"})]})}),n.permission!=="granted"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("button",{onClick:j,disabled:l||n.permission==="denied",className:`w-full py-3 px-4 rounded-lg font-medium transition-all duration-300 ${n.permission==="denied"?"bg-border-medium text-text-muted cursor-not-allowed":"bg-primary-green hover:bg-primary-green-dark text-white"}`,children:l?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Aktiviere..."]}):n.permission==="denied"?"In Browsereinstellungen aktivieren":"Benachrichtigungen aktivieren"}),n.permission==="denied"&&e.jsx("p",{className:"text-xs text-text-muted mt-2 text-center",children:"√ñffnen Sie die Browsereinstellungen und erlauben Sie Benachrichtigungen f√ºr diese Seite."})]}),n.permission==="granted"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-text-primary",children:"Benachrichtigungseinstellungen"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"‚öΩ Spiel-Erinnerungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Erinnerungen vor Spielbeginn"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.matchReminders,onChange:i=>d("matchReminders",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]}),r.matchReminders&&e.jsxs("div",{className:"ml-4 p-3 bg-bg-tertiary rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Erinnerungszeit (Minuten vor Spielbeginn)"}),e.jsxs("select",{value:r.reminderTime,onChange:i=>d("reminderTime",parseInt(i.target.value)),className:"w-full px-3 py-2 text-sm border border-border-medium rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green/50",children:[e.jsx("option",{value:5,children:"5 Minuten"}),e.jsx("option",{value:15,children:"15 Minuten"}),e.jsx("option",{value:30,children:"30 Minuten"}),e.jsx("option",{value:60,children:"1 Stunde"}),e.jsx("option",{value:120,children:"2 Stunden"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"‚öΩ Tor-Benachrichtigungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Bei Toren w√§hrend Live-Matches"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.goals,onChange:i=>d("goals",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"üèÜ Achievement-Benachrichtigungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Bei freigeschalteten Erfolgen"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.achievements,onChange:i=>d("achievements",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"üéâ Event-Benachrichtigungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Bei neuen Events und Turnieren"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.events,onChange:i=>d("events",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-border-light",children:[e.jsx("button",{onClick:u,className:"flex-1 py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all duration-300",children:"Test-Benachrichtigung"}),e.jsx("button",{onClick:g,disabled:l,className:"py-2 px-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-all duration-300 disabled:opacity-50",children:l?"Deaktiviere...":"Deaktivieren"})]})]}),n.isIOS&&e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-500 text-xl flex-shrink-0",children:"üì±"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"iOS-Hinweis"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("p",{children:'‚Ä¢ Installieren Sie die App √ºber "Zum Home-Bildschirm hinzuf√ºgen" f√ºr beste Benachrichtigungen'}),e.jsx("p",{children:"‚Ä¢ Benachrichtigungen funktionieren nur bei aktiver App oder im Hintergrund"}),e.jsx("p",{children:"‚Ä¢ √úberpr√ºfen Sie die iOS-Einstellungen f√ºr App-Benachrichtigungen"})]})]})]})})]})}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"üì±"}),"Push-Benachrichtigungen"]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-yellow-500 text-xl flex-shrink-0",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-1",children:"Nicht unterst√ºtzt"}),e.jsx("div",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:"Ihr Browser unterst√ºtzt keine Push-Benachrichtigungen. Verwenden Sie einen modernen Browser oder installieren Sie die App f√ºr Benachrichtigungen."})]})]})})]})})}function Ue(){const[n,a]=T.useState({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}}),[r,t]=T.useState(!1),[l,h]=T.useState(!0);T.useEffect(()=>{j()},[]);const j=async()=>{try{h(!0),console.log("üîÑ [AdminTab] Loading managers from database...");const c=await q.getManagers();if(console.log("üìä [AdminTab] Manager data result:",c),c&&c.data&&Array.isArray(c.data)&&c.data.length>=2){console.log("‚úÖ [AdminTab] Manager data loaded successfully:",c.data);const v=c.data.find(x=>x.id===1)||{name:"Alexander",gewicht:110,age:30},b=c.data.find(x=>x.id===2)||{name:"Philip",gewicht:105,age:30};console.log("üë§ [AdminTab] AEK Manager:",v),console.log("üë§ [AdminTab] Real Manager:",b),a({aek:{name:v.name,age:v.age||30,weight:v.gewicht},real:{name:b.name,age:b.age||30,weight:b.gewicht}})}else console.warn("‚ö†Ô∏è [AdminTab] No manager data found, using defaults. Result:",c),await g()}catch(c){console.error("‚ùå [AdminTab] Error loading manager settings from database:",c),await g()}finally{h(!1)}},g=async()=>{try{console.log("üîß [AdminTab] Initializing default managers...");const c={name:"Alexander",gewicht:110,age:30},v=await q.insertManager(c);console.log("‚úÖ [AdminTab] AEK manager created:",v);const b={name:"Philip",gewicht:105,age:30},x=await q.insertManager(b);console.log("‚úÖ [AdminTab] Real manager created:",x),a({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}})}catch(c){console.error("‚ùå [AdminTab] Error initializing managers:",c),a({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}})}},d=(c,v,b)=>{a(x=>({...x,[c]:{...x[c],[v]:v==="name"?b:parseInt(b)||0}})),t(!0)},u=async()=>{try{h(!0),console.log("üíæ [TeamSettings] Saving manager settings:",n);const c={name:n.aek.name,gewicht:n.aek.weight,age:n.aek.age},v={name:n.real.name,gewicht:n.real.weight,age:n.real.age};console.log("üíæ [TeamSettings] AEK Data:",c),console.log("üíæ [TeamSettings] Real Data:",v);const b=await q.updateManager(1,c);console.log("üíæ [TeamSettings] AEK Update Result:",b);const x=await q.updateManager(2,v);console.log("üíæ [TeamSettings] Real Update Result:",x),t(!1),window.dispatchEvent(new CustomEvent("managerSettingsChanged"));const E=document.createElement("div");E.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",E.textContent="Manager-Einstellungen gespeichert!",document.body.appendChild(E),setTimeout(()=>{document.body.contains(E)&&document.body.removeChild(E)},3e3)}catch(c){console.error("Error saving manager settings:",c);const v=document.createElement("div");v.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",v.textContent="Fehler beim Speichern!",document.body.appendChild(v),setTimeout(()=>{document.body.contains(v)&&document.body.removeChild(v)},3e3)}finally{h(!1)}},i=()=>{a({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}}),t(!0)};return e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx(Pe,{}),e.jsx(Oe,{}),e.jsx(He,{}),l?e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-green"}),e.jsx("span",{className:"ml-2 text-text-muted",children:"Lade Manager-Einstellungen..."})]})}):e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"üèÜ Team-Manager Einstellungen"}),r&&e.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Ungespeicherte √Ñnderungen"})]}),e.jsx("div",{className:"text-sm text-text-muted mb-6",children:"Hier k√∂nnen Sie die Daten der Team-Manager f√ºr die BAK-Berechnung anpassen."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsxs("h4",{className:"font-medium text-blue-800 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded mr-2"}),"AEK Manager"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:n.aek.name,onChange:c=>d("aek","name",c.target.value),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Manager Name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alter"}),e.jsx("input",{type:"number",min:"18",max:"80",value:n.aek.age,onChange:c=>d("aek","age",c.target.value),onFocus:c=>c.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gewicht (kg)"}),e.jsx("input",{type:"number",min:"40",max:"200",value:n.aek.weight,onChange:c=>d("aek","weight",c.target.value),onFocus:c=>c.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 border border-red-200 rounded-lg bg-red-50",children:[e.jsxs("h4",{className:"font-medium text-red-800 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-red-600 rounded mr-2"}),"Real Manager"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:n.real.name,onChange:c=>d("real","name",c.target.value),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Manager Name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alter"}),e.jsx("input",{type:"number",min:"18",max:"80",value:n.real.age,onChange:c=>d("real","age",c.target.value),onFocus:c=>c.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gewicht (kg)"}),e.jsx("input",{type:"number",min:"40",max:"200",value:n.real.weight,onChange:c=>d("real","weight",c.target.value),onFocus:c=>c.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-border-light",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors",children:"Standardwerte wiederherstellen"}),e.jsx("button",{onClick:u,disabled:!r||l,className:`px-4 py-2 text-sm rounded-lg transition-colors ${r&&!l?"bg-primary-green text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l?"Speichern...":"Einstellungen speichern"})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Hinweis:"})," Diese Einstellungen werden f√ºr die BAK-Berechnung in der Statistik verwendet. Die Werte werden in der Datenbank gespeichert."]})})]})]})}function qe(){const[n,a]=T.useState(()=>{const u=localStorage.getItem("eventsTabEnabled");return u!==null?JSON.parse(u):!1}),[r,t]=T.useState({title:"",message:"",type:"general"}),[l,h]=T.useState(()=>{const u=localStorage.getItem("customEvents");return u?JSON.parse(u):[]}),j=u=>{a(u),localStorage.setItem("eventsTabEnabled",JSON.stringify(u)),setTimeout(()=>{window.location.reload()},500)},g=()=>{if(!r.title||!r.message){alert("Bitte Titel und Nachricht eingeben");return}V(r.type,{title:r.title,message:r.message,timestamp:new Date().toISOString(),custom:!0});const i=[{id:Date.now(),...r,timestamp:new Date().toISOString()},...l.slice(0,9)];h(i),localStorage.setItem("customEvents",JSON.stringify(i)),t({title:"",message:"",type:"general"}),alert("Benachrichtigung gesendet!")},d=[{value:"general",label:"üì¢ Allgemein",color:"bg-gray-500"},{value:"match-created",label:"‚öΩ Spiel erstellt",color:"bg-green-500"},{value:"player-ban",label:"üö´ Spieler gesperrt",color:"bg-red-500"},{value:"financial-milestone",label:"üí∞ Finanzmeilenstein",color:"bg-yellow-500"},{value:"achievement-unlocked",label:"üèÖ Achievement",color:"bg-purple-500"},{value:"system-update",label:"üîÑ System Update",color:"bg-blue-500"}];return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üéâ"}),"Events Tab Konfiguration"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-secondary rounded-lg border border-border-light",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:"Events Tab anzeigen"}),e.jsx("div",{className:"text-sm text-text-muted",children:"Zeigt den Events Tab in der Navigation an oder blendet ihn aus"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:u=>j(u.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Hinweis:"})," Der Events Tab ist standardm√§√üig ausgeblendet. Nach dem Aktivieren wird die Seite neu geladen um die Navigation zu aktualisieren."]})})]})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üöÄ"}),"Schnell-Tests f√ºr Push-Benachrichtigungen"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>V("match-result",{goalsa:3,goalsb:1,manofthematch:"Max M√ºller",date:new Date().toISOString()}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"‚öΩ"}),"Spielergebnis-Test"]}),e.jsxs("button",{onClick:()=>V("player-ban",{playerName:"Tom Schmidt",games:3}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üö´"}),"Spieler-Sperre"]}),e.jsxs("button",{onClick:()=>V("financial-milestone",{team:"AEK Athen",amount:250}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üí∞"}),"Finanzmeilenstein"]}),e.jsxs("button",{onClick:()=>V("achievement-unlocked",{name:"Torj√§ger",description:"10 Tore in einer Saison"}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üèÖ"}),"Achievement"]}),e.jsxs("button",{onClick:()=>V("system-update",{message:"Neue Funktionen verf√ºgbar!"}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üîÑ"}),"System-Update"]}),e.jsxs("button",{onClick:()=>{setTimeout(()=>V("match-created",{date:new Date().toISOString()}),0),setTimeout(()=>V("player-ban",{playerName:"Test Player",games:1}),300),setTimeout(()=>V("financial-milestone",{team:"Real Madrid",amount:100}),600)},className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üìö"}),"Mehrere Tests"]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Tipp:"})," Diese Buttons testen die neuen Push-Up Benachrichtigungen mit realistischen Daten und Animationen."]})})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üì¢"}),"Individuelle Push-Benachrichtigungen"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Nachrichtentyp"}),e.jsx("select",{value:r.type,onChange:u=>t(i=>({...i,type:u.target.value})),className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors",children:d.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Titel"}),e.jsx("input",{type:"text",value:r.title,onChange:u=>t(i=>({...i,title:u.target.value})),placeholder:"z.B. Neues Tournament startet",className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Nachricht"}),e.jsx("textarea",{value:r.message,onChange:u=>t(i=>({...i,message:u.target.value})),placeholder:"z.B. Das Weihnachts-Tournament beginnt morgen um 19:00 Uhr!",rows:3,className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors resize-none"})]}),e.jsxs("button",{onClick:g,disabled:!r.title||!r.message,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:"fas fa-paper-plane mr-2"}),"Benachrichtigung senden"]})]})]}),l.length>0&&e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üìã"}),"Gesendete Benachrichtigungen"]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:l.map(u=>{var i;return e.jsx("div",{className:"p-3 bg-bg-secondary rounded-lg border border-border-light",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-text-primary text-sm flex items-center",children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${((i=d.find(c=>c.value===u.type))==null?void 0:i.color)||"bg-gray-500"}`}),u.title]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:u.message}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:new Date(u.timestamp).toLocaleString("de-DE")})]})})},u.id)})}),l.length>=10&&e.jsx("div",{className:"text-xs text-text-muted mt-2 text-center",children:"Nur die letzten 10 Benachrichtigungen werden angezeigt"})]})]})}const We=()=>{const[n,a]=T.useState(U());return T.useEffect(()=>{const r=t=>{a(t.detail.newSeason)};return window.addEventListener("seasonChanged",r),()=>window.removeEventListener("seasonChanged",r)},[]),{currentSeason:n,isLegacy:n===Q.LEGACY,isFC26:n===Q.FC26}},ge=()=>{const[n,a]=T.useState([]),[r,t]=T.useState(!1),{currentSeason:l}=We();T.useEffect(()=>{const g=()=>{a(Ee())};g();const d=()=>{setTimeout(g,100)};return window.addEventListener("seasonChanged",d),window.addEventListener("legacyDataMigrated",d),window.addEventListener("fc26EnvironmentInitialized",d),()=>{window.removeEventListener("seasonChanged",d),window.removeEventListener("legacyDataMigrated",d),window.removeEventListener("fc26EnvironmentInitialized",d)}},[]);const h=async g=>{try{t(!0);const d=Ae(g);if(d){const u=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),i=URL.createObjectURL(u),c=document.createElement("a");c.href=i,c.download=`fifa-tracker-${g}-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(i),console.log(`Exported ${g} data successfully`)}else console.error("Failed to export season data")}catch(d){console.error("Error exporting season data:",d)}finally{t(!1)}},j=g=>{const d=["matches","players","bans","transactions","alcoholCalculator"],u={};return d.forEach(i=>{try{const c=`fifa_season_${g}_${i}`,v=localStorage.getItem(c);if(v){const b=JSON.parse(v);Array.isArray(b)?u[i]=b.length:typeof b=="object"&&(u[i]=1)}else u[i]=0}catch{u[i]=0}}),u};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl \r
                        flex items-center justify-center text-white text-xl font-bold`,children:"üìÖ"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Saison-Manager"}),e.jsx("p",{className:"text-gray-600",children:"Verwalten Sie Legacy- und FC26-Daten"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Aktuelle Saison"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:Se[l]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Alle Aktionen werden in dieser Saison gespeichert"})]}),e.jsx("div",{className:"text-4xl",children:l===Q.FC26?"‚ö°":"üìö"})]})}),e.jsx(ke,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Daten√ºbersicht pro Saison"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.map(g=>{const d=j(g.id),u=Object.values(d).reduce((i,c)=>i+c,0);return e.jsxs("div",{className:`p-6 rounded-xl border-2 ${g.isActive?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-xl",style:{backgroundColor:g.color+"20",color:g.color},children:g.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:g.name}),e.jsx("p",{className:"text-sm text-gray-600",children:g.description})]})]}),g.isActive&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"Aktiv"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Gesamt Eintr√§ge:"}),e.jsx("span",{className:"font-medium text-gray-800",children:u})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"‚öΩ Spiele:"}),e.jsx("span",{className:"font-medium",children:d.matches||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"üë• Spieler:"}),e.jsx("span",{className:"font-medium",children:d.players||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"üö´ Sperren:"}),e.jsx("span",{className:"font-medium",children:d.bans||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"üí∞ Transaktionen:"}),e.jsx("span",{className:"font-medium",children:d.transactions||0})]})]}),d.alcoholCalculator>0&&e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"üç∫ Alkohol-Tracker:"}),e.jsx("span",{className:"font-medium text-green-600",children:"Konfiguriert"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(g.id),disabled:!g.hasData||r,className:`flex-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 \r
                                 rounded-lg text-sm transition-colors disabled:opacity-50 \r
                                 disabled:cursor-not-allowed`,children:r?"Exportiert...":"üì• Export"}),g.hasData&&e.jsx("div",{className:"flex-1 px-3 py-2 text-center text-sm",children:e.jsx("span",{className:"text-green-600 font-medium",children:"‚úì Daten vorhanden"})})]})})]},g.id)})})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-amber-600 text-2xl",children:"üí°"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"FC26 Saison-System"}),e.jsxs("div",{className:"space-y-2 text-sm text-amber-700",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Legacy:"})," Alle bisherigen FIFA-Daten bleiben erhalten und zug√§nglich"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"FC26:"})," Neue Saison mit frischen Daten f√ºr FIFA Club 26"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Isolation:"})," Jede Saison hat separate Speicherbereiche"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Wechsel:"})," Beliebig zwischen Saisons wechseln m√∂glich"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Export:"})," Backup-Funktion f√ºr alle Saisondaten"]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Technische Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Speicher-System:"}),e.jsx("br",{}),"‚Ä¢ Lokaler Browser-Speicher",e.jsx("br",{}),"‚Ä¢ Automatische Datenmigration",e.jsx("br",{}),"‚Ä¢ Versionsverwaltung"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Datentypen:"}),e.jsx("br",{}),"‚Ä¢ Spiele und Ergebnisse",e.jsx("br",{}),"‚Ä¢ Spieler und Teams",e.jsx("br",{}),"‚Ä¢ Finanzen und Statistiken"]})]})]})]})},Ze=()=>{const[n,a]=T.useState([]),[r,t]=T.useState(""),[l,h]=T.useState(!1),[j,g]=T.useState({version:"",displayName:"",description:""}),[d,u]=T.useState(!1),i=()=>{const y=Ce(),F=Te(),k=y.sort((m,S)=>{if(!m.isCustom&&S.isCustom)return-1;if(m.isCustom&&!S.isCustom)return 1;if(!m.isCustom&&!S.isCustom)return m.id==="FC25"?-1:S.id==="FC25"?1:0;const s=new Date(m.createdAt||0);return new Date(S.createdAt||0)-s});a(k),t(F)};T.useEffect(()=>{i();const y=()=>{i()};return window.addEventListener("fifaVersionChanged",y),window.addEventListener("fifaVersionAdded",y),window.addEventListener("fifaVersionRemoved",y),()=>{window.removeEventListener("fifaVersionChanged",y),window.removeEventListener("fifaVersionAdded",y),window.removeEventListener("fifaVersionRemoved",y)}},[]);const c=async y=>{y.preventDefault(),u(!0);try{const{version:F,displayName:k,description:m}=j;if(!F.trim())throw new Error("Version identifier ist erforderlich");const S=F.trim().toUpperCase();if(!/^[A-Za-z]+\d*$/.test(S))throw new Error("Version Format ung√ºltig. Verwenden Sie Formate wie FC27, EA25, etc.");const s={displayName:k.trim()||S,description:m.trim()||`Custom FIFA Version ${S}`,createdAt:new Date().toISOString(),createdBy:"admin"};await De(S,s),g({version:"",displayName:"",description:""}),h(!1),z.success(`FIFA Version ${S} erfolgreich hinzugef√ºgt!`)}catch(F){z.error(F.message)}finally{u(!1)}},v=async y=>{if(window.confirm(`Sind Sie sicher, dass Sie Version "${y}" l√∂schen m√∂chten?`))try{await $e(y),z.success(`Version ${y} erfolgreich entfernt!`)}catch(F){z.error(F.message)}},b=async y=>{try{Fe(y),z.success(`Zu Version ${oe(y)} gewechselt!`),setTimeout(()=>{window.location.reload()},1e3)}catch(F){z.error(`Fehler beim Wechseln der Version: ${F.message}`)}},x=y=>y.isLegacy?"bg-gray-100 text-gray-700":y.isCurrent?"bg-blue-100 text-blue-700":y.isCustom?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700",E=y=>y.isLegacy?"Legacy":y.isCurrent?"Standard":y.isCustom?"Custom":"Standard";return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-600 rounded-xl \r
                          flex items-center justify-center text-white text-xl font-bold`,children:"üéÆ"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"FIFA Versionen-Manager"}),e.jsx("p",{className:"text-gray-600",children:"Verwalten und erstellen Sie FIFA Versionen f√ºr zukunftssichere Datenorganisation"})]})]}),e.jsxs("button",{onClick:()=>h(!l),className:`px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg \r
                     transition-colors flex items-center gap-2`,children:[e.jsx("span",{className:"text-lg",children:"+"}),"Neue Version"]})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Aktuelle FIFA Version"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:r}),e.jsxs("p",{className:"text-lg text-gray-600",children:["(",oe(r),")"]})]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Alle neuen Daten werden in dieser Version gespeichert"})]}),e.jsx("div",{className:"text-4xl",children:"üéÆ"})]})}),l&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Neue FIFA Version hinzuf√ºgen"}),e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Version Identifier *"}),e.jsx("input",{type:"text",value:j.version,onChange:y=>g(F=>({...F,version:y.target.value})),placeholder:"z.B. FC27, EA25, FIFA28",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 \r
                           focus:ring-purple-500 focus:border-purple-500`,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: Buchstaben gefolgt von optionalen Zahlen (FC27, EA25, etc.)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Anzeigename"}),e.jsx("input",{type:"text",value:j.displayName,onChange:y=>g(F=>({...F,displayName:y.target.value})),placeholder:"z.B. FIFA Club 27",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 \r
                           focus:ring-purple-500 focus:border-purple-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Beschreibung"}),e.jsx("textarea",{value:j.description,onChange:y=>g(F=>({...F,description:y.target.value})),placeholder:"Beschreibung der neuen Version...",rows:3,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 \r
                         focus:ring-purple-500 focus:border-purple-500`})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:d,className:`px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg \r
                         transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:d?"Wird hinzugef√ºgt...":"Version hinzuf√ºgen"}),e.jsx("button",{type:"button",onClick:()=>h(!1),className:`px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg \r
                         transition-colors`,children:"Abbrechen"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Verf√ºgbare FIFA Versionen"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:n.map(y=>{var F;return e.jsxs("div",{className:`p-6 rounded-xl border-2 ${y.isActive?"border-purple-500 bg-purple-50":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-800",children:y.id}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",y.name,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(y)}`,children:E(y)}),y.isActive&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"Aktiv"})]})]})}),e.jsx("div",{className:"text-2xl",children:y.isLegacy?"üìö":y.isCurrent?"‚ö°":"üéÆ"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:y.description||((F=y.metadata)==null?void 0:F.description)||"Keine Beschreibung verf√ºgbar"}),y.createdAt&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Erstellt: ",new Date(y.createdAt).toLocaleDateString("de-DE")]})]}),e.jsxs("div",{className:"flex gap-2",children:[!y.isActive&&e.jsx("button",{onClick:()=>b(y.id),className:`flex-1 px-3 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 \r
                             rounded-lg text-sm transition-colors`,children:"Aktivieren"}),y.isCustom&&e.jsx("button",{onClick:()=>v(y.id),disabled:y.isActive,className:`px-3 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg \r
                             text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:"L√∂schen"}),y.isActive&&e.jsx("div",{className:"flex-1 px-3 py-2 text-center text-sm",children:e.jsx("span",{className:"text-green-600 font-medium",children:"‚úì Aktive Version"})})]})]},y.id)})})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-amber-600 text-2xl",children:"üí°"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"FIFA Versionen-System"}),e.jsxs("div",{className:"space-y-2 text-sm text-amber-700",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Built-in Versionen:"})," FC25 (Legacy) und FC26 (Standard) sind vorinstalliert"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Custom Versionen:"})," Erstellen Sie eigene Versionen f√ºr zuk√ºnftige FIFA-Editionen"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Datenisolation:"})," Jede Version hat separate Datenbanken"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Zukunftssicher:"})," System ist bereit f√ºr FC27, FC28 und weitere Versionen"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Flexibilit√§t:"})," Wechseln Sie beliebig zwischen Versionen"]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Technische Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Version-Management:"}),e.jsx("br",{}),"‚Ä¢ Dynamisches Hinzuf√ºgen neuer Versionen",e.jsx("br",{}),"‚Ä¢ Automatische Datenbankfilterung",e.jsx("br",{}),"‚Ä¢ Metadaten-Unterst√ºtzung"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Datenformat:"}),e.jsx("br",{}),"‚Ä¢ Version Identifier (FC27, EA25, etc.)",e.jsx("br",{}),"‚Ä¢ Anzeigename und Beschreibung",e.jsx("br",{}),"‚Ä¢ Erstellungsdatum und Metadaten"]})]})]})]})},Je=()=>{const[n,a]=T.useState("season"),r=[{id:"season",label:"Saison-Manager",icon:"fas fa-calendar-alt",description:"Verwalten Sie Legacy- und FC26-Daten"},{id:"fifa-versions",label:"FIFA Versionen",icon:"fas fa-gamepad",description:"Verwalten und erstellen Sie FIFA Versionen"}],t=()=>{switch(n){case"season":return e.jsx(ge,{});case"fifa-versions":return e.jsx(Ze,{});default:return e.jsx(ge,{})}};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl \r
                          flex items-center justify-center text-white text-xl font-bold`,children:"‚öôÔ∏è"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"System-Manager"}),e.jsx("p",{className:"text-gray-600",children:"Zentrale Verwaltung f√ºr Saisons und FIFA Versionen"})]})]}),e.jsx("div",{className:"flex space-x-1 bg-white rounded-lg p-1 shadow-sm",children:r.map(l=>e.jsxs("button",{onClick:()=>a(l.id),className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-md text-sm font-medium transition-all duration-200 ${n===l.id?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,title:l.description,children:[e.jsx("i",{className:l.icon}),e.jsx("span",{className:"hidden sm:inline",children:l.label})]},l.id))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:t()})]})};function et({onLogout:n,onNavigate:a,showHints:r=!1}){const[t,l]=T.useState("search"),h=[{id:"search",label:"",icon:"fas fa-search"},{id:"matches",label:"Spiele hinzuf√ºgen",icon:"fas fa-futbol"},{id:"bans",label:"Sperren hinzuf√ºgen",icon:"fas fa-ban"},{id:"players",label:"Spieler hinzuf√ºgen",icon:"fas fa-users"},{id:"transactions",label:"Transaktionen hinzuf√ºgen",icon:"fas fa-euro-sign"},{id:"settings",label:"Team-Einstellungen",icon:"fas fa-cog"},{id:"events",label:"Events & Benachrichtigungen",icon:"fas fa-bell"},{id:"delete",label:"Daten l√∂schen",icon:"fas fa-trash"},{id:"manager",label:"System-Manager",icon:"fas fa-tools"}],j=()=>{switch(t){case"search":return e.jsx(he,{onNavigate:a});case"matches":return e.jsx(Ie,{});case"bans":return e.jsx(Re,{});case"players":return e.jsx(Le,{});case"transactions":return e.jsx(Ke,{});case"settings":return e.jsx(Ue,{});case"events":return e.jsx(qe,{});case"delete":return e.jsx(Ge,{});case"manager":return e.jsx(Je,{});default:return e.jsx(he,{onNavigate:a})}};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 bg-bg-secondary border-b border-border-light flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-text-primary mb-1",children:"Verwaltung"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Hinzuf√ºgen und verwalten von Daten"})]}),e.jsxs("button",{onClick:n,className:"flex items-center px-3 py-2 bg-accent-red text-white rounded-lg hover:bg-red-600 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50","aria-label":"Abmelden",children:[e.jsx("i",{className:"fas fa-sign-out-alt mr-2"}),e.jsx("span",{className:"text-sm",children:"Logout"})]})]}),e.jsx("div",{className:"bg-bg-secondary border-b border-border-light",children:e.jsx("div",{className:"flex overflow-x-auto",children:h.map(g=>e.jsxs("button",{onClick:()=>l(g.id),className:`flex-shrink-0 px-4 py-3 text-sm font-medium transition-colors whitespace-nowrap ${t===g.id?"text-primary-green border-b-2 border-primary-green bg-bg-primary":"text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,title:g.id==="search"?"Globale Suche":g.label,"aria-label":g.id==="search"?"Globale Suche":g.label,children:[e.jsx("i",{className:`${g.icon} ${g.label?"mr-2":""}`}),g.label]},g.id))})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:j()})]})}export{et as default};
