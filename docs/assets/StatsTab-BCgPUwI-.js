import{r as H,u as Y,j as s,L as Rt}from"./main-IRT2n-55.js";import{H as xn}from"./HorizontalNavigation-BhHT4i7Z.js";function gn({limit:e=10,showTitle:t=!0,onNavigate:n}){const[r,a]=H.useState("all"),{data:l,loading:c}=Y("matches","*",{order:{column:"date",ascending:!1}}),{data:o,loading:d}=Y("players","*"),{data:i,loading:h}=Y("bans","*",{order:{column:"id",ascending:!1}}),{data:u,loading:f}=Y("transactions","*",{order:{column:"date",ascending:!1}}),x=c||d||h||f,m=H.useMemo(()=>{if(!l||!o||!i||!u)return[];const p=[];l==null||l.slice(0,5).forEach(v=>{const N=new Date(v.date);p.push({id:`match-${v.id}`,type:"match",icon:"⚽",title:`AEK ${v.goalsa||0} - ${v.goalsb||0} Real`,description:v.sds?`⭐ SdS: ${v.sds}`:"Spiel gespielt",date:N,dateText:Xt(N),action:()=>n==null?void 0:n("matches",{highlightMatch:v.id})})}),i==null||i.slice(0,3).forEach(v=>{const N=o.find(F=>F.id===v.player_id),_=(N==null?void 0:N.name)||v.player_name||"Unbekannt",w=(v.totalgames||0)-(v.matchesserved||0);p.push({id:`ban-${v.id}`,type:"ban",icon:"🚫",title:`Sperre: ${_}`,description:`${v.type} • ${w>0?`${w} Spiele verbleibend`:"Abgelaufen"}`,date:new Date,dateText:"Kürzlich",action:()=>n==null?void 0:n("bans",{highlightBan:v.id})})}),u==null||u.slice(0,5).forEach(v=>{const N=new Date(v.date),_=v.amount||0;p.push({id:`transaction-${v.id}`,type:"transaction",icon:_>0?"💰":"💸",title:`${_>0?"+":""}${_}€`,description:v.description||v.type||"Transaktion",date:N,dateText:Xt(N),action:()=>n==null?void 0:n("finanzen",{highlightTransaction:v.id})})});const M=p.sort((v,N)=>N.date-v.date);return(r==="all"?M:M.filter(v=>v.type===r)).slice(0,e)},[l,o,i,u,r,e,n]),g=H.useMemo(()=>{if(!l||!i||!u)return{};const p=new Date,M=new Date(p.getTime()-7*24*60*60*1e3);return{matches:l.filter(j=>new Date(j.date)>=M).length,bans:i.filter(j=>(j.totalgames||0)-(j.matchesserved||0)>0).length,transactions:u.filter(j=>new Date(j.date)>=M).length}},[l,i,u]);return x?s.jsx(Rt,{message:"Lade Aktivitäten..."}):s.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[t&&s.jsxs("div",{className:"p-4 border-b border-border-light",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Letzte Aktivitäten"}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded border border-blue-200",children:[g.matches||0," Spiele (7T)"]}),s.jsxs("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded border border-red-200",children:[g.bans||0," aktive Sperren"]}),s.jsxs("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded border border-green-200",children:[g.transactions||0," Transaktionen (7T)"]})]})})]}),s.jsx("div",{className:"flex gap-2 mt-3",children:[{key:"all",label:"Alle",count:m.length},{key:"match",label:"Spiele",count:m.filter(p=>p.type==="match").length},{key:"transaction",label:"Finanzen",count:m.filter(p=>p.type==="transaction").length},{key:"ban",label:"Sperren",count:m.filter(p=>p.type==="ban").length}].map(({key:p,label:M,count:j})=>s.jsxs("button",{onClick:()=>a(p),className:`px-3 py-1.5 rounded-lg text-sm transition-all duration-200 ${r===p?"bg-primary-green text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-tertiary hover:text-text-primary"}`,children:[M," ",j>0&&`(${j})`]},p))})]}),s.jsx("div",{className:"divide-y divide-border-light",children:m.length===0?s.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[s.jsx("div",{className:"text-4xl mb-2","aria-hidden":"true",children:"📊"}),s.jsx("p",{children:"Keine Aktivitäten gefunden"}),s.jsx("p",{className:"text-sm mt-1",children:r==="all"?"Beginne Daten hinzuzufügen":`Keine ${r==="match"?"Spiele":r==="transaction"?"Transaktionen":"Sperren"} gefunden`})]}):m.map(p=>s.jsx("button",{onClick:p.action,className:"w-full p-4 text-left hover:bg-bg-secondary transition-colors duration-200 focus:outline-none focus:bg-bg-secondary",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl","aria-hidden":"true",children:p.icon}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-medium text-text-primary truncate",children:p.title}),s.jsx("span",{className:"text-xs text-text-secondary whitespace-nowrap ml-2",children:p.dateText})]}),s.jsx("p",{className:"text-sm text-text-secondary truncate",children:p.description})]})]})},p.id))}),m.length>0&&t&&s.jsx("div",{className:"p-3 border-t border-border-light bg-bg-secondary",children:s.jsx("div",{className:"text-center",children:s.jsx("button",{onClick:()=>n==null?void 0:n("stats"),className:"text-sm text-primary-green hover:text-primary-green-dark transition-colors duration-200",children:"Alle Statistiken anzeigen →"})})})]})}function Xt(e){const n=Math.floor((new Date-e)/(1e3*60)),r=Math.floor(n/60),a=Math.floor(r/24);return n<1?"Gerade eben":n<60?`vor ${n}m`:r<24?`vor ${r}h`:a<7?`vor ${a}d`:a<30?`vor ${Math.floor(a/7)}w`:e.toLocaleDateString("de-DE",{day:"numeric",month:"short"})}function pn({onNavigate:e}){const[t,n]=H.useState("all"),{data:r,loading:a}=Y("matches","*",{order:{column:"date",ascending:!1}}),{data:l,loading:c}=Y("players","*"),{data:o,loading:d}=Y("bans","*"),{data:i,loading:h}=Y("transactions","*",{order:{column:"date",ascending:!1}}),{data:u,loading:f}=Y("finances","*"),x=a||c||d||h||f,m=H.useMemo(()=>{if(!r||!l||!o||!i||!u)return null;const g=new Date,p={week:new Date(g.getTime()-7*24*60*60*1e3),month:new Date(g.getTime()-30*24*60*60*1e3),all:new Date(0)},M=p[t]||p.all,j=r.filter(b=>new Date(b.date)>=M),v=i.filter(b=>new Date(b.date)>=M),N={AEK:{wins:0,losses:0,goals:0,goalsAgainst:0},Real:{wins:0,losses:0,goals:0,goalsAgainst:0}};j.forEach(b=>{const T=b.goalsa||0,I=b.goalsb||0;N.AEK.goals+=T,N.AEK.goalsAgainst+=I,N.Real.goals+=I,N.Real.goalsAgainst+=T,T>I?(N.AEK.wins++,N.Real.losses++):I>T&&(N.Real.wins++,N.AEK.losses++)});const _={};l.forEach(b=>{_[b.id]={name:b.name,team:b.team,goals:0,matches:0,value:b.value||0}}),j.forEach(b=>{["goalscorer1a","goalscorer2a","goalscorer3a","goalscorer4a","goalscorer5a"].forEach(T=>{b[T]&&_[b[T]]&&(_[b[T]].goals++,_[b[T]].matches++)}),["goalscorer1b","goalscorer2b","goalscorer3b","goalscorer4b","goalscorer5b"].forEach(T=>{b[T]&&_[b[T]]&&(_[b[T]].goals++,_[b[T]].matches++)})});const w=u.find(b=>b.team==="AEK")||{balance:0},F=u.find(b=>b.team==="Real")||{balance:0},C=v.filter(b=>b.amount>0).reduce((b,T)=>b+T.amount,0),$=v.filter(b=>b.amount<0).reduce((b,T)=>b+Math.abs(T.amount),0),R=o.filter(b=>(b.totalgames||0)-(b.matchesserved||0)>0),E={AEK:R.filter(b=>{const T=l.find(I=>I.id===b.player_id);return(T==null?void 0:T.team)==="AEK"}).length,Real:R.filter(b=>{const T=l.find(I=>I.id===b.player_id);return(T==null?void 0:T.team)==="Real"}).length},P=Object.values(_).filter(b=>b.goals>0).sort((b,T)=>T.goals-b.goals).slice(0,5);return{teamRecords:N,playerStats:P,finances:{aek:w.balance||0,real:F.balance||0,income:C,expenses:$,net:C-$},bans:{active:R.length,aek:E.AEK,real:E.Real},totals:{matches:j.length,players:l.length,transactions:v.length}}},[r,l,o,i,u,t]);return x?s.jsx(Rt,{message:"Lade Dashboard..."}):m?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h2",{className:"text-2xl font-bold text-text-primary",children:"Dashboard"}),s.jsx("div",{className:"flex gap-2",children:[{key:"week",label:"Woche"},{key:"month",label:"Monat"},{key:"all",label:"Gesamt"}].map(({key:g,label:p})=>s.jsx("button",{onClick:()=>n(g),className:`px-3 py-2 rounded-lg text-sm transition-all duration-200 ${t===g?"bg-primary-green text-white":"bg-bg-secondary text-text-secondary hover:bg-bg-tertiary hover:text-text-primary"}`,children:p},g))})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsx(Ke,{icon:"⚽",title:"Spiele",value:m.totals.matches,subtitle:t==="all"?"Gesamt":"Im Zeitraum",color:"blue",onClick:()=>e==null?void 0:e("matches")}),s.jsx(Ke,{icon:"👥",title:"Spieler",value:m.totals.players,subtitle:"Aktive Spieler",color:"green",onClick:()=>e==null?void 0:e("squad")}),s.jsx(Ke,{icon:"⚽",title:"Tore",value:m.teamRecords.AEK.goals+m.teamRecords.Real.goals,subtitle:t==="all"?"Gesamt":"Im Zeitraum",color:"green",onClick:()=>e==null?void 0:e("matches")}),s.jsx(Ke,{icon:"🚫",title:"Sperren",value:m.bans.active,subtitle:"Aktive Sperren",color:"red",onClick:()=>e==null?void 0:e("bans")})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[s.jsx("div",{className:"p-4 border-b border-border-light",children:s.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Team-Vergleich"})}),s.jsx("div",{className:"p-4",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"🔵"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-blue-900",children:"AEK"}),s.jsxs("div",{className:"text-sm text-blue-700",children:[m.teamRecords.AEK.wins,"S / ",m.teamRecords.AEK.losses,"N"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-blue-900",children:[m.teamRecords.AEK.goals,":",m.teamRecords.AEK.goalsAgainst]}),s.jsxs("div",{className:"text-sm text-blue-700",children:[m.bans.aek," Sperren"]})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-50 border border-red-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl","aria-hidden":"true",children:"🔴"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-red-900",children:"Real"}),s.jsxs("div",{className:"text-sm text-red-700",children:[m.teamRecords.Real.wins,"S / ",m.teamRecords.Real.losses,"N"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-red-900",children:[m.teamRecords.Real.goals,":",m.teamRecords.Real.goalsAgainst]}),s.jsxs("div",{className:"text-sm text-red-700",children:[m.bans.real," Sperren"]})]})]})]})})]}),s.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm",children:[s.jsx("div",{className:"p-4 border-b border-border-light",children:s.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"Top Torschützen"})}),s.jsx("div",{className:"p-4",children:m.playerStats.length===0?s.jsxs("div",{className:"text-center text-text-secondary py-4",children:[s.jsx("div",{className:"text-2xl mb-2","aria-hidden":"true",children:"⚽"}),s.jsx("p",{children:"Keine Tore im Zeitraum"})]}):s.jsx("div",{className:"space-y-3",children:m.playerStats.map((g,p)=>{var M;return s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"w-6 h-6 rounded-full bg-primary-green text-white text-xs flex items-center justify-center font-bold",children:p+1}),s.jsx("span",{className:g.team==="AEK"?"text-blue-600":"text-red-600",children:g.team==="AEK"?"🔵":"🔴"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-text-primary",children:g.name}),s.jsxs("div",{className:"text-sm text-text-secondary",children:[(M=g.value)==null?void 0:M.toFixed(1),"M €"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-text-primary",children:[g.goals," Tore"]}),s.jsxs("div",{className:"text-sm text-text-secondary",children:[g.matches," Spiele"]})]})]},g.name)})})})]})]}),s.jsx(gn,{onNavigate:e,limit:5})]}):s.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[s.jsx("div",{className:"text-4xl mb-2","aria-hidden":"true",children:"📊"}),s.jsx("p",{children:"Keine Daten verfügbar"})]})}function Ke({icon:e,title:t,value:n,subtitle:r,color:a="gray",onClick:l}){const c={blue:"bg-blue-50 border-blue-200 text-blue-900",green:"bg-green-50 border-green-200 text-green-900",red:"bg-red-50 border-red-200 text-red-900",gray:"bg-gray-50 border-gray-200 text-gray-900"};return s.jsx("button",{onClick:l,className:`p-4 rounded-lg border transition-all duration-200 hover:shadow-md ${c[a]} ${l?"hover:scale-105 cursor-pointer":"cursor-default"}`,children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-2xl","aria-hidden":"true",children:e}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{className:"text-2xl font-bold",children:n}),s.jsx("div",{className:"text-sm opacity-75",children:t}),s.jsx("div",{className:"text-xs opacity-60",children:r})]})]})})}function yn({matches:e}){const[t,n]=H.useState(null),r=H.useMemo(()=>e?e.reduce((i,h)=>{const u=h.date;return i[u]||(i[u]=[]),i[u].push(h),i},{}):{},[e]),a=H.useMemo(()=>Object.keys(r).sort((i,h)=>new Date(h)-new Date(i)),[r]),l=i=>{if(!i||i.length===0)return null;const h=i.reduce(($,R)=>$+(R.goalsa||0)+(R.goalsb||0),0),u=i.length,f=u>0?(h/u).toFixed(1):"0.0",x=i.reduce(($,R)=>{const E=(R.goalsa||0)+(R.goalsb||0),P=($.goalsa||0)+($.goalsb||0);return E>P?R:$},i[0]);let m=0,g=0,p=0,M=0;i.forEach($=>{const R=$.goalsa||0,E=$.goalsb||0;p+=R,M+=E,R>E?m++:E>R&&g++});const j={};i.forEach($=>{if($.goalslista)try{const R=typeof $.goalslista=="string"?JSON.parse($.goalslista):$.goalslista;Array.isArray(R)&&R.forEach(E=>{const P=typeof E=="string"?E:E.player,b=typeof E=="string"?1:E.count||1;j[P]=(j[P]||0)+b})}catch(R){console.warn("Error parsing AEK goals list for match:",$.id,R)}if($.goalslistb)try{const R=typeof $.goalslistb=="string"?JSON.parse($.goalslistb):$.goalslistb;Array.isArray(R)&&R.forEach(E=>{const P=typeof E=="string"?E:E.player,b=typeof E=="string"?1:E.count||1;j[P]=(j[P]||0)+b})}catch(R){console.warn("Error parsing Real goals list for match:",$.id,R)}});const v=Object.entries(j).reduce(($,[R,E])=>E>($.goals||0)?{player:R,goals:E}:$,{player:null,goals:0}),N=i.map($=>Math.abs(($.goalsa||0)-($.goalsb||0))),_=N.length>0?(N.reduce(($,R)=>$+R,0)/N.length).toFixed(1):"0.0",w=N.filter($=>$<=1).length,F=N.filter($=>$>=3).length,C=[];return i.forEach($=>{Object.entries(j).forEach(([E,P])=>{P>=3&&C.push({type:"hat-trick",player:E,goals:P,description:`${E} erzielte ${P} Tore`})}),($.goalsa||0)===0&&C.push({type:"clean-sheet",team:"Real",description:"Real hielt die Null"}),($.goalsb||0)===0&&C.push({type:"clean-sheet",team:"AEK",description:"AEK hielt die Null"});const R=($.goalsa||0)+($.goalsb||0);R>=6&&C.push({type:"high-scoring",goals:R,description:`Torspektakel mit ${R} Toren`})}),{totalMatches:u,totalGoals:h,avgGoalsPerMatch:f,aekWins:m,realWins:g,aekGoals:p,realGoals:M,topScorer:v,highestScoringMatch:x,avgMargin:_,closeGames:w,blowouts:F,specialEvents:C,playerGoals:j}},c=t?l(r[t]):null,o=i=>new Date(i).toLocaleDateString("de-DE",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),d=i=>new Date(i).toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"modern-card",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-lg",children:"📅"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-title3 font-bold text-text-primary",children:"Spieltag-Übersicht"}),s.jsx("p",{className:"text-caption1 text-text-secondary",children:"Detaillierte Analyse pro Spieltag mit interessanten Statistiken"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:["Spieltag auswählen (",a.length," verfügbar)"]}),s.jsxs("select",{value:t||"",onChange:i=>n(i.target.value||null),className:"form-input w-full max-w-md",children:[s.jsx("option",{value:"",children:"-- Spieltag wählen --"}),a.map(i=>s.jsxs("option",{value:i,children:[o(i)," (",r[i].length," Spiel",r[i].length!==1?"e":"",")"]},i))]})]}),!t&&s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.slice(0,6).map(i=>{const h=l(r[i]);return s.jsxs("div",{onClick:()=>n(i),className:"p-4 bg-bg-secondary rounded-lg border border-border-light hover:border-primary-blue cursor-pointer transition-all duration-200 hover:scale-105",children:[s.jsx("div",{className:"text-sm font-medium text-text-primary mb-2",children:d(i)}),s.jsxs("div",{className:"text-xs text-text-secondary mb-2",children:[h.totalMatches," Spiel",h.totalMatches!==1?"e":""]}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tore:"}),s.jsx("span",{className:"font-medium",children:h.totalGoals})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"⌀ pro Spiel:"}),s.jsx("span",{className:"font-medium",children:h.avgGoalsPerMatch})]}),h.topScorer.player&&s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Top:"}),s.jsxs("span",{className:"font-medium text-primary-green",children:[h.topScorer.player.split(" ").slice(-1)[0]," (",h.topScorer.goals,")"]})]})]})]},i)})})]}),t&&c&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"modern-card",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-text-primary",children:o(t)}),s.jsxs("p",{className:"text-text-secondary",children:[c.totalMatches," Spiel",c.totalMatches!==1?"e":""," an diesem Tag"]})]}),s.jsx("button",{onClick:()=>n(null),className:"text-text-muted hover:text-text-primary",children:"✕"})]}),c.specialEvents.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-semibold text-text-primary mb-2",children:"🌟 Besondere Ereignisse"}),s.jsx("div",{className:"space-y-2",children:c.specialEvents.map((i,h)=>s.jsx("div",{className:`p-2 rounded-lg text-sm ${i.type==="hat-trick"?"bg-yellow-50 text-yellow-800 border border-yellow-200":i.type==="clean-sheet"?"bg-green-50 text-green-800 border border-green-200":i.type==="high-scoring"?"bg-red-50 text-red-800 border border-red-200":"bg-blue-50 text-blue-800 border border-blue-200"}`,children:i.description},h))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"modern-card text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-text-primary",children:c.totalGoals}),s.jsx("div",{className:"text-sm text-text-secondary",children:"Tore insgesamt"}),s.jsxs("div",{className:"text-xs text-text-muted",children:["⌀ ",c.avgGoalsPerMatch," pro Spiel"]})]}),s.jsxs("div",{className:"modern-card text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-primary-blue",children:c.aekWins}),s.jsx("div",{className:"text-sm text-text-secondary",children:"AEK Siege"}),s.jsxs("div",{className:"text-xs text-text-muted",children:[c.aekGoals," Tore erzielt"]})]}),s.jsxs("div",{className:"modern-card text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-primary-red",children:c.realWins}),s.jsx("div",{className:"text-sm text-text-secondary",children:"Real Siege"}),s.jsxs("div",{className:"text-xs text-text-muted",children:[c.realGoals," Tore erzielt"]})]}),s.jsxs("div",{className:"modern-card text-center",children:[s.jsx("div",{className:"text-2xl font-bold text-primary-green",children:c.topScorer.player?c.topScorer.goals:"0"}),s.jsx("div",{className:"text-sm text-text-secondary",children:"Meiste Tore"}),s.jsx("div",{className:"text-xs text-text-muted",children:c.topScorer.player?c.topScorer.player.split(" ").slice(-1)[0]:"Kein Torschütze"})]})]}),s.jsxs("div",{className:"modern-card",children:[s.jsx("h4",{className:"font-semibold text-text-primary mb-4",children:"⚽ Spiele im Detail"}),s.jsx("div",{className:"space-y-4",children:r[t].map(i=>s.jsxs("div",{className:"p-4 bg-bg-secondary rounded-lg border border-border-light",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"w-6 h-6 bg-blue-500 text-white rounded text-xs flex items-center justify-center font-bold",children:"A"}),s.jsx("span",{className:"font-medium",children:"AEK"})]}),s.jsxs("div",{className:"text-xl font-bold",children:[i.goalsa||0," : ",i.goalsb||0]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Real"}),s.jsx("span",{className:"w-6 h-6 bg-red-500 text-white rounded text-xs flex items-center justify-center font-bold",children:"R"})]})]}),s.jsx("div",{className:"text-sm text-text-muted",children:(()=>{const h=(i.goalsa||0)+(i.goalsb||0),u=Math.abs((i.goalsa||0)-(i.goalsb||0));return h===0?"Torlos":h>=6?"Torspektakel":u===0?"Unentschieden":u>=3?"Deutlicher Sieg":u===1?"Knapper Sieg":"Normales Spiel"})()})]}),(i.goalslista||i.goalslistb)&&s.jsxs("div",{className:"space-y-2",children:[i.goalslista&&(()=>{try{const h=typeof i.goalslista=="string"?JSON.parse(i.goalslista):i.goalslista;return Array.isArray(h)&&h.length>0}catch{return!1}})()&&s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-primary-blue font-medium",children:"AEK Torschützen: "}),(()=>{try{const h=typeof i.goalslista=="string"?JSON.parse(i.goalslista):i.goalslista;return Array.isArray(h)?h.map((u,f)=>{const x=typeof u=="string"?u:u.player,m=typeof u=="string"?1:u.count||1;return s.jsxs("span",{className:"mr-2",children:[x," ",m>1?`(${m})`:""]},f)}):[]}catch(h){return console.warn("Error parsing AEK goals for display:",h),s.jsx("span",{className:"text-red-500 text-xs",children:"Fehler beim Laden der Torschützen"})}})()]}),i.goalslistb&&(()=>{try{const h=typeof i.goalslistb=="string"?JSON.parse(i.goalslistb):i.goalslistb;return Array.isArray(h)&&h.length>0}catch{return!1}})()&&s.jsxs("div",{className:"text-sm",children:[s.jsx("span",{className:"text-primary-red font-medium",children:"Real Torschützen: "}),(()=>{try{const h=typeof i.goalslistb=="string"?JSON.parse(i.goalslistb):i.goalslistb;return Array.isArray(h)?h.map((u,f)=>{const x=typeof u=="string"?u:u.player,m=typeof u=="string"?1:u.count||1;return s.jsxs("span",{className:"mr-2",children:[x," ",m>1?`(${m})`:""]},f)}):[]}catch(h){return console.warn("Error parsing Real goals for display:",h),s.jsx("span",{className:"text-red-500 text-xs",children:"Fehler beim Laden der Torschützen"})}})()]})]}),i.manofthematch&&s.jsxs("div",{className:"mt-2 text-sm",children:[s.jsx("span",{className:"text-yellow-600 font-medium",children:"⭐ Spieler des Spiels: "}),s.jsx("span",{children:i.manofthematch})]})]},i.id))})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"modern-card",children:[s.jsx("h4",{className:"font-semibold text-text-primary mb-4",children:"📊 Spielanalyse"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Durchschnittliche Tordifferenz:"}),s.jsx("span",{className:"font-medium",children:c.avgMargin})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Enge Spiele (≤1 Tor):"}),s.jsx("span",{className:"font-medium",children:c.closeGames})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Deutliche Siege (≥3 Tore):"}),s.jsx("span",{className:"font-medium",children:c.blowouts})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-text-secondary",children:"Höchste Toranzahl:"}),s.jsxs("span",{className:"font-medium",children:[(c.highestScoringMatch.goalsa||0)+(c.highestScoringMatch.goalsb||0)," Tore"]})]})]})]}),s.jsxs("div",{className:"modern-card",children:[s.jsx("h4",{className:"font-semibold text-text-primary mb-4",children:"👤 Top-Torschützen des Tages"}),s.jsxs("div",{className:"space-y-2",children:[Object.entries(c.playerGoals).sort(([,i],[,h])=>h-i).slice(0,5).map(([i,h],u)=>s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${u===0?"bg-yellow-500 text-white":u===1?"bg-gray-400 text-white":u===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:u+1}),s.jsx("span",{className:"font-medium",children:i})]}),s.jsxs("span",{className:"font-bold text-primary-green",children:[h," Tor",h!==1?"e":""]})]},i)),Object.keys(c.playerGoals).length===0&&s.jsx("div",{className:"text-center text-text-muted py-4",children:"Keine Torschützen an diesem Tag"})]})]})]})]})]})}function bn(){const{data:e}=Y("matches","*"),[t,n]=H.useState({totalMatches:0,wins:0,draws:0,losses:0,goalsFor:0,goalsAgainst:0,winRate:0,loading:!0}),r=()=>{if(!e||e.length===0){n({totalMatches:0,wins:0,draws:0,losses:0,goalsFor:0,goalsAgainst:0,winRate:0,loading:!1});return}const c=e.length,o=e.filter(m=>(m.goalsa||0)>(m.goalsb||0)).length,d=e.filter(m=>(m.goalsb||0)>(m.goalsa||0)).length,i=e.filter(m=>(m.goalsa||0)===(m.goalsb||0)).length,h=e.reduce((m,g)=>m+(g.goalsa||0),0),u=e.reduce((m,g)=>m+(g.goalsb||0),0),f=e.reduce((m,g)=>m+(g.goalsa||0)+(g.goalsb||0),0),x=c>0?Math.round(o/c*100):0;n({totalMatches:c,wins:o,draws:i,losses:d,goalsFor:h,goalsAgainst:u,totalGoals:f,winRate:x,loading:!1})};if(H.useEffect(()=>{r()},[e]),t.loading)return s.jsxs("div",{className:"modern-card p-4 animate-pulse",children:[s.jsx("div",{className:"h-4 bg-bg-tertiary rounded mb-3"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsx("div",{className:"h-12 bg-bg-tertiary rounded"}),s.jsx("div",{className:"h-12 bg-bg-tertiary rounded"}),s.jsx("div",{className:"h-12 bg-bg-tertiary rounded"}),s.jsx("div",{className:"h-12 bg-bg-tertiary rounded"})]})]});const l=!e||e.length===0?[]:e.slice(-5).map(o=>{const d=o.goalsa||0,i=o.goalsb||0;return d>i?"W":i>d?"L":"D"});return s.jsxs("div",{className:"modern-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"📊 Liga-Statistiken"}),s.jsx("span",{className:"text-xs text-text-muted bg-bg-tertiary px-2 py-1 rounded-full",children:"Gesamt"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[s.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[s.jsx("div",{className:"text-xl font-bold text-text-primary",children:t.totalMatches}),s.jsx("div",{className:"text-xs text-text-secondary",children:"Spiele"})]}),s.jsxs("div",{className:"text-center p-3 bg-system-green/10 rounded-lg",children:[s.jsxs("div",{className:"text-xl font-bold text-system-green",children:[t.winRate,"%"]}),s.jsx("div",{className:"text-xs text-text-secondary",children:"AEK Siege"})]}),s.jsxs("div",{className:"text-center p-3 bg-system-blue/10 rounded-lg",children:[s.jsx("div",{className:"text-xl font-bold text-system-blue",children:t.totalGoals||t.goalsFor+t.goalsAgainst}),s.jsx("div",{className:"text-xs text-text-secondary",children:"Gesamt Tore"})]}),s.jsxs("div",{className:"text-center p-3 bg-system-orange/10 rounded-lg",children:[s.jsxs("div",{className:"text-xl font-bold text-system-orange",children:[t.goalsFor-t.goalsAgainst>=0?"+":"",t.goalsFor-t.goalsAgainst]}),s.jsx("div",{className:"text-xs text-text-secondary",children:"AEK Differenz"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-text-secondary",children:"AEK Siege:"}),s.jsx("span",{className:"text-system-green font-medium",children:t.wins})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-text-secondary",children:"Unentschieden:"}),s.jsx("span",{className:"text-system-orange font-medium",children:t.draws})]}),s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-text-secondary",children:"Real Siege:"}),s.jsx("span",{className:"text-system-red font-medium",children:t.losses})]})]}),l.length>0&&s.jsxs("div",{className:"mt-4 pt-3 border-t border-border-light",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-xs text-text-secondary",children:"Form:"}),s.jsx("div",{className:"flex gap-1",children:l.map((c,o)=>s.jsx("div",{className:`w-4 h-4 rounded-full text-xs flex items-center justify-center font-bold ${c==="W"?"bg-system-green text-white":c==="D"?"bg-system-orange text-white":"bg-system-red text-white"}`,children:c},o))})]}),s.jsxs("div",{className:"text-xs text-text-muted",children:["Letzte ",l.length," Spiele (neueste zuerst)"]})]})]})}function Be(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function vn(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ms(e){let t,n,r;e.length!==2?(t=Be,n=(o,d)=>Be(e(o),d),r=(o,d)=>e(o)-d):(t=e===Be||e===vn?e:jn,n=e,r=e);function a(o,d,i=0,h=o.length){if(i<h){if(t(d,d)!==0)return h;do{const u=i+h>>>1;n(o[u],d)<0?i=u+1:h=u}while(i<h)}return i}function l(o,d,i=0,h=o.length){if(i<h){if(t(d,d)!==0)return h;do{const u=i+h>>>1;n(o[u],d)<=0?i=u+1:h=u}while(i<h)}return i}function c(o,d,i=0,h=o.length){const u=a(o,d,i,h-1);return u>i&&r(o[u-1],d)>-r(o[u],d)?u-1:u}return{left:a,center:c,right:l}}function jn(){return 0}function Nn(e){return e===null?NaN:+e}const wn=Ms(Be),kn=wn.right;Ms(Nn).center;class Yt extends Map{constructor(t,n=An){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,a]of t)this.set(r,a)}get(t){return super.get(Zt(this,t))}has(t){return super.has(Zt(this,t))}set(t,n){return super.set(_n(this,t),n)}delete(t){return super.delete(Sn(this,t))}}function Zt({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function _n({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Sn({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function An(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Mn=Math.sqrt(50),En=Math.sqrt(10),$n=Math.sqrt(2);function Ue(e,t,n){const r=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(r)),l=r/Math.pow(10,a),c=l>=Mn?10:l>=En?5:l>=$n?2:1;let o,d,i;return a<0?(i=Math.pow(10,-a)/c,o=Math.round(e*i),d=Math.round(t*i),o/i<e&&++o,d/i>t&&--d,i=-i):(i=Math.pow(10,a)*c,o=Math.round(e/i),d=Math.round(t/i),o*i<e&&++o,d*i>t&&--d),d<o&&.5<=n&&n<2?Ue(e,t,n*2):[o,d,i]}function Tn(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[a,l,c]=r?Ue(t,e,n):Ue(e,t,n);if(!(l>=a))return[];const o=l-a+1,d=new Array(o);if(r)if(c<0)for(let i=0;i<o;++i)d[i]=(l-i)/-c;else for(let i=0;i<o;++i)d[i]=(l-i)*c;else if(c<0)for(let i=0;i<o;++i)d[i]=(a+i)/-c;else for(let i=0;i<o;++i)d[i]=(a+i)*c;return d}function vt(e,t,n){return t=+t,e=+e,n=+n,Ue(e,t,n)[2]}function Rn(e,t,n){t=+t,e=+e,n=+n;const r=t<e,a=r?vt(t,e,n):vt(e,t,n);return(r?-1:1)*(a<0?1/-a:a)}function Dt(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(n<a||n===void 0&&a>=a)&&(n=a)}return n}function Dn(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var r=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,l=new Array(a);++r<a;)l[r]=e+r*n;return l}function Gn(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let a of e)(a=+t(a,++r,e))&&(n+=a)}return n}function Fn(e){return e}var mt=1,xt=2,jt=3,Ee=4,Ut=1e-6;function Pn(e){return"translate("+e+",0)"}function zn(e){return"translate(0,"+e+")"}function Cn(e){return t=>+e(t)}function Wn(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Kn(){return!this.__axis}function Es(e,t){var n=[],r=null,a=null,l=6,c=6,o=3,d=typeof window<"u"&&window.devicePixelRatio>1?0:.5,i=e===mt||e===Ee?-1:1,h=e===Ee||e===xt?"x":"y",u=e===mt||e===jt?Pn:zn;function f(x){var m=r??(t.ticks?t.ticks.apply(t,n):t.domain()),g=a??(t.tickFormat?t.tickFormat.apply(t,n):Fn),p=Math.max(l,0)+o,M=t.range(),j=+M[0]+d,v=+M[M.length-1]+d,N=(t.bandwidth?Wn:Cn)(t.copy(),d),_=x.selection?x.selection():x,w=_.selectAll(".domain").data([null]),F=_.selectAll(".tick").data(m,t).order(),C=F.exit(),$=F.enter().append("g").attr("class","tick"),R=F.select("line"),E=F.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),F=F.merge($),R=R.merge($.append("line").attr("stroke","currentColor").attr(h+"2",i*l)),E=E.merge($.append("text").attr("fill","currentColor").attr(h,i*p).attr("dy",e===mt?"0em":e===jt?"0.71em":"0.32em")),x!==_&&(w=w.transition(x),F=F.transition(x),R=R.transition(x),E=E.transition(x),C=C.transition(x).attr("opacity",Ut).attr("transform",function(P){return isFinite(P=N(P))?u(P+d):this.getAttribute("transform")}),$.attr("opacity",Ut).attr("transform",function(P){var b=this.parentNode.__axis;return u((b&&isFinite(b=b(P))?b:N(P))+d)})),C.remove(),w.attr("d",e===Ee||e===xt?c?"M"+i*c+","+j+"H"+d+"V"+v+"H"+i*c:"M"+d+","+j+"V"+v:c?"M"+j+","+i*c+"V"+d+"H"+v+"V"+i*c:"M"+j+","+d+"H"+v),F.attr("opacity",1).attr("transform",function(P){return u(N(P)+d)}),R.attr(h+"2",i*l),E.attr(h,i*p).text(g),_.filter(Kn).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===xt?"start":e===Ee?"end":"middle"),_.each(function(){this.__axis=N})}return f.scale=function(x){return arguments.length?(t=x,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(x){return arguments.length?(n=x==null?[]:Array.from(x),f):n.slice()},f.tickValues=function(x){return arguments.length?(r=x==null?null:Array.from(x),f):r&&r.slice()},f.tickFormat=function(x){return arguments.length?(a=x,f):a},f.tickSize=function(x){return arguments.length?(l=c=+x,f):l},f.tickSizeInner=function(x){return arguments.length?(l=+x,f):l},f.tickSizeOuter=function(x){return arguments.length?(c=+x,f):c},f.tickPadding=function(x){return arguments.length?(o=+x,f):o},f.offset=function(x){return arguments.length?(d=+x,f):d},f}function Gt(e){return Es(jt,e)}function we(e){return Es(Ee,e)}var Ln={value:()=>{}};function $s(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new qe(n)}function qe(e){this._=e}function Hn(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",a=n.indexOf(".");if(a>=0&&(r=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}qe.prototype=$s.prototype={constructor:qe,on:function(e,t){var n=this._,r=Hn(e+"",n),a,l=-1,c=r.length;if(arguments.length<2){for(;++l<c;)if((a=(e=r[l]).type)&&(a=On(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++l<c;)if(a=(e=r[l]).type)n[a]=Jt(n[a],e.name,t);else if(t==null)for(a in n)n[a]=Jt(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new qe(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),r=0,a,l;r<a;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(l=this._[e],r=0,a=l.length;r<a;++r)l[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],a=0,l=r.length;a<l;++a)r[a].value.apply(t,n)}};function On(e,t){for(var n=0,r=e.length,a;n<r;++n)if((a=e[n]).name===t)return a.value}function Jt(e,t,n){for(var r=0,a=e.length;r<a;++r)if(e[r].name===t){e[r]=Ln,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Nt="http://www.w3.org/1999/xhtml";const Qt={svg:"http://www.w3.org/2000/svg",xhtml:Nt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ot(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Qt.hasOwnProperty(t)?{space:Qt[t],local:e}:e}function In(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Nt&&t.documentElement.namespaceURI===Nt?t.createElement(e):t.createElementNS(n,e)}}function Vn(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ts(e){var t=ot(e);return(t.local?Vn:In)(t)}function Bn(){}function Ft(e){return e==null?Bn:function(){return this.querySelector(e)}}function qn(e){typeof e!="function"&&(e=Ft(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,o=r[a]=new Array(c),d,i,h=0;h<c;++h)(d=l[h])&&(i=e.call(d,d.__data__,h,l))&&("__data__"in d&&(i.__data__=d.__data__),o[h]=i);return new Q(r,this._parents)}function Xn(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Yn(){return[]}function Rs(e){return e==null?Yn:function(){return this.querySelectorAll(e)}}function Zn(e){return function(){return Xn(e.apply(this,arguments))}}function Un(e){typeof e=="function"?e=Zn(e):e=Rs(e);for(var t=this._groups,n=t.length,r=[],a=[],l=0;l<n;++l)for(var c=t[l],o=c.length,d,i=0;i<o;++i)(d=c[i])&&(r.push(e.call(d,d.__data__,i,c)),a.push(d));return new Q(r,a)}function Ds(e){return function(){return this.matches(e)}}function Gs(e){return function(t){return t.matches(e)}}var Jn=Array.prototype.find;function Qn(e){return function(){return Jn.call(this.children,e)}}function er(){return this.firstElementChild}function tr(e){return this.select(e==null?er:Qn(typeof e=="function"?e:Gs(e)))}var sr=Array.prototype.filter;function nr(){return Array.from(this.children)}function rr(e){return function(){return sr.call(this.children,e)}}function ar(e){return this.selectAll(e==null?nr:rr(typeof e=="function"?e:Gs(e)))}function ir(e){typeof e!="function"&&(e=Ds(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,o=r[a]=[],d,i=0;i<c;++i)(d=l[i])&&e.call(d,d.__data__,i,l)&&o.push(d);return new Q(r,this._parents)}function Fs(e){return new Array(e.length)}function lr(){return new Q(this._enter||this._groups.map(Fs),this._parents)}function Je(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Je.prototype={constructor:Je,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function cr(e){return function(){return e}}function or(e,t,n,r,a,l){for(var c=0,o,d=t.length,i=l.length;c<i;++c)(o=t[c])?(o.__data__=l[c],r[c]=o):n[c]=new Je(e,l[c]);for(;c<d;++c)(o=t[c])&&(a[c]=o)}function dr(e,t,n,r,a,l,c){var o,d,i=new Map,h=t.length,u=l.length,f=new Array(h),x;for(o=0;o<h;++o)(d=t[o])&&(f[o]=x=c.call(d,d.__data__,o,t)+"",i.has(x)?a[o]=d:i.set(x,d));for(o=0;o<u;++o)x=c.call(e,l[o],o,l)+"",(d=i.get(x))?(r[o]=d,d.__data__=l[o],i.delete(x)):n[o]=new Je(e,l[o]);for(o=0;o<h;++o)(d=t[o])&&i.get(f[o])===d&&(a[o]=d)}function hr(e){return e.__data__}function ur(e,t){if(!arguments.length)return Array.from(this,hr);var n=t?dr:or,r=this._parents,a=this._groups;typeof e!="function"&&(e=cr(e));for(var l=a.length,c=new Array(l),o=new Array(l),d=new Array(l),i=0;i<l;++i){var h=r[i],u=a[i],f=u.length,x=fr(e.call(h,h&&h.__data__,i,r)),m=x.length,g=o[i]=new Array(m),p=c[i]=new Array(m),M=d[i]=new Array(f);n(h,u,g,p,M,x,t);for(var j=0,v=0,N,_;j<m;++j)if(N=g[j]){for(j>=v&&(v=j+1);!(_=p[v])&&++v<m;);N._next=_||null}}return c=new Q(c,r),c._enter=o,c._exit=d,c}function fr(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function mr(){return new Q(this._exit||this._groups.map(Fs),this._parents)}function xr(e,t,n){var r=this.enter(),a=this,l=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?l.remove():n(l),r&&a?r.merge(a).order():a}function gr(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,a=n.length,l=r.length,c=Math.min(a,l),o=new Array(a),d=0;d<c;++d)for(var i=n[d],h=r[d],u=i.length,f=o[d]=new Array(u),x,m=0;m<u;++m)(x=i[m]||h[m])&&(f[m]=x);for(;d<a;++d)o[d]=n[d];return new Q(o,this._parents)}function pr(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],a=r.length-1,l=r[a],c;--a>=0;)(c=r[a])&&(l&&c.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(c,l),l=c);return this}function yr(e){e||(e=br);function t(u,f){return u&&f?e(u.__data__,f.__data__):!u-!f}for(var n=this._groups,r=n.length,a=new Array(r),l=0;l<r;++l){for(var c=n[l],o=c.length,d=a[l]=new Array(o),i,h=0;h<o;++h)(i=c[h])&&(d[h]=i);d.sort(t)}return new Q(a,this._parents).order()}function br(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function vr(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function jr(){return Array.from(this)}function Nr(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length;a<l;++a){var c=r[a];if(c)return c}return null}function wr(){let e=0;for(const t of this)++e;return e}function kr(){return!this.node()}function _r(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var a=t[n],l=0,c=a.length,o;l<c;++l)(o=a[l])&&e.call(o,o.__data__,l,a);return this}function Sr(e){return function(){this.removeAttribute(e)}}function Ar(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Mr(e,t){return function(){this.setAttribute(e,t)}}function Er(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $r(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Tr(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Rr(e,t){var n=ot(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ar:Sr:typeof t=="function"?n.local?Tr:$r:n.local?Er:Mr)(n,t))}function Ps(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Dr(e){return function(){this.style.removeProperty(e)}}function Gr(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Fr(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Pr(e,t,n){return arguments.length>1?this.each((t==null?Dr:typeof t=="function"?Fr:Gr)(e,t,n??"")):ke(this.node(),e)}function ke(e,t){return e.style.getPropertyValue(t)||Ps(e).getComputedStyle(e,null).getPropertyValue(t)}function zr(e){return function(){delete this[e]}}function Cr(e,t){return function(){this[e]=t}}function Wr(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Kr(e,t){return arguments.length>1?this.each((t==null?zr:typeof t=="function"?Wr:Cr)(e,t)):this.node()[e]}function zs(e){return e.trim().split(/^|\s+/)}function Pt(e){return e.classList||new Cs(e)}function Cs(e){this._node=e,this._names=zs(e.getAttribute("class")||"")}Cs.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Ws(e,t){for(var n=Pt(e),r=-1,a=t.length;++r<a;)n.add(t[r])}function Ks(e,t){for(var n=Pt(e),r=-1,a=t.length;++r<a;)n.remove(t[r])}function Lr(e){return function(){Ws(this,e)}}function Hr(e){return function(){Ks(this,e)}}function Or(e,t){return function(){(t.apply(this,arguments)?Ws:Ks)(this,e)}}function Ir(e,t){var n=zs(e+"");if(arguments.length<2){for(var r=Pt(this.node()),a=-1,l=n.length;++a<l;)if(!r.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?Or:t?Lr:Hr)(n,t))}function Vr(){this.textContent=""}function Br(e){return function(){this.textContent=e}}function qr(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Xr(e){return arguments.length?this.each(e==null?Vr:(typeof e=="function"?qr:Br)(e)):this.node().textContent}function Yr(){this.innerHTML=""}function Zr(e){return function(){this.innerHTML=e}}function Ur(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Jr(e){return arguments.length?this.each(e==null?Yr:(typeof e=="function"?Ur:Zr)(e)):this.node().innerHTML}function Qr(){this.nextSibling&&this.parentNode.appendChild(this)}function ea(){return this.each(Qr)}function ta(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function sa(){return this.each(ta)}function na(e){var t=typeof e=="function"?e:Ts(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function ra(){return null}function aa(e,t){var n=typeof e=="function"?e:Ts(e),r=t==null?ra:typeof t=="function"?t:Ft(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ia(){var e=this.parentNode;e&&e.removeChild(this)}function la(){return this.each(ia)}function ca(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oa(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function da(e){return this.select(e?oa:ca)}function ha(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ua(e){return function(t){e.call(this,t,this.__data__)}}function fa(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ma(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,a=t.length,l;n<a;++n)l=t[n],(!e.type||l.type===e.type)&&l.name===e.name?this.removeEventListener(l.type,l.listener,l.options):t[++r]=l;++r?t.length=r:delete this.__on}}}function xa(e,t,n){return function(){var r=this.__on,a,l=ua(t);if(r){for(var c=0,o=r.length;c<o;++c)if((a=r[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=l,a.options=n),a.value=t;return}}this.addEventListener(e.type,l,n),a={type:e.type,name:e.name,value:t,listener:l,options:n},r?r.push(a):this.__on=[a]}}function ga(e,t,n){var r=fa(e+""),a,l=r.length,c;if(arguments.length<2){var o=this.node().__on;if(o){for(var d=0,i=o.length,h;d<i;++d)for(a=0,h=o[d];a<l;++a)if((c=r[a]).type===h.type&&c.name===h.name)return h.value}return}for(o=t?xa:ma,a=0;a<l;++a)this.each(o(r[a],t,n));return this}function Ls(e,t,n){var r=Ps(e),a=r.CustomEvent;typeof a=="function"?a=new a(t,n):(a=r.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function pa(e,t){return function(){return Ls(this,e,t)}}function ya(e,t){return function(){return Ls(this,e,t.apply(this,arguments))}}function ba(e,t){return this.each((typeof t=="function"?ya:pa)(e,t))}function*va(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],a=0,l=r.length,c;a<l;++a)(c=r[a])&&(yield c)}var Hs=[null];function Q(e,t){this._groups=e,this._parents=t}function Ce(){return new Q([[document.documentElement]],Hs)}function ja(){return this}Q.prototype=Ce.prototype={constructor:Q,select:qn,selectAll:Un,selectChild:tr,selectChildren:ar,filter:ir,data:ur,enter:lr,exit:mr,join:xr,merge:gr,selection:ja,order:pr,sort:yr,call:vr,nodes:jr,node:Nr,size:wr,empty:kr,each:_r,attr:Rr,style:Pr,property:Kr,classed:Ir,text:Xr,html:Jr,raise:ea,lower:sa,append:na,insert:aa,remove:la,clone:da,datum:ha,on:ga,dispatch:ba,[Symbol.iterator]:va};function V(e){return typeof e=="string"?new Q([[document.querySelector(e)]],[document.documentElement]):new Q([[e]],Hs)}function zt(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Os(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function We(){}var De=.7,Qe=1/De,Ne="\\s*([+-]?\\d+)\\s*",Ge="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ae="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Na=/^#([0-9a-f]{3,8})$/,wa=new RegExp(`^rgb\\(${Ne},${Ne},${Ne}\\)$`),ka=new RegExp(`^rgb\\(${ae},${ae},${ae}\\)$`),_a=new RegExp(`^rgba\\(${Ne},${Ne},${Ne},${Ge}\\)$`),Sa=new RegExp(`^rgba\\(${ae},${ae},${ae},${Ge}\\)$`),Aa=new RegExp(`^hsl\\(${Ge},${ae},${ae}\\)$`),Ma=new RegExp(`^hsla\\(${Ge},${ae},${ae},${Ge}\\)$`),es={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};zt(We,me,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ts,formatHex:ts,formatHex8:Ea,formatHsl:$a,formatRgb:ss,toString:ss});function ts(){return this.rgb().formatHex()}function Ea(){return this.rgb().formatHex8()}function $a(){return Is(this).formatHsl()}function ss(){return this.rgb().formatRgb()}function me(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Na.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ns(t):n===3?new Z(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Le(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Le(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=wa.exec(e))?new Z(t[1],t[2],t[3],1):(t=ka.exec(e))?new Z(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_a.exec(e))?Le(t[1],t[2],t[3],t[4]):(t=Sa.exec(e))?Le(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Aa.exec(e))?is(t[1],t[2]/100,t[3]/100,1):(t=Ma.exec(e))?is(t[1],t[2]/100,t[3]/100,t[4]):es.hasOwnProperty(e)?ns(es[e]):e==="transparent"?new Z(NaN,NaN,NaN,0):null}function ns(e){return new Z(e>>16&255,e>>8&255,e&255,1)}function Le(e,t,n,r){return r<=0&&(e=t=n=NaN),new Z(e,t,n,r)}function Ta(e){return e instanceof We||(e=me(e)),e?(e=e.rgb(),new Z(e.r,e.g,e.b,e.opacity)):new Z}function wt(e,t,n,r){return arguments.length===1?Ta(e):new Z(e,t,n,r??1)}function Z(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}zt(Z,wt,Os(We,{brighter(e){return e=e==null?Qe:Math.pow(Qe,e),new Z(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?De:Math.pow(De,e),new Z(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Z(fe(this.r),fe(this.g),fe(this.b),et(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rs,formatHex:rs,formatHex8:Ra,formatRgb:as,toString:as}));function rs(){return`#${ue(this.r)}${ue(this.g)}${ue(this.b)}`}function Ra(){return`#${ue(this.r)}${ue(this.g)}${ue(this.b)}${ue((isNaN(this.opacity)?1:this.opacity)*255)}`}function as(){const e=et(this.opacity);return`${e===1?"rgb(":"rgba("}${fe(this.r)}, ${fe(this.g)}, ${fe(this.b)}${e===1?")":`, ${e})`}`}function et(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function fe(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ue(e){return e=fe(e),(e<16?"0":"")+e.toString(16)}function is(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new te(e,t,n,r)}function Is(e){if(e instanceof te)return new te(e.h,e.s,e.l,e.opacity);if(e instanceof We||(e=me(e)),!e)return new te;if(e instanceof te)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),l=Math.max(t,n,r),c=NaN,o=l-a,d=(l+a)/2;return o?(t===l?c=(n-r)/o+(n<r)*6:n===l?c=(r-t)/o+2:c=(t-n)/o+4,o/=d<.5?l+a:2-l-a,c*=60):o=d>0&&d<1?0:c,new te(c,o,d,e.opacity)}function Da(e,t,n,r){return arguments.length===1?Is(e):new te(e,t,n,r??1)}function te(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}zt(te,Da,Os(We,{brighter(e){return e=e==null?Qe:Math.pow(Qe,e),new te(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?De:Math.pow(De,e),new te(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Z(gt(e>=240?e-240:e+120,a,r),gt(e,a,r),gt(e<120?e+240:e-120,a,r),this.opacity)},clamp(){return new te(ls(this.h),He(this.s),He(this.l),et(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=et(this.opacity);return`${e===1?"hsl(":"hsla("}${ls(this.h)}, ${He(this.s)*100}%, ${He(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ls(e){return e=(e||0)%360,e<0?e+360:e}function He(e){return Math.max(0,Math.min(1,e||0))}function gt(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Ct=e=>()=>e;function Ga(e,t){return function(n){return e+n*t}}function Fa(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Pa(e){return(e=+e)==1?Vs:function(t,n){return n-t?Fa(t,n,e):Ct(isNaN(t)?n:t)}}function Vs(e,t){var n=t-e;return n?Ga(e,n):Ct(isNaN(e)?t:e)}const tt=function e(t){var n=Pa(t);function r(a,l){var c=n((a=wt(a)).r,(l=wt(l)).r),o=n(a.g,l.g),d=n(a.b,l.b),i=Vs(a.opacity,l.opacity);return function(h){return a.r=c(h),a.g=o(h),a.b=d(h),a.opacity=i(h),a+""}}return r.gamma=e,r}(1);function za(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(l){for(a=0;a<n;++a)r[a]=e[a]*(1-l)+t[a]*l;return r}}function Ca(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Wa(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),l=new Array(n),c;for(c=0;c<r;++c)a[c]=dt(e[c],t[c]);for(;c<n;++c)l[c]=t[c];return function(o){for(c=0;c<r;++c)l[c]=a[c](o);return l}}function Ka(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ee(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function La(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=dt(e[a],t[a]):r[a]=t[a];return function(l){for(a in n)r[a]=n[a](l);return r}}var kt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pt=new RegExp(kt.source,"g");function Ha(e){return function(){return e}}function Oa(e){return function(t){return e(t)+""}}function Bs(e,t){var n=kt.lastIndex=pt.lastIndex=0,r,a,l,c=-1,o=[],d=[];for(e=e+"",t=t+"";(r=kt.exec(e))&&(a=pt.exec(t));)(l=a.index)>n&&(l=t.slice(n,l),o[c]?o[c]+=l:o[++c]=l),(r=r[0])===(a=a[0])?o[c]?o[c]+=a:o[++c]=a:(o[++c]=null,d.push({i:c,x:ee(r,a)})),n=pt.lastIndex;return n<t.length&&(l=t.slice(n),o[c]?o[c]+=l:o[++c]=l),o.length<2?d[0]?Oa(d[0].x):Ha(t):(t=d.length,function(i){for(var h=0,u;h<t;++h)o[(u=d[h]).i]=u.x(i);return o.join("")})}function dt(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ct(t):(n==="number"?ee:n==="string"?(r=me(t))?(t=r,tt):Bs:t instanceof me?tt:t instanceof Date?Ka:Ca(t)?za:Array.isArray(t)?Wa:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?La:ee)(e,t)}function Ia(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var cs=180/Math.PI,_t={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qs(e,t,n,r,a,l){var c,o,d;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(d=e*n+t*r)&&(n-=e*d,r-=t*d),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,d/=o),e*r<t*n&&(e=-e,t=-t,d=-d,c=-c),{translateX:a,translateY:l,rotate:Math.atan2(t,e)*cs,skewX:Math.atan(d)*cs,scaleX:c,scaleY:o}}var Oe;function Va(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_t:qs(t.a,t.b,t.c,t.d,t.e,t.f)}function Ba(e){return e==null||(Oe||(Oe=document.createElementNS("http://www.w3.org/2000/svg","g")),Oe.setAttribute("transform",e),!(e=Oe.transform.baseVal.consolidate()))?_t:(e=e.matrix,qs(e.a,e.b,e.c,e.d,e.e,e.f))}function Xs(e,t,n,r){function a(i){return i.length?i.pop()+" ":""}function l(i,h,u,f,x,m){if(i!==u||h!==f){var g=x.push("translate(",null,t,null,n);m.push({i:g-4,x:ee(i,u)},{i:g-2,x:ee(h,f)})}else(u||f)&&x.push("translate("+u+t+f+n)}function c(i,h,u,f){i!==h?(i-h>180?h+=360:h-i>180&&(i+=360),f.push({i:u.push(a(u)+"rotate(",null,r)-2,x:ee(i,h)})):h&&u.push(a(u)+"rotate("+h+r)}function o(i,h,u,f){i!==h?f.push({i:u.push(a(u)+"skewX(",null,r)-2,x:ee(i,h)}):h&&u.push(a(u)+"skewX("+h+r)}function d(i,h,u,f,x,m){if(i!==u||h!==f){var g=x.push(a(x)+"scale(",null,",",null,")");m.push({i:g-4,x:ee(i,u)},{i:g-2,x:ee(h,f)})}else(u!==1||f!==1)&&x.push(a(x)+"scale("+u+","+f+")")}return function(i,h){var u=[],f=[];return i=e(i),h=e(h),l(i.translateX,i.translateY,h.translateX,h.translateY,u,f),c(i.rotate,h.rotate,u,f),o(i.skewX,h.skewX,u,f),d(i.scaleX,i.scaleY,h.scaleX,h.scaleY,u,f),i=h=null,function(x){for(var m=-1,g=f.length,p;++m<g;)u[(p=f[m]).i]=p.x(x);return u.join("")}}}var qa=Xs(Va,"px, ","px)","deg)"),Xa=Xs(Ba,", ",")",")"),_e=0,$e=0,Me=0,Ys=1e3,st,Te,nt=0,xe=0,ht=0,Fe=typeof performance=="object"&&performance.now?performance:Date,Zs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Wt(){return xe||(Zs(Ya),xe=Fe.now()+ht)}function Ya(){xe=0}function rt(){this._call=this._time=this._next=null}rt.prototype=Us.prototype={constructor:rt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?Wt():+n)+(t==null?0:+t),!this._next&&Te!==this&&(Te?Te._next=this:st=this,Te=this),this._call=e,this._time=n,St()},stop:function(){this._call&&(this._call=null,this._time=1/0,St())}};function Us(e,t,n){var r=new rt;return r.restart(e,t,n),r}function Za(){Wt(),++_e;for(var e=st,t;e;)(t=xe-e._time)>=0&&e._call.call(void 0,t),e=e._next;--_e}function os(){xe=(nt=Fe.now())+ht,_e=$e=0;try{Za()}finally{_e=0,Ja(),xe=0}}function Ua(){var e=Fe.now(),t=e-nt;t>Ys&&(ht-=t,nt=e)}function Ja(){for(var e,t=st,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:st=n);Te=e,St(r)}function St(e){if(!_e){$e&&($e=clearTimeout($e));var t=e-xe;t>24?(e<1/0&&($e=setTimeout(os,e-Fe.now()-ht)),Me&&(Me=clearInterval(Me))):(Me||(nt=Fe.now(),Me=setInterval(Ua,Ys)),_e=1,Zs(os))}}function ds(e,t,n){var r=new rt;return t=t==null?0:+t,r.restart(a=>{r.stop(),e(a+t)},t,n),r}var Qa=$s("start","end","cancel","interrupt"),ei=[],Js=0,hs=1,At=2,Xe=3,us=4,Mt=5,Ye=6;function ut(e,t,n,r,a,l){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;ti(e,n,{name:t,index:r,group:a,on:Qa,tween:ei,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:Js})}function Kt(e,t){var n=se(e,t);if(n.state>Js)throw new Error("too late; already scheduled");return n}function ie(e,t){var n=se(e,t);if(n.state>Xe)throw new Error("too late; already running");return n}function se(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ti(e,t,n){var r=e.__transition,a;r[t]=n,n.timer=Us(l,0,n.time);function l(i){n.state=hs,n.timer.restart(c,n.delay,n.time),n.delay<=i&&c(i-n.delay)}function c(i){var h,u,f,x;if(n.state!==hs)return d();for(h in r)if(x=r[h],x.name===n.name){if(x.state===Xe)return ds(c);x.state===us?(x.state=Ye,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete r[h]):+h<t&&(x.state=Ye,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete r[h])}if(ds(function(){n.state===Xe&&(n.state=us,n.timer.restart(o,n.delay,n.time),o(i))}),n.state=At,n.on.call("start",e,e.__data__,n.index,n.group),n.state===At){for(n.state=Xe,a=new Array(f=n.tween.length),h=0,u=-1;h<f;++h)(x=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(a[++u]=x);a.length=u+1}}function o(i){for(var h=i<n.duration?n.ease.call(null,i/n.duration):(n.timer.restart(d),n.state=Mt,1),u=-1,f=a.length;++u<f;)a[u].call(e,h);n.state===Mt&&(n.on.call("end",e,e.__data__,n.index,n.group),d())}function d(){n.state=Ye,n.timer.stop(),delete r[t];for(var i in r)return;delete e.__transition}}function si(e,t){var n=e.__transition,r,a,l=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((r=n[c]).name!==t){l=!1;continue}a=r.state>At&&r.state<Mt,r.state=Ye,r.timer.stop(),r.on.call(a?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[c]}l&&delete e.__transition}}function ni(e){return this.each(function(){si(this,e)})}function ri(e,t){var n,r;return function(){var a=ie(this,e),l=a.tween;if(l!==n){r=n=l;for(var c=0,o=r.length;c<o;++c)if(r[c].name===t){r=r.slice(),r.splice(c,1);break}}a.tween=r}}function ai(e,t,n){var r,a;if(typeof n!="function")throw new Error;return function(){var l=ie(this,e),c=l.tween;if(c!==r){a=(r=c).slice();for(var o={name:t,value:n},d=0,i=a.length;d<i;++d)if(a[d].name===t){a[d]=o;break}d===i&&a.push(o)}l.tween=a}}function ii(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=se(this.node(),n).tween,a=0,l=r.length,c;a<l;++a)if((c=r[a]).name===e)return c.value;return null}return this.each((t==null?ri:ai)(n,e,t))}function Lt(e,t,n){var r=e._id;return e.each(function(){var a=ie(this,r);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return se(a,r).value[t]}}function Qs(e,t){var n;return(typeof t=="number"?ee:t instanceof me?tt:(n=me(t))?(t=n,tt):Bs)(e,t)}function li(e){return function(){this.removeAttribute(e)}}function ci(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oi(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttribute(e);return c===a?null:c===r?l:l=t(r=c,n)}}function di(e,t,n){var r,a=n+"",l;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===r?l:l=t(r=c,n)}}function hi(e,t,n){var r,a,l;return function(){var c,o=n(this),d;return o==null?void this.removeAttribute(e):(c=this.getAttribute(e),d=o+"",c===d?null:c===r&&d===a?l:(a=d,l=t(r=c,o)))}}function ui(e,t,n){var r,a,l;return function(){var c,o=n(this),d;return o==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),d=o+"",c===d?null:c===r&&d===a?l:(a=d,l=t(r=c,o)))}}function fi(e,t){var n=ot(e),r=n==="transform"?Xa:Qs;return this.attrTween(e,typeof t=="function"?(n.local?ui:hi)(n,r,Lt(this,"attr."+e,t)):t==null?(n.local?ci:li)(n):(n.local?di:oi)(n,r,t))}function mi(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function xi(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function gi(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&xi(e,l)),n}return a._value=t,a}function pi(e,t){var n,r;function a(){var l=t.apply(this,arguments);return l!==r&&(n=(r=l)&&mi(e,l)),n}return a._value=t,a}function yi(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=ot(e);return this.tween(n,(r.local?gi:pi)(r,t))}function bi(e,t){return function(){Kt(this,e).delay=+t.apply(this,arguments)}}function vi(e,t){return t=+t,function(){Kt(this,e).delay=t}}function ji(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bi:vi)(t,e)):se(this.node(),t).delay}function Ni(e,t){return function(){ie(this,e).duration=+t.apply(this,arguments)}}function wi(e,t){return t=+t,function(){ie(this,e).duration=t}}function ki(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Ni:wi)(t,e)):se(this.node(),t).duration}function _i(e,t){if(typeof t!="function")throw new Error;return function(){ie(this,e).ease=t}}function Si(e){var t=this._id;return arguments.length?this.each(_i(t,e)):se(this.node(),t).ease}function Ai(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ie(this,e).ease=n}}function Mi(e){if(typeof e!="function")throw new Error;return this.each(Ai(this._id,e))}function Ei(e){typeof e!="function"&&(e=Ds(e));for(var t=this._groups,n=t.length,r=new Array(n),a=0;a<n;++a)for(var l=t[a],c=l.length,o=r[a]=[],d,i=0;i<c;++i)(d=l[i])&&e.call(d,d.__data__,i,l)&&o.push(d);return new oe(r,this._parents,this._name,this._id)}function $i(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,a=n.length,l=Math.min(r,a),c=new Array(r),o=0;o<l;++o)for(var d=t[o],i=n[o],h=d.length,u=c[o]=new Array(h),f,x=0;x<h;++x)(f=d[x]||i[x])&&(u[x]=f);for(;o<r;++o)c[o]=t[o];return new oe(c,this._parents,this._name,this._id)}function Ti(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ri(e,t,n){var r,a,l=Ti(t)?Kt:ie;return function(){var c=l(this,e),o=c.on;o!==r&&(a=(r=o).copy()).on(t,n),c.on=a}}function Di(e,t){var n=this._id;return arguments.length<2?se(this.node(),n).on.on(e):this.each(Ri(n,e,t))}function Gi(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Fi(){return this.on("end.remove",Gi(this._id))}function Pi(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Ft(e));for(var r=this._groups,a=r.length,l=new Array(a),c=0;c<a;++c)for(var o=r[c],d=o.length,i=l[c]=new Array(d),h,u,f=0;f<d;++f)(h=o[f])&&(u=e.call(h,h.__data__,f,o))&&("__data__"in h&&(u.__data__=h.__data__),i[f]=u,ut(i[f],t,n,f,i,se(h,n)));return new oe(l,this._parents,t,n)}function zi(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Rs(e));for(var r=this._groups,a=r.length,l=[],c=[],o=0;o<a;++o)for(var d=r[o],i=d.length,h,u=0;u<i;++u)if(h=d[u]){for(var f=e.call(h,h.__data__,u,d),x,m=se(h,n),g=0,p=f.length;g<p;++g)(x=f[g])&&ut(x,t,n,g,f,m);l.push(f),c.push(h)}return new oe(l,c,t,n)}var Ci=Ce.prototype.constructor;function Wi(){return new Ci(this._groups,this._parents)}function Ki(e,t){var n,r,a;return function(){var l=ke(this,e),c=(this.style.removeProperty(e),ke(this,e));return l===c?null:l===n&&c===r?a:a=t(n=l,r=c)}}function en(e){return function(){this.style.removeProperty(e)}}function Li(e,t,n){var r,a=n+"",l;return function(){var c=ke(this,e);return c===a?null:c===r?l:l=t(r=c,n)}}function Hi(e,t,n){var r,a,l;return function(){var c=ke(this,e),o=n(this),d=o+"";return o==null&&(d=o=(this.style.removeProperty(e),ke(this,e))),c===d?null:c===r&&d===a?l:(a=d,l=t(r=c,o))}}function Oi(e,t){var n,r,a,l="style."+t,c="end."+l,o;return function(){var d=ie(this,e),i=d.on,h=d.value[l]==null?o||(o=en(t)):void 0;(i!==n||a!==h)&&(r=(n=i).copy()).on(c,a=h),d.on=r}}function Ii(e,t,n){var r=(e+="")=="transform"?qa:Qs;return t==null?this.styleTween(e,Ki(e,r)).on("end.style."+e,en(e)):typeof t=="function"?this.styleTween(e,Hi(e,r,Lt(this,"style."+e,t))).each(Oi(this._id,e)):this.styleTween(e,Li(e,r,t),n).on("end.style."+e,null)}function Vi(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Bi(e,t,n){var r,a;function l(){var c=t.apply(this,arguments);return c!==a&&(r=(a=c)&&Vi(e,c,n)),r}return l._value=t,l}function qi(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Bi(e,t,n??""))}function Xi(e){return function(){this.textContent=e}}function Yi(e){return function(){var t=e(this);this.textContent=t??""}}function Zi(e){return this.tween("text",typeof e=="function"?Yi(Lt(this,"text",e)):Xi(e==null?"":e+""))}function Ui(e){return function(t){this.textContent=e.call(this,t)}}function Ji(e){var t,n;function r(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&Ui(a)),t}return r._value=e,r}function Qi(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ji(e))}function el(){for(var e=this._name,t=this._id,n=tn(),r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],o=c.length,d,i=0;i<o;++i)if(d=c[i]){var h=se(d,t);ut(d,e,n,i,c,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new oe(r,this._parents,e,n)}function tl(){var e,t,n=this,r=n._id,a=n.size();return new Promise(function(l,c){var o={value:c},d={value:function(){--a===0&&l()}};n.each(function(){var i=ie(this,r),h=i.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(d)),i.on=t}),a===0&&l()})}var sl=0;function oe(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function tn(){return++sl}var ce=Ce.prototype;oe.prototype={constructor:oe,select:Pi,selectAll:zi,selectChild:ce.selectChild,selectChildren:ce.selectChildren,filter:Ei,merge:$i,selection:Wi,transition:el,call:ce.call,nodes:ce.nodes,node:ce.node,size:ce.size,empty:ce.empty,each:ce.each,on:Di,attr:fi,attrTween:yi,style:Ii,styleTween:qi,text:Zi,textTween:Qi,remove:Fi,tween:ii,delay:ji,duration:ki,ease:Si,easeVarying:Mi,end:tl,[Symbol.iterator]:ce[Symbol.iterator]};const fs=e=>+e;function sn(e){return--e*e*e+1}function nl(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var rl={time:null,delay:0,duration:250,ease:nl};function al(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function il(e){var t,n;e instanceof oe?(t=e._id,e=e._name):(t=tn(),(n=rl).time=Wt(),e=e==null?null:e+"");for(var r=this._groups,a=r.length,l=0;l<a;++l)for(var c=r[l],o=c.length,d,i=0;i<o;++i)(d=c[i])&&ut(d,e,t,i,c,n||al(d,t));return new oe(r,this._parents,e,t)}Ce.prototype.interrupt=ni;Ce.prototype.transition=il;const Et=Math.PI,$t=2*Et,he=1e-6,ll=$t-he;function nn(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function cl(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return nn;const n=10**t;return function(r){this._+=r[0];for(let a=1,l=r.length;a<l;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}class ol{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?nn:cl(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,a){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+a}`}bezierCurveTo(t,n,r,a,l,c){this._append`C${+t},${+n},${+r},${+a},${this._x1=+l},${this._y1=+c}`}arcTo(t,n,r,a,l){if(t=+t,n=+n,r=+r,a=+a,l=+l,l<0)throw new Error(`negative radius: ${l}`);let c=this._x1,o=this._y1,d=r-t,i=a-n,h=c-t,u=o-n,f=h*h+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>he)if(!(Math.abs(u*d-i*h)>he)||!l)this._append`L${this._x1=t},${this._y1=n}`;else{let x=r-c,m=a-o,g=d*d+i*i,p=x*x+m*m,M=Math.sqrt(g),j=Math.sqrt(f),v=l*Math.tan((Et-Math.acos((g+f-p)/(2*M*j)))/2),N=v/j,_=v/M;Math.abs(N-1)>he&&this._append`L${t+N*h},${n+N*u}`,this._append`A${l},${l},0,0,${+(u*x>h*m)},${this._x1=t+_*d},${this._y1=n+_*i}`}}arc(t,n,r,a,l,c){if(t=+t,n=+n,r=+r,c=!!c,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(a),d=r*Math.sin(a),i=t+o,h=n+d,u=1^c,f=c?a-l:l-a;this._x1===null?this._append`M${i},${h}`:(Math.abs(this._x1-i)>he||Math.abs(this._y1-h)>he)&&this._append`L${i},${h}`,r&&(f<0&&(f=f%$t+$t),f>ll?this._append`A${r},${r},0,1,${u},${t-o},${n-d}A${r},${r},0,1,${u},${this._x1=i},${this._y1=h}`:f>he&&this._append`A${r},${r},0,${+(f>=Et)},${u},${this._x1=t+r*Math.cos(l)},${this._y1=n+r*Math.sin(l)}`)}rect(t,n,r,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+a}h${-r}Z`}toString(){return this._}}function dl(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function at(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Se(e){return e=at(Math.abs(e)),e?e[1]:NaN}function hl(e,t){return function(n,r){for(var a=n.length,l=[],c=0,o=e[0],d=0;a>0&&o>0&&(d+o+1>r&&(o=Math.max(1,r-d)),l.push(n.substring(a-=o,a+o)),!((d+=o+1)>r));)o=e[c=(c+1)%e.length];return l.reverse().join(t)}}function ul(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var fl=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function it(e){if(!(t=fl.exec(e)))throw new Error("invalid format: "+e);var t;return new Ht({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}it.prototype=Ht.prototype;function Ht(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ht.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ml(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var rn;function xl(e,t){var n=at(e,t);if(!n)return e+"";var r=n[0],a=n[1],l=a-(rn=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,c=r.length;return l===c?r:l>c?r+new Array(l-c+1).join("0"):l>0?r.slice(0,l)+"."+r.slice(l):"0."+new Array(1-l).join("0")+at(e,Math.max(0,t+l-1))[0]}function ms(e,t){var n=at(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}const xs={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:dl,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ms(e*100,t),r:ms,s:xl,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function gs(e){return e}var ps=Array.prototype.map,ys=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function gl(e){var t=e.grouping===void 0||e.thousands===void 0?gs:hl(ps.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",l=e.numerals===void 0?gs:ul(ps.call(e.numerals,String)),c=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function i(u){u=it(u);var f=u.fill,x=u.align,m=u.sign,g=u.symbol,p=u.zero,M=u.width,j=u.comma,v=u.precision,N=u.trim,_=u.type;_==="n"?(j=!0,_="g"):xs[_]||(v===void 0&&(v=12),N=!0,_="g"),(p||f==="0"&&x==="=")&&(p=!0,f="0",x="=");var w=g==="$"?n:g==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",F=g==="$"?r:/[%p]/.test(_)?c:"",C=xs[_],$=/[defgprs%]/.test(_);v=v===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function R(E){var P=w,b=F,T,I,L;if(_==="c")b=C(E)+b,E="";else{E=+E;var U=E<0||1/E<0;if(E=isNaN(E)?d:C(Math.abs(E),v),N&&(E=ml(E)),U&&+E==0&&m!=="+"&&(U=!1),P=(U?m==="("?m:o:m==="-"||m==="("?"":m)+P,b=(_==="s"?ys[8+rn/3]:"")+b+(U&&m==="("?")":""),$){for(T=-1,I=E.length;++T<I;)if(L=E.charCodeAt(T),48>L||L>57){b=(L===46?a+E.slice(T+1):E.slice(T))+b,E=E.slice(0,T);break}}}j&&!p&&(E=t(E,1/0));var J=P.length+E.length+b.length,B=J<M?new Array(M-J+1).join(f):"";switch(j&&p&&(E=t(B+E,B.length?M-b.length:1/0),B=""),x){case"<":E=P+E+b+B;break;case"=":E=P+B+E+b;break;case"^":E=B.slice(0,J=B.length>>1)+P+E+b+B.slice(J);break;default:E=B+P+E+b;break}return l(E)}return R.toString=function(){return u+""},R}function h(u,f){var x=i((u=it(u),u.type="f",u)),m=Math.max(-8,Math.min(8,Math.floor(Se(f)/3)))*3,g=Math.pow(10,-m),p=ys[8+m/3];return function(M){return x(g*M)+p}}return{format:i,formatPrefix:h}}var Ie,an,ln;pl({thousands:",",grouping:[3],currency:["$",""]});function pl(e){return Ie=gl(e),an=Ie.format,ln=Ie.formatPrefix,Ie}function yl(e){return Math.max(0,-Se(Math.abs(e)))}function bl(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Se(t)/3)))*3-Se(Math.abs(e)))}function vl(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Se(t)-Se(e))+1}function Ot(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const bs=Symbol("implicit");function It(){var e=new Yt,t=[],n=[],r=bs;function a(l){let c=e.get(l);if(c===void 0){if(r!==bs)return r;e.set(l,c=t.push(l)-1)}return n[c%n.length]}return a.domain=function(l){if(!arguments.length)return t.slice();t=[],e=new Yt;for(const c of l)e.has(c)||e.set(c,t.push(c)-1);return a},a.range=function(l){return arguments.length?(n=Array.from(l),a):n.slice()},a.unknown=function(l){return arguments.length?(r=l,a):r},a.copy=function(){return It(t,n).unknown(r)},Ot.apply(a,arguments),a}function Vt(){var e=It().unknown(void 0),t=e.domain,n=e.range,r=0,a=1,l,c,o=!1,d=0,i=0,h=.5;delete e.unknown;function u(){var f=t().length,x=a<r,m=x?a:r,g=x?r:a;l=(g-m)/Math.max(1,f-d+i*2),o&&(l=Math.floor(l)),m+=(g-m-l*(f-d))*h,c=l*(1-d),o&&(m=Math.round(m),c=Math.round(c));var p=Dn(f).map(function(M){return m+l*M});return n(x?p.reverse():p)}return e.domain=function(f){return arguments.length?(t(f),u()):t()},e.range=function(f){return arguments.length?([r,a]=f,r=+r,a=+a,u()):[r,a]},e.rangeRound=function(f){return[r,a]=f,r=+r,a=+a,o=!0,u()},e.bandwidth=function(){return c},e.step=function(){return l},e.round=function(f){return arguments.length?(o=!!f,u()):o},e.padding=function(f){return arguments.length?(d=Math.min(1,i=+f),u()):d},e.paddingInner=function(f){return arguments.length?(d=Math.min(1,f),u()):d},e.paddingOuter=function(f){return arguments.length?(i=+f,u()):i},e.align=function(f){return arguments.length?(h=Math.max(0,Math.min(1,f)),u()):h},e.copy=function(){return Vt(t(),[r,a]).round(o).paddingInner(d).paddingOuter(i).align(h)},Ot.apply(u(),arguments)}function cn(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return cn(t())},e}function on(){return cn(Vt.apply(null,arguments).paddingInner(1))}function jl(e){return function(){return e}}function Nl(e){return+e}var vs=[0,1];function be(e){return e}function Tt(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:jl(isNaN(t)?NaN:.5)}function wl(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function kl(e,t,n){var r=e[0],a=e[1],l=t[0],c=t[1];return a<r?(r=Tt(a,r),l=n(c,l)):(r=Tt(r,a),l=n(l,c)),function(o){return l(r(o))}}function _l(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),l=new Array(r),c=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++c<r;)a[c]=Tt(e[c],e[c+1]),l[c]=n(t[c],t[c+1]);return function(o){var d=kn(e,o,1,r)-1;return l[d](a[d](o))}}function Sl(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Al(){var e=vs,t=vs,n=dt,r,a,l,c=be,o,d,i;function h(){var f=Math.min(e.length,t.length);return c!==be&&(c=wl(e[0],e[f-1])),o=f>2?_l:kl,d=i=null,u}function u(f){return f==null||isNaN(f=+f)?l:(d||(d=o(e.map(r),t,n)))(r(c(f)))}return u.invert=function(f){return c(a((i||(i=o(t,e.map(r),ee)))(f)))},u.domain=function(f){return arguments.length?(e=Array.from(f,Nl),h()):e.slice()},u.range=function(f){return arguments.length?(t=Array.from(f),h()):t.slice()},u.rangeRound=function(f){return t=Array.from(f),n=Ia,h()},u.clamp=function(f){return arguments.length?(c=f?!0:be,h()):c!==be},u.interpolate=function(f){return arguments.length?(n=f,h()):n},u.unknown=function(f){return arguments.length?(l=f,u):l},function(f,x){return r=f,a=x,h()}}function Ml(){return Al()(be,be)}function El(e,t,n,r){var a=Rn(e,t,n),l;switch(r=it(r??",f"),r.type){case"s":{var c=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(l=bl(a,c))&&(r.precision=l),ln(r,c)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(l=vl(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=l-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(l=yl(a))&&(r.precision=l-(r.type==="%")*2);break}}return an(r)}function $l(e){var t=e.domain;return e.ticks=function(n){var r=t();return Tn(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var a=t();return El(a[0],a[a.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,l=r.length-1,c=r[a],o=r[l],d,i,h=10;for(o<c&&(i=c,c=o,o=i,i=a,a=l,l=i);h-- >0;){if(i=vt(c,o,n),i===d)return r[a]=c,r[l]=o,t(r);if(i>0)c=Math.floor(c/i)*i,o=Math.ceil(o/i)*i;else if(i<0)c=Math.ceil(c*i)/i,o=Math.floor(o*i)/i;else break;d=i}return e},e}function ft(){var e=Ml();return e.copy=function(){return Sl(e,ft())},Ot.apply(e,arguments),$l(e)}function W(e){return function(){return e}}const js=Math.abs,q=Math.atan2,de=Math.cos,Tl=Math.max,yt=Math.min,re=Math.sin,ve=Math.sqrt,X=1e-12,Pe=Math.PI,lt=Pe/2,Ze=2*Pe;function Rl(e){return e>1?0:e<-1?Pe:Math.acos(e)}function Ns(e){return e>=1?lt:e<=-1?-lt:Math.asin(e)}function Bt(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new ol(t)}function Dl(e){return e.innerRadius}function Gl(e){return e.outerRadius}function Fl(e){return e.startAngle}function Pl(e){return e.endAngle}function zl(e){return e&&e.padAngle}function Cl(e,t,n,r,a,l,c,o){var d=n-e,i=r-t,h=c-a,u=o-l,f=u*d-h*i;if(!(f*f<X))return f=(h*(t-l)-u*(e-a))/f,[e+f*d,t+f*i]}function Ve(e,t,n,r,a,l,c){var o=e-n,d=t-r,i=(c?l:-l)/ve(o*o+d*d),h=i*d,u=-i*o,f=e+h,x=t+u,m=n+h,g=r+u,p=(f+m)/2,M=(x+g)/2,j=m-f,v=g-x,N=j*j+v*v,_=a-l,w=f*g-m*x,F=(v<0?-1:1)*ve(Tl(0,_*_*N-w*w)),C=(w*v-j*F)/N,$=(-w*j-v*F)/N,R=(w*v+j*F)/N,E=(-w*j+v*F)/N,P=C-p,b=$-M,T=R-p,I=E-M;return P*P+b*b>T*T+I*I&&(C=R,$=E),{cx:C,cy:$,x01:-h,y01:-u,x11:C*(a/_-1),y11:$*(a/_-1)}}function ws(){var e=Dl,t=Gl,n=W(0),r=null,a=Fl,l=Pl,c=zl,o=null,d=Bt(i);function i(){var h,u,f=+e.apply(this,arguments),x=+t.apply(this,arguments),m=a.apply(this,arguments)-lt,g=l.apply(this,arguments)-lt,p=js(g-m),M=g>m;if(o||(o=h=d()),x<f&&(u=x,x=f,f=u),!(x>X))o.moveTo(0,0);else if(p>Ze-X)o.moveTo(x*de(m),x*re(m)),o.arc(0,0,x,m,g,!M),f>X&&(o.moveTo(f*de(g),f*re(g)),o.arc(0,0,f,g,m,M));else{var j=m,v=g,N=m,_=g,w=p,F=p,C=c.apply(this,arguments)/2,$=C>X&&(r?+r.apply(this,arguments):ve(f*f+x*x)),R=yt(js(x-f)/2,+n.apply(this,arguments)),E=R,P=R,b,T;if($>X){var I=Ns($/f*re(C)),L=Ns($/x*re(C));(w-=I*2)>X?(I*=M?1:-1,N+=I,_-=I):(w=0,N=_=(m+g)/2),(F-=L*2)>X?(L*=M?1:-1,j+=L,v-=L):(F=0,j=v=(m+g)/2)}var U=x*de(j),J=x*re(j),B=f*de(_),ge=f*re(_);if(R>X){var pe=x*de(v),ye=x*re(v),Ae=f*de(N),y=f*re(N),S;if(p<Pe)if(S=Cl(U,J,Ae,y,pe,ye,B,ge)){var k=U-S[0],A=J-S[1],G=pe-S[0],D=ye-S[1],K=1/re(Rl((k*G+A*D)/(ve(k*k+A*A)*ve(G*G+D*D)))/2),z=ve(S[0]*S[0]+S[1]*S[1]);E=yt(R,(f-z)/(K-1)),P=yt(R,(x-z)/(K+1))}else E=P=0}F>X?P>X?(b=Ve(Ae,y,U,J,x,P,M),T=Ve(pe,ye,B,ge,x,P,M),o.moveTo(b.cx+b.x01,b.cy+b.y01),P<R?o.arc(b.cx,b.cy,P,q(b.y01,b.x01),q(T.y01,T.x01),!M):(o.arc(b.cx,b.cy,P,q(b.y01,b.x01),q(b.y11,b.x11),!M),o.arc(0,0,x,q(b.cy+b.y11,b.cx+b.x11),q(T.cy+T.y11,T.cx+T.x11),!M),o.arc(T.cx,T.cy,P,q(T.y11,T.x11),q(T.y01,T.x01),!M))):(o.moveTo(U,J),o.arc(0,0,x,j,v,!M)):o.moveTo(U,J),!(f>X)||!(w>X)?o.lineTo(B,ge):E>X?(b=Ve(B,ge,pe,ye,f,-E,M),T=Ve(U,J,Ae,y,f,-E,M),o.lineTo(b.cx+b.x01,b.cy+b.y01),E<R?o.arc(b.cx,b.cy,E,q(b.y01,b.x01),q(T.y01,T.x01),!M):(o.arc(b.cx,b.cy,E,q(b.y01,b.x01),q(b.y11,b.x11),!M),o.arc(0,0,f,q(b.cy+b.y11,b.cx+b.x11),q(T.cy+T.y11,T.cx+T.x11),M),o.arc(T.cx,T.cy,E,q(T.y11,T.x11),q(T.y01,T.x01),!M))):o.arc(0,0,f,_,N,M)}if(o.closePath(),h)return o=null,h+""||null}return i.centroid=function(){var h=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,u=(+a.apply(this,arguments)+ +l.apply(this,arguments))/2-Pe/2;return[de(u)*h,re(u)*h]},i.innerRadius=function(h){return arguments.length?(e=typeof h=="function"?h:W(+h),i):e},i.outerRadius=function(h){return arguments.length?(t=typeof h=="function"?h:W(+h),i):t},i.cornerRadius=function(h){return arguments.length?(n=typeof h=="function"?h:W(+h),i):n},i.padRadius=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:W(+h),i):r},i.startAngle=function(h){return arguments.length?(a=typeof h=="function"?h:W(+h),i):a},i.endAngle=function(h){return arguments.length?(l=typeof h=="function"?h:W(+h),i):l},i.padAngle=function(h){return arguments.length?(c=typeof h=="function"?h:W(+h),i):c},i.context=function(h){return arguments.length?(o=h??null,i):o},i}function qt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dn(e){this._context=e}dn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function hn(e){return new dn(e)}function un(e){return e[0]}function fn(e){return e[1]}function ze(e,t){var n=W(!0),r=null,a=hn,l=null,c=Bt(o);e=typeof e=="function"?e:e===void 0?un:W(e),t=typeof t=="function"?t:t===void 0?fn:W(t);function o(d){var i,h=(d=qt(d)).length,u,f=!1,x;for(r==null&&(l=a(x=c())),i=0;i<=h;++i)!(i<h&&n(u=d[i],i,d))===f&&((f=!f)?l.lineStart():l.lineEnd()),f&&l.point(+e(u,i,d),+t(u,i,d));if(x)return l=null,x+""||null}return o.x=function(d){return arguments.length?(e=typeof d=="function"?d:W(+d),o):e},o.y=function(d){return arguments.length?(t=typeof d=="function"?d:W(+d),o):t},o.defined=function(d){return arguments.length?(n=typeof d=="function"?d:W(!!d),o):n},o.curve=function(d){return arguments.length?(a=d,r!=null&&(l=a(r)),o):a},o.context=function(d){return arguments.length?(d==null?r=l=null:l=a(r=d),o):r},o}function ks(e,t,n){var r=null,a=W(!0),l=null,c=hn,o=null,d=Bt(i);e=typeof e=="function"?e:e===void 0?un:W(+e),t=typeof t=="function"?t:W(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?fn:W(+n);function i(u){var f,x,m,g=(u=qt(u)).length,p,M=!1,j,v=new Array(g),N=new Array(g);for(l==null&&(o=c(j=d())),f=0;f<=g;++f){if(!(f<g&&a(p=u[f],f,u))===M)if(M=!M)x=f,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),m=f-1;m>=x;--m)o.point(v[m],N[m]);o.lineEnd(),o.areaEnd()}M&&(v[f]=+e(p,f,u),N[f]=+t(p,f,u),o.point(r?+r(p,f,u):v[f],n?+n(p,f,u):N[f]))}if(j)return o=null,j+""||null}function h(){return ze().defined(a).curve(c).context(l)}return i.x=function(u){return arguments.length?(e=typeof u=="function"?u:W(+u),r=null,i):e},i.x0=function(u){return arguments.length?(e=typeof u=="function"?u:W(+u),i):e},i.x1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:W(+u),i):r},i.y=function(u){return arguments.length?(t=typeof u=="function"?u:W(+u),n=null,i):t},i.y0=function(u){return arguments.length?(t=typeof u=="function"?u:W(+u),i):t},i.y1=function(u){return arguments.length?(n=u==null?null:typeof u=="function"?u:W(+u),i):n},i.lineX0=i.lineY0=function(){return h().x(e).y(t)},i.lineY1=function(){return h().x(e).y(n)},i.lineX1=function(){return h().x(r).y(t)},i.defined=function(u){return arguments.length?(a=typeof u=="function"?u:W(!!u),i):a},i.curve=function(u){return arguments.length?(c=u,l!=null&&(o=c(l)),i):c},i.context=function(u){return arguments.length?(u==null?l=o=null:o=c(l=u),i):l},i}function Wl(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Kl(e){return e}function Ll(){var e=Kl,t=Wl,n=null,r=W(0),a=W(Ze),l=W(0);function c(o){var d,i=(o=qt(o)).length,h,u,f=0,x=new Array(i),m=new Array(i),g=+r.apply(this,arguments),p=Math.min(Ze,Math.max(-Ze,a.apply(this,arguments)-g)),M,j=Math.min(Math.abs(p)/i,l.apply(this,arguments)),v=j*(p<0?-1:1),N;for(d=0;d<i;++d)(N=m[x[d]=d]=+e(o[d],d,o))>0&&(f+=N);for(t!=null?x.sort(function(_,w){return t(m[_],m[w])}):n!=null&&x.sort(function(_,w){return n(o[_],o[w])}),d=0,u=f?(p-i*v)/f:0;d<i;++d,g=M)h=x[d],N=m[h],M=g+(N>0?N*u:0)+v,m[h]={data:o[h],index:d,value:N,startAngle:g,endAngle:M,padAngle:j};return m}return c.value=function(o){return arguments.length?(e=typeof o=="function"?o:W(+o),c):e},c.sortValues=function(o){return arguments.length?(t=o,n=null,c):t},c.sort=function(o){return arguments.length?(n=o,t=null,c):n},c.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:W(+o),c):r},c.endAngle=function(o){return arguments.length?(a=typeof o=="function"?o:W(+o),c):a},c.padAngle=function(o){return arguments.length?(l=typeof o=="function"?o:W(+o),c):l},c}function _s(e){return e<0?-1:1}function Ss(e,t,n){var r=e._x1-e._x0,a=t-e._x1,l=(e._y1-e._y0)/(r||a<0&&-0),c=(n-e._y1)/(a||r<0&&-0),o=(l*a+c*r)/(r+a);return(_s(l)+_s(c))*Math.min(Math.abs(l),Math.abs(c),.5*Math.abs(o))||0}function As(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function bt(e,t,n){var r=e._x0,a=e._y0,l=e._x1,c=e._y1,o=(l-r)/3;e._context.bezierCurveTo(r+o,a+o*t,l-o,c-o*n,l,c)}function ct(e){this._context=e}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:bt(this,this._t0,As(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,bt(this,As(this,n=Ss(this,e,t)),n);break;default:bt(this,this._t0,n=Ss(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};Object.create(ct.prototype).point=function(e,t){ct.prototype.point.call(this,t,e)};function je(e){return new ct(e)}function Re(e,t,n){this.k=e,this.x=t,this.y=n}Re.prototype={constructor:Re,scale:function(e){return e===1?this:new Re(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Re(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Re.prototype;function Hl({data:e,height:t=300,title:n="Performance Trend"}){const r=H.useRef(),a=H.useRef(),l=H.useRef();return H.useEffect(()=>{if(!e||e.length===0)return;V(r.current).selectAll("*").remove();const c=l.current,o={top:20,right:80,bottom:40,left:60},d=c.offsetWidth-o.left-o.right,i=t-o.top-o.bottom,h=V(r.current).attr("width",d+o.left+o.right).attr("height",t).append("g").attr("transform",`translate(${o.left},${o.top})`),u=on().domain(e.map(w=>w.label)).range([0,d]).padding(.5),f=ft().domain([0,Dt(e,w=>Math.max(w.aek||0,w.real||0))*1.1]).range([i,0]).nice(),x=ze().x(w=>u(w.label)).y(w=>f(w.aek||0)).curve(je),m=ze().x(w=>u(w.label)).y(w=>f(w.real||0)).curve(je);h.append("g").attr("class","grid").attr("opacity",.1).call(we(f).tickSize(-d).tickFormat("")).select(".domain").remove(),h.append("g").attr("transform",`translate(0,${i})`).call(Gt(u)).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-45)").style("font-size","11px").style("fill","#9ca3af"),h.append("g").call(we(f).ticks(5)).selectAll("text").style("font-size","11px").style("fill","#9ca3af");const g=V(a.current).style("position","absolute").style("visibility","hidden").style("background-color","rgba(0, 0, 0, 0.8)").style("color","white").style("padding","8px 12px").style("border-radius","6px").style("font-size","12px").style("pointer-events","none").style("z-index","1000"),p=h.append("path").datum(e).attr("fill","none").attr("stroke","#3b82f6").attr("stroke-width",3).attr("d",x),M=p.node().getTotalLength();p.attr("stroke-dasharray",M).attr("stroke-dashoffset",M).transition().duration(1500).ease(fs).attr("stroke-dashoffset",0);const j=h.append("path").datum(e).attr("fill","none").attr("stroke","#ef4444").attr("stroke-width",3).attr("d",m),v=j.node().getTotalLength();j.attr("stroke-dasharray",v).attr("stroke-dashoffset",v).transition().duration(1500).ease(fs).attr("stroke-dashoffset",0);const N=(w,F,C)=>{h.selectAll(`.dot-${C}`).data(e).enter().append("circle").attr("class",`dot-${C}`).attr("cx",$=>u($.label)).attr("cy",$=>f($[C]||0)).attr("r",0).attr("fill",F).attr("stroke","white").attr("stroke-width",2).style("cursor","pointer").on("mouseover",function($,R){V(this).transition().duration(200).attr("r",8),g.style("visibility","visible").html(`
              <div style="font-weight: bold; margin-bottom: 4px;">${R.label}</div>
              <div>AEK: ${R.aek||0}</div>
              <div>Real: ${R.real||0}</div>
            `)}).on("mousemove",function($){g.style("top",$.pageY-60+"px").style("left",$.pageX+10+"px")}).on("mouseout",function(){V(this).transition().duration(200).attr("r",5),g.style("visibility","hidden")}).transition().delay(($,R)=>R*100+1500).duration(300).attr("r",5)};N(e,"#3b82f6","aek"),N(e,"#ef4444","real");const _=h.append("g").attr("transform",`translate(${d-100}, 0)`);_.append("line").attr("x1",0).attr("x2",20).attr("y1",0).attr("y2",0).attr("stroke","#3b82f6").attr("stroke-width",3),_.append("text").attr("x",25).attr("y",4).text("AEK").style("font-size","12px").style("fill","#9ca3af"),_.append("line").attr("x1",0).attr("x2",20).attr("y1",20).attr("y2",20).attr("stroke","#ef4444").attr("stroke-width",3),_.append("text").attr("x",25).attr("y",24).text("Real").style("font-size","12px").style("fill","#9ca3af")},[e,t]),s.jsxs("div",{ref:l,className:"w-full",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-text-primary",children:n}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[s.jsx("svg",{ref:r}),s.jsx("div",{ref:a})]})]})}function Ol({data:e,height:t=400,title:n="Top Spieler"}){const r=H.useRef(),a=H.useRef(),l=H.useRef();return H.useEffect(()=>{if(!e||e.length===0)return;V(r.current).selectAll("*").remove();const c=l.current,o={top:20,right:30,bottom:80,left:60},d=c.offsetWidth-o.left-o.right,i=t-o.top-o.bottom,h=V(r.current).attr("width",d+o.left+o.right).attr("height",t).append("g").attr("transform",`translate(${o.left},${o.top})`),u=Vt().domain(e.map(m=>m.name)).range([0,d]).padding(.3),f=ft().domain([0,Dt(e,m=>m.value)*1.1]).range([i,0]).nice();h.append("g").attr("class","grid").attr("opacity",.1).call(we(f).tickSize(-d).tickFormat("")).select(".domain").remove(),h.append("g").attr("transform",`translate(0,${i})`).call(Gt(u)).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-45)").style("font-size","11px").style("fill","#9ca3af"),h.append("g").call(we(f).ticks(5)).selectAll("text").style("font-size","11px").style("fill","#9ca3af");const x=V(a.current).style("position","absolute").style("visibility","hidden").style("background-color","rgba(0, 0, 0, 0.8)").style("color","white").style("padding","8px 12px").style("border-radius","6px").style("font-size","12px").style("pointer-events","none").style("z-index","1000");h.selectAll(".bar").data(e).enter().append("rect").attr("class","bar").attr("x",m=>u(m.name)).attr("width",u.bandwidth()).attr("y",i).attr("height",0).attr("fill",m=>m.team==="AEK"?"#3b82f6":"#ef4444").attr("rx",4).style("cursor","pointer").on("mouseover",function(m,g){V(this).transition().duration(200).attr("opacity",.8),x.style("visibility","visible").html(`
            <div style="font-weight: bold; margin-bottom: 4px;">${g.name}</div>
            <div>Team: ${g.team}</div>
            <div>Tore: ${g.value}</div>
            ${g.goalsPerGame?`<div>Ø/Spiel: ${g.goalsPerGame}</div>`:""}
          `)}).on("mousemove",function(m){x.style("top",m.pageY-80+"px").style("left",m.pageX+10+"px")}).on("mouseout",function(){V(this).transition().duration(200).attr("opacity",1),x.style("visibility","hidden")}).transition().duration(1e3).delay((m,g)=>g*100).ease(sn).attr("y",m=>f(m.value)).attr("height",m=>i-f(m.value)),h.selectAll(".label").data(e).enter().append("text").attr("class","label").attr("x",m=>u(m.name)+u.bandwidth()/2).attr("y",i).attr("text-anchor","middle").style("font-size","12px").style("font-weight","bold").style("fill","#374151").style("opacity",0).text(m=>m.value).transition().duration(1e3).delay((m,g)=>g*100+800).attr("y",m=>f(m.value)-5).style("opacity",1)},[e,t]),s.jsxs("div",{ref:l,className:"w-full",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-text-primary",children:n}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[s.jsx("svg",{ref:r}),s.jsx("div",{ref:a})]})]})}function Il({data:e,height:t=350,title:n="Siegesverteilung"}){const r=H.useRef(),a=H.useRef(),l=H.useRef();return H.useEffect(()=>{if(!e||e.length===0)return;V(r.current).selectAll("*").remove();const c=l.current,o=Math.min(c.offsetWidth,t),d=Math.min(o,t)/2-40,i=V(r.current).attr("width",o).attr("height",t).append("g").attr("transform",`translate(${o/2},${t/2})`),h=It().domain(e.map(j=>j.label)).range(["#3b82f6","#ef4444","#10b981"]),u=Ll().value(j=>j.value).sort(null),f=ws().innerRadius(d*.6).outerRadius(d),x=ws().innerRadius(d*.6).outerRadius(d+10),m=V(a.current).style("position","absolute").style("visibility","hidden").style("background-color","rgba(0, 0, 0, 0.8)").style("color","white").style("padding","8px 12px").style("border-radius","6px").style("font-size","12px").style("pointer-events","none").style("z-index","1000"),g=Gn(e,j=>j.value),p=i.selectAll(".arc").data(u(e)).enter().append("g").attr("class","arc");p.append("path").attr("d",f).attr("fill",j=>h(j.data.label)).attr("stroke","white").attr("stroke-width",2).style("cursor","pointer").style("opacity",0).on("mouseover",function(j,v){V(this).transition().duration(200).attr("d",x).style("opacity",.8);const N=(v.data.value/g*100).toFixed(1);m.style("visibility","visible").html(`
            <div style="font-weight: bold; margin-bottom: 4px;">${v.data.label}</div>
            <div>Anzahl: ${v.data.value}</div>
            <div>Anteil: ${N}%</div>
          `)}).on("mousemove",function(j){m.style("top",j.pageY-60+"px").style("left",j.pageX+10+"px")}).on("mouseout",function(){V(this).transition().duration(200).attr("d",f).style("opacity",1),m.style("visibility","hidden")}).transition().duration(1e3).delay((j,v)=>v*200).ease(sn).style("opacity",1).attrTween("d",function(j){const v=dt({startAngle:0,endAngle:0},j);return function(N){return f(v(N))}}),p.append("text").attr("transform",j=>{const[v,N]=f.centroid(j);return`translate(${v}, ${N})`}).attr("text-anchor","middle").style("font-size","14px").style("font-weight","bold").style("fill","white").style("opacity",0).text(j=>{const v=j.data.value/g*100;return v>=5?`${v.toFixed(0)}%`:""}).transition().duration(1e3).delay(1200).style("opacity",1),i.append("text").attr("text-anchor","middle").attr("dy","-0.2em").style("font-size","28px").style("font-weight","bold").style("fill","#374151").style("opacity",0).text(g).transition().duration(800).delay(1e3).style("opacity",1),i.append("text").attr("text-anchor","middle").attr("dy","1.2em").style("font-size","14px").style("fill","#9ca3af").style("opacity",0).text("Gesamt").transition().duration(800).delay(1200).style("opacity",1);const M=i.append("g").attr("transform",`translate(${d+20}, ${-d+20})`);e.forEach((j,v)=>{const N=M.append("g").attr("transform",`translate(0, ${v*25})`);N.append("rect").attr("width",18).attr("height",18).attr("rx",3).attr("fill",h(j.label)).style("opacity",0).transition().duration(500).delay(1400+v*100).style("opacity",1),N.append("text").attr("x",25).attr("y",13).text(`${j.label}: ${j.value}`).style("font-size","12px").style("fill","#374151").style("opacity",0).transition().duration(500).delay(1400+v*100).style("opacity",1)})},[e,t]),s.jsxs("div",{ref:l,className:"w-full",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-text-primary text-center",children:n}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm flex justify-center",children:[s.jsx("svg",{ref:r}),s.jsx("div",{ref:a})]})]})}function Vl({data:e,height:t=300,title:n="Tor-Trends"}){const r=H.useRef(),a=H.useRef(),l=H.useRef();return H.useEffect(()=>{if(!e||e.length===0)return;V(r.current).selectAll("*").remove();const c=l.current,o={top:20,right:80,bottom:40,left:60},d=c.offsetWidth-o.left-o.right,i=t-o.top-o.bottom,h=V(r.current).attr("width",d+o.left+o.right).attr("height",t).append("g").attr("transform",`translate(${o.left},${o.top})`),u=h.append("defs"),f=u.append("linearGradient").attr("id","gradient-aek").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");f.append("stop").attr("offset","0%").attr("stop-color","#3b82f6").attr("stop-opacity",.6),f.append("stop").attr("offset","100%").attr("stop-color","#3b82f6").attr("stop-opacity",.1);const x=u.append("linearGradient").attr("id","gradient-real").attr("x1","0%").attr("y1","0%").attr("x2","0%").attr("y2","100%");x.append("stop").attr("offset","0%").attr("stop-color","#ef4444").attr("stop-opacity",.6),x.append("stop").attr("offset","100%").attr("stop-color","#ef4444").attr("stop-opacity",.1);const m=on().domain(e.map(w=>w.label)).range([0,d]).padding(.5),g=ft().domain([0,Dt(e,w=>Math.max(w.aek||0,w.real||0))*1.1]).range([i,0]).nice(),p=ks().x(w=>m(w.label)).y0(i).y1(w=>g(w.aek||0)).curve(je),M=ks().x(w=>m(w.label)).y0(i).y1(w=>g(w.real||0)).curve(je),j=ze().x(w=>m(w.label)).y(w=>g(w.aek||0)).curve(je),v=ze().x(w=>m(w.label)).y(w=>g(w.real||0)).curve(je);h.append("g").attr("class","grid").attr("opacity",.1).call(we(g).tickSize(-d).tickFormat("")).select(".domain").remove(),h.append("g").attr("transform",`translate(0,${i})`).call(Gt(m)).selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").attr("transform","rotate(-45)").style("font-size","11px").style("fill","#9ca3af"),h.append("g").call(we(g).ticks(5)).selectAll("text").style("font-size","11px").style("fill","#9ca3af");const N=V(a.current).style("position","absolute").style("visibility","hidden").style("background-color","rgba(0, 0, 0, 0.8)").style("color","white").style("padding","8px 12px").style("border-radius","6px").style("font-size","12px").style("pointer-events","none").style("z-index","1000");h.append("path").datum(e).attr("fill","url(#gradient-aek)").attr("d",p).style("opacity",0).transition().duration(1e3).style("opacity",1),h.append("path").datum(e).attr("fill","none").attr("stroke","#3b82f6").attr("stroke-width",2).attr("d",j).style("opacity",0).transition().duration(1e3).style("opacity",1),h.append("path").datum(e).attr("fill","url(#gradient-real)").attr("d",M).style("opacity",0).transition().duration(1e3).delay(300).style("opacity",.7),h.append("path").datum(e).attr("fill","none").attr("stroke","#ef4444").attr("stroke-width",2).attr("d",v).style("opacity",0).transition().duration(1e3).delay(300).style("opacity",1),h.selectAll(".overlay-point").data(e).enter().append("circle").attr("class","overlay-point").attr("cx",w=>m(w.label)).attr("cy",w=>g(Math.max(w.aek||0,w.real||0))).attr("r",20).attr("fill","transparent").style("cursor","pointer").on("mouseover",function(w,F){h.append("circle").attr("class","highlight-point").attr("cx",m(F.label)).attr("cy",g(F.aek||0)).attr("r",5).attr("fill","#3b82f6").attr("stroke","white").attr("stroke-width",2),h.append("circle").attr("class","highlight-point").attr("cx",m(F.label)).attr("cy",g(F.real||0)).attr("r",5).attr("fill","#ef4444").attr("stroke","white").attr("stroke-width",2),N.style("visibility","visible").html(`
            <div style="font-weight: bold; margin-bottom: 4px;">${F.label}</div>
            <div style="color: #60a5fa;">AEK Tore: ${F.aek||0}</div>
            <div style="color: #f87171;">Real Tore: ${F.real||0}</div>
            <div style="margin-top: 4px; padding-top: 4px; border-top: 1px solid #444;">
              Gesamt: ${(F.aek||0)+(F.real||0)}
            </div>
          `)}).on("mousemove",function(w){N.style("top",w.pageY-80+"px").style("left",w.pageX+10+"px")}).on("mouseout",function(){h.selectAll(".highlight-point").remove(),N.style("visibility","hidden")});const _=h.append("g").attr("transform",`translate(${d-100}, 0)`);_.append("rect").attr("width",20).attr("height",12).attr("fill","url(#gradient-aek)"),_.append("text").attr("x",25).attr("y",10).text("AEK").style("font-size","12px").style("fill","#9ca3af"),_.append("rect").attr("y",20).attr("width",20).attr("height",12).attr("fill","url(#gradient-real)"),_.append("text").attr("x",25).attr("y",30).text("Real").style("font-size","12px").style("fill","#9ca3af")},[e,t]),s.jsxs("div",{ref:l,className:"w-full",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-text-primary",children:n}),s.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[s.jsx("svg",{ref:r}),s.jsx("div",{ref:a})]})]})}class Bl{constructor(t,n,r,a){this.matches=t||[],this.players=n||[],this.bans=r||[],this.spielerDesSpiels=a||[],this.aekPlayers=(n||[]).filter(l=>l.team==="AEK"),this.realPlayers=(n||[]).filter(l=>l.team==="Real")}calculateTeamRecords(){const t={wins:0,losses:0},n={wins:0,losses:0};return this.matches.forEach(r=>{const a=r.goalsa||0,l=r.goalsb||0;a>l?(t.wins++,n.losses++):l>a&&(n.wins++,t.losses++)}),{aek:t,real:n}}calculateRecentForm(t=5){const n=this.matches.slice(-t),r=[],a=[];return n.forEach(l=>{const c=l.goalsa||0,o=l.goalsb||0;c>o?(r.push("W"),a.push("L")):o>c&&(r.push("L"),a.push("W"))}),{aek:r,real:a}}calculatePlayerStats(){const t=this.matches.length;return this.players.map(n=>{const r=this.countPlayerMatches(n.name,n.team),a=this.bans.filter(h=>h.player_id===n.id),l=this.spielerDesSpiels.find(h=>h.name===n.name&&h.team===n.team),c=l&&l.count||0,o=this.countPlayerGoalsFromMatches(n.name,n.team),d=n.goals||0,i=Math.max(d,o);return{...n,goals:i,matchesPlayed:r,totalMatches:t,sdsCount:c,goalsPerGame:r>0?(i/r).toFixed(2):"0.00",totalBans:a.length,disciplinaryScore:this.calculateDisciplinaryScore(a),goalsPerMatchWhenPlaying:r>0?i/r:0,sdsPercentage:t>0?(c/t*100).toFixed(1):"0.0"}}).sort((n,r)=>(r.goals||0)-(n.goals||0))}countPlayerGoalsFromMatches(t,n){let r=0;return this.matches.forEach(a=>{if(n==="AEK"&&a.goalslista)try{(Array.isArray(a.goalslista)?a.goalslista:typeof a.goalslista=="string"?JSON.parse(a.goalslista):[]).forEach(c=>{const o=typeof c=="string"?c:c.player,d=typeof c=="string"?1:c.count||1;o===t&&(r+=d)})}catch(l){console.warn("Error parsing AEK goals list:",l)}if(n==="Real"&&a.goalslistb)try{(Array.isArray(a.goalslistb)?a.goalslistb:typeof a.goalslistb=="string"?JSON.parse(a.goalslistb):[]).forEach(c=>{const o=typeof c=="string"?c:c.player,d=typeof c=="string"?1:c.count||1;o===t&&(r+=d)})}catch(l){console.warn("Error parsing Real goals list:",l)}}),r}countPlayerMatches(t,n){if(!t||!n)return this.matches.length;let r=0,a=0;this.matches.forEach(c=>{if(n==="AEK"&&c.goalslista)try{(Array.isArray(c.goalslista)?c.goalslista:typeof c.goalslista=="string"?JSON.parse(c.goalslista):[]).some(i=>(typeof i=="string"?i:i.player)===t)&&r++}catch{}if(n==="Real"&&c.goalslistb)try{(Array.isArray(c.goalslistb)?c.goalslistb:typeof c.goalslistb=="string"?JSON.parse(c.goalslistb):[]).some(i=>(typeof i=="string"?i:i.player)===t)&&r++}catch{}c.manofthematch===t&&a++});const l=this.matches.filter(c=>n==="AEK"&&(c.teama==="AEK"||c.teamb==="AEK")||n==="Real"&&(c.teama==="Real"||c.teamb==="Real")).length;return Math.max(r,a,l)}calculateDisciplinaryScore(t){let n=0;return t.forEach(r=>{switch(r.type){case"Gelb-Rote Karte":n+=3;break;case"Rote Karte":n+=5;break;case"Verletzung":n+=1;break;default:n+=1}}),n}calculateMatchAnalytics(){if(this.matches.length<3)return{prediction:"Ungenügend Daten",confidence:0,reasoning:"Mindestens 3 Spiele benötigt für Vorhersage"};const t=this.matches.slice(-5);let n=0,r=0;t.forEach((g,p)=>{const M=(p+1)/t.length,j=g.goalsa||0,v=g.goalsb||0;j>v?n+=3*M:v>j?r+=3*M:(n+=1*M,r+=1*M),n+=(j-v)*.1*M,r+=(v-j)*.1*M});const a=this.matches.reduce((g,p)=>g+(p.goalsa||0),0)/this.matches.length,l=this.matches.reduce((g,p)=>g+(p.goalsb||0),0)/this.matches.length,c=this.bans.filter(g=>g.status==="active"||!g.status),o=c.filter(g=>g.team==="AEK").length,d=c.filter(g=>g.team==="Real").length;n-=o*.5,r-=d*.5;const i=n+r,h=Math.max(.1,Math.min(.9,n/i)),u=Math.max(.1,Math.min(.9,r/i));let f,x;h>u?(f="AEK Sieg",x=Math.round(h*100)):(f="Real Sieg",x=Math.round(u*100));const m=`${Math.round(a)}:${Math.round(l)}`;return{prediction:f,confidence:x,predictedScore:m,aekWinProbability:Math.round(h*100),realWinProbability:Math.round(u*100),reasoning:this.generateAnalyticsReasoning(n,r,o,d)}}generateAnalyticsReasoning(t,n,r,a){const l=[];return t>n?l.push("AEK zeigt bessere Form in den letzten Spielen"):n>t&&l.push("Real zeigt bessere Form in den letzten Spielen"),r>a?l.push(`AEK hat mehr gesperrte Spieler (${r} vs ${a})`):a>r&&l.push(`Real hat mehr gesperrte Spieler (${a} vs ${r})`),l.join(". ")||"Ausgeglichene Teams"}getMatchStatsAnalytics(){const t=this.matches.length;if(t===0)return null;const n=this.matches.filter(i=>(i.goalsa||0)>(i.goalsb||0)).length,r=this.matches.filter(i=>(i.goalsb||0)>(i.goalsa||0)).length,a=this.matches.filter(i=>(i.goalsa||0)===(i.goalsb||0)).length,c=(this.matches.reduce((i,h)=>i+(h.goalsa||0)+(h.goalsb||0),0)/t).toFixed(2),o=this.matches[this.matches.length-1],d=o?`${o.goalsa||0}:${o.goalsb||0} (${o.date})`:"Keine Spiele";return{totalMatches:t,aekWins:n,realWins:r,draws:a,avgGoalsPerMatch:c,lastMatchResult:d,aekWinPercentage:Math.round(n/t*100),realWinPercentage:Math.round(r/t*100),drawPercentage:Math.round(a/t*100)}}calculateAdvancedStats(){const t=this.matches.length,n=this.matches.reduce((m,g)=>m+(g.goalsa||0)+(g.goalsb||0),0),r=this.matches.reduce((m,g)=>m+(g.goalsa||0),0),a=this.matches.reduce((m,g)=>m+(g.goalsb||0),0),l=this.matches.filter(m=>(m.goalsa||0)+(m.goalsb||0)>=5).length,c=this.matches.map(m=>Math.abs((m.goalsa||0)-(m.goalsb||0))).filter(m=>m>0),o=c.length>0?Math.max(...c):0,d=[...this.matches].sort((m,g)=>new Date(g.date)-new Date(m.date)).slice(0,10);let i={type:"none",count:0,team:""};if(d.length>0){const m=d[0],g=m.goalsa||0,p=m.goalsb||0;g>p?(i.type="win",i.team="AEK"):p>g&&(i.type="win",i.team="Real");for(const M of d){const j=M.goalsa||0,v=M.goalsb||0;if(i.type==="win"&&i.team==="AEK"&&j>v)i.count++;else if(i.type==="win"&&i.team==="Real"&&v>j)i.count++;else break}}const h={bothTeamsScore:this.matches.filter(m=>(m.goalsa||0)>0&&(m.goalsb||0)>0).length,oneNilWins:this.matches.filter(m=>m.goalsa===1&&m.goalsb===0||m.goalsa===0&&m.goalsb===1).length,highScoringWins:this.matches.filter(m=>Math.max(m.goalsa||0,m.goalsb||0)>=4).length},u={aekHome:this.matches.filter(m=>m.teama==="AEK").length,aekAway:this.matches.filter(m=>m.teamb==="AEK").length,aekHomeWins:this.matches.filter(m=>m.teama==="AEK"&&(m.goalsa||0)>(m.goalsb||0)).length,aekAwayWins:this.matches.filter(m=>m.teamb==="AEK"&&(m.goalsb||0)>(m.goalsa||0)).length},f={};this.matches.forEach(m=>{m.goalscorers&&typeof m.goalscorers=="string"&&m.goalscorers.split(",").map(p=>p.trim()).filter(p=>p).forEach(p=>{f[p]=(f[p]||0)+1})});const x=Object.entries(f).reduce((m,[g,p])=>p>(m.goals||0)?{player:g,goals:p}:m,{player:"N/A",goals:0});return{avgGoalsPerMatch:t>0?(n/t).toFixed(2):"0.00",totalMatches:t,totalGoals:n,aekTotalGoals:r,realTotalGoals:a,highScoringGames:l,biggestWinMargin:o,currentStreak:i,cleanSheets:{aek:this.matches.filter(m=>m.goalsb===0).length,real:this.matches.filter(m=>m.goalsa===0).length},scoringPatterns:h,homeAwayStats:u,topScorer:x,goalEfficiency:{aekAvg:t>0?(r/t).toFixed(2):"0.00",realAvg:t>0?(a/t).toFixed(2):"0.00"},competitiveness:{closeGames:this.matches.filter(m=>Math.abs((m.goalsa||0)-(m.goalsb||0))<=1).length,blowouts:this.matches.filter(m=>Math.abs((m.goalsa||0)-(m.goalsb||0))>=3).length}}}calculatePerformanceTrends(){const t={};return this.matches.forEach(n=>{const r=new Date(n.date),a=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}`;t[a]||(t[a]={month:a,aekWins:0,realWins:0,totalGoals:0,matchCount:0});const l=n.goalsa||0,c=n.goalsb||0;t[a].totalGoals+=l+c,t[a].matchCount++,l>c?t[a].aekWins++:c>l&&t[a].realWins++}),t}calculateHeadToHead(){const t={totalMatches:this.matches.length,aekWins:0,realWins:0,aekGoals:0,realGoals:0,biggestAekWin:{diff:0,score:"",date:"",opponent:"Real Madrid"},biggestRealWin:{diff:0,score:"",date:"",opponent:"AEK Athen"}};return this.matches.forEach(n=>{const r=n.goalsa||0,a=n.goalsb||0,l=Math.abs(r-a);t.aekGoals+=r,t.realGoals+=a,r>a?(t.aekWins++,l>t.biggestAekWin.diff&&(t.biggestAekWin={diff:l,score:`${r}:${a}`,date:n.date||"",opponent:"Real Madrid"})):a>r&&(t.realWins++,l>t.biggestRealWin.diff&&(t.biggestRealWin={diff:l,score:`${a}:${r}`,date:n.date||"",opponent:"AEK Athen"}))}),t}}function Yl({onNavigate:e,showHints:t=!1}){const[n,r]=H.useState("dashboard"),[a,l]=H.useState("all"),{data:c,loading:o}=Y("matches","*"),{data:d,loading:i}=Y("players","*"),{data:h,loading:u}=Y("spieler_des_spiels","*"),{data:f,loading:x}=Y("bans","*"),m=o||i||u||x,p=(()=>{if(!c||a==="all")return c||[];const y=new Date;let S;switch(a){case"1week":S=new Date(y.getTime()-7*24*60*60*1e3);break;case"1month":S=new Date(y.getTime()-30*24*60*60*1e3);break;case"3months":S=new Date(y.getTime()-90*24*60*60*1e3);break;case"6months":S=new Date(y.getTime()-180*24*60*60*1e3);break;default:return c}return c.filter(k=>new Date(k.date)>=S)})(),M=new Bl(p,d,f,h),j=M.calculateTeamRecords(),v=M.calculateRecentForm(5),N=M.calculatePlayerStats(),_=M.calculateAdvancedStats(),w=M.calculateHeadToHead(),F=(p==null?void 0:p.length)||0,C=(d==null?void 0:d.filter(y=>y.team==="AEK"))||[],$=(d==null?void 0:d.filter(y=>y.team==="Real"))||[],R=j.aek.wins,E=j.real.wins,P=y=>y.map((S,k)=>s.jsx("span",{className:`inline-block w-6 h-6 text-xs font-bold rounded-full text-center leading-6 mx-0.5 ${S==="W"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:S},k)),b=y=>`${(y||0).toFixed(1)}M €`,T=[{id:"dashboard",label:"Dashboard",icon:"🎯"},{id:"overview",label:"Übersicht",icon:"📊"},{id:"advanced",label:"Erweitert",icon:"⚡"},{id:"visualizations",label:"Visualisierungen",icon:"📉"},{id:"matchdays",label:"Spieltage",icon:"📅"},{id:"players",label:"Spieler",icon:"👥"},{id:"teams",label:"Teams",icon:"🏆"},{id:"trends",label:"Trends",icon:"📈"}];if(m)return s.jsx(Rt,{message:"Lade Statistiken..."});const L=(()=>{if(!p||p.length===0)return{aek:{streak:0,startDate:null,endDate:null},real:{streak:0,startDate:null,endDate:null}};const y={aek:{longest:0,current:0,start:null,end:null,currentStart:null},real:{longest:0,current:0,start:null,end:null,currentStart:null}};return[...p].sort((k,A)=>new Date(k.date)-new Date(A.date)).forEach(k=>{const A=k.goalsa||0,G=k.goalsb||0,D=k.date;A>G?(y.aek.current++,y.aek.current===1&&(y.aek.currentStart=D),y.aek.current>y.aek.longest&&(y.aek.longest=y.aek.current,y.aek.start=y.aek.currentStart,y.aek.end=D),y.real.current=0,y.real.currentStart=null):G>A?(y.real.current++,y.real.current===1&&(y.real.currentStart=D),y.real.current>y.real.longest&&(y.real.longest=y.real.current,y.real.start=y.real.currentStart,y.real.end=D),y.aek.current=0,y.aek.currentStart=null):(y.aek.current=0,y.real.current=0,y.aek.currentStart=null,y.real.currentStart=null)}),{aek:{streak:y.aek.longest,startDate:y.aek.start,endDate:y.aek.end},real:{streak:y.real.longest,startDate:y.real.start,endDate:y.real.end}}})(),U=()=>{const y=N.length>0?N[0]:null,S=N.filter(A=>A.sdsCount>0).sort((A,G)=>G.sdsCount-A.sdsCount)[0],k=p==null?void 0:p.reduce((A,G)=>{const D=O=>{if(!O)return[];try{return typeof O=="string"?JSON.parse(O):O}catch{return[]}},K=D(G.goalslista),z=D(G.goalslistb);return[...K,...z].forEach(O=>{const le=typeof O=="object"?O.player:O,ne=typeof O=="object"?O.count:1;ne>A.count&&(A={player:le,count:ne,match:G})}),A},{player:null,count:0,match:null});return s.jsxs("div",{className:"space-y-6 mobile-card-list",children:[s.jsxs("div",{className:"mobile-grid mobile-grid-2 md:grid-cols-4",children:[s.jsxs("div",{className:"mobile-metric-card animate-mobile-slide-in",children:[s.jsx("div",{className:"mobile-metric-icon bg-gradient-success",children:s.jsx("span",{className:"text-white",children:"⚽"})}),s.jsx("div",{className:"mobile-metric-value",children:F}),s.jsx("div",{className:"mobile-metric-label",children:"Spiele gespielt"})]}),s.jsxs("div",{className:"mobile-metric-card animate-mobile-slide-in",children:[s.jsx("div",{className:"mobile-metric-icon bg-gradient-warning",children:s.jsx("span",{className:"text-white",children:"🎯"})}),s.jsx("div",{className:"mobile-metric-value",children:_.totalGoals}),s.jsx("div",{className:"mobile-metric-label",children:"Tore insgesamt"}),s.jsxs("div",{className:"mobile-metric-sublabel",children:["⌀ ",F>0?(_.totalGoals/F).toFixed(1):"0.0","/Spiel"]})]}),s.jsxs("div",{className:"mobile-metric-card animate-mobile-slide-in",children:[s.jsx("div",{className:"mobile-metric-icon bg-gradient-info",children:s.jsx("span",{className:"text-white",children:"🥇"})}),s.jsx("div",{className:"mobile-metric-value text-subhead font-semibold",children:y?y.name.split(" ").slice(-1)[0]:"–"}),s.jsxs("div",{className:"mobile-metric-label",children:["Topscorer (",y?y.goals:0," Tore)"]}),s.jsx("div",{className:"mobile-metric-sublabel",children:y&&y.matchesPlayed>0?`⌀ ${(y.goals/y.matchesPlayed).toFixed(2)}/Spiel`:"⌀ 0.00/Spiel"})]}),s.jsxs("div",{className:"mobile-metric-card animate-mobile-slide-in",children:[s.jsx("div",{className:"mobile-metric-icon bg-gradient-warning",children:s.jsx("span",{className:"text-white",children:"⭐"})}),s.jsx("div",{className:"mobile-metric-value text-subhead font-semibold",children:S?S.name.split(" ").slice(-1)[0]:"–"}),s.jsxs("div",{className:"mobile-metric-label",children:["Top SdS (",S?S.sdsCount:0,"x)"]}),s.jsx("div",{className:"mobile-metric-sublabel",children:S&&S.matchesPlayed>0?`${(S.sdsCount/S.matchesPlayed*100).toFixed(1)}% Quote`:"0.0% Quote"})]})]}),s.jsxs("div",{className:"mobile-grid mobile-grid-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"mobile-overview-card team-aek animate-mobile-slide-in hover:scale-105 transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"text-caption1 font-semibold text-system-blue uppercase tracking-wide",children:"🔵 AEK Athen"}),s.jsx("div",{className:"w-8 h-8 bg-system-blue/10 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-system-blue text-sm font-bold",children:"A"})})]}),s.jsx("div",{className:"text-title1 font-bold text-text-primary mb-2",children:w.biggestAekWin.diff>0?w.biggestAekWin.score:"–"}),s.jsx("div",{className:"text-callout text-text-secondary mb-3",children:"Größter Sieg"}),w.biggestAekWin.diff>0&&s.jsxs("div",{className:"text-footnote text-text-tertiary space-y-1",children:[s.jsxs("div",{children:["vs ",w.biggestAekWin.opponent]}),s.jsx("div",{className:"text-caption1",children:new Date(w.biggestAekWin.date).toLocaleDateString("de-DE")})]})]}),s.jsxs("div",{className:"mobile-overview-card team-real animate-mobile-slide-in hover:scale-105 transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"text-caption1 font-semibold text-system-red uppercase tracking-wide",children:"🔴 Real Madrid"}),s.jsx("div",{className:"w-8 h-8 bg-system-red/10 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-system-red text-sm font-bold",children:"R"})})]}),s.jsx("div",{className:"text-title1 font-bold text-text-primary mb-2",children:w.biggestRealWin.diff>0?w.biggestRealWin.score:"–"}),s.jsx("div",{className:"text-callout text-text-secondary mb-3",children:"Größter Sieg"}),w.biggestRealWin.diff>0&&s.jsxs("div",{className:"text-footnote text-text-tertiary space-y-1",children:[s.jsxs("div",{children:["vs ",w.biggestRealWin.opponent]}),s.jsx("div",{className:"text-caption1",children:new Date(w.biggestRealWin.date).toLocaleDateString("de-DE")})]})]}),s.jsxs("div",{className:"mobile-overview-card animate-mobile-slide-in hover:scale-105 transition-all duration-300",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("div",{className:"text-caption1 font-semibold text-system-purple uppercase tracking-wide",children:"⚽ Top Performance"}),s.jsx("div",{className:"w-8 h-8 bg-system-purple/10 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-system-purple text-sm font-bold",children:"🏆"})})]}),s.jsx("div",{className:"text-title1 font-bold text-text-primary mb-2",children:k!=null&&k.player?k.player.split(" ").slice(-1)[0]:"–"}),s.jsxs("div",{className:"text-callout text-text-secondary mb-3",children:["Meiste Tore (",(k==null?void 0:k.count)||0," in einem Spiel)"]}),(k==null?void 0:k.match)&&s.jsx("div",{className:"text-footnote text-text-tertiary",children:s.jsx("div",{className:"text-caption1",children:new Date(k.match.date).toLocaleDateString("de-DE")})})]})]}),s.jsxs("div",{className:"mobile-overview-card animate-mobile-slide-in",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[s.jsx("div",{className:"w-10 h-10 bg-gradient-info rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-lg",children:"📊"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-title3 font-bold text-text-primary",children:"Erweiterte Statistiken"}),s.jsx("p",{className:"text-caption1 text-text-secondary",children:"Detaillierte Analyse der Liga"})]})]}),s.jsxs("div",{className:"mobile-grid mobile-grid-auto gap-4",children:[s.jsxs("div",{className:"mobile-metric-card",children:[s.jsx("div",{className:"mobile-metric-icon bg-gradient-warning",children:s.jsx("span",{className:"text-white",children:"⏱️"})}),s.jsx("div",{className:"mobile-metric-value text-title2",children:(()=>{const A=(f==null?void 0:f.reduce((D,K)=>{const z=K.totalgames||0;return D+z},0))||0;return`${(f==null?void 0:f.length)>0?(A/f.length).toFixed(1):"0.0"}`})()}),s.jsx("div",{className:"mobile-metric-label",children:"⌀ Sperrenlänge"}),s.jsx("div",{className:"mobile-metric-sublabel",children:"Spiele"})]}),s.jsxs("div",{className:"mobile-metric-card",children:[s.jsx("div",{className:"mobile-metric-icon bg-gradient-success",children:s.jsx("span",{className:"text-white",children:"🎯"})}),s.jsx("div",{className:"mobile-metric-value text-title2",children:N.filter(A=>A.goals>0).length}),s.jsx("div",{className:"mobile-metric-label",children:"Aktive Torschützen"}),s.jsxs("div",{className:"mobile-metric-sublabel",children:["von ",N.length]})]}),s.jsxs("div",{className:"mobile-metric-card",children:[s.jsx("div",{className:"mobile-metric-icon bg-gradient-danger",children:s.jsx("span",{className:"text-white",children:"🟥"})}),s.jsx("div",{className:"mobile-metric-value text-title2",children:(f==null?void 0:f.length)||0}),s.jsx("div",{className:"mobile-metric-label",children:"Gesamt Sperren"}),s.jsx("div",{className:"mobile-metric-sublabel",children:"aller Zeiten"})]})]})]}),s.jsxs("div",{className:"modern-card",children:[s.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"🔥"}),"Längste Siegesserien"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border border-blue-200",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"AEK"})}),s.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[L.aek.streak," Siege"]})]}),L.aek.startDate&&L.aek.endDate?s.jsxs("div",{className:"space-y-1 text-sm text-blue-700",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-500",children:"📅"}),s.jsxs("span",{children:["Von: ",new Date(L.aek.startDate).toLocaleDateString("de-DE")]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-500",children:"🏁"}),s.jsxs("span",{children:["Bis: ",new Date(L.aek.endDate).toLocaleDateString("de-DE")]})]})]}):s.jsx("div",{className:"text-sm text-blue-600",children:L.aek.streak===0?"Keine Siegesserie im Zeitraum":"Kein Datumsbereich verfügbar"})]}),s.jsxs("div",{className:"p-4 bg-gradient-to-br from-red-50 to-pink-50 rounded-lg border border-red-200",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white font-bold text-sm",children:"RM"})}),s.jsxs("div",{className:"text-lg font-bold text-red-600",children:[L.real.streak," Siege"]})]}),L.real.startDate&&L.real.endDate?s.jsxs("div",{className:"space-y-1 text-sm text-red-700",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-red-500",children:"📅"}),s.jsxs("span",{children:["Von: ",new Date(L.real.startDate).toLocaleDateString("de-DE")]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-red-500",children:"🏁"}),s.jsxs("span",{children:["Bis: ",new Date(L.real.endDate).toLocaleDateString("de-DE")]})]})]}):s.jsx("div",{className:"text-sm text-red-600",children:L.real.streak===0?"Keine Siegesserie im Zeitraum":"Kein Datumsbereich verfügbar"})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("span",{className:"text-2xl",children:"🏆"}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-sm font-medium text-orange-800",children:"Beste Siegesserie im Zeitraum"}),s.jsx("div",{className:"text-lg font-bold text-orange-600",children:L.aek.streak>L.real.streak?`AEK: ${L.aek.streak} Siege`:L.real.streak>L.aek.streak?`Real: ${L.real.streak} Siege`:`Unentschieden: ${L.aek.streak} Siege`})]})]})})]}),s.jsxs("div",{className:"modern-card",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:"💡 Besondere Statistiken"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-lg border border-yellow-200",children:[s.jsx("div",{className:"text-xl font-bold text-yellow-600",children:(()=>{let A=0,G="Keine Daten";return N.forEach(D=>{if(D.matchesPlayed>0){const K=D.goals/D.matchesPlayed;K>A&&(A=K,G=D.name)}}),G})()}),s.jsx("div",{className:"text-sm text-yellow-700",children:"🎯 Effizientester Spieler"}),s.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:(()=>{let A=0;return N.forEach(G=>{if(G.matchesPlayed>0){const D=G.goals/G.matchesPlayed;D>A&&(A=D)}}),A>0?`${A.toFixed(2)} Tore/Spiel`:"Keine Daten"})()})]}),s.jsxs("div",{className:"text-center p-3 bg-gradient-to-br from-blue-50 to-cyan-50 rounded-lg border border-blue-200",children:[s.jsx("div",{className:"text-xl font-bold text-blue-600",children:(()=>{const A=j.aek.wins,G=j.real.wins;return A+G===0?"100%":`${(Math.min(A,G)/Math.max(A,G)*100).toFixed(0)}%`})()}),s.jsx("div",{className:"text-sm text-blue-700",children:"⚖️ Team-Balance"}),s.jsxs("div",{className:"text-xs text-blue-600 mt-1",children:["Ausgeglichenheit (",j.aek.wins,":",j.real.wins,")"]})]})]})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"card-ios",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-fifa-blue/10 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-lg",children:"🔵"})}),s.jsx("h3",{className:"text-title3 font-bold text-fifa-blue",children:"AEK Athen"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-body text-text-secondary",children:"Siege:"}),s.jsx("span",{className:"text-body font-semibold text-system-green",children:R})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-body text-text-secondary",children:"Niederlagen:"}),s.jsx("span",{className:"text-body font-semibold text-system-red",children:j.aek.losses})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-body text-text-secondary",children:"Zu Null:"}),s.jsx("span",{className:"text-body font-semibold text-text-primary",children:_.cleanSheets.aek})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-caption1 text-text-secondary mb-2",children:"Form (letzte 5):"}),s.jsx("div",{className:"flex",children:P(v.aek)})]})]})]}),s.jsxs("div",{className:"card-ios",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-fifa-red/10 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-lg",children:"🔴"})}),s.jsx("h3",{className:"text-title3 font-bold text-fifa-red",children:"Real Madrid"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-body text-text-secondary",children:"Siege:"}),s.jsx("span",{className:"text-body font-semibold text-system-green",children:E})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-body text-text-secondary",children:"Niederlagen:"}),s.jsx("span",{className:"text-body font-semibold text-system-red",children:j.real.losses})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-body text-text-secondary",children:"Zu Null:"}),s.jsx("span",{className:"text-body font-semibold text-text-primary",children:_.cleanSheets.real})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("div",{className:"text-caption1 text-text-secondary mb-2",children:"Form (letzte 5):"}),s.jsx("div",{className:"flex",children:P(v.real)})]})]})]})]}),s.jsxs("div",{className:"card-ios",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"w-10 h-10 bg-system-yellow/10 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-lg",children:"🏆"})}),s.jsx("h3",{className:"text-title3 font-bold text-text-primary",children:"Top-Torschützen"})]}),s.jsx("div",{className:"space-y-3",children:N.slice(0,5).map((A,G)=>s.jsx("div",{className:"list-item-ios",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-caption2 font-bold ${G===0?"bg-system-yellow text-white":G===1?"bg-text-quaternary text-white":G===2?"bg-system-orange text-white":"bg-bg-tertiary text-text-secondary"}`,children:G+1}),s.jsxs("div",{children:[s.jsx("div",{className:"text-callout font-medium text-text-primary",children:A.name}),s.jsx("div",{className:"text-caption1 text-text-secondary",children:A.team})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-callout font-bold text-text-primary",children:[A.goals," Tore"]}),s.jsxs("div",{className:"text-caption1 text-text-secondary",children:[A.goalsPerGame," ⌀"]})]})]})},A.id))})]}),s.jsxs("div",{className:"modern-card",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:"⭐ Top-Spieler des Spiels"}),s.jsx("div",{className:"space-y-2",children:N.filter(A=>A.sdsCount>0).sort((A,G)=>G.sdsCount-A.sdsCount).slice(0,5).map((A,G)=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border-light last:border-b-0",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${G===0?"bg-yellow-500 text-white":G===1?"bg-gray-400 text-white":G===2?"bg-orange-600 text-white":"bg-gray-200 text-gray-600"}`,children:G+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:A.name}),s.jsx("div",{className:"text-sm text-text-muted",children:A.team})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold",children:[A.sdsCount,"x SdS"]}),s.jsxs("div",{className:"text-sm text-text-muted",children:[A.matchesPlayed>0?(A.sdsCount/A.matchesPlayed*100).toFixed(1):"0.0","% Quote"]})]})]},A.id))}),N.filter(A=>A.sdsCount>0).length===0&&s.jsx("div",{className:"text-center text-text-muted py-4",children:"Noch keine Spieler des Spiels Auszeichnungen vergeben"})]})]})},J=()=>s.jsxs("div",{className:"modern-card",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:"📊 Spielerstatistiken"}),s.jsxs("div",{className:"mb-6 grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[s.jsx("div",{className:"text-xl font-bold text-primary-green",children:N.filter(y=>y.goals>0).length}),s.jsx("div",{className:"text-sm text-text-secondary",children:"Aktive Torschützen"})]}),s.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[s.jsx("div",{className:"text-xl font-bold text-primary-blue",children:N.reduce((y,S)=>y+S.goals,0)}),s.jsx("div",{className:"text-sm text-text-secondary",children:"Tore insgesamt"})]}),s.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[s.jsx("div",{className:"text-xl font-bold text-primary-orange",children:N.filter(y=>y.sdsCount>0).length}),s.jsx("div",{className:"text-sm text-text-secondary",children:"SdS Träger"})]}),s.jsxs("div",{className:"text-center p-3 bg-bg-secondary rounded-lg",children:[s.jsx("div",{className:"text-xl font-bold text-primary-red",children:N.reduce((y,S)=>y+S.totalBans,0)}),s.jsx("div",{className:"text-sm text-text-secondary",children:"Gesamt Sperren"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b border-border-light",children:[s.jsx("th",{className:"text-left py-2",children:"Spieler"}),s.jsx("th",{className:"text-left py-2",children:"Team"}),s.jsx("th",{className:"text-center py-2",children:"Tore"}),s.jsx("th",{className:"text-center py-2",children:"⌀/Spiel"}),s.jsx("th",{className:"text-center py-2",children:"Spiele"}),s.jsx("th",{className:"text-center py-2",children:"SdS"}),s.jsx("th",{className:"text-center py-2",children:"SdS %"}),s.jsx("th",{className:"text-center py-2",children:"Sperren"}),s.jsx("th",{className:"text-right py-2",children:"Marktwert"})]})}),s.jsx("tbody",{children:N.map(y=>s.jsxs("tr",{className:"border-b border-border-light hover:bg-bg-secondary",children:[s.jsx("td",{className:"py-2 font-medium",children:y.name}),s.jsx("td",{className:"py-2",children:s.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${y.team==="AEK"?"bg-blue-100 text-blue-800":y.team==="Ehemalige"?"bg-gray-100 text-gray-800":"bg-red-100 text-red-800"}`,children:y.team})}),s.jsx("td",{className:"py-2 text-center font-bold",children:y.goals}),s.jsx("td",{className:"py-2 text-center",children:y.goalsPerGame}),s.jsx("td",{className:"py-2 text-center",children:y.matchesPlayed}),s.jsx("td",{className:"py-2 text-center",children:y.sdsCount}),s.jsx("td",{className:"py-2 text-center",children:s.jsxs("span",{className:`px-1 py-0.5 rounded text-xs ${parseFloat(y.sdsPercentage)>=50?"bg-green-100 text-green-800":parseFloat(y.sdsPercentage)>=25?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600"}`,children:[y.sdsPercentage,"% (",y.sdsCount,"/",y.totalMatches,")"]})}),s.jsx("td",{className:"py-2 text-center",children:s.jsx("span",{className:`px-1 py-0.5 rounded text-xs ${y.totalBans===0?"bg-green-100 text-green-800":y.totalBans<=2?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:y.totalBans})}),s.jsx("td",{className:"py-2 text-right",children:b(y.value)})]},y.id))})]})}),s.jsxs("div",{className:"mt-6 grid md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[s.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"🏆 Effizienz-Spitze"}),(()=>{const y=N.filter(S=>S.matchesPlayed>=3).sort((S,k)=>k.goalsPerMatchWhenPlaying-S.goalsPerMatchWhenPlaying)[0];return y?s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-green-700",children:y.name}),s.jsxs("div",{className:"text-sm text-green-600",children:[y.goalsPerGame," Tore/Spiel (",y.goals," Tore in ",y.matchesPlayed," Spielen)"]})]}):s.jsx("div",{className:"text-gray-500",children:"Nicht genügend Daten"})})()]}),s.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[s.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"⭐ SdS-König"}),(()=>{const y=N.filter(S=>S.sdsCount>0).sort((S,k)=>parseFloat(k.sdsPercentage)-parseFloat(S.sdsPercentage))[0];return y?s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-yellow-700",children:y.name}),s.jsxs("div",{className:"text-sm text-yellow-600",children:[y.sdsPercentage,"% Quote (",y.sdsCount,"x SdS)"]})]}):s.jsx("div",{className:"text-gray-500",children:"Noch keine SdS vergeben"})})()]}),s.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[s.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"🚫 Disziplin-Problem"}),(()=>{const y=N.filter(S=>S.totalBans>0).sort((S,k)=>k.totalBans-S.totalBans)[0];return y?s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-red-700",children:y.name}),s.jsxs("div",{className:"text-sm text-red-600",children:[y.totalBans," Sperren (Score: ",y.disciplinaryScore,")"]})]}):s.jsx("div",{className:"text-gray-500",children:"Keine Sperren verzeichnet"})})()]})]})]}),B=()=>s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"modern-card",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:"⚖️ Team-Vergleich"}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-blue-600",children:"AEK Athen"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Aktive Spieler:"}),s.jsx("span",{className:"font-medium",children:C.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Siege:"}),s.jsx("span",{className:"font-medium",children:R})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Niederlagen:"}),s.jsx("span",{className:"font-medium",children:j.aek.losses})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Zu Null Spiele:"}),s.jsx("span",{className:"font-medium",children:_.cleanSheets.aek})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-red-600",children:"Real Madrid"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Aktive Spieler:"}),s.jsx("span",{className:"font-medium",children:$.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Siege:"}),s.jsx("span",{className:"font-medium",children:E})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Niederlagen:"}),s.jsx("span",{className:"font-medium",children:j.real.losses})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Zu Null Spiele:"}),s.jsx("span",{className:"font-medium",children:_.cleanSheets.real})]})]})]})]})]}),s.jsxs("div",{className:"modern-card",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:"📈 Erweiterte Statistiken"}),s.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Diese Statistiken bieten tiefere Einblicke in die Team-Performance und wichtige Kennzahlen."}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-primary-green",children:_.highScoringGames}),s.jsx("div",{className:"text-sm text-text-muted",children:"Torspektakel"}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Spiele mit 5+ Toren"})]}),s.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-accent-orange",children:_.biggestWinMargin}),s.jsx("div",{className:"text-sm text-text-muted",children:"Größter Sieg"}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Höchste Tordifferenz"})]}),s.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-accent-blue",children:_.avgGoalsPerMatch}),s.jsx("div",{className:"text-sm text-text-muted",children:"⌀ Tore pro Spiel"}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:"Durchschnittswert"})]}),s.jsxs("div",{className:"text-center p-4 bg-bg-secondary rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-purple-600",children:_.currentStreak.count>0?`${_.currentStreak.count}`:"0"}),s.jsx("div",{className:"text-sm text-text-muted",children:"Siegesserie"}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:_.currentStreak.count>0?_.currentStreak.team:"Keine aktuelle Serie"})]})]}),s.jsxs("div",{className:"mt-6 grid md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-blue-600",children:"🏠 Home/Away Analyse"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"AEK Heimspiele:"}),s.jsx("span",{className:"font-medium",children:_.homeAwayStats.aekHome})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"AEK Heimsiege:"}),s.jsx("span",{className:"font-medium",children:_.homeAwayStats.aekHomeWins})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"AEK Auswärtssiege:"}),s.jsx("span",{className:"font-medium",children:_.homeAwayStats.aekAwayWins})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Heimstärke AEK:"}),s.jsx("span",{className:"font-medium",children:_.homeAwayStats.aekHome>0?`${(_.homeAwayStats.aekHomeWins/_.homeAwayStats.aekHome*100).toFixed(0)}%`:"0%"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-green-600",children:"⚽ Torstatistiken"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Beide Teams treffen:"}),s.jsx("span",{className:"font-medium",children:_.scoringPatterns.bothTeamsScore})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"1:0 Siege:"}),s.jsx("span",{className:"font-medium",children:_.scoringPatterns.oneNilWins})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"4+ Tore Siege:"}),s.jsx("span",{className:"font-medium",children:_.scoringPatterns.highScoringWins})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Top-Torschütze:"}),s.jsxs("span",{className:"font-medium",children:[_.topScorer.player," (",_.topScorer.goals,")"]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-purple-600",children:"🎯 Spielqualität"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Enge Spiele (≤1 Tor):"}),s.jsx("span",{className:"font-medium",children:_.competitiveness.closeGames})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Deutliche Siege (≥3 Tore):"}),s.jsx("span",{className:"font-medium",children:_.competitiveness.blowouts})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"AEK Tor-Schnitt:"}),s.jsx("span",{className:"font-medium",children:_.goalEfficiency.aekAvg})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Real Tor-Schnitt:"}),s.jsx("span",{className:"font-medium",children:_.goalEfficiency.realAvg})]})]})]})]}),s.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-text-primary",children:"🎯 Offensive Highlights"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Torreichstes Team:"}),s.jsxs("span",{className:"font-medium",children:[_.aekTotalGoals>=_.realTotalGoals?"AEK Athen":"Real Madrid","(",Math.max(_.aekTotalGoals,_.realTotalGoals)," Tore)"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Höchste Einzelspiel-Toranzahl:"}),s.jsxs("span",{className:"font-medium",children:[_.highestScoringMatch," Tore"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Aktivster Torschütze:"}),s.jsx("span",{className:"font-medium",children:N.length>0?`${N[0].name} (${N[0].goals} Tore)`:"Keine Daten"})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-text-primary",children:"⚖️ Team-Balance"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Kader-Unterschied:"}),s.jsxs("span",{className:"font-medium",children:[Math.abs(C.length-$.length)," Spieler"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Marktwert-Verhältnis:"}),s.jsx("span",{className:"font-medium",children:C.reduce((y,S)=>y+(S.value||0),0)>$.reduce((y,S)=>y+(S.value||0),0)?"AEK führt":"Real führt"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Dominanteres Team:"}),s.jsx("span",{className:"font-medium",children:R>E?"AEK Athen":E>R?"Real Madrid":"Ausgeglichen"})]})]})]})]})]}),s.jsxs("div",{className:"modern-card",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:"⚔️ Head-to-Head Bilanz"}),s.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Direkter Vergleich zwischen AEK Athen und Real Madrid über alle Spiele."}),s.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:w.aekWins}),s.jsx("div",{className:"text-sm text-blue-700",children:"AEK Siege"}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:w.totalMatches>0?`${(w.aekWins/w.totalMatches*100).toFixed(1)}%`:"0%"})]}),s.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:w.realWins}),s.jsx("div",{className:"text-sm text-red-700",children:"Real Siege"}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:w.totalMatches>0?`${(w.realWins/w.totalMatches*100).toFixed(1)}%`:"0%"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-green-600",children:w.aekGoals+w.realGoals}),s.jsx("div",{className:"text-sm text-green-700",children:"Tore gesamt"}),s.jsx("div",{className:"text-xs text-text-muted mt-1",children:w.totalMatches>0?`⌀ ${((w.aekGoals+w.realGoals)/w.totalMatches).toFixed(1)} pro Spiel`:"⌀ 0 pro Spiel"})]})]}),s.jsxs("div",{className:"mt-6 grid md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"🔵 Größter AEK Sieg"}),w.biggestAekWin.diff>0?s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:w.biggestAekWin.score}),s.jsxs("div",{className:"text-sm text-blue-700",children:["Unterschied: ",w.biggestAekWin.diff," Tore"]}),s.jsx("div",{className:"text-xs text-text-muted",children:new Date(w.biggestAekWin.date).toLocaleDateString("de-DE")})]}):s.jsx("div",{className:"text-gray-500",children:"Noch kein Sieg verzeichnet"})]}),s.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-red-800 mb-2",children:"🔴 Größter Real Sieg"}),w.biggestRealWin.diff>0?s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-red-600 mb-1",children:w.biggestRealWin.score}),s.jsxs("div",{className:"text-sm text-red-700",children:["Unterschied: ",w.biggestRealWin.diff," Tore"]}),s.jsx("div",{className:"text-xs text-text-muted",children:new Date(w.biggestRealWin.date).toLocaleDateString("de-DE")})]}):s.jsx("div",{className:"text-gray-500",children:"Noch kein Sieg verzeichnet"})]})]})]}),s.jsxs("div",{className:"modern-card",children:[s.jsx("h3",{className:"font-bold text-lg mb-4",children:"🔬 Detailanalyse"}),s.jsx("div",{className:"mb-4 text-sm text-text-muted",children:"Erweiterte Metriken für eine tiefgreifende Team-Analyse."}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-red-600",children:"🎲 Spielstatistiken"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Spiele gespielt:"}),s.jsx("span",{className:"font-medium",children:F})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Längste Serie:"}),s.jsxs("span",{className:"font-medium",children:[R>=E?"AEK":"Real"," (",Math.max(R,E)," Siege)"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Torreichstes Spiel:"}),s.jsxs("span",{className:"font-medium",children:[_.highestScoringMatch," Tore"]})]})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("h4",{className:"font-semibold text-purple-600",children:"🏆 Leistungs-Metriken"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Aktive Spieler:"}),s.jsx("span",{className:"font-medium",children:C.length+$.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Torschützen:"}),s.jsxs("span",{className:"font-medium",children:[N.filter(y=>y.goals>0).length," Spieler"]})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Erfolgsquote AEK:"}),s.jsx("span",{className:"font-medium",children:F>0?`${(R/F*100).toFixed(0)}%`:"0%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Erfolgsquote Real:"}),s.jsx("span",{className:"font-medium",children:F>0?`${(E/F*100).toFixed(0)}%`:"0%"})]})]})]})]})]})]}),ge=()=>{const S=(()=>{if(!p||p.length===0)return[];const k={};return p.forEach(A=>{const G=new Date(A.date),D=`${G.getFullYear()}-${String(G.getMonth()+1).padStart(2,"0")}`,K=G.toLocaleDateString("de-DE",{year:"numeric",month:"long"});k[D]||(k[D]={month:K,key:D,aekWins:0,realWins:0,aekGoals:0,realGoals:0,matchCount:0,matches:[]});const z=A.goalsa||0,O=A.goalsb||0;k[D].aekGoals+=z,k[D].realGoals+=O,k[D].matchCount++,k[D].matches.push(A),z>O?k[D].aekWins++:O>z&&k[D].realWins++}),Object.values(k).sort((A,G)=>G.key.localeCompare(A.key))})();return S.length===0?s.jsxs("div",{className:"text-center py-8 text-text-muted",children:[s.jsx("div",{className:"text-4xl mb-2",children:"📈"}),s.jsx("p",{children:"Keine Spiele für Trends-Analyse im gewählten Zeitraum"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"modern-card p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("span",{className:"text-2xl",children:"📈"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-text-primary",children:"Performance-Trends"}),s.jsx("p",{className:"text-sm text-text-muted",children:"Monatliche Entwicklung der Teams"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-xl font-bold text-blue-600",children:S.reduce((k,A)=>k+A.aekWins,0)}),s.jsx("div",{className:"text-sm text-blue-700",children:"AEK Siege gesamt"})]}),s.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[s.jsx("div",{className:"text-xl font-bold text-red-600",children:S.reduce((k,A)=>k+A.realWins,0)}),s.jsx("div",{className:"text-sm text-red-700",children:"Real Siege gesamt"})]}),s.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-xl font-bold text-green-600",children:S.reduce((k,A)=>k+A.matchCount,0)}),s.jsx("div",{className:"text-sm text-green-700",children:"Spiele gesamt"})]})]})]}),s.jsx("div",{className:"space-y-4",children:S.map((k,A)=>{const G=k.aekGoals+k.realGoals,D=k.matchCount>0?(k.aekWins/k.matchCount*100).toFixed(0):0,K=k.matchCount>0?(k.realWins/k.matchCount*100).toFixed(0):0,z=k.matchCount>0?(G/k.matchCount).toFixed(1):"0.0";return s.jsxs("div",{className:"modern-card p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 bg-gradient-info rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-bold",children:A+1})}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-text-primary",children:k.month}),s.jsxs("p",{className:"text-sm text-text-muted",children:[k.matchCount," Spiele gespielt"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-bold text-text-primary",children:["⌀ ",z]}),s.jsx("div",{className:"text-xs text-text-muted",children:"Tore/Spiel"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-medium text-blue-700",children:"AEK Athens"}),s.jsxs("span",{className:"text-sm text-blue-600",children:[D,"% Siege"]})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Siege:"}),s.jsx("span",{className:"font-medium",children:k.aekWins})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tore:"}),s.jsx("span",{className:"font-medium",children:k.aekGoals})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"⌀ Tore/Spiel:"}),s.jsx("span",{className:"font-medium",children:k.matchCount>0?(k.aekGoals/k.matchCount).toFixed(1):"0.0"})]})]})]}),s.jsxs("div",{className:"p-4 bg-red-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"font-medium text-red-700",children:"Real Madrid"}),s.jsxs("span",{className:"text-sm text-red-600",children:[K,"% Siege"]})]}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Siege:"}),s.jsx("span",{className:"font-medium",children:k.realWins})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tore:"}),s.jsx("span",{className:"font-medium",children:k.realGoals})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"⌀ Tore/Spiel:"}),s.jsx("span",{className:"font-medium",children:k.matchCount>0?(k.realGoals/k.matchCount).toFixed(1):"0.0"})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between text-xs text-text-muted",children:[s.jsx("span",{children:"AEK Dominanz"}),s.jsx("span",{children:"Real Dominanz"})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:s.jsxs("div",{className:"h-full flex",children:[s.jsx("div",{className:"bg-blue-500",style:{width:`${D}%`}}),s.jsx("div",{className:"bg-red-500",style:{width:`${K}%`}})]})})]}),k.matchCount>0&&s.jsx("div",{className:"mt-4 pt-4 border-t border-border-light",children:s.jsxs("div",{className:"flex items-center gap-4 text-xs text-text-muted",children:[s.jsxs("span",{children:["📊 ",G," Tore insgesamt"]}),s.jsxs("span",{children:["⚽ Bestes Team: ",k.aekWins>k.realWins?"AEK":k.realWins>k.aekWins?"Real":"Ausgeglichen"]}),s.jsxs("span",{children:["🔥 Intensität: ",z>=3?"Hoch":z>=2?"Mittel":"Niedrig"]})]})})]},k.key)})}),s.jsxs("div",{className:"modern-card p-6",children:[s.jsxs("h4",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"🎯"}),"Trend-Analyse"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-text-primary mb-3",children:"📈 Aufwärtstrends"}),s.jsx("div",{className:"space-y-2 text-sm",children:S.length>=2&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Letzter Monat AEK:"}),s.jsx("span",{className:`font-medium ${S[0].aekWins>=S[1].aekWins?"text-green-600":"text-red-600"}`,children:S[0].aekWins>=S[1].aekWins?"↗️ Besser":"↘️ Schlechter"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Letzter Monat Real:"}),s.jsx("span",{className:`font-medium ${S[0].realWins>=S[1].realWins?"text-green-600":"text-red-600"}`,children:S[0].realWins>=S[1].realWins?"↗️ Besser":"↘️ Schlechter"})]})]})})]}),s.jsxs("div",{children:[s.jsx("h5",{className:"font-medium text-text-primary mb-3",children:"🏆 Beste Performance"}),s.jsx("div",{className:"space-y-2 text-sm",children:(()=>{const k=S.reduce((A,G)=>{const D=G.aekGoals+G.realGoals,K=A.aekGoals+A.realGoals;return D>K?G:A},S[0]);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Torreichster Monat:"}),s.jsx("span",{className:"font-medium text-green-600",children:k==null?void 0:k.month})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Tore in diesem Monat:"}),s.jsx("span",{className:"font-medium",children:k?k.aekGoals+k.realGoals:0})]})]})})()})]})]})]})]})},pe=()=>{const S=(()=>{if(!p||p.length===0)return null;const k={firstHalfGoals:0,secondHalfGoals:0,overtimeGoals:0},A={oneGoal:0,twoGoals:0,threeOrMore:0,blowouts:0},G=N.slice(0,10).map(z=>({name:z.name,team:z.team,goals:z.goals||0,matches:z.matchesPlayed||0,efficiency:z.matchesPlayed>0?(z.goals/z.matchesPlayed*100).toFixed(1):0,value:z.value||0,valuePerGoal:z.goals>0?((z.value||0)/z.goals).toFixed(2):"N/A"})),D=p.slice(-10),K={aekWins:0,realWins:0,aekGoals:0,realGoals:0,totalMatches:D.length};return p.forEach(z=>{const O=z.goalsa||0,le=z.goalsb||0,ne=Math.abs(O-le);ne===1?A.oneGoal++:ne===2?A.twoGoals++:ne>=3&&ne<5?A.threeOrMore++:ne>=5&&A.blowouts++}),D.forEach(z=>{const O=z.goalsa||0,le=z.goalsb||0;K.aekGoals+=O,K.realGoals+=le,O>le?K.aekWins++:le>O&&K.realWins++}),{goalTimingAnalysis:k,scoreMargins:A,playerEfficiency:G,recentForm:K}})();return S?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"modern-card p-6",children:[s.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"🎯"}),"Spielintensität & Tordifferenzen"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[s.jsx("div",{className:"text-xl font-bold text-green-600",children:S.scoreMargins.oneGoal}),s.jsx("div",{className:"text-xs text-text-secondary",children:"1-Tor-Spiele"}),s.jsx("div",{className:"text-xs text-text-muted",children:"Spannend"})]}),s.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-xl font-bold text-blue-600",children:S.scoreMargins.twoGoals}),s.jsx("div",{className:"text-xs text-text-secondary",children:"2-Tor-Spiele"}),s.jsx("div",{className:"text-xs text-text-muted",children:"Umkämpft"})]}),s.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[s.jsx("div",{className:"text-xl font-bold text-orange-600",children:S.scoreMargins.threeOrMore}),s.jsx("div",{className:"text-xs text-text-secondary",children:"3-4 Tore Diff."}),s.jsx("div",{className:"text-xs text-text-muted",children:"Deutlich"})]}),s.jsxs("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[s.jsx("div",{className:"text-xl font-bold text-red-600",children:S.scoreMargins.blowouts}),s.jsx("div",{className:"text-xs text-text-secondary",children:"5+ Tore Diff."}),s.jsx("div",{className:"text-xs text-text-muted",children:"Dominant"})]})]})]}),s.jsxs("div",{className:"modern-card p-6",children:[s.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"⚡"}),"Spieler-Effizienz Rankings"]}),s.jsx("div",{className:"space-y-3",children:S.playerEfficiency.slice(0,8).map((k,A)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${A===0?"bg-yellow-400 text-white":A===1?"bg-gray-400 text-white":A===2?"bg-orange-400 text-white":"bg-bg-tertiary text-text-primary"}`,children:A+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-text-primary",children:k.name}),s.jsx("div",{className:"text-xs text-text-muted",children:k.team})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-text-primary",children:[k.efficiency,"%"]}),s.jsxs("div",{className:"text-xs text-text-muted",children:[k.goals,"G / ",k.matches,"S"]})]})]},k.name))})]}),s.jsxs("div",{className:"modern-card p-6",children:[s.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"🔥"}),"Aktuelle Form (Letzte ",S.recentForm.totalMatches," Spiele)"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[s.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-blue-600",children:S.recentForm.aekWins}),s.jsx("div",{className:"text-sm text-text-secondary mb-2",children:"AEK Siege"}),s.jsxs("div",{className:"text-xs text-text-muted",children:[S.recentForm.aekGoals," Tore geschossen"]})]}),s.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:S.recentForm.realWins}),s.jsx("div",{className:"text-sm text-text-secondary mb-2",children:"Real Siege"}),s.jsxs("div",{className:"text-xs text-text-muted",children:[S.recentForm.realGoals," Tore geschossen"]})]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Siegesquote AEK:"}),s.jsx("span",{className:"font-medium",children:S.recentForm.totalMatches>0?`${(S.recentForm.aekWins/S.recentForm.totalMatches*100).toFixed(0)}%`:"0%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Siegesquote Real:"}),s.jsx("span",{className:"font-medium",children:S.recentForm.totalMatches>0?`${(S.recentForm.realWins/S.recentForm.totalMatches*100).toFixed(0)}%`:"0%"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Durchschnitt Tore/Spiel:"}),s.jsx("span",{className:"font-medium",children:S.recentForm.totalMatches>0?((S.recentForm.aekGoals+S.recentForm.realGoals)/S.recentForm.totalMatches).toFixed(1):"0.0"})]})]})]}),s.jsxs("div",{className:"modern-card p-6",children:[s.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"text-xl",children:"💰"}),"Preis-Leistungs-Verhältnis"]}),s.jsx("div",{className:"space-y-3",children:S.playerEfficiency.filter(k=>k.value>0&&k.goals>0).sort((k,A)=>parseFloat(k.valuePerGoal)-parseFloat(A.valuePerGoal)).slice(0,5).map((k,A)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-bold text-green-600",children:A+1})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-text-primary",children:k.name}),s.jsxs("div",{className:"text-xs text-text-muted",children:[k.team," • ",k.goals," Tore"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"font-bold text-green-600",children:[k.valuePerGoal,"M €"]}),s.jsx("div",{className:"text-xs text-text-muted",children:"pro Tor"})]})]},k.name))})]})]}):s.jsxs("div",{className:"text-center py-8 text-text-muted",children:[s.jsx("div",{className:"text-4xl mb-2",children:"📊"}),s.jsx("p",{children:"Keine Daten für den gewählten Zeitraum verfügbar"})]})},ye=()=>{const y=p.reduce((D,K)=>D+(K.goalsa||0)+(K.goalsb||0),0),S=(()=>{if(!p||p.length===0)return[];const D={};return p.forEach(K=>{const z=new Date(K.date),O=`${z.getFullYear()}-${String(z.getMonth()+1).padStart(2,"0")}`,le=z.toLocaleDateString("de-DE",{month:"short",year:"2-digit"});D[O]||(D[O]={label:le,key:O,aek:0,real:0});const ne=K.goalsa||0,mn=K.goalsb||0;D[O].aek+=ne,D[O].real+=mn}),Object.values(D).sort((K,z)=>K.key.localeCompare(z.key))})(),k=N.slice(0,10).map(D=>({name:D.name,value:D.goals||0,team:D.team,goalsPerGame:D.goalsPerGame})),A=[{label:"AEK Siege",value:R},{label:"Real Siege",value:E}],G=S.slice(-12);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"modern-card p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("span",{className:"text-3xl",children:"📉"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-text-primary",children:"Interaktive Visualisierungen"}),s.jsx("p",{className:"text-sm text-text-secondary",children:"Dynamische D3.js-Charts für detaillierte Datenanalyse"})]})]}),s.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:s.jsxs("p",{className:"text-sm text-text-secondary",children:["💡 ",s.jsx("strong",{children:"Tipp:"})," Bewege die Maus über die Charts für detaillierte Informationen. Alle Visualisierungen sind animiert und interaktiv."]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsx(Il,{data:A,title:"Siegesverteilung",height:350}),s.jsx(Ol,{data:k,title:"Top 10 Torschützen",height:350})]}),G.length>0&&s.jsx(Vl,{data:G,title:"Tor-Entwicklung (Letzte 12 Monate)",height:320}),S.length>0&&s.jsx(Hl,{data:S,title:"Monatliche Leistungsentwicklung",height:320}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"modern-card p-6 text-center",children:[s.jsx("div",{className:"text-4xl mb-2",children:"⚡"}),s.jsx("div",{className:"text-2xl font-bold text-text-primary",children:p.length>0?(y/p.length).toFixed(1):"0"}),s.jsx("div",{className:"text-sm text-text-secondary",children:"Durchschn. Tore/Spiel"})]}),s.jsxs("div",{className:"modern-card p-6 text-center",children:[s.jsx("div",{className:"text-4xl mb-2",children:"🎯"}),s.jsx("div",{className:"text-2xl font-bold text-text-primary",children:N.filter(D=>D.goals>0).length}),s.jsx("div",{className:"text-sm text-text-secondary",children:"Aktive Torschützen"})]}),s.jsxs("div",{className:"modern-card p-6 text-center",children:[s.jsx("div",{className:"text-4xl mb-2",children:"📊"}),s.jsx("div",{className:"text-2xl font-bold text-text-primary",children:F}),s.jsx("div",{className:"text-sm text-text-secondary",children:"Gespielte Matches"})]})]}),s.jsxs("div",{className:"modern-card p-6",children:[s.jsxs("h4",{className:"font-semibold text-text-primary mb-3 flex items-center gap-2",children:[s.jsx("span",{children:"ℹ️"}),"Über die Visualisierungen"]}),s.jsxs("div",{className:"space-y-2 text-sm text-text-secondary",children:[s.jsxs("p",{children:["• ",s.jsx("strong",{children:"Liniendiagramm:"})," Zeigt die monatliche Entwicklung der Toranzahl beider Teams"]}),s.jsxs("p",{children:["• ",s.jsx("strong",{children:"Balkendiagramm:"})," Vergleicht die Top-Torschützen mit farblicher Team-Zuordnung"]}),s.jsxs("p",{children:["• ",s.jsx("strong",{children:"Donut-Diagramm:"})," Visualisiert die Verteilung der Siege zwischen den Teams"]}),s.jsxs("p",{children:["• ",s.jsx("strong",{children:"Flächendiagramm:"})," Stellt Tor-Trends über die Zeit mit Verlaufsdarstellung dar"]})]})]})]})},Ae=()=>{switch(n){case"dashboard":return s.jsxs("div",{className:"space-y-6",children:[s.jsx(bn,{}),s.jsx(pn,{onNavigate:e})]});case"advanced":return pe();case"visualizations":return ye();case"matchdays":return s.jsx(yn,{matches:c});case"players":return J();case"teams":return B();case"trends":return ge();default:return U()}};return s.jsxs("div",{className:"p-4 pb-24 mobile-safe-bottom",children:[s.jsxs("div",{className:"mb-6 animate-mobile-slide-in",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("div",{className:"w-12 h-12 bg-gradient-info rounded-ios-lg flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xl",children:"📊"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-title1 font-bold text-text-primary",children:"Statistiken"}),s.jsx("p",{className:"text-footnote text-text-secondary",children:"Umfassende Liga-Analyse"})]})]}),s.jsx("div",{className:"w-full h-1 bg-bg-tertiary rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-gradient-info w-3/4 rounded-full animate-pulse-gentle"})})]}),s.jsxs("div",{className:"mb-4 bg-bg-secondary rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx("span",{className:"text-lg",children:"📅"}),s.jsx("h3",{className:"font-semibold text-text-primary",children:"Zeitraum"})]}),s.jsxs("select",{value:a,onChange:y=>l(y.target.value),className:"w-full px-3 py-2 bg-bg-primary border border-border-light rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors",children:[s.jsx("option",{value:"all",children:"Alle Spiele"}),s.jsx("option",{value:"1week",children:"Letzte Woche"}),s.jsx("option",{value:"1month",children:"Letzter Monat"}),s.jsx("option",{value:"3months",children:"Letzte 3 Monate"}),s.jsx("option",{value:"6months",children:"Letzte 6 Monate"})]}),s.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Statistiken werden für den gewählten Zeitraum berechnet"})]}),s.jsx(xn,{views:T,selectedView:n,onViewChange:r}),s.jsx("div",{className:"form-container animate-mobile-slide-in",children:Ae()})]})}export{Yl as default};
