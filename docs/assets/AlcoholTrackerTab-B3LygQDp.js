import{r as y,j as e}from"./main-CgeiuHb7.js";import{d as se}from"./dataManager-SIvbGMeu.js";const re=({managers:z,beerConsumption:T,shotConsumption:N,drinkingStartTime:k})=>{var R,X,I,_;const[o,Z]=y.useState(!1),[l,H]=y.useState([]),[s,q]=y.useState([]),x=y.useRef(null),G=(a,h,u,b,f)=>{if(!u.weight||a===0&&(!h||h.shots20===0&&h.shots40===0))return 0;const v=a*25*.789;let m=0;h&&(m=h.shots20*20*.2*.789+h.shots40*20*.4*.789);const g=v+m,B=u.gender==="male"?.7:.6;let A=g/(B*u.weight);if(b&&f){const D=new Date(b),$=(new Date(f)-D)/(1e3*60*60)*.15;A=Math.max(0,A-$)}return A};y.useEffect(()=>{if(!k)return;const a=localStorage.getItem("drinkEvents");if(a)try{q(JSON.parse(a))}catch(h){console.error("Error loading drink events:",h)}},[k]),y.useEffect(()=>{if(!k)return;const a=T.alexander+N.alexander.shots20+N.alexander.shots40,h=T.philip+N.philip.shots20+N.philip.shots40,u=s[s.length-1],b=new Date().toISOString();if(!u||u.alexanderTotal!==a||u.philipTotal!==h){const f={timestamp:b,alexanderTotal:a,philipTotal:h,alexanderChange:u?a-u.alexanderTotal:a,philipChange:u?h-u.philipTotal:h,beers:{alexander:T.alexander,philip:T.philip},shots:{alexander:N.alexander,philip:N.philip}},v=[...s,f];q(v),localStorage.setItem("drinkEvents",JSON.stringify(v))}},[T,N,k,s]),y.useEffect(()=>{if(!k){H([]);return}const a=()=>{const h=new Date(k),u=new Date,b=[],f=5,v=Math.ceil((u-h)/(1e3*60)),m=Math.min(Math.ceil(v/f),144);for(let g=0;g<=m;g++){const B=new Date(h.getTime()+g*f*60*1e3),A=G(T.alexander,N.alexander,{weight:z.aek.weight,gender:"male"},k,B.toISOString()),D=G(T.philip,N.philip,{weight:z.real.weight,gender:"male"},k,B.toISOString());b.push({time:B,timeLabel:B.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}),alexander:A,philip:D})}H(b)};return a(),x.current=setInterval(a,6e4),()=>{x.current&&clearInterval(x.current)}},[k,T,N,z]);const E=Math.max(...l.map(a=>Math.max(a.alexander,a.philip)),1),i=a=>a>=1?"text-red-500":a>=.5?"text-orange-500":a>=.3?"text-yellow-500":"text-green-500",Q=()=>{const a=window.innerWidth<768,h=a?Math.min(window.innerWidth-32,450):900,u=a?280:400,b=a?{top:35,right:45,bottom:55,left:45}:{top:40,right:100,bottom:60,left:60},f=h-b.left-b.right,v=u-b.top-b.bottom;if(l.length===0)return e.jsx("div",{className:"flex items-center justify-center bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",style:{width:`${h}px`,height:`${u}px`},children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📊"}),e.jsx("p",{children:"Keine Daten zum Anzeigen"}),e.jsx("p",{className:"text-sm",children:"Trinken starten, um den Verlauf zu sehen"})]})});const m=d=>d/(l.length-1)*f,g=d=>v-d/E*v,B=(d,p)=>{if(d.length===0)return"";const F=d.map((C,t)=>({x:m(t),y:g(p(C))}));let W=`M ${F[0].x} ${F[0].y}`;for(let C=1;C<F.length;C++){const t=F[C-1],r=F[C],n=t.x+(r.x-t.x)*.4,c=t.y,S=r.x-(r.x-t.x)*.4,j=r.y;W+=` C ${n} ${c}, ${S} ${j}, ${r.x} ${r.y}`}return W},A=B(l,d=>d.alexander),D=B(l,d=>d.philip),w=[];[.3,.5,1,1.5,2].forEach(d=>{d<=E&&w.push(e.jsxs("g",{children:[e.jsx("line",{x1:0,y1:g(d),x2:f,y2:g(d),stroke:d===.5?"#f59e0b":d===1?"#ef4444":"#e5e7eb",strokeWidth:d===.5||d===1?2:1,strokeDasharray:d===.5||d===1?"5,5":"none"}),e.jsxs("text",{x:-10,y:g(d)+4,textAnchor:"end",fontSize:"12",fill:d===.5?"#d97706":d===1?"#dc2626":"#6b7280",className:"font-medium",children:[d.toFixed(1),"‰"]})]},d))});const $=[],K=new Date(k);l.forEach((d,p)=>{(d.time-K)/6e4%60===0&&p<l.length-1&&$.push(e.jsxs("g",{children:[e.jsx("line",{x1:m(p),y1:0,x2:m(p),y2:v,stroke:"#d1d5db",strokeWidth:"1",strokeDasharray:"3,3"}),e.jsx("text",{x:m(p),y:v+20,textAnchor:"middle",fontSize:"11",fill:"#6b7280",children:d.timeLabel})]},p))});const J=s.map((d,p)=>{var r,n,c,S,j,M,V,O;const F=new Date(d.timestamp),W=new Date(k),C=(F-W)/(1e3*60),t=Math.round(C/5);if(t>=0&&t<l.length){const L=m(t),U=d.alexanderChange>0&&d.beers||d.philipChange>0&&d.beers,ee=((n=(r=d.shots)==null?void 0:r.alexander)==null?void 0:n.shots20)>0||((S=(c=d.shots)==null?void 0:c.alexander)==null?void 0:S.shots40)>0||((M=(j=d.shots)==null?void 0:j.philip)==null?void 0:M.shots20)>0||((O=(V=d.shots)==null?void 0:V.philip)==null?void 0:O.shots40)>0;let Y="🍺",te="#8b5cf6";return ee&&!U?(Y="🥃",te="#f59e0b"):ee&&U&&(Y="🍻",te="#10b981"),e.jsxs("g",{children:[e.jsx("line",{x1:L,y1:0,x2:L,y2:v,stroke:te,strokeWidth:a?"1.5":"2",strokeDasharray:"4,2",opacity:"0.7"}),e.jsx("circle",{cx:L,cy:-15,r:a?"8":"10",fill:te,stroke:"white",strokeWidth:a?"2":"3",style:{filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))"}}),e.jsx("text",{x:L,y:a?"-10":"-7",textAnchor:"middle",fontSize:a?"11":"13",fill:"white",className:"font-bold",style:{filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5))"},children:Y})]},p)}return null});return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-3 md:p-4 overflow-x-auto",children:[e.jsxs("svg",{width:h,height:u,className:"overflow-visible mx-auto block",viewBox:a?`0 0 ${h} ${u}`:void 0,style:a?{maxWidth:"100%",height:"auto"}:{},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"backgroundGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#f8fafc"}),e.jsx("stop",{offset:"100%",stopColor:"#f1f5f9"})]}),e.jsxs("filter",{id:"alexanderGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"philipGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("rect",{x:b.left,y:b.top,width:f,height:v,fill:"url(#backgroundGradient)",rx:"8"}),e.jsxs("g",{transform:`translate(${b.left}, ${b.top})`,children:[w,$,e.jsxs("defs",{children:[e.jsxs("pattern",{id:"warningZone",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:[e.jsx("rect",{width:"4",height:"4",fill:"#fef3c7"}),e.jsx("path",{d:"M 0,2 L 2,0 M 2,4 L 4,2",stroke:"#f59e0b",strokeWidth:"0.3"})]}),e.jsxs("pattern",{id:"dangerZone",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:[e.jsx("rect",{width:"4",height:"4",fill:"#fee2e2"}),e.jsx("path",{d:"M 0,2 L 2,0 M 2,4 L 4,2",stroke:"#ef4444",strokeWidth:"0.3"})]})]}),E>.5&&e.jsx("rect",{x:0,y:g(Math.min(1,E)),width:f,height:g(.5)-g(Math.min(1,E)),fill:"url(#warningZone)",opacity:"0.4"}),E>1&&e.jsx("rect",{x:0,y:0,width:f,height:g(1),fill:"url(#dangerZone)",opacity:"0.4"}),J,l.filter((d,p)=>p%Math.ceil(l.length/8)===0).map((d,p)=>e.jsx("text",{x:m(p*Math.ceil(l.length/8)),y:v+35,textAnchor:"middle",fontSize:"11",fill:"#6b7280",className:"font-medium",children:d.timeLabel},p)),e.jsx("path",{d:A,fill:"none",stroke:"#3b82f6",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#alexanderGlow)",opacity:"0.9"}),e.jsx("path",{d:D,fill:"none",stroke:"#10b981",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#philipGlow)",opacity:"0.9"}),l.map((d,p)=>p%3!==0&&p!==l.length-1?null:e.jsxs("g",{children:[e.jsx("circle",{cx:m(p),cy:g(d.alexander),r:"6",fill:"#3b82f6",stroke:"white",strokeWidth:"3",style:{filter:"drop-shadow(0 2px 4px rgba(59, 130, 246, 0.3))"}}),e.jsx("circle",{cx:m(p),cy:g(d.philip),r:"6",fill:"#10b981",stroke:"white",strokeWidth:"3",style:{filter:"drop-shadow(0 2px 4px rgba(16, 185, 129, 0.3))"}})]},p))]}),!a&&e.jsxs("g",{transform:`translate(${h-b.right+15}, ${b.top+20})`,children:[e.jsx("rect",{x:-10,y:-15,width:85,height:110,fill:"white",stroke:"#e5e7eb",strokeWidth:"2",rx:"8",style:{filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))"}}),e.jsx("text",{x:30,y:-5,textAnchor:"middle",fontSize:"12",fill:"#374151",className:"font-bold",children:"Legende"}),e.jsx("line",{x1:5,y1:10,x2:20,y2:10,stroke:"#3b82f6",strokeWidth:"4"}),e.jsx("text",{x:25,y:14,fontSize:"11",fill:"#374151",className:"font-medium",children:"Alexander"}),e.jsx("line",{x1:5,y1:30,x2:20,y2:30,stroke:"#10b981",strokeWidth:"4"}),e.jsx("text",{x:25,y:34,fontSize:"11",fill:"#374151",className:"font-medium",children:"Philip"}),e.jsx("line",{x1:5,y1:50,x2:20,y2:50,stroke:"#8b5cf6",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("text",{x:25,y:54,fontSize:"11",fill:"#374151",className:"font-medium",children:"🍺 Bier"}),e.jsx("line",{x1:5,y1:70,x2:20,y2:70,stroke:"#f59e0b",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("text",{x:25,y:74,fontSize:"11",fill:"#374151",className:"font-medium",children:"🥃 Shots"}),e.jsx("line",{x1:5,y1:90,x2:20,y2:90,stroke:"#10b981",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("text",{x:25,y:94,fontSize:"11",fill:"#374151",className:"font-medium",children:"🍻 Mix"})]})]}),a&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2 text-center",children:"Legende"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:"w-5 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Alexander"})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:"w-5 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Philip"})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("span",{className:"text-lg",children:"🍺"}),e.jsx("span",{className:"text-sm",children:"Bier"})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("span",{className:"text-lg",children:"🥃"}),e.jsx("span",{className:"text-sm",children:"Shots"})]})]})]})]})};return k?e.jsxs("div",{className:"modern-card mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>Z(!o),children:[e.jsx("h3",{className:"font-bold text-lg text-text-primary",children:"📈 Alkoholverlauf beider Manager"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Alexander: "}),e.jsxs("span",{className:`font-bold ${i(((R=l[l.length-1])==null?void 0:R.alexander)||0)}`,children:[(((X=l[l.length-1])==null?void 0:X.alexander)||0).toFixed(2),"‰"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{children:"Philip: "}),e.jsxs("span",{className:`font-bold ${i(((I=l[l.length-1])==null?void 0:I.philip)||0)}`,children:[(((_=l[l.length-1])==null?void 0:_.philip)||0).toFixed(2),"‰"]})]})]}),e.jsx("button",{className:"text-2xl transition-transform duration-200",children:o?"📉":"📊"})]})]}),o&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"mb-4 text-sm text-text-muted",children:["BAK-Verlauf seit Trinkbeginn (",new Date(k).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit"}),")"]}),e.jsx(Q,{}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("div",{className:"font-medium text-yellow-800 mb-1",children:"⚠️ Grenzwerte"}),e.jsxs("div",{className:"text-yellow-700 space-y-1",children:[e.jsx("div",{children:"0,3‰: Reaktionszeit verlangsamt"}),e.jsx("div",{children:"0,5‰: Fahruntüchtig"}),e.jsx("div",{children:"1,0‰: Schwer betrunken"})]})]}),e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"font-medium text-blue-800 mb-1",children:"🔵 Alexander aktuell"}),e.jsxs("div",{className:"text-blue-700",children:[e.jsxs("div",{children:["Gewicht: ",z.aek.weight,"kg"]}),e.jsxs("div",{children:["Biere: ",T.alexander]}),e.jsxs("div",{children:["Shots: ",N.alexander.shots20+N.alexander.shots40]})]})]}),e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("div",{className:"font-medium text-green-800 mb-1",children:"🟢 Philip aktuell"}),e.jsxs("div",{className:"text-green-700",children:[e.jsxs("div",{children:["Gewicht: ",z.real.weight,"kg"]}),e.jsxs("div",{children:["Biere: ",T.philip]}),e.jsxs("div",{children:["Shots: ",N.philip.shots20+N.philip.shots40]})]})]})]}),s.length>0&&e.jsxs("div",{className:"mt-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsxs("div",{className:"font-medium text-purple-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"🍺"}),e.jsx("span",{children:"Getränke-Timeline (letzte 5)"})]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto custom-scrollbar",children:s.slice(-5).reverse().map((a,h)=>{var m,g,B,A,D,w,P,$,K,J;const u=((m=a.beers)==null?void 0:m.alexander)||0,b=((g=a.beers)==null?void 0:g.philip)||0,f=(((A=(B=a.shots)==null?void 0:B.alexander)==null?void 0:A.shots20)||0)+(((w=(D=a.shots)==null?void 0:D.alexander)==null?void 0:w.shots40)||0),v=((($=(P=a.shots)==null?void 0:P.philip)==null?void 0:$.shots20)||0)+(((J=(K=a.shots)==null?void 0:K.philip)==null?void 0:J.shots40)||0);return e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded-md border border-purple-100",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-xs text-purple-600 font-mono",children:new Date(a.timestamp).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[a.alexanderChange>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Alex:"}),u>0&&e.jsxs("span",{className:"flex items-center text-sm",children:["🍺",e.jsxs("span",{className:"text-xs text-blue-600 ml-0.5",children:["+",a.alexanderChange]})]}),f>0&&e.jsxs("span",{className:"flex items-center text-sm",children:["🥃",e.jsxs("span",{className:"text-xs text-blue-600 ml-0.5",children:["+",a.alexanderChange]})]})]}),a.philipChange>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Phil:"}),b>0&&e.jsxs("span",{className:"flex items-center text-sm",children:["🍺",e.jsxs("span",{className:"text-xs text-green-600 ml-0.5",children:["+",a.philipChange]})]}),v>0&&e.jsxs("span",{className:"flex items-center text-sm",children:["🥃",e.jsxs("span",{className:"text-xs text-green-600 ml-0.5",children:["+",a.philipChange]})]})]})]})]},h)})})]})]})]}):null};function ne({onNavigate:z,showHints:T=!1}){var C;const[N,k]=y.useState("alcohol"),[o,Z]=y.useState({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}}),[l,H]=y.useState({alexander:0,philip:0}),[s,q]=y.useState({alexander:{shots20:0,shots40:0},philip:{shots20:0,shots40:0}}),[x,G]=y.useState(null),E=y.useCallback(async()=>{try{console.log("🔄 Loading managers from database...");const t=await se.getManagers();if(console.log("📊 Manager data result:",t),t&&t.data&&Array.isArray(t.data)&&t.data.length>=2){console.log("✅ Manager data loaded successfully:",t.data);const r=t.data.find(c=>c.id===1)||{name:"Alexander",gewicht:110},n=t.data.find(c=>c.id===2)||{name:"Philip",gewicht:105};console.log("👤 AEK Manager:",r),console.log("👤 Real Manager:",n),Z({aek:{name:r.name,age:r.age||30,weight:r.gewicht},real:{name:n.name,age:n.age||30,weight:n.gewicht}})}else console.warn("⚠️ No manager data found, using defaults. Result:",t),Z({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}})}catch(t){console.error("❌ Error loading manager settings from database:",t),Z({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}})}},[]),[i,Q]=y.useState({alexander:{balance:0,totalEarnings:0},philip:{balance:0,totalEarnings:0},gameCounter:0,rounds:[],currentRound:{active:!1,roundNumber:1,games:[],startTime:null}}),[R,X]=y.useState({alexander:"",philip:""}),[I,_]=y.useState({alexander:!1,philip:!1});y.useEffect(()=>{E();const t=localStorage.getItem("beerConsumption");if(t)try{H(JSON.parse(t))}catch(j){console.error("Error loading beer consumption:",j)}const r=localStorage.getItem("shotConsumption");if(r)try{q(JSON.parse(r))}catch(j){console.error("Error loading shot consumption:",j)}const n=localStorage.getItem("drinkingStartTime");n&&G(n);const c=localStorage.getItem("bjTracking");if(c)try{const j=JSON.parse(c);Q(j)}catch(j){console.error("Error loading BJ tracking data:",j),Q({alexander:{balance:0,totalEarnings:0},philip:{balance:0,totalEarnings:0},gameCounter:0,rounds:[],currentRound:{active:!1,roundNumber:1,games:[],startTime:null}})}const S=()=>{E()};return window.addEventListener("managerSettingsChanged",S),()=>window.removeEventListener("managerSettingsChanged",S)},[E]);const a=t=>{H(t),localStorage.setItem("beerConsumption",JSON.stringify(t))},h=t=>{q(t),localStorage.setItem("shotConsumption",JSON.stringify(t))},u=t=>{const r={...l,[t]:l[t]+1};if(a(r),!x){const n=new Date().toISOString();G(n),localStorage.setItem("drinkingStartTime",n)}},b=()=>{const t={alexander:l.alexander+1,philip:l.philip+1};if(a(t),!x){const r=new Date().toISOString();G(r),localStorage.setItem("drinkingStartTime",r)}},f=(t,r)=>{const n=r===40?"shots40":"shots20",c={...s,[t]:{...s[t],[n]:s[t][n]+1}};if(h(c),!x){const S=new Date().toISOString();G(S),localStorage.setItem("drinkingStartTime",S)}},v=()=>{a({alexander:0,philip:0}),h({alexander:{shots20:0,shots40:0},philip:{shots20:0,shots40:0}}),G(null),localStorage.removeItem("drinkingStartTime")},m=(t,r,n,c=null)=>{if(!n.weight||t===0&&(!r||r.shots20===0&&r.shots40===0))return"0.00";const S=t*25*.789;let j=0;r&&(j=r.shots20*20*.2*.789+r.shots40*20*.4*.789);const M=S+j,V=n.gender==="male"?.7:.6;let O=M/(V*n.weight);if(c){const L=new Date,U=new Date(c),Y=(L-U)/(1e3*60*60)*.15;O=Math.max(0,O-Y)}return O.toFixed(2)},g=(t,r,n,c)=>{if(!n.weight||t===0&&(!r||r.shots20===0&&r.shots40===0)||!c)return null;const S=t*25*.789;let j=0;r&&(j=r.shots20*20*.2*.789+r.shots40*20*.4*.789);const M=S+j,V=n.gender==="male"?.7:.6,L=M/(V*n.weight)/.15,U=new Date(c);return new Date(U.getTime()+L*60*60*1e3)},B=({bac:t,name:r})=>{const n=parseFloat(t),S=Math.min(n/2*100,100),j=M=>M>=1?"bg-red-500":M>=.5?"bg-orange-500":M>=.3?"bg-yellow-500":"bg-green-500";return e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"0‰"}),e.jsxs("span",{children:[r," BAC"]}),e.jsx("span",{children:"2‰"})]}),e.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-4 relative",children:[e.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${j(n)}`,style:{width:`${S}%`}}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-white",children:[t,"‰"]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"Nüchtern"}),e.jsx("span",{children:"Betrunken"})]})]})},A=()=>{if(!x)return null;const t=new Date,r=new Date(x),n=(t-r)/(1e3*60*60);return n<1?`${Math.floor(n*60)} Minuten`:`${n.toFixed(1)} Stunden`},D=t=>{Q(t),localStorage.setItem("bjTracking",JSON.stringify(t))},w=(t,r)=>{const n={...i,[t]:{...i[t],balance:i[t].balance+r,totalEarnings:i[t].totalEarnings+r},gameCounter:i.gameCounter+1};i.currentRound.active||(n.currentRound={active:!0,roundNumber:i.rounds.length+1,games:[],startTime:new Date().toISOString()});const c={id:Date.now(),gameNumber:i.gameCounter+1,player:t,amount:r,timestamp:new Date().toISOString(),description:`${t==="alexander"?o.aek.name:o.real.name}: +${r.toFixed(2)}€`};n.currentRound.games=[...i.currentRound.games,c],D(n)},P=()=>{const t={...i,gameCounter:i.gameCounter+1};i.currentRound.active||(t.currentRound={active:!0,roundNumber:i.rounds.length+1,games:[],startTime:new Date().toISOString()});const r={id:Date.now(),gameNumber:i.gameCounter+1,player:null,amount:0,timestamp:new Date().toISOString(),description:"Unentschieden (0€)"};t.currentRound.games=[...i.currentRound.games,r],D(t)},$=()=>{const t={...i,currentRound:{active:!0,roundNumber:i.rounds.length+1,games:[],startTime:new Date().toISOString()}};D(t)},K=()=>{if(!i.currentRound.active)return;const t={id:Date.now(),roundNumber:i.currentRound.roundNumber,games:[...i.currentRound.games],startTime:i.currentRound.startTime,endTime:new Date().toISOString(),gamesCount:i.currentRound.games.length,alexanderTotal:i.currentRound.games.filter(n=>n.player==="alexander").reduce((n,c)=>n+c.amount,0),philipTotal:i.currentRound.games.filter(n=>n.player==="philip").reduce((n,c)=>n+c.amount,0)},r={...i,rounds:[...i.rounds,t],currentRound:{active:!1,roundNumber:i.rounds.length+2,games:[],startTime:null}};D(r)},J=()=>{D({alexander:{balance:0,totalEarnings:0},philip:{balance:0,totalEarnings:0},gameCounter:0,rounds:[],currentRound:{active:!1,roundNumber:1,games:[],startTime:null}})},d=(t,r)=>{X(n=>({...n,[t]:r}))},p=t=>{const r=parseFloat(R[t]);r&&r>0&&(w(t,r),X(n=>({...n,[t]:""})))},F=({currentGames:t,maxGames:r=10})=>{const n=Math.min(t/r*100,100),c=t>=r;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium mb-2",children:[e.jsx("span",{className:"text-purple-700",children:"Spiele-Fortschritt"}),e.jsxs("span",{className:`${c?"text-green-600":"text-purple-600"}`,children:[t,"/",r," Spiele"]})]}),e.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-3 relative overflow-hidden",children:[e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${c?"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-purple-500 to-purple-600"}`,style:{width:`${n}%`}}),c&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"✓ Abgeschlossen"})})]}),c&&e.jsx("div",{className:"text-center mt-2",children:e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"🎉 10 Spiele erreicht! Zeit für eine neue Runde?"})})]})},W=t=>{_(r=>({...r,[t]:!r[t]}))};return e.jsxs("div",{className:"p-4 pb-24 mobile-safe-bottom",children:[e.jsxs("div",{className:"mb-6 animate-mobile-slide-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-info rounded-ios-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl",children:"🍺"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-title1 font-bold text-text-primary",children:"Alkohol & Blackjack"}),e.jsx("p",{className:"text-footnote text-text-secondary",children:"Alexander vs Philip - Getränke und Kartenspiele verfolgen"})]})]}),e.jsx("div",{className:"w-full h-1 bg-bg-tertiary rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-info w-3/4 rounded-full animate-pulse-gentle"})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>k("alcohol"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 ${N==="alcohol"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"🍺 Alkohol-Tracker"}),e.jsx("button",{onClick:()=>k("blackjack"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 ${N==="blackjack"?"bg-white text-red-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"🃏 Blackjack-Tracker"})]})}),N==="alcohol"&&e.jsxs(e.Fragment,{children:[x&&e.jsxs("div",{className:"mb-4 text-sm text-text-muted",children:["📅 Trinken gestartet vor: ",A()]}),e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-blue-50 to-green-50 border-2 border-blue-200",children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"⚡"}),e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:"Schnell-Aktionen"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("button",{onClick:b,className:"bg-gradient-to-r from-blue-600 to-green-600 hover:from-blue-700 hover:to-green-700 text-white px-6 py-4 rounded-xl transition-all duration-200 font-medium text-lg shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🍻"}),e.jsx("span",{children:"Beiden ein Bier hinzufügen"})]}),e.jsxs("button",{onClick:v,className:"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-4 py-3 rounded-xl transition-all duration-200 font-medium shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🔄"}),e.jsx("span",{children:"Zurücksetzen"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-blue-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🔵"}),e.jsx("span",{children:o.aek.name})]}),e.jsxs("div",{className:"text-sm text-blue-600 bg-blue-200 px-3 py-1 rounded-full font-medium",children:[o.aek.weight,"kg"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsx("button",{onClick:()=>u("alexander"),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🍺 + Bier"}),e.jsx("button",{onClick:()=>f("alexander",20),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🥃 Shot 20%"}),e.jsx("button",{onClick:()=>f("alexander",40),className:"bg-blue-700 hover:bg-blue-800 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🥃 Shot 40%"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-blue-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-blue-700",children:l.alexander}),e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"🍺"})]}),e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-blue-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-blue-700",children:s.alexander.shots20}),e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"🥃20%"})]}),e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-blue-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-blue-700",children:s.alexander.shots40}),e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"🥃40%"})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-100 to-blue-50 border border-blue-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-700 mb-2",children:[m(l.alexander,s.alexander,{weight:o.aek.weight,gender:"male"},x),"‰"]}),e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Blutalkoholkonzentration (BAK)"}),(l.alexander>0||s.alexander.shots20>0||s.alexander.shots40>0)&&e.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:[l.alexander>0&&`${l.alexander} × 0,5L Bier`,l.alexander>0&&(s.alexander.shots20>0||s.alexander.shots40>0)&&" + ",s.alexander.shots20>0&&`${s.alexander.shots20} × 2cl (20%)`,s.alexander.shots20>0&&s.alexander.shots40>0&&" + ",s.alexander.shots40>0&&`${s.alexander.shots40} × 2cl (40%)`]})]}),e.jsx(B,{bac:m(l.alexander,s.alexander,{weight:o.aek.weight,gender:"male"},x),name:"Alexander"}),x&&(l.alexander>0||s.alexander.shots20>0||s.alexander.shots40>0)&&e.jsx("div",{className:"mt-3 text-center text-sm text-blue-600",children:(()=>{const t=g(l.alexander,s.alexander,{weight:o.aek.weight,gender:"male"},x);return t&&t>new Date?`🕐 Wieder nüchtern: ${t.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})}`:parseFloat(m(l.alexander,s.alexander,{weight:o.aek.weight,gender:"male"},x))===0?"✅ Bereits nüchtern":null})()})]})]}),e.jsxs("div",{className:"modern-card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-300 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-green-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🟢"}),e.jsx("span",{children:o.real.name})]}),e.jsxs("div",{className:"text-sm text-green-600 bg-green-200 px-3 py-1 rounded-full font-medium",children:[o.real.weight,"kg"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsx("button",{onClick:()=>u("philip"),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🍺 + Bier"}),e.jsx("button",{onClick:()=>f("philip",20),className:"bg-green-500 hover:bg-green-600 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🥃 Shot 20%"}),e.jsx("button",{onClick:()=>f("philip",40),className:"bg-green-700 hover:bg-green-800 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🥃 Shot 40%"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-green-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-green-700",children:l.philip}),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"🍺"})]}),e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-green-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-green-700",children:s.philip.shots20}),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"🥃20%"})]}),e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-green-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-green-700",children:s.philip.shots40}),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"🥃40%"})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-100 to-green-50 border border-green-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-700 mb-2",children:[m(l.philip,s.philip,{weight:o.real.weight,gender:"male"},x),"‰"]}),e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Blutalkoholkonzentration (BAK)"}),(l.philip>0||s.philip.shots20>0||s.philip.shots40>0)&&e.jsxs("div",{className:"text-xs text-green-500 mt-1",children:[l.philip>0&&`${l.philip} × 0,5L Bier`,l.philip>0&&(s.philip.shots20>0||s.philip.shots40>0)&&" + ",s.philip.shots20>0&&`${s.philip.shots20} × 2cl (20%)`,s.philip.shots20>0&&s.philip.shots40>0&&" + ",s.philip.shots40>0&&`${s.philip.shots40} × 2cl (40%)`]})]}),e.jsx(B,{bac:m(l.philip,s.philip,{weight:o.real.weight,gender:"male"},x),name:"Philip"}),x&&(l.philip>0||s.philip.shots20>0||s.philip.shots40>0)&&e.jsx("div",{className:"mt-3 text-center text-sm text-green-600",children:(()=>{const t=g(l.philip,s.philip,{weight:o.real.weight,gender:"male"},x);return t&&t>new Date?`🕐 Wieder nüchtern: ${t.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})}`:parseFloat(m(l.philip,s.philip,{weight:o.real.weight,gender:"male"},x))===0?"✅ Bereits nüchtern":null})()})]})]})]}),e.jsxs("div",{className:"modern-card mt-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"📊 Erweiterte Statistiken"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"🍻 Aktuelle Session"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-text-primary",children:l.alexander+l.philip}),e.jsx("div",{className:"text-sm text-text-muted",children:"Biere gesamt"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-text-primary",children:[((l.alexander+l.philip)*.5).toFixed(1),"L"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Biervolumen"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-text-primary",children:s.alexander.shots20+s.alexander.shots40+s.philip.shots20+s.philip.shots40}),e.jsx("div",{className:"text-sm text-text-muted",children:"Shots gesamt"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-text-primary",children:[(s.alexander.shots20+s.alexander.shots40+s.philip.shots20+s.philip.shots40)*2,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Shot-Volumen"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"👥 Spieler-Vergleich"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("h5",{className:"font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🔵"}),o.aek.name]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Biere:"}),e.jsx("span",{className:"font-semibold",children:l.alexander})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shots (20%):"}),e.jsx("span",{className:"font-semibold",children:s.alexander.shots20})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shots (40%):"}),e.jsx("span",{className:"font-semibold",children:s.alexander.shots40})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{children:"Aktueller BAK:"}),e.jsxs("span",{className:"font-bold text-blue-700",children:[m(l.alexander,s.alexander,o.aek,x),"‰"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Alkohol-Volumen:"}),e.jsxs("span",{className:"font-semibold",children:[(l.alexander*.5*.05+s.alexander.shots20*.02*.2+s.alexander.shots40*.02*.4).toFixed(2),"L"]})]})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("h5",{className:"font-semibold text-green-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🟢"}),o.real.name]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Biere:"}),e.jsx("span",{className:"font-semibold",children:l.philip})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shots (20%):"}),e.jsx("span",{className:"font-semibold",children:s.philip.shots20})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shots (40%):"}),e.jsx("span",{className:"font-semibold",children:s.philip.shots40})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{children:"Aktueller BAK:"}),e.jsxs("span",{className:"font-bold text-green-700",children:[m(l.philip,s.philip,o.real,x),"‰"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Alkohol-Volumen:"}),e.jsxs("span",{className:"font-semibold",children:[(l.philip*.5*.05+s.philip.shots20*.02*.2+s.philip.shots40*.02*.4).toFixed(2),"L"]})]})]})]})]})]}),x&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"⏰ Session-Info"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsx("div",{className:"text-lg font-bold text-indigo-700",children:A()}),e.jsx("div",{className:"text-sm text-indigo-600",children:"Trinkdauer"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"text-lg font-bold text-purple-700",children:[Math.max(parseFloat(m(l.alexander,s.alexander,o.aek,x)),parseFloat(m(l.philip,s.philip,o.real,x))).toFixed(2),"‰"]}),e.jsx("div",{className:"text-sm text-purple-600",children:"Höchster BAK"})]}),e.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("div",{className:"text-lg font-bold text-orange-700",children:((l.alexander+l.philip)/Math.max(1,parseFloat(((C=A())==null?void 0:C.split(" ")[0])||"1"))).toFixed(1)}),e.jsx("div",{className:"text-sm text-orange-600",children:"Biere/Stunde"})]})]})]}),x&&(l.alexander>0||l.philip>0||s.alexander.shots20>0||s.alexander.shots40>0||s.philip.shots20>0||s.philip.shots40>0)&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"🕐 Nüchternzeit-Prognose"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(()=>{const t=g(l.alexander,s.alexander,o.aek,x),r=g(l.philip,s.philip,o.real,x);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:o.aek.name}),e.jsx("div",{className:"text-lg font-bold text-blue-800",children:t?t.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}):"Bereits nüchtern"}),e.jsx("div",{className:"text-xs text-blue-600",children:t?`${Math.ceil((t-new Date)/(1e3*60*60))}h verbleibend`:"✅"})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-green-700 mb-1",children:o.real.name}),e.jsx("div",{className:"text-lg font-bold text-green-800",children:r?r.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}):"Bereits nüchtern"}),e.jsx("div",{className:"text-xs text-green-600",children:r?`${Math.ceil((r-new Date)/(1e3*60*60))}h verbleibend`:"✅"})]})]})})()})]})]}),e.jsx(re,{managers:o,beerConsumption:l,shotConsumption:s,drinkingStartTime:x}),T&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"ℹ️ Hinweise"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsx("li",{children:"• BAK-Berechnung basiert auf der Widmark-Formel"}),e.jsx("li",{children:"• Annahme: 0,5L Bier mit 5% Alkoholgehalt"}),e.jsx("li",{children:"• Shots: 2cl mit 20% oder 40% Alkoholgehalt"}),e.jsx("li",{children:"• Abbau: 0,15‰ pro Stunde"}),e.jsx("li",{children:"• Farbkodierung: Grün (0-0,3‰), Gelb (0,3-0,5‰), Orange (0,5-1,0‰), Rot (>1,0‰)"}),e.jsx("li",{children:"• Manager-Daten können unter Admin → Team-Verwaltung angepasst werden"})]})]})]}),N==="blackjack"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"🃏 BJ-Tracking System"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Neues Design: Separate Buttons für Alexander und Philip • Nur positive Beträge • Allgemeiner Spielcounter"})]}),e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-300",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-purple-700 flex items-center gap-2",children:"🎯 Übersicht"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-purple-200 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-700 mb-1",children:i.gameCounter}),e.jsx("div",{className:"text-sm text-purple-600 mb-3",children:"Gespielte Spiele"}),i.currentRound.active&&e.jsx("div",{className:"mt-3",children:e.jsx(F,{currentGames:i.currentRound.games.length,maxGames:10})})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border-2 border-blue-300 text-center",children:[e.jsxs("h5",{className:"font-bold text-blue-700 mb-2 flex items-center justify-center gap-2",children:["🔵 ",o.aek.name]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["+",i.alexander.balance.toFixed(2),"€"]}),e.jsx("div",{className:"text-xs text-blue-600",children:"Kontostand"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border-2 border-green-300 text-center",children:[e.jsxs("h5",{className:"font-bold text-green-700 mb-2 flex items-center justify-center gap-2",children:["🟢 ",o.real.name]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["+",i.philip.balance.toFixed(2),"€"]}),e.jsx("div",{className:"text-xs text-green-600",children:"Kontostand"})]})]})]}),e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-300",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-orange-700 flex items-center gap-2",children:"🎮 Hauptbuttons"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h5",{className:"font-medium text-blue-700 text-center mb-3",children:["🔵 ",o.aek.name]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>w("alexander",5),className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🏆 Win",e.jsx("br",{}),"+5.00€"]}),e.jsxs("button",{onClick:()=>w("alexander",7.5),className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🃏 BJ",e.jsx("br",{}),"+7.50€"]}),e.jsxs("button",{onClick:()=>w("alexander",2.5),className:"bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🤝 BJ-Push",e.jsx("br",{}),"+2.50€"]}),e.jsxs("button",{onClick:()=>w("alexander",10),className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🎲 Double",e.jsx("br",{}),"+10.00€"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>W("alexander"),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-lg text-sm font-medium transition-all border border-blue-300 hover:border-blue-400 min-h-[44px]",children:I.alexander?"🔼 Weniger Optionen":"🔽 Mehr Beträge"})}),I.alexander&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-3 animate-fade-in",children:[2.5,5,7.5,10,12.5,15,17.5,20,22.5,25,27.5,30].map(t=>e.jsxs("button",{onClick:()=>w("alexander",t),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-3 rounded-md text-sm font-medium transition-all border border-blue-300 hover:border-blue-400 min-h-[44px]",children:["+",t.toFixed(2),"€"]},t))}),e.jsxs("div",{className:"mt-3 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h6",{className:"text-xs font-medium text-blue-700 mb-2",children:"💰 Eigener Betrag:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"0",step:"0.01",value:R.alexander,onChange:t=>d("alexander",t.target.value),placeholder:"0.00",className:"flex-1 px-3 py-3 border border-blue-300 rounded-md text-sm text-center focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[44px]"}),e.jsx("button",{onClick:()=>p("alexander"),disabled:!R.alexander||parseFloat(R.alexander)<=0,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md text-sm font-medium transition-all min-h-[44px] min-w-[44px]",children:"+€"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h5",{className:"font-medium text-green-700 text-center mb-3",children:["🟢 ",o.real.name]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>w("philip",5),className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🏆 Win",e.jsx("br",{}),"+5.00€"]}),e.jsxs("button",{onClick:()=>w("philip",7.5),className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🃏 BJ",e.jsx("br",{}),"+7.50€"]}),e.jsxs("button",{onClick:()=>w("philip",2.5),className:"bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🤝 BJ-Push",e.jsx("br",{}),"+2.50€"]}),e.jsxs("button",{onClick:()=>w("philip",10),className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🎲 Double",e.jsx("br",{}),"+10.00€"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>W("philip"),className:"bg-green-100 hover:bg-green-200 text-green-700 px-4 py-2 rounded-lg text-sm font-medium transition-all border border-green-300 hover:border-green-400 min-h-[44px]",children:I.philip?"🔼 Weniger Optionen":"🔽 Mehr Beträge"})}),I.philip&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-3 animate-fade-in",children:[2.5,5,7.5,10,12.5,15,17.5,20,22.5,25,27.5,30].map(t=>e.jsxs("button",{onClick:()=>w("philip",t),className:"bg-green-100 hover:bg-green-200 text-green-700 px-3 py-3 rounded-md text-sm font-medium transition-all border border-green-300 hover:border-green-400 min-h-[44px]",children:["+",t.toFixed(2),"€"]},t))}),e.jsxs("div",{className:"mt-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h6",{className:"text-xs font-medium text-green-700 mb-2",children:"💰 Eigener Betrag:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"0",step:"0.01",value:R.philip,onChange:t=>d("philip",t.target.value),placeholder:"0.00",className:"flex-1 px-3 py-3 border border-green-300 rounded-md text-sm text-center focus:outline-none focus:ring-2 focus:ring-green-500 min-h-[44px]"}),e.jsx("button",{onClick:()=>p("philip"),disabled:!R.philip||parseFloat(R.philip)<=0,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-3 rounded-md text-sm font-medium transition-all min-h-[44px] min-w-[44px]",children:"+€"})]})]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:P,className:"bg-gradient-to-r from-gray-400 to-gray-500 hover:from-gray-500 hover:to-gray-600 text-white px-8 py-4 rounded-lg transition-all duration-200 font-bold shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:"🤝 Unentschieden (0€)"})})]}),e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-indigo-50 to-blue-50 border-2 border-indigo-300",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-indigo-700 flex items-center gap-2",children:"📋 Runden-Verwaltung"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[i.currentRound.active?e.jsx("button",{onClick:K,className:"bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white px-6 py-4 rounded-lg transition-all duration-200 font-bold shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:"✅ Runde abschließen"}):e.jsxs("div",{className:"text-center",children:[e.jsx("button",{onClick:$,className:"bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 text-white px-6 py-4 rounded-lg transition-all duration-200 font-bold shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:"▶️ Neue Runde starten"}),e.jsx("p",{className:"text-xs text-indigo-600 mt-2",children:"💡 Oder klicke einfach einen Spiel-Button - die Runde startet automatisch!"})]}),e.jsx("button",{onClick:J,className:"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-6 py-4 rounded-lg transition-all duration-200 font-bold shadow-md hover:shadow-lg min-h-[56px]",children:"🔄 Alles zurücksetzen"})]}),i.currentRound.active&&e.jsx("div",{className:"mt-4 p-4 bg-white rounded-lg border border-indigo-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-indigo-700 mb-2",children:["📍 Aktuelle Runde ",i.currentRound.roundNumber]}),e.jsxs("div",{className:"text-xs text-indigo-600 mb-3",children:[i.currentRound.games.length," Spiele in dieser Runde"]}),i.currentRound.games.length>=10&&e.jsx("div",{className:"bg-green-100 border border-green-300 rounded-lg p-2",children:e.jsx("span",{className:"text-green-700 text-xs font-medium",children:'🎉 10 Spiele erreicht! Klicke "Runde abschließen" für die nächste Runde.'})})]})})]}),i.rounds.length>0&&e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-gray-700 flex items-center gap-2",children:'📊 Runden-Übersicht ("Bankauszug")'}),e.jsx("div",{className:"space-y-4",children:i.rounds.slice().reverse().map(t=>e.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h5",{className:"font-bold text-gray-700",children:["📋 Runde ",t.roundNumber]}),e.jsxs("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded-full text-gray-600",children:[t.gamesCount," Spiele"]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(t.endTime).toLocaleString("de-DE")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-blue-700",children:["🔵 ",o.aek.name]}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["+",t.alexanderTotal.toFixed(2),"€"]})]})}),e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-green-700",children:["🟢 ",o.real.name]}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["+",t.philipTotal.toFixed(2),"€"]})]})})]}),e.jsxs("details",{className:"mt-3",children:[e.jsxs("summary",{className:"cursor-pointer text-sm font-medium text-gray-600 hover:text-gray-800",children:["🎮 Spiele anzeigen (",t.gamesCount,")"]}),e.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-y-auto",children:t.games.map(r=>e.jsxs("div",{className:"text-xs p-2 bg-white rounded border border-gray-200 flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-600",children:["Spiel ",r.gameNumber]}),e.jsx("span",{className:"font-medium",children:r.description}),e.jsx("span",{className:"text-gray-500",children:new Date(r.timestamp).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})})]},r.id))})]})]},t.id))})]}),i.currentRound.active&&i.currentRound.games.length>0&&e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-300",children:[e.jsxs("h4",{className:"font-bold text-lg mb-4 text-amber-700 flex items-center gap-2",children:["🎯 Aktuelle Runde ",i.currentRound.roundNumber," - Spiele"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:i.currentRound.games.map(t=>e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-amber-200 flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-medium text-amber-700",children:["Spiel ",t.gameNumber]}),e.jsx("span",{className:"text-sm",children:t.description}),e.jsx("span",{className:"text-xs text-amber-600",children:new Date(t.timestamp).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})})]},t.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"modern-card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300",children:[e.jsxs("h5",{className:"font-bold text-blue-700 mb-3 flex items-center gap-2",children:["🔵 ",o.aek.name," - Statistiken"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 text-sm",children:"Aktueller Kontostand:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["+",i.alexander.balance.toFixed(2),"€"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 text-sm",children:"Gesamt-Verdienst:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["+",i.alexander.totalEarnings.toFixed(2),"€"]})]})]})]}),e.jsxs("div",{className:"modern-card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-300",children:[e.jsxs("h5",{className:"font-bold text-green-700 mb-3 flex items-center gap-2",children:["🟢 ",o.real.name," - Statistiken"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700 text-sm",children:"Aktueller Kontostand:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["+",i.philip.balance.toFixed(2),"€"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700 text-sm",children:"Gesamt-Verdienst:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["+",i.philip.totalEarnings.toFixed(2),"€"]})]})]})]})]})]})]})}export{ne as default};
