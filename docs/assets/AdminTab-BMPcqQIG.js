import{b as q,c as Ne,S as ie,s as M,u as _,r as S,j as e,z as I,t as G,a as de,L as we,d as De,e as Te,f as Fe,h as $e,i as ze,k as X,l as oe,g as ue,m as Ie,n as Me,o as Be,p as Ve}from"./main-CFoKJTdF.js";import{g as Le,r as Re,u as Ke,a as Oe,s as Ge,c as _e,b as Pe}from"./versionTeamManager-C6DqSUEl.js";import{B as re}from"./banTypes-DuNOJEIt.js";import{d as Q}from"./dataManager-BjvOBoLF.js";const Ue="alcoholCalculatorValues",he="2.0",ne=(r=null)=>{const s=r||q();return{aekPlayer:"",realPlayer:"",aekGoals:0,realGoals:0,mode:"manual",gameDay:new Date().toISOString().split("T")[0],beerCount:{aek:0,real:0},alexanderShots:{cl40:0,cl20:0},philipShots:{cl40:0,cl20:0},cumulativeShots:{aek:0,real:0,total:0,lastMatchId:null,lastUpdated:null},lastUpdated:new Date().toISOString(),drinkingStartTime:null,version:he,season:s}},ge=(r=null)=>{try{const s=r||q(),a=Ne("alcoholCalculator",s);let t=localStorage.getItem(a);if(!t&&s===ie.LEGACY&&(t=localStorage.getItem(Ue),t&&(console.log("Migrating legacy alcohol calculator data to season-based storage"),localStorage.setItem(a,t))),!t)return ne(s);const l=JSON.parse(t);if(!l.version||l.version!==he&&l.version!=="1.0")return console.log("Alcohol calculator: Version mismatch, using defaults"),ne(s);const d=ne(s);return{...d,...l,season:s,beerCount:{...d.beerCount,...l.beerCount||{}},alexanderShots:{...d.alexanderShots,...l.alexanderShots||{}},philipShots:{...d.philipShots,...l.philipShots||{}},cumulativeShots:{...d.cumulativeShots,...l.cumulativeShots||{}}}}catch(s){return console.error("Error loading alcohol calculator values:",s),ne(r)}},He=(r,s=null)=>{try{const a=s||q(),t={...r,lastUpdated:new Date().toISOString(),version:he,season:a},l=Ne("alcoholCalculator",a);return localStorage.setItem(l,JSON.stringify(t)),typeof window<"u"&&window.dispatchEvent(new CustomEvent("alcoholCalculatorValuesChanged",{detail:{...t,season:a}})),!0}catch(a){return console.error("Error saving alcohol calculator values:",a),!1}},Ze=(r,s,a=null)=>{const t=a||q(),l={...s,...r,lastUpdated:new Date().toISOString(),season:t};return r.beerCount&&(l.beerCount={...s.beerCount,...r.beerCount}),r.cumulativeShots&&(l.cumulativeShots={...s.cumulativeShots,...r.cumulativeShots}),He(l,t),l},Se=(r,s=null,a=null)=>{try{const t=a||q(),l=s||ge(t);if(!r||typeof r!="object")return console.warn("Invalid match object provided to addShotsFromNewMatch"),l;const d=r.goalsa||0,g=r.goalsb||0,b=Math.floor(g/2)*2,c=Math.floor(d/2)*2;return Ze({cumulativeShots:{aek:l.cumulativeShots.aek+b,real:l.cumulativeShots.real+c,total:l.cumulativeShots.total+b+c,lastMatchId:r.id,lastUpdated:new Date().toISOString()}},l,t)}catch(t){return console.error("Error adding shots from new match:",t),s||ge(a)}};typeof window<"u"&&(window.updateAlcoholCalculatorFromMatch=r=>{try{Se(r)}catch(s){console.warn("Failed to update alcohol calculator from match:",s)}});async function me(r){var s,a;try{if(console.log(`Starting deletion of match ${r}`),r==null)throw new Error("No match ID provided for deletion");console.log(`Processing match ID for deletion: ${r} (type: ${typeof r})`);let t;if(typeof r=="string"){if(r.trim()==="")throw new Error("Empty string provided as match ID");if(t=parseInt(r,10),isNaN(t))throw new Error(`Invalid match ID string: "${r}" cannot be converted to number`)}else if(typeof r=="bigint"){const h=Number(r);BigInt(h)===r?t=h:t=r}else if(typeof r=="number")t=r;else throw new Error(`Unsupported match ID type: ${typeof r}. Expected string, number, or bigint.`);const l=typeof t=="number"&&Number.isInteger(t)&&t>0,d=typeof t=="bigint"&&t>0n;if(!l&&!d)throw new Error(`Invalid match ID after conversion: ${t} (type: ${typeof t}). Must be a positive integer.`);console.log(`Converted match ID: ${t} (type: ${typeof t})`);const{data:g,error:b}=await M.select("matches","date,prizeaek,prizereal,goalslista,goalslistb,manofthematch,yellowa,reda,yellowb,redb",{id:t});if(b)throw console.error("Error fetching match:",b),b;if(!g||g.length===0){const h=`Match with ID ${t} not found in database`;throw console.error(h),new Error(h)}const c=g[0];c.date||console.warn(`Match ${t} has no date - this may cause issues with transaction cleanup`),console.log("Deleting match data:",c),console.log(`Fetching transactions for match ${t} before deletion`);const{data:u,error:i}=await M.select("transactions","team,amount,type",{match_id:t});if(i)throw console.error("Error fetching transactions:",i),i;const o=u||[];if(console.log(`Found ${o.length} transactions to reverse:`,o.map(h=>`${h.type}: ${h.amount} (${h.team})`)),console.log(`Reversing financial changes for ${(o==null?void 0:o.length)||0} transactions`),o&&o.length>0)for(const h of o)if(h.type==="Echtgeld-Ausgleich"){const{data:w,error:n}=await M.select("finances","debt",{team:h.team});if(n){console.error(`Error fetching finances for team ${h.team}:`,n);continue}const m=w&&w.length>0?w[0]:null;let E=((m==null?void 0:m.debt)||0)-h.amount;E<0&&(E=0),await M.update("finances",{debt:E},{team:h.team})}else{const{data:w,error:n}=await M.select("finances","balance",{team:h.team});if(n){console.error(`Error fetching finances for team ${h.team}:`,n);continue}const m=w&&w.length>0?w[0]:null;let E=((m==null?void 0:m.balance)||0)-h.amount;E<0&&(E=0),await M.update("finances",{balance:E},{team:h.team})}if(typeof c.prizeaek=="number"&&c.prizeaek!==0){const{data:h,error:w}=await M.select("finances","balance",{team:"AEK"});if(w)console.error("Error fetching AEK finances:",w);else if(h&&h.length>0){const n=h[0];let m=((n==null?void 0:n.balance)||0)-c.prizeaek;m<0&&(m=0),await M.update("finances",{balance:m},{team:"AEK"})}}if(typeof c.prizereal=="number"&&c.prizereal!==0){const{data:h,error:w}=await M.select("finances","balance",{team:"Real"});if(w)console.error("Error fetching Real finances:",w);else if(h&&h.length>0){const n=h[0];let m=((n==null?void 0:n.balance)||0)-c.prizereal;m<0&&(m=0),await M.update("finances",{balance:m},{team:"Real"})}}console.log(`Deleting ${(o==null?void 0:o.length)||0} transactions for match ${t}`);const{error:N}=await M.delete("transactions",{match_id:t});if(N)throw console.error("Error deleting transactions:",N),N;const{data:f,error:x}=await M.select("transactions","id",{match_id:t});if(x)console.warn("Could not verify transaction deletion:",x);else{if(f&&f.length>0)throw console.error(`‚ùå Failed to delete ${f.length} transactions for match ${t}`),new Error(`Transaction deletion incomplete: ${f.length} transactions still exist`);console.log(`‚úÖ Successfully deleted all transactions for match ${t}`)}const D=async(h,w)=>{if(!h||!Array.isArray(h))return;const n={};if(h.length>0&&typeof h[0]=="object"&&h[0].player!==void 0)h.forEach(m=>{m.player&&(n[m.player]=(n[m.player]||0)+(m.count||1))});else for(const m of h)m&&(n[m]=(n[m]||0)+1);for(const[m,y]of Object.entries(n)){const{data:E,error:v}=await M.select("players","goals",{name:m,team:w});if(v){console.error(`Error fetching player ${m} for goal removal:`,v);continue}if(!E||E.length===0){console.warn(`Player ${m} not found in team ${w} for goal removal`);continue}const z=E[0];let R=((z==null?void 0:z.goals)||0)-y;R<0&&(R=0);const{error:A}=await M.update("players",{goals:R},{name:m,team:w});A?console.error(`Error updating goals for player ${m}:`,A):console.log(`‚úÖ Updated goals for ${m} (${w}): ${z.goals} ‚Üí ${R}`)}};if(await D(c.goalslista,"AEK"),await D(c.goalslistb,"Real"),c.manofthematch){let h=null;const w=(n,m)=>!n||!n.length?!1:typeof n[0]=="object"&&n[0].player!==void 0?n.some(y=>y.player===m):n.includes(m);if(w(c.goalslista,c.manofthematch))h="AEK";else if(w(c.goalslistb,c.manofthematch))h="Real";else{const{data:n,error:m}=await M.select("players","team",{name:c.manofthematch});m?console.error(`Error fetching player ${c.manofthematch} for team lookup:`,m):n&&n.length>0?h=n[0].team:console.warn(`Player ${c.manofthematch} not found for SdS team determination`)}if(h){const{data:n,error:m}=await M.select("spieler_des_spiels","count",{name:c.manofthematch,team:h});if(m)console.error(`Error fetching SdS entry for ${c.manofthematch}:`,m);else if(n&&n.length>0){const y=n[0],E=Math.max(0,y.count-1),{error:v}=await M.update("spieler_des_spiels",{count:E},{name:c.manofthematch,team:h});v?console.error(`Error updating SdS count for ${c.manofthematch}:`,v):console.log(`‚úÖ Updated SdS count for ${c.manofthematch} (${h}): ${y.count} ‚Üí ${E}`)}else console.warn(`SdS entry for ${c.manofthematch} in team ${h} not found`)}}(c.yellowa>0||c.reda>0||c.yellowb>0||c.redb>0)&&console.log(`Match had cards: AEK(${c.yellowa}Y,${c.reda}R) Real(${c.yellowb}Y,${c.redb}R)`),console.log(`Deleting match ${t} from matches table`);const{error:p}=await M.delete("matches",{id:t});if(p)throw console.error("Error deleting match:",p),p;const{data:$,error:k}=await M.select("matches","id",{id:t});if(k)console.warn("Could not verify match deletion:",k);else{if($&&$.length>0)throw console.error(`‚ùå Failed to delete match ${t}`),new Error(`Match deletion failed: match ${t} still exists`);console.log(`‚úÖ Successfully deleted match ${t}`)}console.log(`‚úÖ Successfully deleted match ${t} and all related data`),console.log(`üìã Deletion Summary for Match ${t}:`),console.log("   - Match record: deleted"),console.log(`   - Transactions: ${o.length} deleted`),console.log(`   - Player goals: updated for ${((s=c.goalslista)==null?void 0:s.length)||0} AEK + ${((a=c.goalslistb)==null?void 0:a.length)||0} Real goals`),console.log(`   - Player of the match: ${c.manofthematch?"updated":"none"}`),console.log(`   - Prize money: AEK ${c.prizeaek||0}, Real ${c.prizereal||0} (reversed)`),console.log(`   - Match date: ${c.date}`)}catch(t){throw console.error(`Failed to delete match ${typeof matchId<"u"?matchId:r||"unknown"}:`,t),console.error("Error details:",{matchId:typeof matchId<"u"?matchId:"undefined",matchIdType:typeof matchId,originalId:r,originalIdType:typeof r,errorMessage:t.message,errorStack:t.stack}),t}}class be{static async submitMatch(s){var $;const{date:a,teama:t="AEK",teamb:l="Real",goalsa:d,goalsb:g,goalslista:b=[],goalslistb:c=[],ownGoalsA:u=0,ownGoalsB:i=0,yellowa:o=0,reda:N=0,yellowb:f=0,redb:x=0,manofthematch:D,editId:p=null}=s;try{const{prizeaek:k,prizereal:h,winner:w,loser:n}=this.calculatePrizeMoney(d,g,o,N,f,x);p&&await this.deleteMatchTransactions(p);const m=[...b],y=[...c];u>0&&y.push({count:u,player:"Eigentore_AEK"}),i>0&&m.push({count:i,player:"Eigentore_Real"});const E={date:a,teama:t,teamb:l,goalsa:parseInt(d)||0,goalsb:parseInt(g)||0,goalslista:b,goalslistb:c,yellowa:parseInt(o)||0,reda:parseInt(N)||0,yellowb:parseInt(f)||0,redb:parseInt(x)||0,manofthematch:D||null,prizeaek:k,prizereal:h},v=await M.insert("matches",E);if(v.error)throw new Error(`Match insert failed: ${v.error.message}`);const z=($=v.data)==null?void 0:$.id,R=new Date().toISOString().slice(0,10);if(m.length>0){const A=m.filter(V=>typeof V=="object"&&V.player?!V.player.startsWith("Eigentore_"):!V.startsWith("Eigentore_"));await this.updatePlayersGoals(A,"AEK")}if(y.length>0){const A=y.filter(V=>typeof V=="object"&&V.player?!V.player.startsWith("Eigentore_"):!V.startsWith("Eigentore_"));await this.updatePlayersGoals(A,"Real")}D&&await this.updatePlayerOfTheMatchStats(D),await this.processFinancialTransactions({matchId:z,date:R,prizeaek:k,prizereal:h,manofthematch:D,winner:w,loser:n}),await this.decrementBansAfterMatch();try{Se({id:z,goalsa:parseInt(d)||0,goalsb:parseInt(g)||0,date:a})}catch(A){console.warn("Failed to update alcohol calculator:",A)}return{success:!0,matchId:z,message:`Match ${t} vs ${l} (${d}:${g}) erfolgreich hinzugef√ºgt`}}catch(k){throw console.error("Error in submitMatch:",k),new Error(`Fehler beim Speichern des Matches: ${k.message}`)}}static calculatePrizeMoney(s,a,t,l,d,g){let b=0,c=0,u=null,i=null;return s>a?(u="AEK",i="Real"):s<a&&(u="Real",i="AEK"),u&&i&&(u==="AEK"?(b=1e6-a*5e4-t*2e4-l*5e4,c=-(5e5+s*5e4+d*2e4+g*5e4)):(c=1e6-s*5e4-d*2e4-g*5e4,b=-(5e5+a*5e4+t*2e4+l*5e4))),{prizeaek:b,prizereal:c,winner:u,loser:i}}static async updatePlayersGoals(s,a){const t={};if(s.length>0&&typeof s[0]=="object"&&s[0].player!==void 0)s.forEach(l=>{l.player&&!l.player.startsWith("Eigentore_")&&(t[l.player]=(t[l.player]||0)+(l.count||1))});else for(const l of s)!l||!l.trim()||l.startsWith("Eigentore_")||(t[l]=(t[l]||0)+1);for(const[l,d]of Object.entries(t))try{const g=await M.select("players","id, goals",{eq:{name:l,team:a}});if(g.data&&g.data.length>0){const b=g.data[0],c=(b.goals||0)+d;await M.update("players",{goals:c},b.id)}}catch(g){console.warn(`Failed to update goals for player ${l}:`,g)}}static async updatePlayerOfTheMatchStats(s){try{const a=await M.select("players","team",{eq:{name:s}});if(!a.data||a.data.length===0){console.warn(`Player ${s} not found for SdS stats`);return}const t=a.data[0].team,l=await M.select("spieler_des_spiels","*",{eq:{name:s,team:t}});if(l.data&&l.data.length>0){const d=l.data[0];await M.update("spieler_des_spiels",{count:d.count+1},d.id)}else await M.insert("spieler_des_spiels",{name:s,team:t,count:1})}catch(a){console.warn(`Failed to update SdS stats for ${s}:`,a)}}static async processFinancialTransactions({matchId:s,date:a,prizeaek:t,prizereal:l,manofthematch:d,winner:g,loser:b}){const c=await this.getTeamFinance("AEK"),u=await this.getTeamFinance("Real");let i=c.balance||0,o=u.balance||0;const N=d?await this.getSdSBonus(d,"AEK"):0,f=d?await this.getSdSBonus(d,"Real"):0;N>0&&(i+=N,await this.insertTransaction({date:a,type:"SdS Bonus",team:"AEK",amount:N,match_id:s,info:"SdS Bonus"}),await this.updateTeamBalance("AEK",i)),f>0&&(o+=f,await this.insertTransaction({date:a,type:"SdS Bonus",team:"Real",amount:f,match_id:s,info:"SdS Bonus"}),await this.updateTeamBalance("Real",o)),t!==0&&(i+=t,i<0&&(i=0),await this.insertTransaction({date:a,type:"Preisgeld",team:"AEK",amount:t,match_id:s,info:"Preisgeld"}),await this.updateTeamBalance("AEK",i)),l!==0&&(o+=l,o<0&&(o=0),await this.insertTransaction({date:a,type:"Preisgeld",team:"Real",amount:l,match_id:s,info:"Preisgeld"}),await this.updateTeamBalance("Real",o)),g&&b&&await this.processEchtgeldAusgleich({date:a,matchId:s,winner:g,loser:b,aekBalance:i,realBalance:o,prizeaek:t,prizereal:l,sdsBonusAek:N>0?1:0,sdsBonusReal:f>0?1:0,manofthematch:d})}static async getTeamFinance(s){const a=await M.select("finances","*",{eq:{team:s}});return a.data&&a.data.length>0?a.data[0]:{balance:0,debt:0}}static async getSdSBonus(s,a){const t=await M.select("players","team",{eq:{name:s}});return t.data&&t.data.length>0&&t.data[0].team===a?1e5:0}static async insertTransaction(s){return await M.insert("transactions",s)}static async updateTeamBalance(s,a){const t=await M.select("finances","id",{eq:{team:s}});return t.data&&t.data.length>0?await M.update("finances",{balance:a},t.data[0].id):await M.insert("finances",{team:s,balance:a,debt:0})}static async processEchtgeldAusgleich({date:s,matchId:a,winner:t,loser:l,aekBalance:d,realBalance:g,prizeaek:b,prizereal:c,sdsBonusAek:u,sdsBonusReal:i,manofthematch:o}){const N=await this.getTeamFinance("AEK"),f=await this.getTeamFinance("Real"),x={AEK:N.debt||0,Real:f.debt||0},D=(z,R,A)=>{let V=z;A&&(V+=1e5);let O=(Math.abs(R)-V)/1e5;return O<0&&(O=0),5+Math.round(O)},p=D(d,b,u),$=D(g,c,i),k=l==="AEK"?p:$,h=x[t],w=x[l],n=Math.min(h,k*1),m=Math.max(0,h-n),y=k*1-n,E=w+Math.max(0,y),v=await M.select("finances","id",{eq:{team:t}});if(v.data&&v.data.length>0&&await M.update("finances",{debt:m},v.data[0].id),y>0){await this.insertTransaction({date:s,type:"Echtgeld-Ausgleich",team:l,amount:Math.max(0,y),match_id:a,info:"Echtgeld-Ausgleich"});const z=await M.select("finances","id",{eq:{team:l}});z.data&&z.data.length>0&&await M.update("finances",{debt:E},z.data[0].id)}n>0&&await this.insertTransaction({date:s,type:"Echtgeld-Ausgleich (getilgt)",team:t,amount:-n,match_id:a,info:"Echtgeld-Ausgleich (getilgt)"})}static async deleteMatchTransactions(s){try{await me(s)}catch(a){throw console.error(`Failed to delete match ${s} comprehensively:`,a),a}}static async decrementBansAfterMatch(){try{const s=await M.select("bans","*");if(!s.data)return;for(const a of s.data)if(a.matchesserved<a.totalgames){const t=a.matchesserved+1;await M.update("bans",{matchesserved:t},a.id)}}catch(s){console.warn("Failed to decrement bans:",s)}}}function qe(){const{data:r}=_("players","*"),[s,a]=S.useState(!1),[t,l]=S.useState({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),[d,g]=S.useState(!1),b=(n,m,y)=>n.reduce((v,z)=>v+z.count,0)+y,c=n=>{l(m=>{const y={...m,...n};y.goalsa=b(y.goalslista,y.ownGoalsA,y.ownGoalsB),y.goalsb=b(y.goalslistb,y.ownGoalsB,y.ownGoalsA);const{prizeaek:E,prizereal:v}=be.calculatePrizeMoney(y.goalsa,y.goalsb,y.yellowa,y.reda,y.yellowb,y.redb);return y.prizeaek=E,y.prizereal=v,y})},u=(n,m)=>{c({[n]:m})},i=async n=>{n.preventDefault(),g(!0);try{const m=await be.submitMatch({date:t.date,teama:t.teama.trim(),teamb:t.teamb.trim(),goalsa:t.goalsa,goalsb:t.goalsb,goalslista:t.goalslista,goalslistb:t.goalslistb,ownGoalsA:t.ownGoalsA,ownGoalsB:t.ownGoalsB,yellowa:parseInt(t.yellowa)||0,reda:parseInt(t.reda)||0,yellowb:parseInt(t.yellowb)||0,redb:parseInt(t.redb)||0,manofthematch:t.manofthematch||null});l({teama:"AEK",teamb:"Real",date:new Date().toISOString().split("T")[0],goalsa:0,goalsb:0,goalslista:[],goalslistb:[],ownGoalsA:0,ownGoalsB:0,yellowa:0,reda:0,yellowb:0,redb:0,prizeaek:0,prizereal:0,manofthematch:"",motmTeamFilter:"all"}),a(!1),I.success(m.message),G("match-created",{matchId:m.matchId||"latest",date:t.date,teama:t.teama,teamb:t.teamb,goalsa:t.goalsa,goalsb:t.goalsb,manofthematch:t.manofthematch})}catch(m){console.error("Match submission error:",m),I.error(m.message||"Fehler beim Hinzuf√ºgen des Spiels")}finally{g(!1)}},o=()=>{if(!t.date||t.goalsa===t.goalsb||t.goalsa===0&&t.goalsb===0||!t.manofthematch||t.manofthematch.trim()==="")return!1;if(t.goalsa>0){const n=t.goalslista.reduce((y,E)=>y+E.count,0),m=t.ownGoalsB||0;if(n+m<t.goalsa)return!1}if(t.goalsb>0){const n=t.goalslistb.reduce((y,E)=>y+E.count,0),m=t.ownGoalsA||0;if(n+m<t.goalsb)return!1}return!0},N=()=>{const n=[];if(t.date||n.push("Datum fehlt"),t.goalsa===0&&t.goalsb===0&&n.push("Mindestens ein Tor erforderlich"),t.goalsa===t.goalsb&&(t.goalsa>0||t.goalsb>0)&&n.push("Unentschieden nicht erlaubt"),(!t.manofthematch||t.manofthematch.trim()==="")&&n.push("Spieler des Spiels fehlt"),t.goalsa>0){const m=t.goalslista.reduce((E,v)=>E+v.count,0),y=t.ownGoalsB||0;m+y<t.goalsa&&n.push(`AEK Torsch√ºtzen fehlen (${m+y}/${t.goalsa})`)}if(t.goalsb>0){const m=t.goalslistb.reduce((E,v)=>E+v.count,0),y=t.ownGoalsA||0;m+y<t.goalsb&&n.push(`Real Torsch√ºtzen fehlen (${m+y}/${t.goalsb})`)}return{isValid:n.length===0,issues:n}},f=(n,m)=>{const y=Math.max(0,(t[n]||0)+m);c({[n]:y})},x=n=>r?r.filter(m=>m.team===n):[],D=()=>r?t.motmTeamFilter==="all"?r:r.filter(n=>n.team===t.motmTeamFilter):[],p=(n,m)=>{const y=n==="AEK"?"goalslista":"goalslistb";c({[y]:t[y].map(E=>E.player===m?{...E,count:E.count+1}:E).concat(t[y].find(E=>E.player===m)?[]:[{player:m,count:1}])})},$=(n,m)=>{const y=n==="AEK"?"goalslista":"goalslistb";c({[y]:t[y].map(E=>E.player===m?{...E,count:Math.max(0,E.count-1)}:E).filter(E=>E.count>0)})},k=(n,m)=>{const y=n==="AEK"?"ownGoalsA":"ownGoalsB",E=Math.max(0,t[y]+m);c({[y]:E})},h=(n,m)=>{if(!m)return;const y=n==="AEK"?"goalslista":"goalslistb",E=t[y].find(v=>v.player===m);c(E?{[y]:t[y].map(v=>v.player===m?{...v,count:v.count+1}:v)}:{[y]:[...t[y],{player:m,count:1}]})},w=(n,m)=>{const y=n==="AEK"?"goalslista":"goalslistb";c({[y]:t[y].filter(E=>E.player!==m)})};return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neues Spiel hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"F√ºgen Sie ein neues Spiel zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"‚öΩ"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Spiel hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um ein neues Spiel zu erfassen."}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary inline-flex items-center px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neues Spiel erfassen"]})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-start sm:items-center justify-center z-[60] p-2 sm:p-4 overflow-y-auto",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg w-full max-w-lg modal-content match-modal-content modal-mobile-safe my-4 sm:my-8",style:{maxHeight:"calc(100vh - 2rem)"},children:e.jsxs("div",{className:"p-4 sm:p-6 overflow-y-auto mobile-safe-bottom",style:{maxHeight:"calc(100vh - 4rem)"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-6 sticky top-0 bg-bg-secondary z-10 pb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neues Spiel"}),e.jsx("button",{onClick:()=>a(!1),className:"text-text-secondary hover:text-text-primary text-2xl font-bold bg-bg-tertiary hover:bg-bg-hover rounded-full w-8 h-8 flex items-center justify-center transition-colors",disabled:d,children:"√ó"})]}),e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"‚öΩ Spielpaarung"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[e.jsx("div",{className:"bg-blue-100 text-blue-800 px-4 py-2 rounded-lg font-medium",children:"AEK Athen"}),e.jsx("div",{className:"text-gray-500 font-bold text-xl",children:"vs"}),e.jsx("div",{className:"bg-red-100 text-red-800 px-4 py-2 rounded-lg font-medium",children:"Real Madrid"})]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:t.date,onChange:n=>u("date",n.target.value),className:"form-input",required:!0,disabled:d})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"‚öΩ Live Torwertung"}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-red-50 rounded-xl p-6 mb-4 text-center border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"text-4xl font-bold text-gray-800 mb-2",children:[e.jsx("span",{className:"text-blue-600",children:t.goalsa}),e.jsx("span",{className:"mx-4 text-gray-400",children:":"}),e.jsx("span",{className:"text-red-600",children:t.goalsb})]}),e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:[e.jsx("span",{className:"font-medium text-blue-700",children:"AEK Athen"}),e.jsx("span",{className:"mx-2",children:"vs"}),e.jsx("span",{className:"font-medium text-red-700",children:"Real Madrid"})]}),(t.goalsa>0||t.goalsb>0)&&e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:t.goalsa>t.goalsb?"üèÜ AEK f√ºhrt":t.goalsb>t.goalsa?"üèÜ Real f√ºhrt":"‚öñÔ∏è Unentschieden"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-blue-600 mb-3",children:"‚öΩ AEK Athen Torsch√ºtzen"})}),e.jsx("div",{className:"space-y-2",children:t.goalslista.map((n,m)=>e.jsxs("div",{className:"flex items-center justify-between bg-blue-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:n.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[n.count," Tor",n.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>$("AEK",n.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d,children:"‚àí"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:n.count}),e.jsx("button",{type:"button",onClick:()=>p("AEK",n.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d,children:"+"}),e.jsx("button",{type:"button",onClick:()=>w("AEK",n.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:d,title:"Torsch√ºtze entfernen",children:"‚úï"})]})]},`aek-${n.player}-${m}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:n=>{n.target.value&&(h("AEK",n.target.value),n.target.value="")},className:"w-full form-input bg-blue-100 border-blue-300 text-blue-800",disabled:d,children:[e.jsx("option",{value:"",children:"+ Torsch√ºtze hinzuf√ºgen"}),x("AEK").map(n=>e.jsxs("option",{value:n.name,children:[n.name," (",n.position,")"]},n.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Z√§hlen f√ºr Real Madrid"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>k("AEK",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d||t.ownGoalsA===0,children:"‚àí"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:t.ownGoalsA}),e.jsx("button",{type:"button",onClick:()=>k("AEK",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d,children:"+"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-center",children:e.jsx("h5",{className:"text-sm font-medium text-red-600 mb-3",children:"‚öΩ Real Madrid Torsch√ºtzen"})}),e.jsx("div",{className:"space-y-2",children:t.goalslistb.map((n,m)=>e.jsxs("div",{className:"flex items-center justify-between bg-red-50 rounded-lg p-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:n.player}),e.jsxs("div",{className:"text-xs text-gray-500",children:[n.count," Tor",n.count!==1?"e":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>$("Real",n.player),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d,children:"‚àí"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:n.count}),e.jsx("button",{type:"button",onClick:()=>p("Real",n.player),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d,children:"+"}),e.jsx("button",{type:"button",onClick:()=>w("Real",n.player),className:"w-8 h-8 bg-gray-500 hover:bg-gray-600 text-white rounded-full flex items-center justify-center text-xs font-bold transition-colors",disabled:d,title:"Torsch√ºtze entfernen",children:"‚úï"})]})]},`real-${n.player}-${m}`))}),e.jsx("div",{className:"border-t pt-2",children:e.jsxs("select",{onChange:n=>{n.target.value&&(h("Real",n.target.value),n.target.value="")},className:"w-full form-input bg-red-100 border-red-300 text-red-800",disabled:d,children:[e.jsx("option",{value:"",children:"+ Torsch√ºtze hinzuf√ºgen"}),x("Real").map(n=>e.jsxs("option",{value:n.name,children:[n.name," (",n.position,")"]},n.id))]})}),e.jsxs("div",{className:"flex items-center justify-between bg-orange-50 rounded-lg p-2 border border-orange-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Eigentore"}),e.jsx("div",{className:"text-xs text-gray-500",children:"Z√§hlen f√ºr AEK Athen"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>k("Real",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d||t.ownGoalsB===0,children:"‚àí"}),e.jsx("span",{className:"w-8 text-center font-bold text-lg text-gray-700",children:t.ownGoalsB}),e.jsx("button",{type:"button",onClick:()=>k("Real",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d,children:"+"})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"üü®üü• Karten"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"AEK Athen"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"üü® Gelbe Karten"}),e.jsxs("div",{className:"flex items-center justify-center bg-yellow-50 border border-yellow-300 rounded-lg p-2",children:[e.jsx("button",{type:"button",onClick:()=>f("yellowa",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d||t.yellowa<=0,children:"‚àí"}),e.jsx("span",{className:"mx-3 text-lg font-bold text-gray-700 min-w-[2rem] text-center",children:t.yellowa}),e.jsx("button",{type:"button",onClick:()=>f("yellowa",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d,children:"+"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"üü• Rote Karten"}),e.jsxs("div",{className:"flex items-center justify-center bg-red-50 border border-red-300 rounded-lg p-2",children:[e.jsx("button",{type:"button",onClick:()=>f("reda",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d||t.reda<=0,children:"‚àí"}),e.jsx("span",{className:"mx-3 text-lg font-bold text-gray-700 min-w-[2rem] text-center",children:t.reda}),e.jsx("button",{type:"button",onClick:()=>f("reda",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d,children:"+"})]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Real Madrid"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"üü® Gelbe Karten"}),e.jsxs("div",{className:"flex items-center justify-center bg-yellow-50 border border-yellow-300 rounded-lg p-2",children:[e.jsx("button",{type:"button",onClick:()=>f("yellowb",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d||t.yellowb<=0,children:"‚àí"}),e.jsx("span",{className:"mx-3 text-lg font-bold text-gray-700 min-w-[2rem] text-center",children:t.yellowb}),e.jsx("button",{type:"button",onClick:()=>f("yellowb",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d,children:"+"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-text-muted mb-1",children:"üü• Rote Karten"}),e.jsxs("div",{className:"flex items-center justify-center bg-red-50 border border-red-300 rounded-lg p-2",children:[e.jsx("button",{type:"button",onClick:()=>f("redb",-1),className:"w-8 h-8 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d||t.redb<=0,children:"‚àí"}),e.jsx("span",{className:"mx-3 text-lg font-bold text-gray-700 min-w-[2rem] text-center",children:t.redb}),e.jsx("button",{type:"button",onClick:()=>f("redb",1),className:"w-8 h-8 bg-green-500 hover:bg-green-600 text-white rounded-full flex items-center justify-center text-sm font-bold transition-colors",disabled:d,children:"+"})]})]})]})]})]})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"‚≠ê Spieler des Spiels"}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-text-muted mb-2",children:"Team Filter:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>u("motmTeamFilter","all"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="all"?"bg-gray-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,disabled:d,children:"Alle"}),e.jsx("button",{type:"button",onClick:()=>u("motmTeamFilter","AEK"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="AEK"?"bg-blue-600 text-white":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,disabled:d,children:"AEK"}),e.jsx("button",{type:"button",onClick:()=>u("motmTeamFilter","Real"),className:`px-3 py-1 rounded-lg text-xs font-medium transition-colors ${t.motmTeamFilter==="Real"?"bg-red-600 text-white":"bg-red-100 text-red-700 hover:bg-red-200"}`,disabled:d,children:"Real"})]})]}),e.jsxs("select",{value:t.manofthematch,onChange:n=>u("manofthematch",n.target.value),className:"form-input",disabled:d,children:[e.jsx("option",{value:"",children:"Keinen Spieler ausw√§hlen"}),D().map(n=>e.jsxs("option",{value:n.name,children:[n.name," (",n.team," - ",n.position,")"]},n.id))]}),!r||r.length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler verf√ºgbar. Bitte f√ºgen Sie erst Spieler hinzu."})]}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-sm font-medium text-text-primary mb-3",children:"üí∞ Preisgelder (automatisch berechnet)"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld AEK (‚Ç¨)"}),e.jsx("input",{type:"number",value:t.prizeaek,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Preisgeld Real (‚Ç¨)"}),e.jsx("input",{type:"number",value:t.prizereal,className:"form-input bg-gray-100",placeholder:"Automatisch berechnet",disabled:!0,readOnly:!0})]})]}),e.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Basierend auf Ergebnis und Karten: Gewinner 1M‚Ç¨ - (Verlierer-Tore √ó 50k‚Ç¨) - (Karten √ó 20k‚Ç¨/50k‚Ç¨)"})]}),t.goalsa===t.goalsb&&(t.goalsa>0||t.goalsb>0)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-red-600 mr-2",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-red-800",children:"Unentschieden nicht erlaubt"}),e.jsx("p",{className:"text-sm text-red-700",children:"Ein Team muss gewinnen. Unentschieden sind in dieser App nicht m√∂glich."})]})]})}),!t.manofthematch&&(t.goalsa>0||t.goalsb>0)&&e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-yellow-600 mr-2",children:"‚≠ê"}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-yellow-800",children:"Spieler des Spiels erforderlich"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"Bitte w√§hlen Sie einen Spieler des Spiels aus, bevor Sie das Match speichern."})]})]})}),o()&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsxs("h5",{className:"font-medium text-green-800 mb-3 flex items-center",children:[e.jsx("i",{className:"fas fa-check-circle mr-2"}),"Spiel-Zusammenfassung"]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Datum:"}),e.jsx("span",{className:"font-medium text-green-800",children:new Date(t.date).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Ergebnis:"}),e.jsxs("span",{className:"font-medium text-green-800",children:["AEK ",t.goalsa," : ",t.goalsb," Real"]})]}),t.manofthematch&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Spieler des Spiels:"}),e.jsx("span",{className:"font-medium text-green-800",children:t.manofthematch})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700",children:"Preisgelder:"}),e.jsxs("span",{className:"font-medium text-green-800",children:["AEK ",t.prizeaek.toLocaleString(),"‚Ç¨, Real ",t.prizereal.toLocaleString(),"‚Ç¨"]})]})]})]}),!o()&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-red-600 mr-2 mt-1",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-red-800 mb-1",children:"Formular unvollst√§ndig"}),e.jsx("ul",{className:"text-sm text-red-700 space-y-1",children:N().issues.map((n,m)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:"‚Ä¢"}),e.jsx("span",{children:n})]},m))})]})]})}),e.jsxs("div",{className:"flex gap-3 pt-4 pb-20 sm:pb-4",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:d,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:d||!o(),className:`flex-1 px-4 py-2 rounded-lg font-medium transition-colors ${o()?"bg-green-600 hover:bg-green-700 text-white":"bg-red-500 text-white cursor-not-allowed opacity-75"} ${d?"opacity-50 cursor-not-allowed":""}`,children:d?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):o()?"‚úÖ Spiel speichern":`‚ùå ${N().issues[0]||"Eingaben unvollst√§ndig"}`})]})]})]})})})]})}const P=[{value:"AEK",label:"AEK Athen",color:"blue",icon:"aek"},{value:"Real",label:"Real Madrid",color:"red",icon:"real"},{value:"Ehemalige",label:"Ehemalige",color:"gray",icon:"‚ö´"}],ee=(r,s=null)=>{try{return Le(r,s).label}catch(a){console.error("Error getting team display:",a);const t=P.find(l=>l.value===r);return t?t.label:r}};function We(){const{data:r}=_("players","*"),[s,a]=S.useState(!1),[t,l]=S.useState(""),[d,g]=S.useState({player_id:"",type:"",reason:"",customDuration:1}),[b,c]=S.useState(!1),u=(x,D)=>{g(p=>({...p,[x]:D})),x==="team"&&g(p=>({...p,player_id:""}))},i=()=>!r||!t?[]:r.filter(x=>x.team===t),o=async x=>{var D;x.preventDefault(),c(!0);try{const p=r==null?void 0:r.find(m=>m.id===parseInt(d.player_id)),$=re.find(m=>m.value===d.type);if(!p)throw new Error("Spieler nicht gefunden");if(!$)throw new Error("Sperrart nicht gefunden");const h=(D=(await M.select("bans","*",{eq:{player_id:p.id}})).data)==null?void 0:D.find(m=>(m.matchesserved||0)<(m.totalgames||0));if(h)throw new Error(`Spieler "${p.name}" ist bereits gesperrt (${h.totalgames-h.matchesserved} Spiele verbleibend)`);const w=$.fixedDuration?$.duration:d.customDuration,n=await M.insert("bans",{player_id:p.id,team:p.team,type:$.value,totalgames:w,matchesserved:0,reason:d.reason||$.value});if(n.error)throw new Error(`Ban insert failed: ${n.error.message}`);g({player_id:"",type:"",reason:"",customDuration:1}),l(""),a(!1),I.success(`Sperre f√ºr "${p.name}" erfolgreich hinzugef√ºgt!`)}catch(p){console.error("Ban submission error:",p),I.error(p.message||"Fehler beim Hinzuf√ºgen der Sperre")}finally{c(!1)}},N=t&&d.player_id&&d.type,f=re.find(x=>x.value===d.type);return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Sperre hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erstellen Sie eine neue Spielersperre in der Datenbank."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üö´"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Sperre hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Spielersperre zu erfassen."}),e.jsxs("button",{onClick:()=>a(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Sperre erfassen"]})]})}),s&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content modal-mobile-safe",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Sperre"}),e.jsx("button",{onClick:()=>a(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:b,children:"√ó"})]}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:t,onChange:x=>{l(x.target.value),g(D=>({...D,player_id:""}))},className:"form-input",required:!0,disabled:b,children:[e.jsx("option",{value:"",children:"Team w√§hlen"}),P.filter(x=>x.value!=="Ehemalige").map(x=>e.jsx("option",{value:x.value,children:ee(x.value)},x.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spieler *"}),e.jsxs("select",{value:d.player_id,onChange:x=>u("player_id",x.target.value),className:"form-input",required:!0,disabled:b||!t,children:[e.jsx("option",{value:"",children:t?"Spieler w√§hlen":"Bitte zuerst Team w√§hlen"}),i().map(x=>e.jsxs("option",{value:x.id,children:[x.name," (",x.position,")"]},x.id))]}),t&&i().length===0&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Keine Spieler im gew√§hlten Team verf√ºgbar."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Sperrart *"}),e.jsxs("select",{value:d.type,onChange:x=>u("type",x.target.value),className:"form-input",required:!0,disabled:b,children:[e.jsx("option",{value:"",children:"Sperrart w√§hlen"}),re.map(x=>e.jsxs("option",{value:x.value,children:[x.icon," ",x.label,x.fixedDuration?` (${x.duration} Spiel${x.duration!==1?"e":""})`:` (1-${x.maxDuration} Spiele)`]},x.value))]})]}),f&&!f.fixedDuration&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Spiele *"}),e.jsx("select",{value:d.customDuration,onChange:x=>u("customDuration",parseInt(x.target.value)),className:"form-input",required:!0,disabled:b,children:Array.from({length:f.maxDuration},(x,D)=>D+1).map(x=>e.jsxs("option",{value:x,children:[x," Spiel",x!==1?"e":""]},x))}),e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["W√§hlen Sie zwischen ",f.minDuration," und ",f.maxDuration," Spielen"]})]}),f&&f.fixedDuration&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("i",{className:"fas fa-info-circle mr-2"}),"Gelb-Rote Karten haben immer eine feste Sperre von 1 Spiel."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Zus√§tzlicher Grund (optional)"}),e.jsx("input",{type:"text",value:d.reason,onChange:x=>u("reason",x.target.value),className:"form-input",placeholder:"Weitere Details zur Sperre...",disabled:b})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:b,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!N||b||!r||r.length===0,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:b?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verf√ºgbare Sperrarten"}),e.jsx("div",{className:"space-y-2",children:re.map(x=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-bg-secondary rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:x.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:x.label})]}),e.jsx("span",{className:"text-sm text-text-muted",children:x.fixedDuration?`${x.duration} Spiel${x.duration!==1?"e":""} (fest)`:`1-${x.maxDuration} Spiele (variabel)`})]},x.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-yellow-50 border-yellow-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-yellow-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-yellow-700 text-sm",children:"Nach dem Hinzuf√ºgen k√∂nnen Sie die Sperre in der Sperren-√úbersicht einsehen und verwalten."})]})]})})]})}const fe=[{value:"TH",label:"Torwart (TH)"},{value:"IV",label:"Innenverteidiger (IV)"},{value:"AV",label:"Au√üenverteidiger (AV)"},{value:"ZM",label:"Zentrales Mittelfeld (ZM)"},{value:"OM",label:"Offensives Mittelfeld (OM)"},{value:"ST",label:"St√ºrmer (ST)"}];function Je(){const[r,s]=S.useState(!1),[a,t]=S.useState({name:"",team:"",position:"",goals:0,value:0}),[l,d]=S.useState(!1),g=(u,i)=>{t(o=>({...o,[u]:i}))},b=async u=>{u.preventDefault(),d(!0);try{const i=await M.select("players","*",{eq:{name:a.name.trim(),team:a.team.trim()}});if(i.data&&i.data.length>0)throw new Error(`Spieler "${a.name}" existiert bereits im Team "${a.team}"`);const o=await M.insert("players",{name:a.name.trim(),team:a.team.trim(),position:a.position.trim().toUpperCase(),goals:parseInt(a.goals)||0,value:parseFloat(a.value)||0});if(o.error)throw new Error(`Player insert failed: ${o.error.message}`);t({name:"",team:"",position:"",goals:0,value:0}),s(!1),I.success(`Spieler "${a.name}" erfolgreich hinzugef√ºgt!`)}catch(i){console.error("Player submission error:",i),I.error(i.message||"Fehler beim Hinzuf√ºgen des Spielers")}finally{d(!1)}},c=a.name&&a.team&&a.position&&a.value!=="";return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neuen Spieler hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"F√ºgen Sie einen neuen Spieler zur Datenbank hinzu."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üë§"}),e.jsxs("h4",{className:"text-lg font-medium text-text-primary mb-2",children:[e.jsx("i",{className:"fas fa-user-plus mr-2"}),"Spieler hinzuf√ºgen"]}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um einen neuen Spieler zu erfassen."}),e.jsxs("button",{onClick:()=>s(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neuen Spieler erfassen"]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content modal-mobile-safe",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neuer Spieler"}),e.jsx("button",{onClick:()=>s(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:l,children:"√ó"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Spielername *"}),e.jsx("input",{type:"text",value:a.name,onChange:u=>g("name",u.target.value),className:"form-input",placeholder:"z.B. Max Mustermann",required:!0,disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:a.team,onChange:u=>g("team",u.target.value),className:"form-input",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Team w√§hlen"}),P.map(u=>e.jsx("option",{value:u.value,children:ee(u.value)},u.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Position *"}),e.jsxs("select",{value:a.position,onChange:u=>g("position",u.target.value),className:"form-input",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Position w√§hlen"}),fe.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Marktwert (Millionen ‚Ç¨) *"}),e.jsx("input",{type:"number",min:"0",step:"0.1",value:a.value,onChange:u=>g("value",u.target.value),onFocus:u=>u.target.select(),className:"form-input",placeholder:"0.0",disabled:l}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Marktwert in Millionen Euro (z.B. 1.5 f√ºr 1.5M ‚Ç¨)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Anzahl Tore"}),e.jsx("input",{type:"number",min:"0",value:a.goals,onChange:u=>g("goals",u.target.value),onFocus:u=>u.target.select(),className:"form-input",placeholder:"0",disabled:l})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>s(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:l,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!c||l,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verf√ºgbare Teams"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:P.map(u=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("span",{className:`font-medium ${u.color==="blue"?"text-blue-600":u.color==="red"?"text-red-600":"text-gray-600"}`,children:ee(u.value)}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",u.value,")"]})]},u.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verf√ºgbare Positionen"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:fe.map(u=>e.jsx("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:e.jsx("span",{className:"font-medium text-text-primary text-sm",children:u.label})},u.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-green-50 border-green-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-green-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-green-700 text-sm",children:"Nach dem Hinzuf√ºgen k√∂nnen Sie den Spieler in der Kader-√úbersicht einsehen und verwalten."})]})]})})]})}const pe=[{value:"Preisgeld",label:"Preisgeld",icon:"üèÜ"},{value:"Strafe",label:"Strafe",icon:"üìâ"},{value:"Spielerkauf",label:"Spielerkauf",icon:"üë§"},{value:"Spielerverkauf",label:"Spielerverkauf",icon:"üí∞"},{value:"Echtgeld-Ausgleich",label:"Echtgeld-Ausgleich",icon:"üí≥"},{value:"SdS Bonus",label:"Spieler des Spiels Bonus",icon:"‚≠ê"},{value:"Sonstiges",label:"Sonstiges",icon:"üìà"}];function Ye(){const[r,s]=S.useState(!1),[a,t]=S.useState({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),[l,d]=S.useState(!1),g=(i,o)=>{t(N=>({...N,[i]:o}))},b=async i=>{i.preventDefault(),d(!0);try{const o=parseFloat(a.amount),N=await M.insert("transactions",{date:a.date,type:a.type.trim(),team:a.team.trim(),amount:o,info:a.info.trim(),match_id:null});if(N.error)throw new Error(`Transaction insert failed: ${N.error.message}`);await c(a.team.trim(),a.type.trim(),o),t({team:"",type:"",amount:"",info:"",date:new Date().toISOString().split("T")[0]}),s(!1),I.success("Transaktion erfolgreich hinzugef√ºgt!")}catch(o){console.error("Transaction submission error:",o),I.error(o.message||"Fehler beim Hinzuf√ºgen der Transaktion")}finally{d(!1)}},c=async(i,o,N)=>{try{const f=await M.select("finances","*",{eq:{team:i}});let x=f.data&&f.data.length>0?f.data[0]:{team:i,balance:0,debt:0},D={};if(o==="Echtgeld-Ausgleich")D.debt=(x.debt||0)+N;else{let p=(x.balance||0)+N;p<0&&(p=0),D.balance=p}x.id?await M.update("finances",D,x.id):await M.insert("finances",{team:i,balance:D.balance||0,debt:D.debt||0})}catch(f){console.warn("Failed to update finances:",f)}},u=a.team&&a.type&&a.amount&&a.date;return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Neue Transaktion hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Erfassen Sie eine neue finanzielle Transaktion."})]}),e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"üí∞"}),e.jsx("h4",{className:"text-lg font-medium text-text-primary mb-2",children:"Transaktion hinzuf√ºgen"}),e.jsx("p",{className:"text-text-muted mb-6",children:"Klicken Sie auf den Button, um eine neue Transaktion zu erfassen."}),e.jsxs("button",{onClick:()=>s(!0),className:"btn-primary",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Neue Transaktion erfassen"]})]})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content modal-mobile-safe",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"Neue Transaktion"}),e.jsx("button",{onClick:()=>s(!1),className:"text-text-muted hover:text-text-primary text-2xl",disabled:l,children:"√ó"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Team *"}),e.jsxs("select",{value:a.team,onChange:i=>g("team",i.target.value),className:"form-input",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Team w√§hlen"}),P.filter(i=>i.value!=="Ehemalige").map(i=>e.jsx("option",{value:i.value,children:ee(i.value)},i.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Transaktionsart *"}),e.jsxs("select",{value:a.type,onChange:i=>g("type",i.target.value),className:"form-input",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Typ w√§hlen"}),pe.map(i=>e.jsxs("option",{value:i.value,children:[i.icon," ",i.label]},i.value))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Betrag (‚Ç¨) *"}),e.jsx("input",{type:"number",step:"0.01",value:a.amount,onChange:i=>g("amount",i.target.value),onFocus:i=>i.target.select(),className:"form-input",placeholder:"0.00",required:!0,disabled:l}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Negative Werte f√ºr Ausgaben, positive f√ºr Einnahmen"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Beschreibung"}),e.jsx("input",{type:"text",value:a.info,onChange:i=>g("info",i.target.value),className:"form-input",placeholder:"Zus√§tzliche Informationen...",disabled:l})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Datum *"}),e.jsx("input",{type:"date",value:a.date,onChange:i=>g("date",i.target.value),className:"form-input",required:!0,disabled:l})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>s(!1),className:"flex-1 px-4 py-2 border border-border-light rounded-lg text-text-secondary hover:bg-bg-tertiary transition-colors",disabled:l,children:"Abbrechen"}),e.jsx("button",{type:"submit",disabled:!u||l,className:"flex-1 btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:l?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Speichern..."]}):"Speichern"})]})]})]})})}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Transaktionsarten"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:pe.map(i=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:i.icon}),e.jsx("span",{className:"font-medium text-text-primary",children:i.label})]},i.value))})]}),e.jsxs("div",{className:"mt-6 modern-card",children:[e.jsx("h4",{className:"font-semibold text-text-primary mb-3",children:"Verf√ºgbare Teams"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:P.filter(i=>i.value!=="Ehemalige").map(i=>e.jsxs("div",{className:"p-3 bg-bg-secondary rounded-lg text-center",children:[e.jsx("span",{className:`font-medium ${i.color==="blue"?"text-blue-600":"text-red-600"}`,children:ee(i.value)}),e.jsxs("div",{className:"text-xs text-text-muted mt-1",children:["(",i.value,")"]})]},i.value))})]}),e.jsx("div",{className:"mt-6 modern-card bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-blue-600 mr-3",children:e.jsx("i",{className:"fas fa-info-circle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-1",children:"Hinweis"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Nach dem Hinzuf√ºgen k√∂nnen Sie die Transaktion in der Finanzen-√úbersicht einsehen."})]})]})})]})}function Qe(){var xe;const[r,s]=S.useState("players"),[a,t]=S.useState(!1),[l,d]=S.useState(""),[g,b]=S.useState(new Set),{data:c,refetch:u}=_("players","*",{order:{column:"id",ascending:!1}}),{data:i,refetch:o}=_("matches","*",{order:{column:"date",ascending:!1}}),{data:N,refetch:f}=_("bans","*",{order:{column:"id",ascending:!1}}),{data:x,refetch:D}=_("transactions","*",{order:{column:"date",ascending:!1}}),{remove:p}=de("players"),{remove:$}=de("bans"),{remove:k}=de("transactions"),h=[{id:"players",label:"Spieler l√∂schen",icon:"fas fa-users"},{id:"matches",label:"Spiele l√∂schen (Einzel & Bulk)",icon:"fas fa-futbol"},{id:"bans",label:"Sperren l√∂schen",icon:"fas fa-ban"},{id:"transactions",label:"Transaktionen l√∂schen",icon:"fas fa-euro-sign"}],w=j=>{s(j),d(""),b(new Set)},n=(j,T)=>{const F=new Set(g);T?F.add(j):F.delete(j),b(F)},m=j=>{const T=U(j);g.size===T.length?b(new Set):b(new Set(T.map(F=>F.id)))},y=async()=>{if(g.size===0){I.error("Keine Spiele ausgew√§hlt");return}const T=((i==null?void 0:i.filter(L=>g.has(L.id)))||[]).reduce((L,Z)=>L+((x==null?void 0:x.filter(ce=>ce.match_id===Z.id).length)||0),0);let F=`Sind Sie sicher, dass Sie ${g.size} ausgew√§hlte Spiele l√∂schen m√∂chten?`;if(T>0&&(F+=`

Achtung: ${T} zugeh√∂rige Transaktion(en) werden ebenfalls gel√∂scht.`),F+=`

Dieser Vorgang kann nicht r√ºckg√§ngig gemacht werden!`,!confirm(F))return;t(!0);let C=0,B=0;try{for(const L of g)try{console.log(`Deleting match ${L}`),await me(L),C++}catch(Z){console.error(`Failed to delete match ${L}:`,Z),B++}b(new Set),C>0&&B===0?I.success(`Alle ${C} Spiele erfolgreich gel√∂scht`):C>0&&B>0?I.success(`${C} Spiele gel√∂scht, ${B} fehlgeschlagen`):I.error(`Alle ${B} L√∂schvorg√§nge fehlgeschlagen`),o(),D(),setTimeout(()=>{o(),D()},1e3)}catch(L){console.error("Bulk delete error:",L),I.error("Fehler beim Bulk-L√∂schen: "+L.message),b(new Set)}finally{t(!1)}},E=()=>{switch(r){case"players":return{total:(c==null?void 0:c.length)||0,filtered:O(c).length};case"matches":return{total:(i==null?void 0:i.length)||0,filtered:U(i).length};case"bans":return{total:(N==null?void 0:N.length)||0,filtered:W(N).length};case"transactions":return{total:(x==null?void 0:x.length)||0,filtered:J(x).length};default:return{total:0,filtered:0}}},v=async j=>{const T=(N==null?void 0:N.filter(C=>C.player_id===j.id||C.player_name===j.name))||[];let F=`Sind Sie sicher, dass Sie ${j.name} (${j.team}) l√∂schen m√∂chten?`;if(T.length>0&&(F+=`

Achtung: ${T.length} zugeh√∂rige Sperre(n) werden ebenfalls gel√∂scht.`),j.goals&&j.goals>0&&(F+=`
Der Spieler hat ${j.goals} Tor(e) erzielt.`),!!confirm(F)){t(!0);try{await p(j.id),I.success(`Spieler ${j.name} erfolgreich gel√∂scht`),u(),T.length>0&&f()}catch(C){I.error("Fehler beim L√∂schen des Spielers: "+C.message)}finally{t(!1)}}},z=async j=>{const T=(x==null?void 0:x.filter(B=>B.match_id===j.id))||[],F=`AEK ${j.goalsa||0} - ${j.goalsb||0} Real`;let C=`Sind Sie sicher, dass Sie das Spiel vom ${new Date(j.date).toLocaleDateString("de-DE")} (${F}) l√∂schen m√∂chten?`;if(T.length>0&&(C+=`

Achtung: ${T.length} zugeh√∂rige Transaktion(en) werden ebenfalls gel√∂scht.`),j.manofthematch&&(C+=`
Spieler des Spiels: ${j.manofthematch}`),!!confirm(C)){t(!0);try{console.log(`Attempting to delete match ${j.id}`),await me(j.id),console.log(`Successfully deleted match ${j.id}`),I.success("Spiel erfolgreich gel√∂scht"),o(),D(),setTimeout(()=>{o(),D()},1e3)}catch(B){console.error("Error deleting match:",B);let L="Fehler beim L√∂schen des Spiels: ";B.message.includes("not found")?L+=`Spiel mit ID ${j.id} wurde nicht in der Datenbank gefunden. M√∂glicherweise wurde es bereits gel√∂scht.`:B.message.includes("Invalid match ID")?L+=`Ung√ºltige Spiel-ID: ${j.id}`:B.message.includes("fetch failed")||B.message.includes("network")?L+="Netzwerkfehler. Bitte √ºberpr√ºfen Sie Ihre Internetverbindung.":L+=B.message,I.error(L)}finally{t(!1)}}},R=async j=>{var B;const T=j.player_name||(j.player_id&&c?(B=c.find(L=>L.id===j.player_id))==null?void 0:B.name:"Unbekannter Spieler"),F=Math.max(0,(j.totalgames||0)-(j.matchesserved||0));let C=`Sind Sie sicher, dass Sie die Sperre f√ºr ${T} l√∂schen m√∂chten?`;if(C+=`
Sperrtyp: ${j.type}`,F>0?C+=`
Noch ${F} Spiel(e) verbleibend`:C+=`
Sperre bereits abgesessen`,j.reason&&(C+=`
Grund: ${j.reason}`),!!confirm(C)){t(!0);try{await $(j.id),I.success(`Sperre f√ºr ${T} erfolgreich gel√∂scht`),f()}catch(L){I.error("Fehler beim L√∂schen der Sperre: "+L.message)}finally{t(!1)}}},A=async j=>{const T=j.match_id&&i?i.find(C=>C.id===j.match_id):null;let F=`Sind Sie sicher, dass Sie die Transaktion "${j.type}" l√∂schen m√∂chten?`;if(F+=`
Betrag: ${j.amount>0?"+":""}${j.amount}M ‚Ç¨ (${j.team})`,j.date&&(F+=`
Datum: ${new Date(j.date).toLocaleDateString("de-DE")}`),j.info&&(F+=`
Info: ${j.info}`),T&&(F+=`
Zugeh√∂riges Spiel: ${new Date(T.date).toLocaleDateString("de-DE")} (AEK ${T.goalsa||0} - ${T.goalsb||0} Real)`),!!confirm(F)){t(!0);try{await k(j.id),I.success("Transaktion erfolgreich gel√∂scht"),D()}catch(C){I.error("Fehler beim L√∂schen der Transaktion: "+C.message)}finally{t(!1)}}},V=j=>{const T=P.find(F=>F.value===j);return T?T.icon:"‚ö´"},O=j=>l?(j||[]).filter(T=>{var F,C,B;return((F=T.name)==null?void 0:F.toLowerCase().includes(l.toLowerCase()))||((C=T.team)==null?void 0:C.toLowerCase().includes(l.toLowerCase()))||((B=T.position)==null?void 0:B.toLowerCase().includes(l.toLowerCase()))}):j||[],U=j=>l?(j||[]).filter(T=>{var F;return new Date(T.date).toLocaleDateString("de-DE").includes(l)||((F=T.manofthematch)==null?void 0:F.toLowerCase().includes(l.toLowerCase()))}):j||[],W=j=>l?(j||[]).filter(T=>{var C,B,L,Z;const F=T.player_name||(T.player_id&&c?(C=c.find(ce=>ce.id===T.player_id))==null?void 0:C.name:"");return(F==null?void 0:F.toLowerCase().includes(l.toLowerCase()))||((B=T.type)==null?void 0:B.toLowerCase().includes(l.toLowerCase()))||((L=T.team)==null?void 0:L.toLowerCase().includes(l.toLowerCase()))||((Z=T.reason)==null?void 0:Z.toLowerCase().includes(l.toLowerCase()))}):j||[],J=j=>l?(j||[]).filter(T=>{var F,C,B,L;return((F=T.type)==null?void 0:F.toLowerCase().includes(l.toLowerCase()))||((C=T.team)==null?void 0:C.toLowerCase().includes(l.toLowerCase()))||((B=T.info)==null?void 0:B.toLowerCase().includes(l.toLowerCase()))||((L=T.amount)==null?void 0:L.toString().includes(l))}):j||[],Y=()=>{const j=O(c);return!j||j.length===0?e.jsx("p",{className:"text-text-muted text-center py-4",children:l?"Keine Spieler gefunden":"Keine Spieler vorhanden"}):e.jsx("div",{className:"space-y-2",children:j.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:V(T.team)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary",children:T.name}),e.jsxs("p",{className:"text-sm text-text-muted",children:[T.team," ‚Ä¢ ",T.position,T.goals!==void 0&&e.jsxs("span",{className:"ml-2",children:["‚Ä¢ ",T.goals," Tore"]})]})]})]}),e.jsxs("button",{onClick:()=>v(T),disabled:a,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"L√∂schen"]})]},T.id))})},H=()=>{const j=U(i);if(!j||j.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:l?"Keine Spiele gefunden":"Keine Spiele vorhanden"});const T=j.length>0&&j.every(C=>g.has(C.id)),F=g.size>0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-secondary rounded-lg border",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:()=>m(i),className:"w-4 h-4 text-accent-primary focus:ring-accent-primary border-gray-300 rounded"}),e.jsxs("span",{className:"text-sm text-text-primary",children:[T?"Alle abw√§hlen":"Alle ausw√§hlen"," (",j.length,")"]})]}),g.size>0&&e.jsxs("span",{className:"text-sm text-accent-primary font-medium",children:[g.size," ausgew√§hlt"]})]}),F&&e.jsxs("button",{onClick:y,disabled:a,className:"btn-primary btn-sm bg-red-600 hover:bg-red-700 text-white disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),g.size," Spiele l√∂schen"]})]}),e.jsx("div",{className:"space-y-2",children:j.map(C=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-bg-tertiary rounded-lg",children:[e.jsx("label",{className:"flex items-center cursor-pointer",children:e.jsx("input",{type:"checkbox",checked:g.has(C.id),onChange:B=>n(C.id,B.target.checked),className:"w-4 h-4 text-accent-primary focus:ring-accent-primary border-gray-300 rounded"})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-text-primary",children:["ID ",C.id," ‚Ä¢ ",new Date(C.date).toLocaleDateString("de-DE")]}),e.jsxs("p",{className:"text-sm text-text-muted",children:["AEK ",C.goalsa||0," - ",C.goalsb||0," Real"]}),C.manofthematch&&e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:[e.jsx("i",{className:"fas fa-star mr-1"}),"SdS: ",C.manofthematch]})]}),e.jsxs("button",{onClick:()=>z(C),disabled:a,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"Einzeln l√∂schen"]})]})})]},C.id))})]})},te=()=>{const j=W(N);if(!j||j.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:l?"Keine Sperren gefunden":"Keine Sperren vorhanden"});const T=C=>{if(C.player_name)return C.player_name;if(C.player_id&&c){const B=c.find(L=>L.id===C.player_id);return B?B.name:"Unbekannter Spieler"}return"Unbekannter Spieler"},F=C=>{const B=(C.totalgames||0)-(C.matchesserved||0);return Math.max(0,B)};return e.jsx("div",{className:"space-y-2",children:j.map(C=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:V(C.team)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-text-primary",children:T(C)}),e.jsxs("p",{className:"text-sm text-text-muted",children:[C.type," ‚Ä¢ ",C.totalgames||0," Spiele",F(C)>0?` (${F(C)} verbleibend)`:" (abgesessen)"]}),C.reason&&e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["Grund: ",C.reason]})]})]}),e.jsxs("button",{onClick:()=>R(C),disabled:a,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"L√∂schen"]})]},C.id))})},se=()=>{const j=J(x);if(!j||j.length===0)return e.jsx("p",{className:"text-text-muted text-center py-4",children:l?"Keine Transaktionen gefunden":"Keine Transaktionen vorhanden"});const T=F=>{if(!F.match_id||!i)return null;const C=i.find(B=>B.id===F.match_id);return C?`Match: ${new Date(C.date).toLocaleDateString("de-DE")} (AEK ${C.goalsa||0} - ${C.goalsb||0} Real)`:null};return e.jsx("div",{className:"space-y-2",children:j.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-lg",children:V(F.team)}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-text-primary",children:F.type}),e.jsxs("p",{className:"text-sm text-text-muted",children:[e.jsxs("span",{className:F.amount>0?"text-green-600":"text-red-600",children:[F.amount>0?"+":"",F.amount,"M ‚Ç¨"]}),F.date&&e.jsxs("span",{className:"ml-2",children:["‚Ä¢ ",new Date(F.date).toLocaleDateString("de-DE")]})]}),F.info&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:F.info}),T(F)&&e.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[e.jsx("i",{className:"fas fa-futbol mr-1"}),T(F)]})]})]}),e.jsxs("button",{onClick:()=>A(F),disabled:a,className:"btn-secondary btn-sm text-accent-red hover:bg-red-50 disabled:opacity-50",children:[e.jsx("i",{className:"fas fa-trash mr-1"}),"L√∂schen"]})]},F.id))})},ae=()=>{switch(r){case"players":return Y();case"matches":return H();case"bans":return te();case"transactions":return se();default:return Y()}};return e.jsxs("div",{className:"p-4 pb-20",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"Daten l√∂schen"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Verwalten Sie die L√∂schung von Spielern, Spielen, Sperren und Transaktionen."})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-6",children:h.map(j=>e.jsxs("button",{onClick:()=>w(j.id),className:`p-3 rounded-lg text-sm font-medium transition-colors ${r===j.id?"bg-accent-red text-white":"bg-bg-tertiary text-text-secondary hover:text-text-primary hover:bg-bg-hover"}`,children:[e.jsx("i",{className:`${j.icon} mr-2`}),j.label]},j.id))}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:`${(xe=h.find(j=>j.id===r))==null?void 0:xe.label.replace(" l√∂schen","")} durchsuchen...`,value:l,onChange:j=>d(j.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-accent-red focus:border-transparent text-text-primary bg-bg-secondary"}),e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("i",{className:"fas fa-search text-text-muted"})}),l&&e.jsx("button",{onClick:()=>d(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-text-muted hover:text-text-primary",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[l&&e.jsxs("p",{className:"text-xs text-text-muted",children:[e.jsx("i",{className:"fas fa-filter mr-1"}),"Gefiltert nach: ‚Äú",l,"‚Äù"]}),e.jsx("p",{className:"text-xs text-text-muted ml-auto",children:(()=>{const j=E();return l?`${j.filtered} von ${j.total} Eintr√§gen`:`${j.total} Eintr√§ge`})()})]})]}),e.jsxs("div",{className:"modern-card",children:[a&&e.jsx(we,{message:"L√∂sche..."}),!a&&ae()]}),e.jsx("div",{className:"mt-6 modern-card bg-red-50 border-red-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"text-red-600 mr-3",children:e.jsx("i",{className:"fas fa-exclamation-triangle"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-1",children:"Achtung"}),e.jsx("p",{className:"text-red-700 text-sm",children:"Das L√∂schen von Daten ist permanent und kann nicht r√ºckg√§ngig gemacht werden. Bitte √ºberpr√ºfen Sie Ihre Auswahl sorgf√§ltig, bevor Sie fortfahren."})]})]})})]})}function Xe({data:r=[],searchFields:s=[],filterOptions:a=[],onResults:t,placeholder:l="Suchen...",showCount:d=!0,searchExtractor:g}){const[b,c]=S.useState(""),[u,i]=S.useState({}),[o,N]=S.useState(""),[f,x]=S.useState("asc"),D=S.useRef(null),p=S.useMemo(()=>{let n=[...r];if(b.trim()){const m=b.toLowerCase().trim();n=n.filter(y=>{if(g){const E=g(y);return E&&E.toLowerCase().includes(m)}return s.some(E=>{const v=le(y,E);return v&&v.toString().toLowerCase().includes(m)})})}return Object.entries(u).forEach(([m,y])=>{if(y&&y!=="all"){const E=a.find(v=>v.key===m);E&&E.filterFn?n=n.filter(v=>E.filterFn(v,y)):n=n.filter(v=>le(v,m)===y)}}),o&&n.sort((m,y)=>{const E=le(m,o),v=le(y,o);let z=0;return typeof E=="number"&&typeof v=="number"?z=E-v:E instanceof Date&&v instanceof Date?z=E.getTime()-v.getTime():z=String(E).localeCompare(String(v)),f==="desc"?-z:z}),n},[r,b,u,o,f,s,a,g]);S.useEffect(()=>{t&&JSON.stringify(p)!==D.current&&(D.current=JSON.stringify(p),t(p))},[p,t]);const $=(n,m)=>{i(y=>({...y,[n]:m}))},k=n=>{o===n?x(f==="asc"?"desc":"asc"):(N(n),x("asc"))},h=()=>{c(""),i({}),N(""),x("asc")},w=b||Object.values(u).some(n=>n&&n!=="all")||o;return e.jsxs("div",{className:"bg-bg-primary border border-border-light rounded-lg shadow-sm mb-4",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center",children:e.jsx("span",{className:"text-text-secondary","aria-hidden":"true",children:"üîç"})}),e.jsx("input",{type:"text",value:b,onChange:n=>c(n.target.value),placeholder:`${l} (Strg+K f√ºr globale Suche)`,className:"w-full pl-10 pr-20 py-2 bg-bg-secondary border border-border-light rounded-lg text-text-primary placeholder-text-secondary focus:outline-none focus:ring-2 focus:ring-primary-green focus:border-transparent"}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center gap-1 pr-3",children:[e.jsx("button",{onClick:()=>{const n=new CustomEvent("global-search-toggle");window.dispatchEvent(n)},className:"text-text-secondary hover:text-primary-green transition-colors p-1 rounded",title:"Globale Suche √∂ffnen (Strg+K)",children:e.jsx("span",{"aria-hidden":"true",children:"üåê"})}),b&&e.jsx("button",{onClick:()=>c(""),className:"text-text-secondary hover:text-text-primary transition-colors p-1 rounded",title:"Suchfeld leeren",children:e.jsx("span",{"aria-hidden":"true",children:"‚úï"})})]})]})}),(a.length>0||o)&&e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[a.map(n=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"text-sm font-medium text-text-primary",children:[n.label,":"]}),e.jsxs("select",{value:u[n.key]||"",onChange:m=>$(n.key,m.target.value),className:"px-3 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"",children:"Alle"}),n.options.map(m=>e.jsx("option",{value:m.value,children:m.label},m.value))]})]},n.key)),s.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-primary",children:"Sortieren:"}),e.jsxs("select",{value:o,onChange:n=>N(n.target.value),className:"px-3 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green",children:[e.jsx("option",{value:"",children:"Standard"}),s.map(n=>e.jsx("option",{value:n,children:ye(n)},n))]}),o&&e.jsx("button",{onClick:()=>k(o),className:"px-2 py-1 bg-bg-secondary border border-border-light rounded text-sm text-text-primary hover:bg-bg-tertiary transition-colors duration-200",title:`Sortierung: ${f==="asc"?"Aufsteigend":"Absteigend"}`,children:f==="asc"?"‚Üë":"‚Üì"})]}),w&&e.jsx("button",{onClick:h,className:"px-3 py-1 bg-red-100 text-red-800 border border-red-200 rounded text-sm hover:bg-red-200 transition-colors duration-200",children:"Filter zur√ºcksetzen"})]})}),d&&e.jsx("div",{className:"px-4 py-2 bg-bg-secondary border-b border-border-light",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-text-secondary",children:p.length===r.length?`${r.length} Eintr√§ge`:`${p.length} von ${r.length} Eintr√§gen`}),w&&e.jsxs("div",{className:"flex items-center gap-2",children:[b&&e.jsxs("span",{className:"bg-primary-green bg-opacity-10 text-primary-green px-2 py-1 rounded text-xs",children:['üîç "',b,'"']}),Object.entries(u).filter(([,n])=>n&&n!=="all").map(([n,m])=>{const y=a.find(v=>v.key===n),E=y==null?void 0:y.options.find(v=>v.value===m);return e.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs",children:[y==null?void 0:y.label,": ",(E==null?void 0:E.label)||m]},n)}),o&&e.jsxs("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:["üìä ",ye(o)," ",f==="asc"?"‚Üë":"‚Üì"]})]})]})})]})}function le(r,s){return!r||!s?"":s.split(".").reduce((a,t)=>a&&a[t]!==void 0?a[t]:"",r)}function ye(r){return{name:"Name",team:"Team",position:"Position",value:"Wert",date:"Datum",goalsa:"AEK Tore",goalsb:"Real Tore",type:"Typ",amount:"Betrag",description:"Beschreibung",totalgames:"Gesamt Spiele",matchesserved:"Gespielte Spiele"}[r]||r.charAt(0).toUpperCase()+r.slice(1)}function je({onNavigate:r}){const[s,a]=S.useState("players"),[t,l]=S.useState([]),{data:d,loading:g}=_("players","*"),{data:b,loading:c}=_("matches","*",{order:{column:"date",ascending:!1}}),{data:u,loading:i}=_("transactions","*",{order:{column:"date",ascending:!1}}),{data:o,loading:N}=_("bans","*",{order:{column:"id",ascending:!1}}),f=g||c||i||N,x=[{id:"players",label:"Spieler",icon:"fas fa-users",data:d||[],searchFields:["name","position","team","value"],filterOptions:[{key:"team",label:"Team",options:[{value:"AEK",label:"AEK Athen"},{value:"Real",label:"Real Madrid"},{value:"Ehemalige",label:"Ehemalige"}]},{key:"position",label:"Position",options:[{value:"TH",label:"Torwart"},{value:"IV",label:"Innenverteidiger"},{value:"LV",label:"Linksverteidiger"},{value:"RV",label:"Rechtsverteidiger"},{value:"ZDM",label:"Defensives Mittelfeld"},{value:"ZM",label:"Zentrales Mittelfeld"},{value:"ZOM",label:"Offensives Mittelfeld"},{value:"LM",label:"Linkes Mittelfeld"},{value:"RM",label:"Rechtes Mittelfeld"},{value:"LF",label:"Linker Fl√ºgel"},{value:"RF",label:"Rechter Fl√ºgel"},{value:"ST",label:"St√ºrmer"}]}]},{id:"matches",label:"Spiele",icon:"fas fa-futbol",data:b||[],searchFields:["date","goalsa","goalsb","goalscorers","manofthematch","teama","teamb"],filterOptions:[],searchExtractor:k=>{const h=[];if(k.date&&h.push(new Date(k.date).toLocaleDateString("de-DE")),k.teama&&h.push(k.teama),k.teamb&&h.push(k.teamb),k.goalsa!==void 0&&h.push(k.goalsa.toString()),k.goalsb!==void 0&&h.push(k.goalsb.toString()),k.goalslista)try{const w=typeof k.goalslista=="string"?JSON.parse(k.goalslista):k.goalslista;Array.isArray(w)&&w.forEach(n=>{typeof n=="string"?h.push(n):n&&n.player&&h.push(n.player)})}catch{}if(k.goalslistb)try{const w=typeof k.goalslistb=="string"?JSON.parse(k.goalslistb):k.goalslistb;Array.isArray(w)&&w.forEach(n=>{typeof n=="string"?h.push(n):n&&n.player&&h.push(n.player)})}catch{}return k.manofthematch&&(h.push(k.manofthematch),h.push("Spieler des Spiels"),h.push("SdS")),h.join(" ").toLowerCase()}},{id:"transactions",label:"Transaktionen",icon:"fas fa-euro-sign",data:u||[],searchFields:["type","description","amount","date"],filterOptions:[{key:"type",label:"Typ",options:[{value:"transfer",label:"Transfer"},{value:"preis",label:"Preisgeld"},{value:"strafe",label:"Strafe"},{value:"sonstige",label:"Sonstige"}],filterFn:(k,h)=>{var m,y;const w=((m=k.type)==null?void 0:m.toLowerCase())||"",n=((y=k.description)==null?void 0:y.toLowerCase())||"";switch(h){case"transfer":return w.includes("transfer")||n.includes("transfer");case"preis":return w.includes("preis")||n.includes("preis")||k.amount>0;case"strafe":return w.includes("strafe")||n.includes("strafe");case"sonstige":return!w.includes("transfer")&&!w.includes("preis")&&!w.includes("strafe");default:return!0}}}]},{id:"bans",label:"Sperren",icon:"fas fa-ban",data:o||[],searchFields:["player_name","team","type","reason"],filterOptions:[{key:"team",label:"Team",options:[{value:"AEK",label:"AEK Athen"},{value:"Real",label:"Real Madrid"}]},{key:"type",label:"Typ",options:[{value:"Gelbe Karte",label:"Gelbe Karte"},{value:"Gelb-Rote Karte",label:"Gelb-Rote Karte"},{value:"Rote Karte",label:"Rote Karte"},{value:"Verletzung",label:"Verletzung"}]}]}],D=x.find(k=>k.id===s),p=(k,h)=>{switch(h){case"players":r==null||r("squad");break;case"matches":r==null||r("matches");break;case"transactions":r==null||r("finances");break;case"bans":r==null||r("bans");break}},$=()=>{const k=t.length>0?t:D.data;return k.length===0?e.jsxs("div",{className:"p-6 text-center text-text-secondary",children:[e.jsx("i",{className:`${D.icon} text-4xl mb-2`}),e.jsxs("p",{children:["Keine ",D.label.toLowerCase()," gefunden"]})]}):e.jsx("div",{className:"divide-y divide-border-light",children:k.map(h=>e.jsxs("button",{onClick:()=>p(h,s),className:"w-full p-4 hover:bg-bg-secondary transition-colors text-left focus:outline-none focus:ring-2 focus:ring-primary-green focus:ring-inset",children:[s==="players"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:h.name}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[h.position," ‚Ä¢ ",h.team," ‚Ä¢ ",h.value||0,"M ‚Ç¨"]}),(h.goals||0)>0&&e.jsxs("p",{className:"text-xs text-primary-green",children:["‚öΩ ",h.goals||0," Tore"]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[h.value||0,"M ‚Ç¨"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zum Spieler ‚Üí"})]})]}),s==="matches"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:new Date(h.date).toLocaleDateString("de-DE")}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[h.teama||"AEK"," ",h.goalsa||0," - ",h.goalsb||0," ",h.teamb||"Real"]}),(()=>{const w=[];try{if(h.goalslista){const n=typeof h.goalslista=="string"?JSON.parse(h.goalslista):h.goalslista;Array.isArray(n)&&n.forEach(m=>{const y=typeof m=="string"?m:m==null?void 0:m.player;y&&w.push(`${y} (AEK)`)})}if(h.goalslistb){const n=typeof h.goalslistb=="string"?JSON.parse(h.goalslistb):h.goalslistb;Array.isArray(n)&&n.forEach(m=>{const y=typeof m=="string"?m:m==null?void 0:m.player;y&&w.push(`${y} (Real)`)})}}catch{}return w.length>0?e.jsxs("p",{className:"text-xs text-text-muted mt-1",children:["‚öΩ ",w.slice(0,3).join(", "),w.length>3?"...":""]}):null})(),h.manofthematch&&e.jsxs("p",{className:"text-xs text-yellow-600 mt-1",children:["‚≠ê SdS: ",h.manofthematch]})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-lg font-bold text-primary-green",children:[(h.goalsa||0)+(h.goalsb||0)," Tore"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zum Spiel ‚Üí"})]})]}),s==="transactions"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:h.type||"Transaktion"}),e.jsx("p",{className:"text-sm text-text-secondary",children:h.description||"Keine Beschreibung"}),e.jsx("p",{className:"text-xs text-text-secondary",children:new Date(h.date).toLocaleDateString("de-DE")})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:`text-lg font-bold ${(h.amount||0)>=0?"text-green-600":"text-red-600"}`,children:[(h.amount||0)>0?"+":"",h.amount||0,"‚Ç¨"]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zu Finanzen ‚Üí"})]})]}),s==="bans"&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-text-primary",children:h.player_name}),e.jsxs("p",{className:"text-sm text-text-secondary",children:[h.team," ‚Ä¢ ",h.type]}),h.reason&&e.jsx("p",{className:"text-xs text-text-secondary",children:h.reason})]}),e.jsxs("div",{className:"text-right ml-4",children:[e.jsxs("div",{className:"text-sm text-accent-red",children:[h.duration||1," Spiel",(h.duration||1)!==1?"e":""]}),e.jsx("div",{className:"text-xs text-text-muted",children:"Zu Sperren ‚Üí"})]})]})]},h.id))})};return f?e.jsx(we,{message:"Lade Daten..."}):e.jsxs("div",{className:"p-4 pb-20 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-1",children:"üîç Globale Suche"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Durchsuche alle Daten zentral an einem Ort"})]}),e.jsx("div",{className:"icon-only-nav flex overflow-x-auto space-x-2 pb-2",children:x.map(k=>e.jsxs("button",{onClick:()=>{a(k.id),l([])},className:`search-nav-button flex items-center space-x-2 px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${s===k.id?"bg-primary-green text-white":"bg-bg-secondary text-text-muted hover:bg-bg-tertiary"}`,title:k.label,"aria-label":k.label,children:[e.jsx("i",{className:k.icon}),e.jsx("span",{className:"font-medium hidden sm:inline",children:k.label}),e.jsxs("span",{className:"text-xs opacity-75",children:["(",k.data.length,")"]})]},k.id))}),e.jsx(Xe,{data:D.data,searchFields:D.searchFields,filterOptions:D.filterOptions,searchExtractor:D.searchExtractor,onResults:l,placeholder:`${D.label} durchsuchen...`}),e.jsxs("div",{className:"modern-card",children:[e.jsx("div",{className:"p-4 border-b border-border-light",children:e.jsxs("h4",{className:"font-medium text-text-primary",children:[t.length>0?"Suchergebnisse":`Alle ${D.label}`,e.jsxs("span",{className:"text-text-secondary ml-2",children:["(",t.length>0?t.length:D.data.length,")"]})]})}),$()]})]})}function et(){const{theme:r,autoMode:s,toggleTheme:a,setAutoTheme:t,setManualTheme:l}=De();return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"üé®"}),"Design & Darstellung"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-2",children:"Darstellungsmodus"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("button",{onClick:()=>t(!0),className:`p-4 rounded-lg border-2 transition-all duration-300 flex flex-col items-center space-y-2 ${s?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsx("div",{className:"text-2xl",children:"üåó"}),e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Automatisch"}),e.jsx("div",{className:"text-xs text-text-muted text-center",children:"Folgt den Systemeinstellungen"})]}),e.jsxs("button",{onClick:()=>l("light"),className:`p-4 rounded-lg border-2 transition-all duration-300 flex flex-col items-center space-y-2 ${!s&&r==="light"?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsx("div",{className:"text-2xl",children:"‚òÄÔ∏è"}),e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Hell"}),e.jsx("div",{className:"text-xs text-text-muted text-center",children:"Helle Darstellung"})]}),e.jsxs("button",{onClick:()=>l("dark"),className:`p-4 rounded-lg border-2 transition-all duration-300 flex flex-col items-center space-y-2 ${!s&&r==="dark"?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsx("div",{className:"text-2xl",children:"üåô"}),e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Dunkel"}),e.jsx("div",{className:"text-xs text-text-muted text-center",children:"Dunkle Darstellung"})]})]})]}),e.jsx("div",{className:"bg-bg-tertiary rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Aktueller Modus"}),e.jsx("div",{className:"text-xs text-text-muted",children:s?`Automatisch (${r==="dark"?"Dunkel":"Hell"} - basierend auf Systemeinstellung)`:`Manuell (${r==="dark"?"Dunkel":"Hell"})`})]}),e.jsx("div",{className:"text-2xl",children:r==="dark"?"üåô":"‚òÄÔ∏è"})]})}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Schnellwechsel"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Wechselt zwischen Hell und Dunkel"})]}),e.jsxs("button",{onClick:a,className:"bg-primary-green hover:bg-primary-green-dark text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center space-x-2",children:[e.jsx("span",{children:r==="dark"?"‚òÄÔ∏è":"üåô"}),e.jsxs("span",{className:"text-sm font-medium",children:["Zu ",r==="dark"?"Hell":"Dunkel"]})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-500 text-xl flex-shrink-0",children:"üí°"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"Darstellungshinweise"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Automatisch:"})," Wechselt automatisch basierend auf Ihren Systemeinstellungen"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Hell:"})," Optimiert f√ºr helle Umgebungen und bessere Akkulaufzeit"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Dunkel:"})," Reduziert Augenbelastung bei schwachem Licht"]}),e.jsx("p",{children:"‚Ä¢ Alle Karten, Modals und UI-Elemente passen sich automatisch an"})]})]})]})})]})})}function tt(){const[r,s]=S.useState({primaryGreen:"#10B981",primaryGreenDark:"#059669",primaryGreenLight:"#34D399",accentOrange:"#F59E0B",accentRed:"#EF4444",accentBlue:"#3B82F6"}),[a]=S.useState([{name:"Standard",colors:{primaryGreen:"#10B981",primaryGreenDark:"#059669",primaryGreenLight:"#34D399",accentOrange:"#F59E0B",accentRed:"#EF4444",accentBlue:"#3B82F6"}},{name:"AEK Blau",colors:{primaryGreen:"#1E40AF",primaryGreenDark:"#1E3A8A",primaryGreenLight:"#3B82F6",accentOrange:"#F59E0B",accentRed:"#EF4444",accentBlue:"#60A5FA"}},{name:"Real Rot",colors:{primaryGreen:"#DC2626",primaryGreenDark:"#B91C1C",primaryGreenLight:"#EF4444",accentOrange:"#F59E0B",accentRed:"#F87171",accentBlue:"#3B82F6"}},{name:"Dunkles Gold",colors:{primaryGreen:"#D97706",primaryGreenDark:"#B45309",primaryGreenLight:"#F59E0B",accentOrange:"#FBBF24",accentRed:"#EF4444",accentBlue:"#3B82F6"}}]),[t,l]=S.useState(!1),[d,g]=S.useState("Standard");S.useEffect(()=>{const f=localStorage.getItem("fifa-tracker-custom-colors");if(f)try{const x=JSON.parse(f);s(x),b(x)}catch(x){console.error("Error loading custom colors:",x)}},[]);const b=f=>{const x=document.documentElement;x.style.setProperty("--primary-green",f.primaryGreen),x.style.setProperty("--primary-green-dark",f.primaryGreenDark),x.style.setProperty("--primary-green-light",f.primaryGreenLight),x.style.setProperty("--accent-orange",f.accentOrange),x.style.setProperty("--accent-red",f.accentRed),x.style.setProperty("--accent-blue",f.accentBlue)},c=(f,x)=>{const D={...r,[f]:x};s(D),l(!0),g("Benutzerdefiniert"),b(D)},u=f=>{s(f.colors),g(f.name),l(!0),b(f.colors)},i=()=>{localStorage.setItem("fifa-tracker-custom-colors",JSON.stringify(r)),l(!1);const f=new CustomEvent("show-toast",{detail:{message:"Farbschema gespeichert!",type:"success"}});window.dispatchEvent(f)},o=()=>{const f=a[0].colors;s(f),g("Standard"),l(!0),b(f)},N=({label:f,colorKey:x,value:D,description:p})=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary",children:f}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"color",value:D,onChange:$=>c(x,$.target.value),className:"w-12 h-12 rounded-lg border-2 border-border-medium cursor-pointer appearance-none",style:{background:D}}),e.jsx("div",{className:"absolute inset-0 w-12 h-12 rounded-lg border-2 border-white pointer-events-none shadow-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",value:D,onChange:$=>c(x,$.target.value),className:"w-full px-3 py-2 text-sm border border-border-medium rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green/50",placeholder:"#000000"}),p&&e.jsx("p",{className:"text-xs text-text-muted mt-1",children:p})]})]})]});return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"üé®"}),"Farbkonfiguration"]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-text-secondary mb-3",children:"Vorgefertigte Farbschemata"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:a.map(f=>e.jsxs("button",{onClick:()=>u(f),className:`p-3 rounded-lg border-2 transition-all duration-300 ${d===f.name?"border-primary-green bg-primary-green/10":"border-border-medium hover:border-border-dark"}`,children:[e.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border border-white/50",style:{backgroundColor:f.colors.primaryGreen}}),e.jsx("div",{className:"w-4 h-4 rounded-full border border-white/50",style:{backgroundColor:f.colors.accentRed}}),e.jsx("div",{className:"w-4 h-4 rounded-full border border-white/50",style:{backgroundColor:f.colors.accentBlue}})]}),e.jsx("div",{className:"text-xs font-medium text-text-primary",children:f.name})]},f.name))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-text-primary",children:"Individuelle Farbanpassung"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx(N,{label:"Prim√§rfarbe",colorKey:"primaryGreen",value:r.primaryGreen,description:"Hauptfarbe f√ºr Buttons und Akzente"}),e.jsx(N,{label:"Prim√§rfarbe (Dunkel)",colorKey:"primaryGreenDark",value:r.primaryGreenDark,description:"Dunklere Variante f√ºr Hover-Effekte"}),e.jsx(N,{label:"Prim√§rfarbe (Hell)",colorKey:"primaryGreenLight",value:r.primaryGreenLight,description:"Hellere Variante f√ºr Highlights"}),e.jsx(N,{label:"Akzentfarbe Orange",colorKey:"accentOrange",value:r.accentOrange,description:"Orange Akzente und Warnungen"}),e.jsx(N,{label:"Akzentfarbe Rot",colorKey:"accentRed",value:r.accentRed,description:"Rote Akzente und Fehler"}),e.jsx(N,{label:"Akzentfarbe Blau",colorKey:"accentBlue",value:r.accentBlue,description:"Blaue Akzente und Informationen"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-border-light",children:[e.jsx("button",{onClick:i,disabled:!t,className:`flex-1 py-3 px-4 rounded-lg font-medium transition-all duration-300 ${t?"bg-primary-green hover:bg-primary-green-dark text-white":"bg-border-medium text-text-muted cursor-not-allowed"}`,children:t?"Farben speichern":"Keine √Ñnderungen"}),e.jsx("button",{onClick:o,className:"py-3 px-4 bg-bg-tertiary hover:bg-border-light text-text-primary border border-border-medium rounded-lg font-medium transition-all duration-300",children:"Zur√ºcksetzen"})]}),e.jsxs("div",{className:"mt-8 p-6 bg-gradient-to-r from-gray-50 to-blue-50 rounded-2xl border border-gray-200",children:[e.jsxs("h5",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-eye text-blue-500"}),"Live-Vorschau"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("button",{className:"btn-primary text-sm py-3 px-4 rounded-xl font-medium transition-all duration-200 hover:shadow-lg transform hover:scale-105",style:{backgroundColor:r.primaryGreen,borderColor:r.primaryGreen},children:"Prim√§r Button"}),e.jsx("div",{className:"px-4 py-3 rounded-xl text-white text-sm font-medium shadow-md",style:{backgroundColor:r.accentRed},children:"Rot Akzent"}),e.jsx("div",{className:"px-4 py-3 rounded-xl text-white text-sm font-medium shadow-md",style:{backgroundColor:r.accentBlue},children:"Blau Akzent"}),e.jsx("div",{className:"px-4 py-3 rounded-xl text-white text-sm font-medium shadow-md",style:{backgroundColor:r.accentOrange},children:"Orange Akzent"})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-500 text-xl flex-shrink-0",children:"üí°"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"Farbhinweise"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("p",{children:"‚Ä¢ √Ñnderungen werden sofort in der Vorschau angezeigt"}),e.jsx("p",{children:"‚Ä¢ Gespeicherte Farben werden automatisch bei der n√§chsten Anmeldung geladen"}),e.jsx("p",{children:"‚Ä¢ Verwenden Sie Hex-Codes (#RRGGBB) f√ºr pr√§zise Farben"}),e.jsx("p",{children:"‚Ä¢ Team-spezifische Presets helfen bei der schnellen Anpassung"})]})]})]})})]})})}class st{constructor(){this.isSupported="serviceWorker"in navigator&&"PushManager"in window,this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent),this.permission=Notification.permission,this.subscription=null,this.settings=this.loadSettings()}async initialize(){if(!this.isSupported)return console.warn("Push notifications not supported"),!1;try{if("serviceWorker"in navigator){const s=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered:",s)}return this.permission=Notification.permission,!0}catch(s){return console.error("Failed to initialize notifications:",s),!1}}async requestPermission(){if(!this.isSupported)throw new Error("Notifications not supported");if(this.permission==="granted")return!0;try{if(this.isIOS){const s=await Notification.requestPermission();return this.permission=s,s==="granted"}else{const s=await Notification.requestPermission();return this.permission=s,s==="granted"}}catch(s){return console.error("Permission request failed:",s),!1}}async subscribe(){if(!this.isSupported||this.permission!=="granted")throw new Error("Cannot subscribe: permission not granted");try{const s=await navigator.serviceWorker.ready,a=await s.pushManager.getSubscription();if(a)return this.subscription=a,a;const t=await s.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.getVAPIDKey()});return this.subscription=t,await this.sendSubscriptionToServer(t),t}catch(s){throw console.error("Subscription failed:",s),s}}async unsubscribe(){if(!this.subscription)return!0;try{return await this.subscription.unsubscribe(),await this.removeSubscriptionFromServer(this.subscription),this.subscription=null,!0}catch(s){return console.error("Unsubscribe failed:",s),!1}}async scheduleMatchReminder(s,a=30){if(!this.settings.matchReminders)return;const t=new Date(s.date),l=new Date(t.getTime()-a*60*1e3),d=new Date;if(l<=d)return;const g=l.getTime()-d.getTime();setTimeout(()=>{this.showNotification({title:"‚öΩ FIFA Match Reminder",body:`Match starting in ${a} minutes: AEK vs Real Madrid`,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`match-reminder-${s.id}`,data:{type:"match_reminder",matchId:s.id,url:"/matches"},actions:[{action:"view",title:"View Match",icon:"/assets/icon-180.png"},{action:"dismiss",title:"Dismiss"}]})},g)}async notifyAchievement(s){this.settings.achievements&&await this.showNotification({title:"üèÜ Achievement Unlocked!",body:s.title,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`achievement-${s.id}`,data:{type:"achievement",achievementId:s.id,url:"/stats"}})}async notifyGoal(s,a,t){this.settings.goals&&await this.showNotification({title:"‚öΩ GOAL!",body:`${t} scored for ${a}!`,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`goal-${s.id}-${Date.now()}`,data:{type:"goal",matchId:s.id,url:"/matches"}})}async notifyEvent(s){this.settings.events&&await this.showNotification({title:`üéâ ${s.name}`,body:s.description,icon:"/assets/icon-180.png",badge:"/assets/icon-180.png",tag:`event-${s.id}`,data:{type:"event",eventId:s.id,url:"/events"}})}async showNotification(s){if(this.permission!=="granted"){console.warn("Cannot show notification: permission not granted");return}try{"serviceWorker"in navigator?await(await navigator.serviceWorker.ready).showNotification(s.title,{body:s.body,icon:s.icon,badge:s.badge,tag:s.tag,data:s.data,actions:s.actions||[],vibrate:this.isIOS?void 0:[200,100,200],requireInteraction:!1,silent:!1}):new Notification(s.title,{body:s.body,icon:s.icon,tag:s.tag,data:s.data})}catch(a){console.error("Failed to show notification:",a)}}updateSettings(s){this.settings={...this.settings,...s},localStorage.setItem("fifa-tracker-notification-settings",JSON.stringify(this.settings))}loadSettings(){const s=localStorage.getItem("fifa-tracker-notification-settings"),a={matchReminders:!0,goals:!0,achievements:!0,events:!0,reminderTime:30};return s?{...a,...JSON.parse(s)}:a}getVAPIDKey(){return"BEl62iUYgUivxIkv69yViEuiBIa40HI0DLLuxazjqak_7kYDjLE2cI5GkJM-5z9z9LzsQI7JClZgZmKjgKrRxfQ"}async sendSubscriptionToServer(s){try{console.log("Would send subscription to server:",s)}catch(a){console.error("Failed to send subscription to server:",a)}}async removeSubscriptionFromServer(s){try{console.log("Would remove subscription from server:",s)}catch(a){console.error("Failed to remove subscription from server:",a)}}async testNotification(){await this.showNotification({title:"üß™ Test Notification",body:"FUSTA notifications are working!",icon:"/assets/icon-180.png",tag:"test-notification"})}getStatus(){return{supported:this.isSupported,permission:this.permission,subscribed:!!this.subscription,isIOS:this.isIOS,settings:this.settings}}}const K=new st;typeof window<"u"&&(window.NotificationService=K,K.initialize());function at(){const[r,s]=S.useState(K.getStatus()),[a,t]=S.useState(K.settings),[l,d]=S.useState(!1);S.useEffect(()=>{s(K.getStatus()),t(K.settings)},[]);const g=async()=>{d(!0);try{await K.requestPermission()&&await K.subscribe(),s(K.getStatus())}catch(i){console.error("Permission request failed:",i);const o=new CustomEvent("show-toast",{detail:{message:"Benachrichtigungen konnten nicht aktiviert werden.",type:"error"}});window.dispatchEvent(o)}finally{d(!1)}},b=async()=>{d(!0);try{await K.unsubscribe(),s(K.getStatus())}catch(i){console.error("Unsubscribe failed:",i)}finally{d(!1)}},c=(i,o)=>{const N={...a,[i]:o};t(N),K.updateSettings(N)},u=async()=>{try{await K.testNotification();const i=new CustomEvent("show-toast",{detail:{message:"Test-Benachrichtigung gesendet!",type:"success"}});window.dispatchEvent(i)}catch(i){console.error("Test notification failed:",i)}};return r.supported?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"üì±"}),"Push-Benachrichtigungen"]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"Status"}),e.jsxs("div",{className:"text-xs text-text-muted",children:[r.permission==="granted"?"Benachrichtigungen aktiviert":r.permission==="denied"?"Benachrichtigungen blockiert":"Berechtigung ausstehend",r.isIOS&&" (iOS)"]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-medium ${r.permission==="granted"?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300":r.permission==="denied"?"bg-red-100 text-red-700 dark:bg-red-900/20 dark:text-red-300":"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/20 dark:text-yellow-300"}`,children:r.permission==="granted"?"Aktiv":r.permission==="denied"?"Blockiert":"Ausstehend"})]})}),r.permission!=="granted"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("button",{onClick:g,disabled:l||r.permission==="denied",className:`w-full py-3 px-4 rounded-lg font-medium transition-all duration-300 ${r.permission==="denied"?"bg-border-medium text-text-muted cursor-not-allowed":"bg-primary-green hover:bg-primary-green-dark text-white"}`,children:l?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Aktiviere..."]}):r.permission==="denied"?"In Browsereinstellungen aktivieren":"Benachrichtigungen aktivieren"}),r.permission==="denied"&&e.jsx("p",{className:"text-xs text-text-muted mt-2 text-center",children:"√ñffnen Sie die Browsereinstellungen und erlauben Sie Benachrichtigungen f√ºr diese Seite."})]}),r.permission==="granted"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-text-primary",children:"Benachrichtigungseinstellungen"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"‚öΩ Spiel-Erinnerungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Erinnerungen vor Spielbeginn"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.matchReminders,onChange:i=>c("matchReminders",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]}),a.matchReminders&&e.jsxs("div",{className:"ml-4 p-3 bg-bg-tertiary rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Erinnerungszeit (Minuten vor Spielbeginn)"}),e.jsxs("select",{value:a.reminderTime,onChange:i=>c("reminderTime",parseInt(i.target.value)),className:"w-full px-3 py-2 text-sm border border-border-medium rounded-lg bg-bg-secondary text-text-primary focus:outline-none focus:ring-2 focus:ring-primary-green/50",children:[e.jsx("option",{value:5,children:"5 Minuten"}),e.jsx("option",{value:15,children:"15 Minuten"}),e.jsx("option",{value:30,children:"30 Minuten"}),e.jsx("option",{value:60,children:"1 Stunde"}),e.jsx("option",{value:120,children:"2 Stunden"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"‚öΩ Tor-Benachrichtigungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Bei Toren w√§hrend Live-Matches"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.goals,onChange:i=>c("goals",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"üèÜ Achievement-Benachrichtigungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Bei freigeschalteten Erfolgen"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.achievements,onChange:i=>c("achievements",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-text-primary",children:"üéâ Event-Benachrichtigungen"}),e.jsx("div",{className:"text-xs text-text-muted",children:"Bei neuen Events und Turnieren"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.events,onChange:i=>c("events",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-border-medium peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-green"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t border-border-light",children:[e.jsx("button",{onClick:u,className:"flex-1 py-2 px-4 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all duration-300",children:"Test-Benachrichtigung"}),e.jsx("button",{onClick:b,disabled:l,className:"py-2 px-4 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-all duration-300 disabled:opacity-50",children:l?"Deaktiviere...":"Deaktivieren"})]})]}),r.isIOS&&e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-blue-500 text-xl flex-shrink-0",children:"üì±"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-1",children:"iOS-Hinweis"}),e.jsxs("div",{className:"text-xs text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("p",{children:'‚Ä¢ Installieren Sie die App √ºber "Zum Home-Bildschirm hinzuf√ºgen" f√ºr beste Benachrichtigungen'}),e.jsx("p",{children:"‚Ä¢ Benachrichtigungen funktionieren nur bei aktiver App oder im Hintergrund"}),e.jsx("p",{children:"‚Ä¢ √úberpr√ºfen Sie die iOS-Einstellungen f√ºr App-Benachrichtigungen"})]})]})]})})]})}):e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-bg-secondary rounded-lg p-6 border border-border-light",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"text-xl mr-2",children:"üì±"}),"Push-Benachrichtigungen"]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"text-yellow-500 text-xl flex-shrink-0",children:"‚ö†Ô∏è"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-1",children:"Nicht unterst√ºtzt"}),e.jsx("div",{className:"text-xs text-yellow-700 dark:text-yellow-300",children:"Ihr Browser unterst√ºtzt keine Push-Benachrichtigungen. Verwenden Sie einen modernen Browser oder installieren Sie die App f√ºr Benachrichtigungen."})]})]})})]})})}function rt(){const[r,s]=S.useState({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}}),[a,t]=S.useState(!1),[l,d]=S.useState(!0);S.useEffect(()=>{g()},[]);const g=async()=>{try{d(!0),console.log("üîÑ [AdminTab] Loading managers from database...");const o=await Q.getManagers();if(console.log("üìä [AdminTab] Manager data result:",o),o&&o.data&&Array.isArray(o.data)&&o.data.length>=2){console.log("‚úÖ [AdminTab] Manager data loaded successfully:",o.data);const N=o.data.find(x=>x.id===1)||{name:"Alexander",gewicht:110,age:30},f=o.data.find(x=>x.id===2)||{name:"Philip",gewicht:105,age:30};console.log("üë§ [AdminTab] AEK Manager:",N),console.log("üë§ [AdminTab] Real Manager:",f),s({aek:{name:N.name,age:N.age||30,weight:N.gewicht},real:{name:f.name,age:f.age||30,weight:f.gewicht}})}else console.warn("‚ö†Ô∏è [AdminTab] No manager data found, using defaults. Result:",o),await b()}catch(o){console.error("‚ùå [AdminTab] Error loading manager settings from database:",o),await b()}finally{d(!1)}},b=async()=>{try{console.log("üîß [AdminTab] Initializing default managers...");const o={name:"Alexander",gewicht:110,age:30},N=await Q.insertManager(o);console.log("‚úÖ [AdminTab] AEK manager created:",N);const f={name:"Philip",gewicht:105,age:30},x=await Q.insertManager(f);console.log("‚úÖ [AdminTab] Real manager created:",x),s({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}})}catch(o){console.error("‚ùå [AdminTab] Error initializing managers:",o),s({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}})}},c=(o,N,f)=>{s(x=>({...x,[o]:{...x[o],[N]:N==="name"?f:parseInt(f)||0}})),t(!0)},u=async()=>{try{d(!0),console.log("üíæ [TeamSettings] Saving manager settings:",r);const o={name:r.aek.name,gewicht:r.aek.weight,age:r.aek.age},N={name:r.real.name,gewicht:r.real.weight,age:r.real.age};console.log("üíæ [TeamSettings] AEK Data:",o),console.log("üíæ [TeamSettings] Real Data:",N);const f=await Q.updateManager(1,o);console.log("üíæ [TeamSettings] AEK Update Result:",f);const x=await Q.updateManager(2,N);console.log("üíæ [TeamSettings] Real Update Result:",x),t(!1),window.dispatchEvent(new CustomEvent("managerSettingsChanged"));const D=document.createElement("div");D.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",D.textContent="Manager-Einstellungen gespeichert!",document.body.appendChild(D),setTimeout(()=>{document.body.contains(D)&&document.body.removeChild(D)},3e3)}catch(o){console.error("Error saving manager settings:",o);const N=document.createElement("div");N.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",N.textContent="Fehler beim Speichern!",document.body.appendChild(N),setTimeout(()=>{document.body.contains(N)&&document.body.removeChild(N)},3e3)}finally{d(!1)}},i=()=>{s({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}}),t(!0)};return e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx(et,{}),e.jsx(tt,{}),e.jsx(at,{}),l?e.jsx("div",{className:"modern-card",children:e.jsxs("div",{className:"flex justify-center items-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-green"}),e.jsx("span",{className:"ml-2 text-text-muted",children:"Lade Manager-Einstellungen..."})]})}):e.jsxs("div",{className:"modern-card",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary",children:"üèÜ Team-Manager Einstellungen"}),a&&e.jsx("span",{className:"text-sm text-orange-600 font-medium",children:"Ungespeicherte √Ñnderungen"})]}),e.jsx("div",{className:"text-sm text-text-muted mb-6",children:"Hier k√∂nnen Sie die Daten der Team-Manager f√ºr die BAK-Berechnung anpassen."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4 p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsxs("h4",{className:"font-medium text-blue-800 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-blue-600 rounded mr-2"}),"AEK Manager"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:r.aek.name,onChange:o=>c("aek","name",o.target.value),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Manager Name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alter"}),e.jsx("input",{type:"number",min:"18",max:"80",value:r.aek.age,onChange:o=>c("aek","age",o.target.value),onFocus:o=>o.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gewicht (kg)"}),e.jsx("input",{type:"number",min:"40",max:"200",value:r.aek.weight,onChange:o=>c("aek","weight",o.target.value),onFocus:o=>o.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),e.jsxs("div",{className:"space-y-4 p-4 border border-red-200 rounded-lg bg-red-50",children:[e.jsxs("h4",{className:"font-medium text-red-800 flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-red-600 rounded mr-2"}),"Real Manager"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name"}),e.jsx("input",{type:"text",value:r.real.name,onChange:o=>c("real","name",o.target.value),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500",placeholder:"Manager Name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Alter"}),e.jsx("input",{type:"number",min:"18",max:"80",value:r.real.age,onChange:o=>c("real","age",o.target.value),onFocus:o=>o.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Gewicht (kg)"}),e.jsx("input",{type:"number",min:"40",max:"200",value:r.real.weight,onChange:o=>c("real","weight",o.target.value),onFocus:o=>o.target.select(),className:"w-full px-3 py-2 border border-border-light rounded-lg bg-white text-text-primary focus:outline-none focus:ring-2 focus:ring-red-500"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-border-light",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 text-sm bg-gray-100 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-200 transition-colors",children:"Standardwerte wiederherstellen"}),e.jsx("button",{onClick:u,disabled:!a||l,className:`px-4 py-2 text-sm rounded-lg transition-colors ${a&&!l?"bg-primary-green text-white hover:bg-green-600":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:l?"Speichern...":"Einstellungen speichern"})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Hinweis:"})," Diese Einstellungen werden f√ºr die BAK-Berechnung in der Statistik verwendet. Die Werte werden in der Datenbank gespeichert."]})})]})]})}function nt(){const[r,s]=S.useState(()=>{const u=localStorage.getItem("eventsTabEnabled");return u!==null?JSON.parse(u):!1}),[a,t]=S.useState({title:"",message:"",type:"general"}),[l,d]=S.useState(()=>{const u=localStorage.getItem("customEvents");return u?JSON.parse(u):[]}),g=u=>{s(u),localStorage.setItem("eventsTabEnabled",JSON.stringify(u)),setTimeout(()=>{window.location.reload()},500)},b=()=>{if(!a.title||!a.message){alert("Bitte Titel und Nachricht eingeben");return}G(a.type,{title:a.title,message:a.message,timestamp:new Date().toISOString(),custom:!0});const i=[{id:Date.now(),...a,timestamp:new Date().toISOString()},...l.slice(0,9)];d(i),localStorage.setItem("customEvents",JSON.stringify(i)),t({title:"",message:"",type:"general"}),alert("Benachrichtigung gesendet!")},c=[{value:"general",label:"üì¢ Allgemein",color:"bg-gray-500"},{value:"match-created",label:"‚öΩ Spiel erstellt",color:"bg-green-500"},{value:"player-ban",label:"üö´ Spieler gesperrt",color:"bg-red-500"},{value:"financial-milestone",label:"üí∞ Finanzmeilenstein",color:"bg-yellow-500"},{value:"achievement-unlocked",label:"üèÖ Achievement",color:"bg-purple-500"},{value:"system-update",label:"üîÑ System Update",color:"bg-blue-500"}];return e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üéâ"}),"Events Tab Konfiguration"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-bg-secondary rounded-lg border border-border-light",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-text-primary",children:"Events Tab anzeigen"}),e.jsx("div",{className:"text-sm text-text-muted",children:"Zeigt den Events Tab in der Navigation an oder blendet ihn aus"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r,onChange:u=>g(u.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Hinweis:"})," Der Events Tab ist standardm√§√üig ausgeblendet. Nach dem Aktivieren wird die Seite neu geladen um die Navigation zu aktualisieren."]})})]})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üöÄ"}),"Schnell-Tests f√ºr Push-Benachrichtigungen"]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>G("match-result",{goalsa:3,goalsb:1,manofthematch:"Max M√ºller",date:new Date().toISOString()}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"‚öΩ"}),"Spielergebnis-Test"]}),e.jsxs("button",{onClick:()=>G("player-ban",{playerName:"Tom Schmidt",games:3}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üö´"}),"Spieler-Sperre"]}),e.jsxs("button",{onClick:()=>G("financial-milestone",{team:"AEK Athen",amount:250}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üí∞"}),"Finanzmeilenstein"]}),e.jsxs("button",{onClick:()=>G("achievement-unlocked",{name:"Torj√§ger",description:"10 Tore in einer Saison"}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üèÖ"}),"Achievement"]}),e.jsxs("button",{onClick:()=>G("system-update",{message:"Neue Funktionen verf√ºgbar!"}),className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üîÑ"}),"System-Update"]}),e.jsxs("button",{onClick:()=>{setTimeout(()=>G("match-created",{date:new Date().toISOString()}),0),setTimeout(()=>G("player-ban",{playerName:"Test Player",games:1}),300),setTimeout(()=>G("financial-milestone",{team:"Real Madrid",amount:100}),600)},className:"btn-secondary text-sm py-3 px-4 card-hover-lift btn-spring-press flex items-center justify-center gap-2",children:[e.jsx("span",{children:"üìö"}),"Mehrere Tests"]})]}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Tipp:"})," Diese Buttons testen die neuen Push-Up Benachrichtigungen mit realistischen Daten und Animationen."]})})]}),e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üì¢"}),"Individuelle Push-Benachrichtigungen"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Nachrichtentyp"}),e.jsx("select",{value:a.type,onChange:u=>t(i=>({...i,type:u.target.value})),className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors",children:c.map(u=>e.jsx("option",{value:u.value,children:u.label},u.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Titel"}),e.jsx("input",{type:"text",value:a.title,onChange:u=>t(i=>({...i,title:u.target.value})),placeholder:"z.B. Neues Tournament startet",className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Nachricht"}),e.jsx("textarea",{value:a.message,onChange:u=>t(i=>({...i,message:u.target.value})),placeholder:"z.B. Das Weihnachts-Tournament beginnt morgen um 19:00 Uhr!",rows:3,className:"w-full px-3 py-2 bg-bg-secondary border border-border-light rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-blue transition-colors resize-none"})]}),e.jsxs("button",{onClick:b,disabled:!a.title||!a.message,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx("i",{className:"fas fa-paper-plane mr-2"}),"Benachrichtigung senden"]})]})]}),l.length>0&&e.jsxs("div",{className:"modern-card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üìã"}),"Gesendete Benachrichtigungen"]}),e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:l.map(u=>{var i;return e.jsx("div",{className:"p-3 bg-bg-secondary rounded-lg border border-border-light",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-text-primary text-sm flex items-center",children:[e.jsx("span",{className:`w-2 h-2 rounded-full mr-2 ${((i=c.find(o=>o.value===u.type))==null?void 0:i.color)||"bg-gray-500"}`}),u.title]}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:u.message}),e.jsx("div",{className:"text-xs text-text-muted mt-1",children:new Date(u.timestamp).toLocaleString("de-DE")})]})})},u.id)})}),l.length>=10&&e.jsx("div",{className:"text-xs text-text-muted mt-2 text-center",children:"Nur die letzten 10 Benachrichtigungen werden angezeigt"})]})]})}const lt=()=>{const[r,s]=S.useState(q());return S.useEffect(()=>{const a=t=>{s(t.detail.newSeason)};return window.addEventListener("seasonChanged",a),()=>window.removeEventListener("seasonChanged",a)},[]),{currentSeason:r,isLegacy:r===ie.LEGACY,isFC26:r===ie.FC26}},ve=()=>{const[r,s]=S.useState([]),[a,t]=S.useState(!1),{currentSeason:l}=lt();S.useEffect(()=>{const b=()=>{s($e())};b();const c=()=>{setTimeout(b,100)};return window.addEventListener("seasonChanged",c),window.addEventListener("legacyDataMigrated",c),window.addEventListener("fc26EnvironmentInitialized",c),()=>{window.removeEventListener("seasonChanged",c),window.removeEventListener("legacyDataMigrated",c),window.removeEventListener("fc26EnvironmentInitialized",c)}},[]);const d=async b=>{try{t(!0);const c=ze(b);if(c){const u=new Blob([JSON.stringify(c,null,2)],{type:"application/json"}),i=URL.createObjectURL(u),o=document.createElement("a");o.href=i,o.download=`fifa-tracker-${b}-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),console.log(`Exported ${b} data successfully`)}else console.error("Failed to export season data")}catch(c){console.error("Error exporting season data:",c)}finally{t(!1)}},g=b=>{const c=["matches","players","bans","transactions","alcoholCalculator"],u={};return c.forEach(i=>{try{const o=`fifa_season_${b}_${i}`,N=localStorage.getItem(o);if(N){const f=JSON.parse(N);Array.isArray(f)?u[i]=f.length:typeof f=="object"&&(u[i]=1)}else u[i]=0}catch{u[i]=0}}),u};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsx("div",{className:`w-16 h-16 bg-gradient-to-br from-emerald-500 to-cyan-500 rounded-2xl \r
                        flex items-center justify-center text-white shadow-lg border border-emerald-300`,children:e.jsx("i",{className:"fas fa-calendar-alt text-2xl"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-1",children:"Saison-Manager"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Verwalten Sie Legacy- und FC26-Daten"})]})]}),e.jsx("div",{className:"bg-gradient-to-r from-emerald-50 via-teal-50 to-cyan-50 rounded-2xl p-6 border border-emerald-200 shadow-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-emerald-400 to-cyan-400 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx("i",{className:"fas fa-calendar-check text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:"Aktuelle Saison"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:Te[l]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Alle Aktionen werden in dieser Saison gespeichert"})]})]}),e.jsx("div",{className:"text-6xl opacity-20",children:l===ie.FC26?"‚ö°":"üìö"})]})}),e.jsx(Fe,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Daten√ºbersicht pro Saison"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:r.map(b=>{const c=g(b.id),u=Object.values(c).reduce((i,o)=>i+o,0);return e.jsxs("div",{className:`p-6 rounded-xl border-2 ${b.isActive?"border-blue-500 bg-blue-50":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-xl",style:{backgroundColor:b.color+"20",color:b.color},children:b.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:b.name}),e.jsx("p",{className:"text-sm text-gray-600",children:b.description})]})]}),b.isActive&&e.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"Aktiv"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Gesamt Eintr√§ge:"}),e.jsx("span",{className:"font-medium text-gray-800",children:u})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"‚öΩ Spiele:"}),e.jsx("span",{className:"font-medium",children:c.matches||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"üë• Spieler:"}),e.jsx("span",{className:"font-medium",children:c.players||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"üö´ Sperren:"}),e.jsx("span",{className:"font-medium",children:c.bans||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"üí∞ Transaktionen:"}),e.jsx("span",{className:"font-medium",children:c.transactions||0})]})]}),c.alcoholCalculator>0&&e.jsxs("div",{className:"flex justify-between text-sm pt-2 border-t border-gray-200",children:[e.jsx("span",{className:"text-gray-600",children:"üç∫ Alkohol-Tracker:"}),e.jsx("span",{className:"font-medium text-green-600",children:"Konfiguriert"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>d(b.id),disabled:!b.hasData||a,className:`flex-1 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 \r
                                 rounded-lg text-sm transition-colors disabled:opacity-50 \r
                                 disabled:cursor-not-allowed`,children:a?"Exportiert...":"üì• Export"}),b.hasData&&e.jsx("div",{className:"flex-1 px-3 py-2 text-center text-sm",children:e.jsx("span",{className:"text-green-600 font-medium",children:"‚úì Daten vorhanden"})})]})})]},b.id)})})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-amber-600 text-2xl",children:"üí°"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"FC26 Saison-System"}),e.jsxs("div",{className:"space-y-2 text-sm text-amber-700",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Legacy:"})," Alle bisherigen FIFA-Daten bleiben erhalten und zug√§nglich"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"FC26:"})," Neue Saison mit frischen Daten f√ºr FIFA Club 26"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Isolation:"})," Jede Saison hat separate Speicherbereiche"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Wechsel:"})," Beliebig zwischen Saisons wechseln m√∂glich"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Export:"})," Backup-Funktion f√ºr alle Saisondaten"]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Technische Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Speicher-System:"}),e.jsx("br",{}),"‚Ä¢ Lokaler Browser-Speicher",e.jsx("br",{}),"‚Ä¢ Automatische Datenmigration",e.jsx("br",{}),"‚Ä¢ Versionsverwaltung"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Datentypen:"}),e.jsx("br",{}),"‚Ä¢ Spiele und Ergebnisse",e.jsx("br",{}),"‚Ä¢ Spieler und Teams",e.jsx("br",{}),"‚Ä¢ Finanzen und Statistiken"]})]})]})]})},it=()=>{const[r,s]=S.useState([]),[a,t]=S.useState(""),[l,d]=S.useState(!1),[g,b]=S.useState({version:"",displayName:"",description:""}),[c,u]=S.useState(!1),i=()=>{const p=oe(),$=ue(),k=p.sort((h,w)=>{if(!h.isCustom&&w.isCustom)return-1;if(h.isCustom&&!w.isCustom)return 1;if(!h.isCustom&&!w.isCustom)return h.id==="FC25"?-1:w.id==="FC25"?1:0;const n=new Date(h.createdAt||0);return new Date(w.createdAt||0)-n});s(k),t($)};S.useEffect(()=>{i();const p=()=>{i()};return window.addEventListener("fifaVersionChanged",p),window.addEventListener("fifaVersionAdded",p),window.addEventListener("fifaVersionRemoved",p),()=>{window.removeEventListener("fifaVersionChanged",p),window.removeEventListener("fifaVersionAdded",p),window.removeEventListener("fifaVersionRemoved",p)}},[]);const o=async p=>{p.preventDefault(),u(!0);try{const{version:$,displayName:k,description:h}=g;if(!$.trim())throw new Error("Version identifier ist erforderlich");const w=$.trim().toUpperCase();if(!/^[A-Za-z]+\d*$/.test(w))throw new Error("Version Format ung√ºltig. Verwenden Sie Formate wie FC27, EA25, etc.");const n={displayName:k.trim()||w,description:h.trim()||`Custom FIFA Version ${w}`,createdAt:new Date().toISOString(),createdBy:"admin"};await Ie(w,n),b({version:"",displayName:"",description:""}),d(!1),I.success(`FIFA Version ${w} erfolgreich hinzugef√ºgt!`)}catch($){I.error($.message)}finally{u(!1)}},N=async p=>{if(window.confirm(`Sind Sie sicher, dass Sie Version "${p}" l√∂schen m√∂chten?`))try{await Be(p),I.success(`Version ${p} erfolgreich entfernt!`)}catch($){I.error($.message)}},f=async p=>{try{Me(p),I.success(`Zu Version ${X(p)} gewechselt!`),setTimeout(()=>{window.location.reload()},1e3)}catch($){I.error(`Fehler beim Wechseln der Version: ${$.message}`)}},x=p=>p.isLegacy?"bg-gray-100 text-gray-700":p.isCurrent?"bg-blue-100 text-blue-700":p.isCustom?"bg-purple-100 text-purple-700":"bg-gray-100 text-gray-700",D=p=>p.isLegacy?"Legacy":p.isCurrent?"Standard":p.isCustom?"Custom":"Standard";return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 bg-gradient-to-br from-purple-500 to-blue-600 rounded-xl \r
                          flex items-center justify-center text-white text-xl font-bold`,children:"üéÆ"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"FIFA Versionen-Manager"}),e.jsx("p",{className:"text-gray-600",children:"Verwalten und erstellen Sie FIFA Versionen f√ºr zukunftssichere Datenorganisation"})]})]}),e.jsxs("button",{onClick:()=>d(!l),className:`px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg \r
                     transition-colors flex items-center gap-2`,children:[e.jsx("span",{className:"text-lg",children:"+"}),"Neue Version"]})]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 rounded-xl p-6 border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Aktuelle FIFA Version"}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("p",{className:"text-3xl font-bold text-purple-600",children:a}),e.jsxs("p",{className:"text-lg text-gray-600",children:["(",X(a),")"]})]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:"Alle neuen Daten werden in dieser Version gespeichert"})]}),e.jsx("div",{className:"text-4xl",children:"üéÆ"})]})}),l&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Neue FIFA Version hinzuf√ºgen"}),e.jsxs("form",{onSubmit:o,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Version Identifier *"}),e.jsx("input",{type:"text",value:g.version,onChange:p=>b($=>({...$,version:p.target.value})),placeholder:"z.B. FC27, EA25, FIFA28",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 \r
                           focus:ring-purple-500 focus:border-purple-500`,required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format: Buchstaben gefolgt von optionalen Zahlen (FC27, EA25, etc.)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Anzeigename"}),e.jsx("input",{type:"text",value:g.displayName,onChange:p=>b($=>({...$,displayName:p.target.value})),placeholder:"z.B. FIFA Club 27",className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 \r
                           focus:ring-purple-500 focus:border-purple-500`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Beschreibung"}),e.jsx("textarea",{value:g.description,onChange:p=>b($=>({...$,description:p.target.value})),placeholder:"Beschreibung der neuen Version...",rows:3,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 \r
                         focus:ring-purple-500 focus:border-purple-500`})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:c,className:`px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg \r
                         transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:c?"Wird hinzugef√ºgt...":"Version hinzuf√ºgen"}),e.jsx("button",{type:"button",onClick:()=>d(!1),className:`px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-lg \r
                         transition-colors`,children:"Abbrechen"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Verf√ºgbare FIFA Versionen"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:r.map(p=>{var $;return e.jsxs("div",{className:`p-6 rounded-xl border-2 ${p.isActive?"border-purple-500 bg-purple-50":"border-gray-200 bg-white"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:"text-xl font-bold text-gray-800",children:p.id}),e.jsxs("span",{className:"text-sm text-gray-600",children:["(",p.name,")"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${x(p)}`,children:D(p)}),p.isActive&&e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:"Aktiv"})]})]})}),e.jsx("div",{className:"text-2xl",children:p.isLegacy?"üìö":p.isCurrent?"‚ö°":"üéÆ"})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:p.description||(($=p.metadata)==null?void 0:$.description)||"Keine Beschreibung verf√ºgbar"}),p.createdAt&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Erstellt: ",new Date(p.createdAt).toLocaleDateString("de-DE")]})]}),e.jsxs("div",{className:"flex gap-2",children:[!p.isActive&&e.jsx("button",{onClick:()=>f(p.id),className:`flex-1 px-3 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 \r
                             rounded-lg text-sm transition-colors`,children:"Aktivieren"}),p.isCustom&&e.jsx("button",{onClick:()=>N(p.id),disabled:p.isActive,className:`px-3 py-2 bg-red-100 hover:bg-red-200 text-red-700 rounded-lg \r
                             text-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed`,children:"L√∂schen"}),p.isActive&&e.jsx("div",{className:"flex-1 px-3 py-2 text-center text-sm",children:e.jsx("span",{className:"text-green-600 font-medium",children:"‚úì Aktive Version"})})]})]},p.id)})})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-amber-600 text-2xl",children:"üí°"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-amber-800 mb-2",children:"FIFA Versionen-System"}),e.jsxs("div",{className:"space-y-2 text-sm text-amber-700",children:[e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Built-in Versionen:"})," FC25 (Legacy) und FC26 (Standard) sind vorinstalliert"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Custom Versionen:"})," Erstellen Sie eigene Versionen f√ºr zuk√ºnftige FIFA-Editionen"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Datenisolation:"})," Jede Version hat separate Datenbanken"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Zukunftssicher:"})," System ist bereit f√ºr FC27, FC28 und weitere Versionen"]}),e.jsxs("p",{children:["‚Ä¢ ",e.jsx("strong",{children:"Flexibilit√§t:"})," Wechseln Sie beliebig zwischen Versionen"]})]})]})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-3",children:"Technische Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Version-Management:"}),e.jsx("br",{}),"‚Ä¢ Dynamisches Hinzuf√ºgen neuer Versionen",e.jsx("br",{}),"‚Ä¢ Automatische Datenbankfilterung",e.jsx("br",{}),"‚Ä¢ Metadaten-Unterst√ºtzung"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Datenformat:"}),e.jsx("br",{}),"‚Ä¢ Version Identifier (FC27, EA25, etc.)",e.jsx("br",{}),"‚Ä¢ Anzeigename und Beschreibung",e.jsx("br",{}),"‚Ä¢ Erstellungsdatum und Metadaten"]})]})]})]})},ot=()=>{const[r,s]=S.useState(""),[a,t]=S.useState([]),[l,d]=S.useState({}),[g,b]=S.useState(""),[c,u]=S.useState(!1),[i,o]=S.useState(!1),[N,f]=S.useState(!1),[x,D]=S.useState("");S.useEffect(()=>(()=>{p();const z=()=>{p()},R=()=>{g&&$(g)};return window.addEventListener("fifaVersionChanged",z),window.addEventListener("versionTeamsChanged",R),()=>{window.removeEventListener("fifaVersionChanged",z),window.removeEventListener("versionTeamsChanged",R)}})(),[g]);const p=()=>{const v=ue(),z=oe();s(v),t(z),g||(b(v),$(v))},$=v=>{const z=Pe(v);d(z),o(!1)},k=v=>{i&&!window.confirm("Sie haben ungespeicherte √Ñnderungen. M√∂chten Sie trotzdem die Version wechseln?")||(b(v),$(v))},h=(v,z,R)=>{d(A=>({...A,[v]:{...A[v],[z]:R}})),o(!0)},w=async(v,z)=>{if(z){if(!z.type.startsWith("image/")){I.error("Bitte w√§hlen Sie eine Bilddatei aus");return}if(z.size>2*1024*1024){I.error("Bild zu gro√ü. Maximum 2MB erlaubt.");return}try{u(!0),await Ke(v,z,g)?(I.success("Icon erfolgreich hochgeladen"),$(g)):I.error("Fehler beim Hochladen des Icons")}catch(R){console.error("Error uploading icon:",R),I.error("Fehler beim Hochladen des Icons")}finally{u(!1)}}},n=async v=>{try{u(!0),await Oe(v,g)?(I.success("Icon entfernt"),$(g)):I.error("Fehler beim Entfernen des Icons")}catch(z){console.error("Error removing icon:",z),I.error("Fehler beim Entfernen des Icons")}finally{u(!1)}},m=async()=>{try{u(!0),Ge(l,g)?(I.success("Team-Einstellungen gespeichert"),o(!1)):I.error("Fehler beim Speichern")}catch(v){console.error("Error saving teams:",v),I.error("Fehler beim Speichern")}finally{u(!1)}},y=async()=>{if(!x){I.error("Bitte w√§hlen Sie eine Quell-Version aus");return}try{u(!0),_e(x,g)?(I.success(`Team-Einstellungen von ${X(x)} kopiert`),$(g),f(!1),D("")):I.error("Fehler beim Kopieren")}catch(v){console.error("Error copying teams:",v),I.error("Fehler beim Kopieren")}finally{u(!1)}},E=async()=>{if(window.confirm("M√∂chten Sie die Team-Einstellungen f√ºr diese Version auf die Standardwerte zur√ºcksetzen?"))try{u(!0),Re(g)?(I.success("Team-Einstellungen zur√ºckgesetzt"),$(g)):I.error("Fehler beim Zur√ºcksetzen")}catch(z){console.error("Error resetting teams:",z),I.error("Fehler beim Zur√ºcksetzen")}finally{u(!1)}};return e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-6 border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Versions-spezifische Team-Einstellungen"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Konfigurieren Sie Team-Namen und Icons f√ºr verschiedene FIFA Versionen"})]}),e.jsx("div",{className:"text-4xl",children:"‚öΩ"})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Version ausw√§hlen"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:a.map(v=>e.jsxs("button",{onClick:()=>k(v.id),className:`p-4 rounded-lg border-2 transition-all ${g===v.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 text-gray-700"}`,children:[e.jsx("div",{className:"text-sm font-semibold",children:v.id}),e.jsx("div",{className:"text-xs mt-1",children:v.name}),v.id===r&&e.jsx("div",{className:"text-xs text-green-600 font-medium mt-1",children:"Aktiv"})]},v.id))})]}),g&&e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h4",{className:"font-semibold text-gray-800",children:["Team-Konfiguration f√ºr ",X(g)]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>f(!0),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Kopieren von..."}),e.jsx("button",{onClick:E,className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Zur√ºcksetzen"})]})]}),e.jsx("div",{className:"space-y-6",children:Object.entries(l).map(([v,z])=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg border-2 border-gray-200 flex items-center justify-center overflow-hidden",children:z.customIcon?e.jsx("img",{src:z.customIcon,alt:z.label,className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-2xl",children:z.icon==="aek"?"üîµ":z.icon==="real"?"üî¥":z.icon})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-gray-800",children:v}),e.jsx("p",{className:"text-sm text-gray-600",children:z.label})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Team-Name"}),e.jsx("input",{type:"text",value:z.label,onChange:R=>h(v,"label",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Team-Name eingeben"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Farbe"}),e.jsxs("select",{value:z.color,onChange:R=>h(v,"color",R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"blue",children:"Blau"}),e.jsx("option",{value:"red",children:"Rot"}),e.jsx("option",{value:"green",children:"Gr√ºn"}),e.jsx("option",{value:"yellow",children:"Gelb"}),e.jsx("option",{value:"purple",children:"Lila"}),e.jsx("option",{value:"orange",children:"Orange"}),e.jsx("option",{value:"gray",children:"Grau"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon hochladen"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:R=>w(v,R.target.files[0]),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),z.customIcon&&e.jsx("button",{onClick:()=>n(v),className:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",children:"Entfernen"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Maximale Dateigr√∂√üe: 2MB. Unterst√ºtzte Formate: JPG, PNG, GIF"})]})]})]},v))}),i&&e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:e.jsx("button",{onClick:m,disabled:c,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:c?"Speichern...":"√Ñnderungen speichern"})})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Team-Einstellungen kopieren"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Von welcher Version m√∂chten Sie die Team-Einstellungen kopieren?"}),e.jsxs("select",{value:x,onChange:v=>D(v.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg mb-4 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Version ausw√§hlen..."}),a.filter(v=>v.id!==g).map(v=>e.jsx("option",{value:v.id,children:v.name},v.id))]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>{f(!1),D("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Abbrechen"}),e.jsx("button",{onClick:y,disabled:!x||c,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Kopieren"})]})]})})]})},ct=["alcoholCalculatorValues","fifa_matches","fifa_players","fifa_bans","fifa_transactions","fifa_finances"],dt=["matches","players","bans","transactions","finances","alcoholCalculator"],ke=()=>{try{const r={};let s=!1;return ct.forEach(a=>{const t=localStorage.getItem(a);if(t&&t!=="[]"&&t!=="{}")try{r[a]=JSON.parse(t),s=!0}catch{r[a]=t,s=!0}}),s?r:null}catch(r){return console.error("Error getting legacy data:",r),null}},Ee=r=>{try{const s={};let a=!1;return dt.forEach(t=>{const l=`fifa_${r}_${t}`,d=localStorage.getItem(l);if(d&&d!=="[]"&&d!=="{}")try{s[t]=JSON.parse(d),a=!0}catch{s[t]=d,a=!0}}),a?s:null}catch(s){return console.error(`Error getting data for version ${r}:`,s),null}},mt=()=>{try{const r=ke();if(!r)throw new Error("Keine Legacy-Daten gefunden");const s={exportType:"legacy",exportDate:new Date().toISOString(),appVersion:"1.0.0",data:r,metadata:{recordCount:Ce(r),description:"Legacy Datenexport vor FIFA Versioning System"}};return Ae(s,`legacy-data-export-${new Date().toISOString().slice(0,10)}.json`),!0}catch(r){throw console.error("Error exporting legacy data:",r),r}},ut=r=>{try{const s=Ee(r);if(!s)throw new Error(`Keine Daten f√ºr Version ${r} gefunden`);const a={exportType:"version",version:r,exportDate:new Date().toISOString(),appVersion:"1.0.0",data:s,metadata:{recordCount:Ce(s),description:`Datenexport f√ºr FIFA Version ${r}`}};return Ae(a,`${r}-data-export-${new Date().toISOString().slice(0,10)}.json`),!0}catch(s){throw console.error(`Error exporting data for version ${r}:`,s),s}},ht=(r,s,a=!1)=>{try{const t=r==="legacy"?"fifa_transactions":`fifa_${r}_transactions`,l=r==="legacy"?"fifa_finances":`fifa_${r}_finances`,d=localStorage.getItem(t),g=localStorage.getItem(l);if(!d&&!g)throw new Error(`Keine Finanzdaten in Version ${r} gefunden`);const b=s==="legacy"?"fifa_transactions":`fifa_${s}_transactions`,c=s==="legacy"?"fifa_finances":`fifa_${s}_finances`,u=localStorage.getItem(b),i=localStorage.getItem(c);if((u||i)&&!a)throw new Error(`Version ${s} enth√§lt bereits Finanzdaten. Verwenden Sie '√úberschreiben' Option.`);return d&&localStorage.setItem(b,d),g&&localStorage.setItem(c,g),window.dispatchEvent(new CustomEvent("financialDataCopied",{detail:{fromVersion:r,toVersion:s,timestamp:new Date().toISOString()}})),!0}catch(t){throw console.error("Error copying financial data:",t),t}},xt=()=>{try{const r=[],s=localStorage.getItem("fifa_transactions"),a=localStorage.getItem("fifa_finances");(s||a)&&r.push({id:"legacy",name:"Legacy Daten",hasTransactions:!!s,hasFinances:!!a});const t=Ve();return Object.keys(t).forEach(l=>{const d=`fifa_${l}_transactions`,g=`fifa_${l}_finances`,b=!!localStorage.getItem(d),c=!!localStorage.getItem(g);(b||c)&&r.push({id:l,name:`${l} (${t[l]})`,hasTransactions:b,hasFinances:c})}),r}catch(r){return console.error("Error getting versions with financial data:",r),[]}},Ce=r=>{let s=0;return Object.values(r).forEach(a=>{Array.isArray(a)?s+=a.length:typeof a=="object"&&a!==null?s+=Object.keys(a).length:s+=1}),s},Ae=(r,s)=>{const a=JSON.stringify(r,null,2),t=new Blob([a],{type:"application/json"}),l=URL.createObjectURL(t),d=document.createElement("a");d.href=l,d.download=s,d.style.display="none",document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(l)},gt=async(r,s)=>{try{const a=await ft(r),t=JSON.parse(a);if(!t.data||!t.exportType)throw new Error("Ung√ºltiges Datenformat");const{data:l,exportType:d}=t;return d==="legacy"?Object.entries(l).forEach(([g,b])=>{const c=bt(g);if(c){const u=`fifa_${s}_${c}`;localStorage.setItem(u,JSON.stringify(b))}}):d==="version"&&Object.entries(l).forEach(([g,b])=>{const c=`fifa_${s}_${g}`;localStorage.setItem(c,JSON.stringify(b))}),!0}catch(a){throw console.error("Error importing data:",a),a}},bt=r=>({fifa_matches:"matches",fifa_players:"players",fifa_bans:"bans",fifa_transactions:"transactions",fifa_finances:"finances",alcoholCalculatorValues:"alcoholCalculator"})[r]||null,ft=r=>new Promise((s,a)=>{const t=new FileReader;t.onload=()=>s(t.result),t.onerror=a,t.readAsText(r)}),pt=()=>{const[r,s]=S.useState([]),[a,t]=S.useState([]),[l,d]=S.useState(!1),[g,b]=S.useState(!1),[c,u]=S.useState(!1),[i,o]=S.useState(""),[N,f]=S.useState(""),[x,D]=S.useState(!1),[p,$]=S.useState(null),[k,h]=S.useState(""),[w,n]=S.useState({});S.useEffect(()=>(()=>{m();const V=()=>{m()};return window.addEventListener("financialDataCopied",V),window.addEventListener("fifaVersionChanged",V),()=>{window.removeEventListener("financialDataCopied",V),window.removeEventListener("fifaVersionChanged",V)}})(),[]);const m=()=>{const A=oe(),V=xt(),O=ue();s(A),t(V),N||f(O),k||h(O),y()},y=()=>{var U,W,J;const A={},V=ke();V&&(A.legacy={matches:((U=V.fifa_matches)==null?void 0:U.length)||0,players:((W=V.fifa_players)==null?void 0:W.length)||0,transactions:((J=V.fifa_transactions)==null?void 0:J.length)||0,hasData:!0}),oe().forEach(Y=>{var te,se,ae;const H=Ee(Y.id);H&&(A[Y.id]={matches:((te=H.matches)==null?void 0:te.length)||0,players:((se=H.players)==null?void 0:se.length)||0,transactions:((ae=H.transactions)==null?void 0:ae.length)||0,hasData:!0})}),n(A)},E=async()=>{try{d(!0),await mt(),I.success("Legacy-Daten erfolgreich exportiert")}catch(A){console.error("Error exporting legacy data:",A),I.error(`Fehler beim Export: ${A.message}`)}finally{d(!1)}},v=async A=>{try{d(!0),await ut(A),I.success(`Daten f√ºr ${X(A)} erfolgreich exportiert`)}catch(V){console.error(`Error exporting version ${A}:`,V),I.error(`Fehler beim Export: ${V.message}`)}finally{d(!1)}},z=async()=>{if(!i||!N){I.error("Bitte w√§hlen Sie Quell- und Ziel-Version aus");return}if(i===N){I.error("Quell- und Ziel-Version m√ºssen unterschiedlich sein");return}try{d(!0),await ht(i,N,x),I.success(`Finanzdaten von ${i} nach ${N} kopiert`),b(!1),m()}catch(A){console.error("Error copying financial data:",A),I.error(`Fehler beim Kopieren: ${A.message}`)}finally{d(!1)}},R=async()=>{if(!p||!k){I.error("Bitte w√§hlen Sie eine Datei und Ziel-Version aus");return}try{d(!0),await gt(p,k),I.success(`Daten erfolgreich in ${k} importiert`),u(!1),$(null),m()}catch(A){console.error("Error importing data:",A),I.error(`Fehler beim Import: ${A.message}`)}finally{d(!1)}};return e.jsxs("div",{className:"p-4 space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-xl p-6 border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Daten Export & Import"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Legacy-Daten downloaden und Finanzdaten zwischen Versionen kopieren"})]}),e.jsx("div",{className:"text-4xl",children:"üìä"})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Daten√ºbersicht"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[w.legacy&&e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-amber-800 mb-2",children:"Legacy Daten"}),e.jsxs("div",{className:"space-y-1 text-sm text-amber-700",children:[e.jsxs("div",{children:["Matches: ",w.legacy.matches]}),e.jsxs("div",{children:["Spieler: ",w.legacy.players]}),e.jsxs("div",{children:["Transaktionen: ",w.legacy.transactions]})]})]}),r.map(A=>w[A.id]&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-blue-800 mb-2",children:A.name}),e.jsxs("div",{className:"space-y-1 text-sm text-blue-700",children:[e.jsxs("div",{children:["Matches: ",w[A.id].matches]}),e.jsxs("div",{children:["Spieler: ",w[A.id].players]}),e.jsxs("div",{children:["Transaktionen: ",w[A.id].transactions]})]})]},A.id))]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Daten exportieren"}),e.jsxs("div",{className:"space-y-4",children:[w.legacy&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-amber-800",children:"Legacy Daten"}),e.jsx("p",{className:"text-sm text-amber-600",children:"Urspr√ºngliche Daten vor dem Versioning-System"})]}),e.jsx("button",{onClick:E,disabled:l,className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Exportiere...":"Download"})]}),r.map(A=>w[A.id]&&e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-blue-800",children:A.name}),e.jsx("p",{className:"text-sm text-blue-600",children:"Versionsspezifische Daten"})]}),e.jsx("button",{onClick:()=>v(A.id),disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Exportiere...":"Download"})]},A.id))]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:"Finanzdaten kopieren"}),e.jsx("button",{onClick:()=>b(!0),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Finanzen kopieren"})]}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsx("p",{className:"text-green-800 text-sm",children:"Kopieren Sie Transaktionen und Finanzst√§nde zwischen verschiedenen FIFA Versionen. Dies ist n√ºtzlich beim Wechsel zwischen Versionen oder beim √úbertragen historischer Daten."})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800",children:"Daten importieren"}),e.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Daten importieren"})]}),e.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:e.jsx("p",{className:"text-purple-800 text-sm",children:"Importieren Sie zuvor exportierte Daten in eine bestimmte FIFA Version. Unterst√ºtzt sowohl Legacy- als auch Versionsdatenformate."})})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Finanzdaten kopieren"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Von Version"}),e.jsxs("select",{value:i,onChange:A=>o(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Version ausw√§hlen..."}),a.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Zu Version"}),e.jsxs("select",{value:N,onChange:A=>f(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",children:[e.jsx("option",{value:"",children:"Version ausw√§hlen..."}),r.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"overwrite",checked:x,onChange:A=>D(A.target.checked),className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"overwrite",className:"ml-2 text-sm text-gray-700",children:"Bestehende Daten √ºberschreiben"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Abbrechen"}),e.jsx("button",{onClick:z,disabled:!i||!N||l,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Kopiere...":"Kopieren"})]})]})}),c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full mx-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-4",children:"Daten importieren"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Datei ausw√§hlen"}),e.jsx("input",{type:"file",accept:".json",onChange:A=>$(A.target.files[0]),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ziel-Version"}),e.jsxs("select",{value:k,onChange:A=>h(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500",children:[e.jsx("option",{value:"",children:"Version ausw√§hlen..."}),r.map(A=>e.jsx("option",{value:A.id,children:A.name},A.id))]})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{u(!1),$(null)},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Abbrechen"}),e.jsx("button",{onClick:R,disabled:!p||!k||l,className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?"Importiere...":"Importieren"})]})]})})]})},yt=()=>{const[r,s]=S.useState("season"),a=[{id:"season",label:"Saison-Manager",icon:"fas fa-calendar-alt",description:"Verwalten Sie Legacy- und FC26-Daten"},{id:"fifa-versions",label:"FIFA Versionen",icon:"fas fa-gamepad",description:"Verwalten und erstellen Sie FIFA Versionen"},{id:"version-teams",label:"Versions-Teams",icon:"fas fa-users-cog",description:"Konfigurieren Sie Team-Namen und Icons pro Version"},{id:"data-export",label:"Daten-Export",icon:"fas fa-download",description:"Legacy-Daten exportieren und Finanzen kopieren"}],t=()=>{switch(r){case"season":return e.jsx(ve,{});case"fifa-versions":return e.jsx(it,{});case"version-teams":return e.jsx(ot,{});case"data-export":return e.jsx(pt,{});default:return e.jsx(ve,{})}};return e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-700 text-white shadow-xl",children:e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"flex items-center gap-6 mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center shadow-lg border border-white/10",children:e.jsx("i",{className:"fas fa-cogs text-2xl text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:"System-Manager"}),e.jsx("p",{className:"text-white/90 text-lg",children:"Zentrale Verwaltung f√ºr Saisons, FIFA Versionen und Teams"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:a.map(l=>e.jsxs("button",{onClick:()=>s(l.id),className:`group relative overflow-hidden rounded-2xl p-6 text-left transition-all duration-300 transform hover:scale-105 ${r===l.id?"bg-white text-indigo-600 shadow-2xl":"bg-white/10 backdrop-blur-sm text-white hover:bg-white/20 border border-white/20"}`,title:l.description,children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center mb-4 ${r===l.id?"bg-indigo-100 text-indigo-600":"bg-white/20 text-white"}`,children:e.jsx("i",{className:`${l.icon} text-lg`})}),e.jsx("div",{className:`font-bold text-lg mb-2 ${r===l.id?"text-indigo-600":"text-white"}`,children:l.label}),e.jsx("div",{className:`text-sm ${r===l.id?"text-indigo-500":"text-white/80"}`,children:l.description})]}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-white/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r===l.id&&e.jsx("div",{className:"absolute top-4 right-4 w-3 h-3 bg-emerald-400 rounded-full shadow-lg"})]},l.id))})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:t()})]})};function St({onLogout:r,onNavigate:s,showHints:a=!1,user:t}){const[l,d]=S.useState("search");if(!t||t.email!=="philip-melchert@live.de")return e.jsx("div",{className:"flex items-center justify-center min-h-[50vh] p-4",children:e.jsxs("div",{className:"modern-card p-8 text-center max-w-md",children:[e.jsx("div",{className:"text-6xl mb-4","aria-hidden":"true",children:"üîí"}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-text-primary",children:"Zugriff verweigert"}),e.jsx("p",{className:"text-text-secondary mb-4",children:"Sie haben keine Berechtigung, auf den Admin-Bereich zuzugreifen."}),e.jsx("button",{onClick:()=>s("matches"),className:"btn-primary","aria-label":"Zur √úbersicht zur√ºckkehren",children:"Zur √úbersicht"})]})});const g=[{id:"search",label:"Suche",icon:"fas fa-search",category:"quick",description:"Globale Suche durch alle Daten"},{id:"matches",label:"Spiele",icon:"fas fa-futbol",category:"data",description:"Neue Spiele hinzuf√ºgen und verwalten"},{id:"players",label:"Spieler",icon:"fas fa-users",category:"data",description:"Spieler hinzuf√ºgen und bearbeiten"},{id:"transactions",label:"Finanzen",icon:"fas fa-euro-sign",category:"data",description:"Transaktionen und Finanzen verwalten"},{id:"bans",label:"Sperren",icon:"fas fa-ban",category:"data",description:"Spielersperren hinzuf√ºgen und verwalten"},{id:"settings",label:"Teams",icon:"fas fa-cog",category:"config",description:"Team-Einstellungen und Konfiguration"},{id:"events",label:"Events",icon:"fas fa-bell",category:"config",description:"Events & Benachrichtigungen verwalten"},{id:"manager",label:"System",icon:"fas fa-tools",category:"system",description:"System-Manager f√ºr Saisons und Versionen"},{id:"delete",label:"Daten l√∂schen",icon:"fas fa-trash",category:"system",description:"Daten l√∂schen und bereinigen"}],b=()=>Object.entries({quick:{name:"Schnellzugriff",icon:"‚ö°",color:"blue"},data:{name:"Datenmanagement",icon:"üìä",color:"green"},config:{name:"Konfiguration",icon:"‚öôÔ∏è",color:"purple"},system:{name:"System",icon:"üîß",color:"red"}}).map(([o,N])=>({category:o,...N,tabs:g.filter(f=>f.category===o)})),c=()=>{switch(l){case"search":return e.jsx(je,{onNavigate:s});case"matches":return e.jsx(qe,{});case"bans":return e.jsx(We,{});case"players":return e.jsx(Je,{});case"transactions":return e.jsx(Ye,{});case"settings":return e.jsx(rt,{});case"events":return e.jsx(nt,{});case"delete":return e.jsx(Qe,{});case"manager":return e.jsx(yt,{});default:return e.jsx(je,{onNavigate:s})}},u=b();return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-blue-900 text-white shadow-lg",children:e.jsxs("div",{className:"p-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsx("i",{className:"fas fa-cogs text-xl"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold mb-1",children:"Verwaltung"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Zentrale Administration und Datenmanagement"})]})]}),e.jsxs("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-all duration-200 hover:shadow-lg transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-opacity-50","aria-label":"Abmelden",children:[e.jsx("i",{className:"fas fa-sign-out-alt"}),e.jsx("span",{className:"text-sm font-medium",children:"Logout"})]})]})}),e.jsx("div",{className:"bg-gradient-to-r from-slate-50 to-blue-50 border-b border-border-light",children:e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:u.map(i=>e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("span",{className:"text-lg",children:i.icon}),e.jsx("h3",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:i.name})]}),e.jsx("div",{className:"space-y-2",children:i.tabs.map(o=>e.jsxs("button",{onClick:()=>d(o.id),className:`w-full group relative overflow-hidden rounded-xl p-4 text-left transition-all duration-300 ${l===o.id?`bg-gradient-to-r from-${i.color}-500 to-${i.color}-600 text-white shadow-lg transform scale-105`:"bg-white hover:bg-gray-50 border border-gray-200 hover:border-gray-300 hover:shadow-md"}`,title:o.description,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center ${l===o.id?"bg-white/20":`bg-${i.color}-50`}`,children:e.jsx("i",{className:`${o.icon} ${l===o.id?"text-white":`text-${i.color}-600`}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`font-medium ${l===o.id?"text-white":"text-gray-900"}`,children:o.label}),e.jsx("div",{className:`text-xs mt-1 ${l===o.id?"text-white/80":"text-gray-500"}`,children:o.description})]})]}),l===o.id&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-white/5 pointer-events-none"})]},o.id))})]},i.category))})})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:c()})]})}export{St as default};
