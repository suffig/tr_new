import{r as S,j as e}from"./main-DfTwKaJ3.js";import{d as se}from"./dataManager-D4fQNwgQ.js";const re=({managers:P,beerConsumption:C,shotConsumption:w,drinkingStartTime:B})=>{var F,_,z,te;const[c,q]=S.useState(!1),[n,Q]=S.useState([]),[s,X]=S.useState([]),x=S.useRef(null),I=(i,m,f,N,v)=>{if(!f.weight||i===0&&(!m||m.shots20===0&&m.shots40===0))return 0;const y=i*25*.789;let g=0;m&&(g=m.shots20*20*.2*.789+m.shots40*20*.4*.789);const u=y+g,T=f.gender==="male"?.7:.6;let A=u/(T*f.weight);if(N&&v){const D=new Date(N),G=(new Date(v)-D)/(1e3*60*60)*.15;A=Math.max(0,A-G)}return A};S.useEffect(()=>{if(!B)return;const i=localStorage.getItem("drinkEvents");if(i)try{X(JSON.parse(i))}catch(m){console.error("Error loading drink events:",m)}},[B]),S.useEffect(()=>{if(!B)return;const i=C.alexander+w.alexander.shots20+w.alexander.shots40,m=C.philip+w.philip.shots20+w.philip.shots40,f=s[s.length-1],N=new Date().toISOString();if(!f||f.alexanderTotal!==i||f.philipTotal!==m){const v={timestamp:N,alexanderTotal:i,philipTotal:m,alexanderChange:f?i-f.alexanderTotal:i,philipChange:f?m-f.philipTotal:m,beers:{alexander:C.alexander,philip:C.philip},shots:{alexander:w.alexander,philip:w.philip}},y=[...s,v];X(y),localStorage.setItem("drinkEvents",JSON.stringify(y))}},[C,w,B,s]),S.useEffect(()=>{if(!B){Q([]);return}const i=()=>{const m=new Date(B),f=new Date,N=[],v=5,y=Math.ceil((f-m)/(1e3*60)),g=Math.min(Math.ceil(y/v),144);for(let u=0;u<=g;u++){const T=new Date(m.getTime()+u*v*60*1e3),A=I(C.alexander,w.alexander,{weight:P.aek.weight,gender:"male"},B,T.toISOString()),D=I(C.philip,w.philip,{weight:P.real.weight,gender:"male"},B,T.toISOString());N.push({time:T,timeLabel:T.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}),alexander:A,philip:D})}Q(N)};return i(),x.current=setInterval(i,6e4),()=>{x.current&&clearInterval(x.current)}},[B,C,w,P]);const $=Math.max(...n.map(i=>Math.max(i.alexander,i.philip)),1),l=i=>i>=1?"text-red-500":i>=.5?"text-orange-500":i>=.3?"text-yellow-500":"text-green-500",Y=()=>{const i=window.innerWidth<768,m=i?Math.min(window.innerWidth-32,450):900,f=i?280:400,N=i?{top:35,right:45,bottom:55,left:45}:{top:40,right:100,bottom:60,left:60},v=m-N.left-N.right,y=f-N.top-N.bottom;if(n.length===0)return e.jsx("div",{className:"flex items-center justify-center bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",style:{width:`${m}px`,height:`${f}px`},children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-2",children:"📊"}),e.jsx("p",{children:"Keine Daten zum Anzeigen"}),e.jsx("p",{className:"text-sm",children:"Trinken starten, um den Verlauf zu sehen"})]})});const g=d=>d/(n.length-1)*v,u=d=>y-d/$*y,T=(d,j)=>{if(d.length===0)return"";const M=d.map((E,R)=>({x:g(R),y:u(j(E))}));let K=`M ${M[0].x} ${M[0].y}`;for(let E=1;E<M.length;E++){const R=M[E-1],t=M[E],r=R.x+(t.x-R.x)*.4,a=R.y,o=t.x-(t.x-R.x)*.4,p=t.y;K+=` C ${r} ${a}, ${o} ${p}, ${t.x} ${t.y}`}return K},A=T(n,d=>d.alexander),D=T(n,d=>d.philip),k=[];[.3,.5,1,1.5,2].forEach(d=>{d<=$&&k.push(e.jsxs("g",{children:[e.jsx("line",{x1:0,y1:u(d),x2:v,y2:u(d),stroke:d===.5?"#f59e0b":d===1?"#ef4444":"#e5e7eb",strokeWidth:d===.5||d===1?2:1,strokeDasharray:d===.5||d===1?"5,5":"none"}),e.jsxs("text",{x:-10,y:u(d)+4,textAnchor:"end",fontSize:"12",fill:d===.5?"#d97706":d===1?"#dc2626":"#6b7280",className:"font-medium",children:[d.toFixed(1),"‰"]})]},d))});const G=[],O=new Date(B);n.forEach((d,j)=>{(d.time-O)/6e4%60===0&&j<n.length-1&&G.push(e.jsxs("g",{children:[e.jsx("line",{x1:g(j),y1:0,x2:g(j),y2:y,stroke:"#d1d5db",strokeWidth:"1",strokeDasharray:"3,3"}),e.jsx("text",{x:g(j),y:y+20,textAnchor:"middle",fontSize:"11",fill:"#6b7280",children:d.timeLabel})]},j))});const W=s.map((d,j)=>{var t,r,a,o,p,h,b,V;const M=new Date(d.timestamp),K=new Date(B),E=(M-K)/(1e3*60),R=Math.round(E/5);if(R>=0&&R<n.length){const L=g(R),U=d.alexanderChange>0&&d.beers||d.philipChange>0&&d.beers,Z=((r=(t=d.shots)==null?void 0:t.alexander)==null?void 0:r.shots20)>0||((o=(a=d.shots)==null?void 0:a.alexander)==null?void 0:o.shots40)>0||((h=(p=d.shots)==null?void 0:p.philip)==null?void 0:h.shots20)>0||((V=(b=d.shots)==null?void 0:b.philip)==null?void 0:V.shots40)>0;let ee="🍺",H="#8b5cf6";return Z&&!U?(ee="🥃",H="#f59e0b"):Z&&U&&(ee="🍻",H="#10b981"),e.jsxs("g",{children:[e.jsx("line",{x1:L,y1:0,x2:L,y2:y,stroke:H,strokeWidth:i?"1.5":"2",strokeDasharray:"4,2",opacity:"0.7"}),e.jsx("circle",{cx:L,cy:-15,r:i?"8":"10",fill:H,stroke:"white",strokeWidth:i?"2":"3",style:{filter:"drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3))"}}),e.jsx("text",{x:L,y:i?"-10":"-7",textAnchor:"middle",fontSize:i?"11":"13",fill:"white",className:"font-bold",style:{filter:"drop-shadow(0 1px 2px rgba(0, 0, 0, 0.5))"},children:ee})]},j)}return null});return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm p-3 md:p-4 overflow-x-auto",children:[e.jsxs("svg",{width:m,height:f,className:"overflow-visible mx-auto block",viewBox:i?`0 0 ${m} ${f}`:void 0,style:i?{maxWidth:"100%",height:"auto"}:{},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"backgroundGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#f8fafc"}),e.jsx("stop",{offset:"100%",stopColor:"#f1f5f9"})]}),e.jsxs("filter",{id:"alexanderGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),e.jsxs("filter",{id:"philipGlow",children:[e.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("rect",{x:N.left,y:N.top,width:v,height:y,fill:"url(#backgroundGradient)",rx:"8"}),e.jsxs("g",{transform:`translate(${N.left}, ${N.top})`,children:[k,G,e.jsxs("defs",{children:[e.jsxs("pattern",{id:"warningZone",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:[e.jsx("rect",{width:"4",height:"4",fill:"#fef3c7"}),e.jsx("path",{d:"M 0,2 L 2,0 M 2,4 L 4,2",stroke:"#f59e0b",strokeWidth:"0.3"})]}),e.jsxs("pattern",{id:"dangerZone",patternUnits:"userSpaceOnUse",width:"4",height:"4",children:[e.jsx("rect",{width:"4",height:"4",fill:"#fee2e2"}),e.jsx("path",{d:"M 0,2 L 2,0 M 2,4 L 4,2",stroke:"#ef4444",strokeWidth:"0.3"})]})]}),$>.5&&e.jsx("rect",{x:0,y:u(Math.min(1,$)),width:v,height:u(.5)-u(Math.min(1,$)),fill:"url(#warningZone)",opacity:"0.4"}),$>1&&e.jsx("rect",{x:0,y:0,width:v,height:u(1),fill:"url(#dangerZone)",opacity:"0.4"}),W,n.filter((d,j)=>j%Math.ceil(n.length/8)===0).map((d,j)=>e.jsx("text",{x:g(j*Math.ceil(n.length/8)),y:y+35,textAnchor:"middle",fontSize:"11",fill:"#6b7280",className:"font-medium",children:d.timeLabel},j)),e.jsx("path",{d:A,fill:"none",stroke:"#3b82f6",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#alexanderGlow)",opacity:"0.9"}),e.jsx("path",{d:D,fill:"none",stroke:"#10b981",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#philipGlow)",opacity:"0.9"}),n.map((d,j)=>j%3!==0&&j!==n.length-1?null:e.jsxs("g",{children:[e.jsx("circle",{cx:g(j),cy:u(d.alexander),r:"6",fill:"#3b82f6",stroke:"white",strokeWidth:"3",style:{filter:"drop-shadow(0 2px 4px rgba(59, 130, 246, 0.3))"}}),e.jsx("circle",{cx:g(j),cy:u(d.philip),r:"6",fill:"#10b981",stroke:"white",strokeWidth:"3",style:{filter:"drop-shadow(0 2px 4px rgba(16, 185, 129, 0.3))"}})]},j))]}),!i&&e.jsxs("g",{transform:`translate(${m-N.right+15}, ${N.top+20})`,children:[e.jsx("rect",{x:-10,y:-15,width:85,height:110,fill:"white",stroke:"#e5e7eb",strokeWidth:"2",rx:"8",style:{filter:"drop-shadow(0 4px 6px rgba(0, 0, 0, 0.1))"}}),e.jsx("text",{x:30,y:-5,textAnchor:"middle",fontSize:"12",fill:"#374151",className:"font-bold",children:"Legende"}),e.jsx("line",{x1:5,y1:10,x2:20,y2:10,stroke:"#3b82f6",strokeWidth:"4"}),e.jsx("text",{x:25,y:14,fontSize:"11",fill:"#374151",className:"font-medium",children:"Alexander"}),e.jsx("line",{x1:5,y1:30,x2:20,y2:30,stroke:"#10b981",strokeWidth:"4"}),e.jsx("text",{x:25,y:34,fontSize:"11",fill:"#374151",className:"font-medium",children:"Philip"}),e.jsx("line",{x1:5,y1:50,x2:20,y2:50,stroke:"#8b5cf6",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("text",{x:25,y:54,fontSize:"11",fill:"#374151",className:"font-medium",children:"🍺 Bier"}),e.jsx("line",{x1:5,y1:70,x2:20,y2:70,stroke:"#f59e0b",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("text",{x:25,y:74,fontSize:"11",fill:"#374151",className:"font-medium",children:"🥃 Shots"}),e.jsx("line",{x1:5,y1:90,x2:20,y2:90,stroke:"#10b981",strokeWidth:"2",strokeDasharray:"4,2"}),e.jsx("text",{x:25,y:94,fontSize:"11",fill:"#374151",className:"font-medium",children:"🍻 Mix"})]})]}),i&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2 text-center",children:"Legende"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:"w-5 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Alexander"})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("div",{className:"w-5 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Philip"})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("span",{className:"text-lg",children:"🍺"}),e.jsx("span",{className:"text-sm",children:"Bier"})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[e.jsx("span",{className:"text-lg",children:"🥃"}),e.jsx("span",{className:"text-sm",children:"Shots"})]})]})]})]})};return B?e.jsxs("div",{className:"modern-card mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between cursor-pointer",onClick:()=>q(!c),children:[e.jsx("h3",{className:"font-bold text-lg text-text-primary",children:"📈 Alkoholverlauf beider Manager"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Alexander: "}),e.jsxs("span",{className:`font-bold ${l(((F=n[n.length-1])==null?void 0:F.alexander)||0)}`,children:[(((_=n[n.length-1])==null?void 0:_.alexander)||0).toFixed(2),"‰"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{children:"Philip: "}),e.jsxs("span",{className:`font-bold ${l(((z=n[n.length-1])==null?void 0:z.philip)||0)}`,children:[(((te=n[n.length-1])==null?void 0:te.philip)||0).toFixed(2),"‰"]})]})]}),e.jsx("button",{className:"text-2xl transition-transform duration-200",children:c?"📉":"📊"})]})]}),c&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"mb-4 text-sm text-text-muted",children:["BAK-Verlauf seit Trinkbeginn (",new Date(B).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit"}),")"]}),e.jsx(Y,{}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("div",{className:"font-medium text-yellow-800 mb-1",children:"⚠️ Grenzwerte"}),e.jsxs("div",{className:"text-yellow-700 space-y-1",children:[e.jsx("div",{children:"0,3‰: Reaktionszeit verlangsamt"}),e.jsx("div",{children:"0,5‰: Fahruntüchtig"}),e.jsx("div",{children:"1,0‰: Schwer betrunken"})]})]}),e.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"font-medium text-blue-800 mb-1",children:"🔵 Alexander aktuell"}),e.jsxs("div",{className:"text-blue-700",children:[e.jsxs("div",{children:["Gewicht: ",P.aek.weight,"kg"]}),e.jsxs("div",{children:["Biere: ",C.alexander]}),e.jsxs("div",{children:["Shots: ",w.alexander.shots20+w.alexander.shots40]})]})]}),e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx("div",{className:"font-medium text-green-800 mb-1",children:"🟢 Philip aktuell"}),e.jsxs("div",{className:"text-green-700",children:[e.jsxs("div",{children:["Gewicht: ",P.real.weight,"kg"]}),e.jsxs("div",{children:["Biere: ",C.philip]}),e.jsxs("div",{children:["Shots: ",w.philip.shots20+w.philip.shots40]})]})]})]}),s.length>0&&e.jsxs("div",{className:"mt-4 p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsxs("div",{className:"font-medium text-purple-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"🍺"}),e.jsx("span",{children:"Getränke-Timeline (letzte 5)"})]}),e.jsx("div",{className:"space-y-2 max-h-32 overflow-y-auto custom-scrollbar",children:s.slice(-5).reverse().map((i,m)=>{var g,u,T,A,D,k,J,G,O,W;const f=((g=i.beers)==null?void 0:g.alexander)||0,N=((u=i.beers)==null?void 0:u.philip)||0,v=(((A=(T=i.shots)==null?void 0:T.alexander)==null?void 0:A.shots20)||0)+(((k=(D=i.shots)==null?void 0:D.alexander)==null?void 0:k.shots40)||0),y=(((G=(J=i.shots)==null?void 0:J.philip)==null?void 0:G.shots20)||0)+(((W=(O=i.shots)==null?void 0:O.philip)==null?void 0:W.shots40)||0);return e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded-md border border-purple-100",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"text-xs text-purple-600 font-mono",children:new Date(i.timestamp).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})})}),e.jsxs("div",{className:"flex items-center gap-3",children:[i.alexanderChange>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Alex:"}),f>0&&e.jsxs("span",{className:"flex items-center text-sm",children:["🍺",e.jsxs("span",{className:"text-xs text-blue-600 ml-0.5",children:["+",i.alexanderChange]})]}),v>0&&e.jsxs("span",{className:"flex items-center text-sm",children:["🥃",e.jsxs("span",{className:"text-xs text-blue-600 ml-0.5",children:["+",i.alexanderChange]})]})]}),i.philipChange>0&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"Phil:"}),N>0&&e.jsxs("span",{className:"flex items-center text-sm",children:["🍺",e.jsxs("span",{className:"text-xs text-green-600 ml-0.5",children:["+",i.philipChange]})]}),y>0&&e.jsxs("span",{className:"flex items-center text-sm",children:["🥃",e.jsxs("span",{className:"text-xs text-green-600 ml-0.5",children:["+",i.philipChange]})]})]})]})]},m)})})]})]})]}):null};function le({onNavigate:P,showHints:C=!1}){var R;const[w,B]=S.useState("alcohol"),[c,q]=S.useState({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}}),[n,Q]=S.useState({alexander:0,philip:0}),[s,X]=S.useState({alexander:{shots20:0,shots40:0},philip:{shots20:0,shots40:0}}),[x,I]=S.useState(null),$=S.useCallback(async()=>{try{console.log("🔄 Loading managers from database...");const t=await se.getManagers();if(console.log("📊 Manager data result:",t),t&&t.data&&Array.isArray(t.data)&&t.data.length>=2){console.log("✅ Manager data loaded successfully:",t.data);const r=t.data.find(o=>o.id===1)||{name:"Alexander",gewicht:110},a=t.data.find(o=>o.id===2)||{name:"Philip",gewicht:105};console.log("👤 AEK Manager:",r),console.log("👤 Real Manager:",a),q({aek:{name:r.name,age:r.age||30,weight:r.gewicht},real:{name:a.name,age:a.age||30,weight:a.gewicht}})}else console.warn("⚠️ No manager data found, using defaults. Result:",t),q({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}})}catch(t){console.error("❌ Error loading manager settings from database:",t),q({aek:{name:"Alexander",age:30,weight:110},real:{name:"Philip",age:30,weight:105}})}},[]),[l,Y]=S.useState({alexander:{balance:0,totalEarnings:0},philip:{balance:0,totalEarnings:0},gameCounter:0,rounds:[],currentRound:{active:!1,roundNumber:1,games:[],startTime:null}}),[F,_]=S.useState({alexander:"",philip:""}),[z,te]=S.useState({alexander:!1,philip:!1});S.useEffect(()=>{$();const t=localStorage.getItem("beerConsumption");if(t)try{Q(JSON.parse(t))}catch(h){console.error("Error loading beer consumption:",h)}const r=localStorage.getItem("shotConsumption");if(r)try{X(JSON.parse(r))}catch(h){console.error("Error loading shot consumption:",h)}const a=localStorage.getItem("drinkingStartTime");a&&I(a);const o=localStorage.getItem("bjTracking");if(o)try{const h=JSON.parse(o);Y(h)}catch(h){console.error("Error loading BJ tracking data:",h),Y({alexander:{balance:0,totalEarnings:0},philip:{balance:0,totalEarnings:0},gameCounter:0,rounds:[],currentRound:{active:!1,roundNumber:1,games:[],startTime:null}})}const p=()=>{$()};return window.addEventListener("managerSettingsChanged",p),()=>window.removeEventListener("managerSettingsChanged",p)},[$]);const i=t=>{Q(t),localStorage.setItem("beerConsumption",JSON.stringify(t))},m=t=>{X(t),localStorage.setItem("shotConsumption",JSON.stringify(t))},f=t=>{const r={...n,[t]:n[t]+1};if(i(r),!x){const a=new Date().toISOString();I(a),localStorage.setItem("drinkingStartTime",a)}},N=()=>{const t={alexander:n.alexander+1,philip:n.philip+1};if(i(t),!x){const r=new Date().toISOString();I(r),localStorage.setItem("drinkingStartTime",r)}},v=(t,r)=>{const a=r===40?"shots40":"shots20",o={...s,[t]:{...s[t],[a]:s[t][a]+1}};if(m(o),!x){const p=new Date().toISOString();I(p),localStorage.setItem("drinkingStartTime",p)}},y=()=>{i({alexander:0,philip:0}),m({alexander:{shots20:0,shots40:0},philip:{shots20:0,shots40:0}}),I(null),localStorage.removeItem("drinkingStartTime")},g=(t,r,a,o=null)=>{if(!a.weight||t===0&&(!r||r.shots20===0&&r.shots40===0))return"0.00";const p=t*25*.789;let h=0;r&&(h=r.shots20*20*.2*.789+r.shots40*20*.4*.789);const b=p+h,V=a.gender==="male"?.7:.6;let L=b/(V*a.weight);if(o){const U=new Date,Z=new Date(o),H=(U-Z)/(1e3*60*60)*.15;L=Math.max(0,L-H)}return L.toFixed(2)},u=(t,r,a,o)=>{if(!a.weight||t===0&&(!r||r.shots20===0&&r.shots40===0)||!o)return null;const p=t*25*.789;let h=0;r&&(h=r.shots20*20*.2*.789+r.shots40*20*.4*.789);const b=p+h,V=a.gender==="male"?.7:.6,U=b/(V*a.weight)/.15,Z=new Date(o);return new Date(Z.getTime()+U*60*60*1e3)},T=({bac:t,name:r})=>{const a=parseFloat(t),p=Math.min(a/2*100,100),h=b=>b>=1?"bg-red-500":b>=.5?"bg-orange-500":b>=.3?"bg-yellow-500":"bg-green-500";return e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"0‰"}),e.jsxs("span",{children:[r," BAC"]}),e.jsx("span",{children:"2‰"})]}),e.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-4 relative",children:[e.jsx("div",{className:`h-4 rounded-full transition-all duration-500 ${h(a)}`,style:{width:`${p}%`}}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center text-xs font-bold text-white",children:[t,"‰"]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"Nüchtern"}),e.jsx("span",{children:"Betrunken"})]})]})},A=()=>{if(!x)return null;const t=new Date,r=new Date(x),a=(t-r)/(1e3*60*60);return a<1?`${Math.floor(a*60)} Minuten`:`${a.toFixed(1)} Stunden`},D=t=>{Y(t),localStorage.setItem("bjTracking",JSON.stringify(t))},k=(t,r)=>{const a={...l,[t]:{...l[t],balance:l[t].balance+r,totalEarnings:l[t].totalEarnings+r},gameCounter:l.gameCounter+1};l.currentRound.active||(a.currentRound={active:!0,roundNumber:l.rounds.length+1,games:[],startTime:new Date().toISOString()});const o={id:Date.now(),gameNumber:l.gameCounter+1,player:t,amount:r,timestamp:new Date().toISOString(),description:`${t==="alexander"?c.aek.name:c.real.name}: +${r.toFixed(2)}€`};if(a.currentRound.games=[...l.currentRound.games,o],a.currentRound.games.length>=10){const p={id:Date.now(),roundNumber:a.currentRound.roundNumber,games:[...a.currentRound.games],startTime:a.currentRound.startTime,endTime:new Date().toISOString(),gamesCount:a.currentRound.games.length,alexanderTotal:a.currentRound.games.filter(h=>h.player==="alexander").reduce((h,b)=>h+b.amount,0),philipTotal:a.currentRound.games.filter(h=>h.player==="philip").reduce((h,b)=>h+b.amount,0)};a.rounds=[...l.rounds,p],a.currentRound={active:!1,roundNumber:l.rounds.length+2,games:[],startTime:null}}D(a)},J=()=>{const t={...l,gameCounter:l.gameCounter+1};l.currentRound.active||(t.currentRound={active:!0,roundNumber:l.rounds.length+1,games:[],startTime:new Date().toISOString()});const r={id:Date.now(),gameNumber:l.gameCounter+1,player:null,amount:0,timestamp:new Date().toISOString(),description:"Unentschieden (0€)"};if(t.currentRound.games=[...l.currentRound.games,r],t.currentRound.games.length>=10){const a={id:Date.now(),roundNumber:t.currentRound.roundNumber,games:[...t.currentRound.games],startTime:t.currentRound.startTime,endTime:new Date().toISOString(),gamesCount:t.currentRound.games.length,alexanderTotal:t.currentRound.games.filter(o=>o.player==="alexander").reduce((o,p)=>o+p.amount,0),philipTotal:t.currentRound.games.filter(o=>o.player==="philip").reduce((o,p)=>o+p.amount,0)};t.rounds=[...l.rounds,a],t.currentRound={active:!1,roundNumber:l.rounds.length+2,games:[],startTime:null}}D(t)},G=()=>{const t={...l,currentRound:{active:!0,roundNumber:l.rounds.length+1,games:[],startTime:new Date().toISOString()}};D(t)},O=()=>{if(!l.currentRound.active)return;const t={id:Date.now(),roundNumber:l.currentRound.roundNumber,games:[...l.currentRound.games],startTime:l.currentRound.startTime,endTime:new Date().toISOString(),gamesCount:l.currentRound.games.length,alexanderTotal:l.currentRound.games.filter(a=>a.player==="alexander").reduce((a,o)=>a+o.amount,0),philipTotal:l.currentRound.games.filter(a=>a.player==="philip").reduce((a,o)=>a+o.amount,0)},r={...l,rounds:[...l.rounds,t],currentRound:{active:!1,roundNumber:l.rounds.length+2,games:[],startTime:null}};D(r)},W=()=>{D({alexander:{balance:0,totalEarnings:0},philip:{balance:0,totalEarnings:0},gameCounter:0,rounds:[],currentRound:{active:!1,roundNumber:1,games:[],startTime:null}})},d=()=>{l.currentRound.active&&l.currentRound.games.length>0&&O();const t=l.alexander.balance,r=l.philip.balance,a=l.gameCounter,o=l.rounds.length+(l.currentRound.active?1:0),p=t>r?c.aek.name:r>t?c.real.name:"Unentschieden",h=Math.abs(t-r);let b=`🃏 BJ-Session Beendet!

`;b+=`📊 Finale Abrechnung:
`,b+=`🔵 ${c.aek.name}: +${t.toFixed(2)}€
`,b+=`🟢 ${c.real.name}: +${r.toFixed(2)}€

`,b+=`🏆 Gewinner: ${p}
`,h>0&&(b+=`💰 Differenz: ${h.toFixed(2)}€

`),b+=`🎮 Gespielt: ${a} Spiele in ${o} Runden

`,b+="Möchten Sie die Session zurücksetzen?",window.confirm(b)&&W()},j=(t,r)=>{_(a=>({...a,[t]:r}))},M=t=>{const r=parseFloat(F[t]);r&&r>0&&(k(t,r),_(a=>({...a,[t]:""})))},K=({currentGames:t,maxGames:r=10})=>{const a=Math.min(t/r*100,100),o=t>=r;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex justify-between text-sm font-medium mb-2",children:[e.jsx("span",{className:"text-purple-700",children:"Spiele-Fortschritt"}),e.jsxs("span",{className:`${o?"text-green-600":"text-purple-600"}`,children:[t,"/",r," Spiele"]})]}),e.jsxs("div",{className:"w-full bg-gray-200 rounded-full h-3 relative overflow-hidden",children:[e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${o?"bg-gradient-to-r from-green-500 to-green-600":"bg-gradient-to-r from-purple-500 to-purple-600"}`,style:{width:`${a}%`}}),o&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs font-bold",children:"✓ Abgeschlossen"})})]}),o&&e.jsx("div",{className:"text-center mt-2",children:e.jsx("span",{className:"text-xs text-green-600 font-medium",children:"🎉 10 Spiele erreicht! Zeit für eine neue Runde?"})})]})},E=t=>{te(r=>({...r,[t]:!r[t]}))};return e.jsxs("div",{className:"p-4 pb-24 mobile-safe-bottom",children:[e.jsxs("div",{className:"mb-6 animate-mobile-slide-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-info rounded-ios-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xl",children:"🍺"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-title1 font-bold text-text-primary",children:"Alkohol & Blackjack"}),e.jsx("p",{className:"text-footnote text-text-secondary",children:"Alexander vs Philip - Getränke und Kartenspiele verfolgen"})]})]}),e.jsx("div",{className:"w-full h-1 bg-bg-tertiary rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-info w-3/4 rounded-full animate-pulse-gentle"})})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>B("alcohol"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 ${w==="alcohol"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"🍺 Alkohol-Tracker"}),e.jsx("button",{onClick:()=>B("blackjack"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 ${w==="blackjack"?"bg-white text-red-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:"🃏 Blackjack-Tracker"})]})}),w==="alcohol"&&e.jsxs(e.Fragment,{children:[x&&e.jsxs("div",{className:"mb-4 text-sm text-text-muted",children:["📅 Trinken gestartet vor: ",A()]}),e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-blue-50 to-green-50 border-2 border-blue-200",children:[e.jsxs("h3",{className:"font-bold text-lg mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"⚡"}),e.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-green-600 bg-clip-text text-transparent",children:"Schnell-Aktionen"})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsxs("button",{onClick:N,className:"bg-gradient-to-r from-blue-600 to-green-600 hover:from-blue-700 hover:to-green-700 text-white px-6 py-4 rounded-xl transition-all duration-200 font-medium text-lg shadow-lg hover:shadow-xl transform hover:scale-105 flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🍻"}),e.jsx("span",{children:"Beiden ein Bier hinzufügen"})]}),e.jsxs("button",{onClick:y,className:"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-4 py-3 rounded-xl transition-all duration-200 font-medium shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🔄"}),e.jsx("span",{children:"Zurücksetzen"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"modern-card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-blue-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🔵"}),e.jsx("span",{children:c.aek.name})]}),e.jsxs("div",{className:"text-sm text-blue-600 bg-blue-200 px-3 py-1 rounded-full font-medium",children:[c.aek.weight,"kg"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsx("button",{onClick:()=>f("alexander"),className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🍺 + Bier"}),e.jsx("button",{onClick:()=>v("alexander",20),className:"bg-blue-500 hover:bg-blue-600 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🥃 Shot 20%"}),e.jsx("button",{onClick:()=>v("alexander",40),className:"bg-blue-700 hover:bg-blue-800 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🥃 Shot 40%"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-blue-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-blue-700",children:n.alexander}),e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"🍺"})]}),e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-blue-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-blue-700",children:s.alexander.shots20}),e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"🥃20%"})]}),e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-blue-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-blue-700",children:s.alexander.shots40}),e.jsx("span",{className:"text-xs text-blue-600 ml-1",children:"🥃40%"})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-100 to-blue-50 border border-blue-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-700 mb-2",children:[g(n.alexander,s.alexander,{weight:c.aek.weight,gender:"male"},x),"‰"]}),e.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Blutalkoholkonzentration (BAK)"}),(n.alexander>0||s.alexander.shots20>0||s.alexander.shots40>0)&&e.jsxs("div",{className:"text-xs text-blue-500 mt-1",children:[n.alexander>0&&`${n.alexander} × 0,5L Bier`,n.alexander>0&&(s.alexander.shots20>0||s.alexander.shots40>0)&&" + ",s.alexander.shots20>0&&`${s.alexander.shots20} × 2cl (20%)`,s.alexander.shots20>0&&s.alexander.shots40>0&&" + ",s.alexander.shots40>0&&`${s.alexander.shots40} × 2cl (40%)`]})]}),e.jsx(T,{bac:g(n.alexander,s.alexander,{weight:c.aek.weight,gender:"male"},x),name:"Alexander"}),x&&(n.alexander>0||s.alexander.shots20>0||s.alexander.shots40>0)&&e.jsx("div",{className:"mt-3 text-center text-sm text-blue-600",children:(()=>{const t=u(n.alexander,s.alexander,{weight:c.aek.weight,gender:"male"},x);return t&&t>new Date?`🕐 Wieder nüchtern: ${t.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})}`:parseFloat(g(n.alexander,s.alexander,{weight:c.aek.weight,gender:"male"},x))===0?"✅ Bereits nüchtern":null})()})]})]}),e.jsxs("div",{className:"modern-card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-300 shadow-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-lg text-green-700 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🟢"}),e.jsx("span",{children:c.real.name})]}),e.jsxs("div",{className:"text-sm text-green-600 bg-green-200 px-3 py-1 rounded-full font-medium",children:[c.real.weight,"kg"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[e.jsx("button",{onClick:()=>f("philip"),className:"bg-green-600 hover:bg-green-700 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🍺 + Bier"}),e.jsx("button",{onClick:()=>v("philip",20),className:"bg-green-500 hover:bg-green-600 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🥃 Shot 20%"}),e.jsx("button",{onClick:()=>v("philip",40),className:"bg-green-700 hover:bg-green-800 text-white px-3 py-3 rounded-xl transition-all duration-200 font-medium text-sm shadow-md hover:shadow-lg transform hover:scale-105",children:"🥃 Shot 40%"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-green-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-green-700",children:n.philip}),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"🍺"})]}),e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-green-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-green-700",children:s.philip.shots20}),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"🥃20%"})]}),e.jsxs("div",{className:"flex items-center justify-center bg-white rounded-lg border border-green-200 px-2 py-3",children:[e.jsx("span",{className:"text-lg font-bold text-green-700",children:s.philip.shots40}),e.jsx("span",{className:"text-xs text-green-600 ml-1",children:"🥃40%"})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-green-100 to-green-50 border border-green-300 rounded-lg",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-700 mb-2",children:[g(n.philip,s.philip,{weight:c.real.weight,gender:"male"},x),"‰"]}),e.jsx("div",{className:"text-sm text-green-600 font-medium",children:"Blutalkoholkonzentration (BAK)"}),(n.philip>0||s.philip.shots20>0||s.philip.shots40>0)&&e.jsxs("div",{className:"text-xs text-green-500 mt-1",children:[n.philip>0&&`${n.philip} × 0,5L Bier`,n.philip>0&&(s.philip.shots20>0||s.philip.shots40>0)&&" + ",s.philip.shots20>0&&`${s.philip.shots20} × 2cl (20%)`,s.philip.shots20>0&&s.philip.shots40>0&&" + ",s.philip.shots40>0&&`${s.philip.shots40} × 2cl (40%)`]})]}),e.jsx(T,{bac:g(n.philip,s.philip,{weight:c.real.weight,gender:"male"},x),name:"Philip"}),x&&(n.philip>0||s.philip.shots20>0||s.philip.shots40>0)&&e.jsx("div",{className:"mt-3 text-center text-sm text-green-600",children:(()=>{const t=u(n.philip,s.philip,{weight:c.real.weight,gender:"male"},x);return t&&t>new Date?`🕐 Wieder nüchtern: ${t.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})}`:parseFloat(g(n.philip,s.philip,{weight:c.real.weight,gender:"male"},x))===0?"✅ Bereits nüchtern":null})()})]})]})]}),e.jsxs("div",{className:"modern-card mt-6",children:[e.jsx("h3",{className:"font-bold text-lg mb-4",children:"📊 Erweiterte Statistiken"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"🍻 Aktuelle Session"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-text-primary",children:n.alexander+n.philip}),e.jsx("div",{className:"text-sm text-text-muted",children:"Biere gesamt"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-text-primary",children:[((n.alexander+n.philip)*.5).toFixed(1),"L"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Biervolumen"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-xl font-bold text-text-primary",children:s.alexander.shots20+s.alexander.shots40+s.philip.shots20+s.philip.shots40}),e.jsx("div",{className:"text-sm text-text-muted",children:"Shots gesamt"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-xl font-bold text-text-primary",children:[(s.alexander.shots20+s.alexander.shots40+s.philip.shots20+s.philip.shots40)*2,"cl"]}),e.jsx("div",{className:"text-sm text-text-muted",children:"Shot-Volumen"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"👥 Spieler-Vergleich"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("h5",{className:"font-semibold text-blue-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🔵"}),c.aek.name]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Biere:"}),e.jsx("span",{className:"font-semibold",children:n.alexander})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shots (20%):"}),e.jsx("span",{className:"font-semibold",children:s.alexander.shots20})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shots (40%):"}),e.jsx("span",{className:"font-semibold",children:s.alexander.shots40})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{children:"Aktueller BAK:"}),e.jsxs("span",{className:"font-bold text-blue-700",children:[g(n.alexander,s.alexander,c.aek,x),"‰"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Alkohol-Volumen:"}),e.jsxs("span",{className:"font-semibold",children:[(n.alexander*.5*.05+s.alexander.shots20*.02*.2+s.alexander.shots40*.02*.4).toFixed(2),"L"]})]})]})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("h5",{className:"font-semibold text-green-700 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"🟢"}),c.real.name]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Biere:"}),e.jsx("span",{className:"font-semibold",children:n.philip})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shots (20%):"}),e.jsx("span",{className:"font-semibold",children:s.philip.shots20})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shots (40%):"}),e.jsx("span",{className:"font-semibold",children:s.philip.shots40})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{children:"Aktueller BAK:"}),e.jsxs("span",{className:"font-bold text-green-700",children:[g(n.philip,s.philip,c.real,x),"‰"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Alkohol-Volumen:"}),e.jsxs("span",{className:"font-semibold",children:[(n.philip*.5*.05+s.philip.shots20*.02*.2+s.philip.shots40*.02*.4).toFixed(2),"L"]})]})]})]})]})]}),x&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"⏰ Session-Info"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsx("div",{className:"text-lg font-bold text-indigo-700",children:A()}),e.jsx("div",{className:"text-sm text-indigo-600",children:"Trinkdauer"})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"text-lg font-bold text-purple-700",children:[Math.max(parseFloat(g(n.alexander,s.alexander,c.aek,x)),parseFloat(g(n.philip,s.philip,c.real,x))).toFixed(2),"‰"]}),e.jsx("div",{className:"text-sm text-purple-600",children:"Höchster BAK"})]}),e.jsxs("div",{className:"p-3 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("div",{className:"text-lg font-bold text-orange-700",children:((n.alexander+n.philip)/Math.max(1,parseFloat(((R=A())==null?void 0:R.split(" ")[0])||"1"))).toFixed(1)}),e.jsx("div",{className:"text-sm text-orange-600",children:"Biere/Stunde"})]})]})]}),x&&(n.alexander>0||n.philip>0||s.alexander.shots20>0||s.alexander.shots40>0||s.philip.shots20>0||s.philip.shots40>0)&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold text-md mb-3 text-text-primary",children:"🕐 Nüchternzeit-Prognose"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(()=>{const t=u(n.alexander,s.alexander,c.aek,x),r=u(n.philip,s.philip,c.real,x);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-blue-700 mb-1",children:c.aek.name}),e.jsx("div",{className:"text-lg font-bold text-blue-800",children:t?t.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}):"Bereits nüchtern"}),e.jsx("div",{className:"text-xs text-blue-600",children:t?`${Math.ceil((t-new Date)/(1e3*60*60))}h verbleibend`:"✅"})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200 text-center",children:[e.jsx("div",{className:"text-sm font-medium text-green-700 mb-1",children:c.real.name}),e.jsx("div",{className:"text-lg font-bold text-green-800",children:r?r.toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"}):"Bereits nüchtern"}),e.jsx("div",{className:"text-xs text-green-600",children:r?`${Math.ceil((r-new Date)/(1e3*60*60))}h verbleibend`:"✅"})]})]})})()})]})]}),e.jsx(re,{managers:c,beerConsumption:n,shotConsumption:s,drinkingStartTime:x}),C&&e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"ℹ️ Hinweise"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsx("li",{children:"• BAK-Berechnung basiert auf der Widmark-Formel"}),e.jsx("li",{children:"• Annahme: 0,5L Bier mit 5% Alkoholgehalt"}),e.jsx("li",{children:"• Shots: 2cl mit 20% oder 40% Alkoholgehalt"}),e.jsx("li",{children:"• Abbau: 0,15‰ pro Stunde"}),e.jsx("li",{children:"• Farbkodierung: Grün (0-0,3‰), Gelb (0,3-0,5‰), Orange (0,5-1,0‰), Rot (>1,0‰)"}),e.jsx("li",{children:"• Manager-Daten können unter Admin → Team-Verwaltung angepasst werden"})]})]})]}),w==="blackjack"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-primary mb-2",children:"🃏 BJ-Tracking System"}),e.jsx("p",{className:"text-text-muted text-sm",children:"Neues Design: Separate Buttons für Alexander und Philip • Nur positive Beträge • Allgemeiner Spielcounter"})]}),e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-purple-50 to-pink-50 border-2 border-purple-300",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-purple-700 flex items-center gap-2",children:"🎯 Übersicht"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-purple-200 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-700 mb-1",children:l.gameCounter}),e.jsx("div",{className:"text-sm text-purple-600 mb-3",children:"Gespielte Spiele"}),l.currentRound.active&&e.jsx("div",{className:"mt-3",children:e.jsx(K,{currentGames:l.currentRound.games.length,maxGames:10})})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border-2 border-blue-300 text-center",children:[e.jsxs("h5",{className:"font-bold text-blue-700 mb-2 flex items-center justify-center gap-2",children:["🔵 ",c.aek.name]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["+",l.alexander.balance.toFixed(2),"€"]}),e.jsx("div",{className:"text-xs text-blue-600",children:"Kontostand"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border-2 border-green-300 text-center",children:[e.jsxs("h5",{className:"font-bold text-green-700 mb-2 flex items-center justify-center gap-2",children:["🟢 ",c.real.name]}),e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:["+",l.philip.balance.toFixed(2),"€"]}),e.jsx("div",{className:"text-xs text-green-600",children:"Kontostand"})]})]})]}),e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-300",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-orange-700 flex items-center gap-2",children:"🎮 Hauptbuttons"}),e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h5",{className:"font-medium text-blue-700 text-center mb-3",children:["🔵 ",c.aek.name]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>k("alexander",5),className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🏆 Win",e.jsx("br",{}),"+5.00€"]}),e.jsxs("button",{onClick:()=>k("alexander",7.5),className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🃏 BJ",e.jsx("br",{}),"+7.50€"]}),e.jsxs("button",{onClick:()=>k("alexander",2.5),className:"bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🤝 BJ-Push",e.jsx("br",{}),"+2.50€"]}),e.jsxs("button",{onClick:()=>k("alexander",10),className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🎲 Double",e.jsx("br",{}),"+10.00€"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>E("alexander"),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-lg text-sm font-medium transition-all border border-blue-300 hover:border-blue-400 min-h-[44px]",children:z.alexander?"🔼 Weniger Optionen":"🔽 Mehr Beträge"})}),z.alexander&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-3 animate-fade-in",children:[2.5,5,7.5,10,12.5,15,17.5,20,22.5,25,27.5,30].map(t=>e.jsxs("button",{onClick:()=>k("alexander",t),className:"bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-3 rounded-md text-sm font-medium transition-all border border-blue-300 hover:border-blue-400 min-h-[44px]",children:["+",t.toFixed(2),"€"]},t))}),e.jsxs("div",{className:"mt-3 p-2 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h6",{className:"text-xs font-medium text-blue-700 mb-1",children:"💰 Eigener Betrag:"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"number",min:"0",step:"0.01",value:F.alexander,onChange:t=>j("alexander",t.target.value),placeholder:"0.00",className:"flex-1 px-2 py-2 border border-blue-300 rounded-md text-xs text-center focus:outline-none focus:ring-1 focus:ring-blue-500 min-h-[36px] max-w-[80px]"}),e.jsx("button",{onClick:()=>M("alexander"),disabled:!F.alexander||parseFloat(F.alexander)<=0,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-2 py-2 rounded-md text-xs font-medium transition-all min-h-[36px] min-w-[36px]",children:"+€"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h5",{className:"font-medium text-green-700 text-center mb-3",children:["🟢 ",c.real.name]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>k("philip",5),className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🏆 Win",e.jsx("br",{}),"+5.00€"]}),e.jsxs("button",{onClick:()=>k("philip",7.5),className:"bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🃏 BJ",e.jsx("br",{}),"+7.50€"]}),e.jsxs("button",{onClick:()=>k("philip",2.5),className:"bg-gradient-to-r from-yellow-500 to-yellow-600 hover:from-yellow-600 hover:to-yellow-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🤝 BJ-Push",e.jsx("br",{}),"+2.50€"]}),e.jsxs("button",{onClick:()=>k("philip",10),className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-3 py-4 rounded-lg transition-all duration-200 font-bold text-sm shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:["🎲 Double",e.jsx("br",{}),"+10.00€"]})]}),e.jsx("div",{className:"text-center",children:e.jsx("button",{onClick:()=>E("philip"),className:"bg-green-100 hover:bg-green-200 text-green-700 px-4 py-2 rounded-lg text-sm font-medium transition-all border border-green-300 hover:border-green-400 min-h-[44px]",children:z.philip?"🔼 Weniger Optionen":"🔽 Mehr Beträge"})}),z.philip&&e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 mt-3 animate-fade-in",children:[2.5,5,7.5,10,12.5,15,17.5,20,22.5,25,27.5,30].map(t=>e.jsxs("button",{onClick:()=>k("philip",t),className:"bg-green-100 hover:bg-green-200 text-green-700 px-3 py-3 rounded-md text-sm font-medium transition-all border border-green-300 hover:border-green-400 min-h-[44px]",children:["+",t.toFixed(2),"€"]},t))}),e.jsxs("div",{className:"mt-3 p-2 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h6",{className:"text-xs font-medium text-green-700 mb-1",children:"💰 Eigener Betrag:"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"number",min:"0",step:"0.01",value:F.philip,onChange:t=>j("philip",t.target.value),placeholder:"0.00",className:"flex-1 px-2 py-2 border border-green-300 rounded-md text-xs text-center focus:outline-none focus:ring-1 focus:ring-green-500 min-h-[36px] max-w-[80px]"}),e.jsx("button",{onClick:()=>M("philip"),disabled:!F.philip||parseFloat(F.philip)<=0,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-2 py-2 rounded-md text-xs font-medium transition-all min-h-[36px] min-w-[36px]",children:"+€"})]})]})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:J,className:"bg-gradient-to-r from-gray-400 to-gray-500 hover:from-gray-500 hover:to-gray-600 text-white px-8 py-4 rounded-lg transition-all duration-200 font-bold shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:"🤝 Unentschieden (0€)"})})]}),e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-indigo-50 to-blue-50 border-2 border-indigo-300",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-indigo-700 flex items-center gap-2",children:"📋 Runden-Verwaltung"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[l.currentRound.active?e.jsx("button",{onClick:O,className:"bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white px-6 py-4 rounded-lg transition-all duration-200 font-bold shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:"✅ Runde abschließen"}):e.jsxs("div",{className:"text-center",children:[e.jsx("button",{onClick:G,className:"bg-gradient-to-r from-indigo-600 to-blue-600 hover:from-indigo-700 hover:to-blue-700 text-white px-6 py-4 rounded-lg transition-all duration-200 font-bold shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:"▶️ Neue Runde starten"}),e.jsx("p",{className:"text-xs text-indigo-600 mt-2",children:"💡 Oder klicke einfach einen Spiel-Button - die Runde startet automatisch!"})]}),e.jsx("button",{onClick:d,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-6 py-4 rounded-lg transition-all duration-200 font-bold shadow-md hover:shadow-lg transform hover:scale-105 min-h-[56px]",children:"🏁 BJ-Beenden"}),e.jsx("button",{onClick:W,className:"bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white px-6 py-4 rounded-lg transition-all duration-200 font-bold shadow-md hover:shadow-lg min-h-[56px]",children:"🔄 Alles zurücksetzen"})]}),l.currentRound.active&&e.jsx("div",{className:"mt-4 p-4 bg-white rounded-lg border border-indigo-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-indigo-700 mb-2",children:["📍 Aktuelle Runde ",l.currentRound.roundNumber]}),e.jsxs("div",{className:"text-xs text-indigo-600 mb-3",children:[l.currentRound.games.length," Spiele in dieser Runde"]}),l.currentRound.games.length>=10&&e.jsx("div",{className:"bg-green-100 border border-green-300 rounded-lg p-2",children:e.jsx("span",{className:"text-green-700 text-xs font-medium",children:'🎉 10 Spiele erreicht! Klicke "Runde abschließen" für die nächste Runde.'})})]})})]}),l.rounds.length>0&&e.jsxs("div",{className:"modern-card mb-6",children:[e.jsx("h4",{className:"font-bold text-lg mb-4 text-gray-700 flex items-center gap-2",children:'📊 Runden-Übersicht ("Bankauszug")'}),e.jsx("div",{className:"space-y-4",children:l.rounds.slice().reverse().map(t=>e.jsxs("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("h5",{className:"font-bold text-gray-700",children:["📋 Runde ",t.roundNumber]}),e.jsxs("span",{className:"text-xs bg-gray-200 px-2 py-1 rounded-full text-gray-600",children:[t.gamesCount," Spiele"]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(t.endTime).toLocaleString("de-DE")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-blue-700",children:["🔵 ",c.aek.name]}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["+",t.alexanderTotal.toFixed(2),"€"]})]})}),e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-green-700",children:["🟢 ",c.real.name]}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:["+",t.philipTotal.toFixed(2),"€"]})]})})]}),e.jsxs("details",{className:"mt-3",children:[e.jsxs("summary",{className:"cursor-pointer text-sm font-medium text-gray-600 hover:text-gray-800",children:["🎮 Spiele anzeigen (",t.gamesCount,")"]}),e.jsx("div",{className:"mt-2 space-y-1 max-h-40 overflow-y-auto",children:t.games.map(r=>e.jsxs("div",{className:"text-xs p-2 bg-white rounded border border-gray-200 flex justify-between items-center",children:[e.jsxs("span",{className:"text-gray-600",children:["Spiel ",r.gameNumber]}),e.jsx("span",{className:"font-medium",children:r.description}),e.jsx("span",{className:"text-gray-500",children:new Date(r.timestamp).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})})]},r.id))})]})]},t.id))})]}),l.currentRound.active&&l.currentRound.games.length>0&&e.jsxs("div",{className:"modern-card mb-6 bg-gradient-to-r from-yellow-50 to-amber-50 border-2 border-yellow-300",children:[e.jsxs("h4",{className:"font-bold text-lg mb-4 text-amber-700 flex items-center gap-2",children:["🎯 Aktuelle Runde ",l.currentRound.roundNumber," - Spiele"]}),e.jsx("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:l.currentRound.games.map(t=>e.jsxs("div",{className:"p-3 bg-white rounded-lg border border-amber-200 flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm font-medium text-amber-700",children:["Spiel ",t.gameNumber]}),e.jsx("span",{className:"text-sm",children:t.description}),e.jsx("span",{className:"text-xs text-amber-600",children:new Date(t.timestamp).toLocaleTimeString("de-DE",{hour:"2-digit",minute:"2-digit"})})]},t.id))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"modern-card bg-gradient-to-br from-blue-50 to-blue-100 border-2 border-blue-300",children:[e.jsxs("h5",{className:"font-bold text-blue-700 mb-3 flex items-center gap-2",children:["🔵 ",c.aek.name," - Statistiken"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 text-sm",children:"Aktueller Kontostand:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["+",l.alexander.balance.toFixed(2),"€"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-blue-700 text-sm",children:"Gesamt-Verdienst:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["+",l.alexander.totalEarnings.toFixed(2),"€"]})]})]})]}),e.jsxs("div",{className:"modern-card bg-gradient-to-br from-green-50 to-green-100 border-2 border-green-300",children:[e.jsxs("h5",{className:"font-bold text-green-700 mb-3 flex items-center gap-2",children:["🟢 ",c.real.name," - Statistiken"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700 text-sm",children:"Aktueller Kontostand:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["+",l.philip.balance.toFixed(2),"€"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-green-700 text-sm",children:"Gesamt-Verdienst:"}),e.jsxs("span",{className:"font-bold text-green-600",children:["+",l.philip.totalEarnings.toFixed(2),"€"]})]})]})]})]})]})]})}export{le as default};
