const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/exportImport-BiWf6yb4.js","assets/dataManager-DqBCRCnD.js","assets/main-D7dJkuOZ.js","assets/main-BqfgWwBa.css","assets/utils-Amc2d86L.js"])))=>i.map(i=>d[i]);
import{r as d,j as e,_ as o,z as s}from"./main-D7dJkuOZ.js";function y({onClose:p}){const[l,i]=d.useState(!1),[c,m]=d.useState(!1),[n,x]=d.useState(null),h=async()=>{i(!0);try{const{DataExportImport:t}=await o(async()=>{const{DataExportImport:a}=await import("./exportImport-BiWf6yb4.js");return{DataExportImport:a}},__vite__mapDeps([0,1,2,3,4])),r=await t.exportAllData();r.success?s.success("Daten erfolgreich exportiert!"):s.error(r.error||"Export fehlgeschlagen")}catch(t){console.error("Export error:",t),s.error("Fehler beim Exportieren der Daten")}finally{i(!1)}},u=async()=>{i(!0);try{const{DataExportImport:t}=await o(async()=>{const{DataExportImport:a}=await import("./exportImport-BiWf6yb4.js");return{DataExportImport:a}},__vite__mapDeps([0,1,2,3,4])),r=await t.exportPlayerStats();r.success?s.success("Spieler-Statistiken erfolgreich exportiert!"):s.error(r.error||"Export fehlgeschlagen")}catch(t){console.error("Export error:",t),s.error("Fehler beim Exportieren der Spieler-Statistiken")}finally{i(!1)}},f=async()=>{i(!0);try{const{DataExportImport:t}=await o(async()=>{const{DataExportImport:a}=await import("./exportImport-BiWf6yb4.js");return{DataExportImport:a}},__vite__mapDeps([0,1,2,3,4])),r=await t.exportFinancialData();r.success?s.success("Finanzdaten erfolgreich exportiert!"):s.error(r.error||"Export fehlgeschlagen")}catch(t){console.error("Export error:",t),s.error("Fehler beim Exportieren der Finanzdaten")}finally{i(!1)}},b=t=>{const r=t.target.files[0];r&&x(r)},g=async()=>{if(!n){s.error("Bitte w√§hlen Sie eine Datei aus");return}m(!0);try{const{DataExportImport:t}=await o(async()=>{const{DataExportImport:a}=await import("./exportImport-BiWf6yb4.js");return{DataExportImport:a}},__vite__mapDeps([0,1,2,3,4])),r=await t.importData(n);r.success?(s.success("Daten erfolgreich importiert!"),x(null),setTimeout(()=>window.location.reload(),1500)):s.error(r.error||"Import fehlgeschlagen")}catch(t){console.error("Import error:",t),s.error("Fehler beim Importieren der Daten")}finally{m(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:e.jsx("div",{className:"bg-bg-secondary rounded-lg max-w-md w-full modal-content",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-text-primary",children:"üì¶ Export/Import Manager"}),e.jsx("button",{onClick:p,className:"text-text-muted hover:text-text-primary text-2xl transition-colors",children:"√ó"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-lg font-medium text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üì§"}),"Daten exportieren"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("button",{onClick:h,disabled:l,className:"w-full flex items-center justify-between p-3 bg-blue-50 hover:bg-blue-100 border border-blue-200 rounded-lg transition-colors disabled:opacity-50",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-3",children:"üíæ"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-blue-800",children:"Komplette Datensicherung"}),e.jsx("div",{className:"text-sm text-blue-600",children:"Alle Daten als JSON"})]})]}),l&&e.jsx("div",{className:"spinner w-4 h-4"})]}),e.jsxs("button",{onClick:u,disabled:l,className:"w-full flex items-center justify-between p-3 bg-green-50 hover:bg-green-100 border border-green-200 rounded-lg transition-colors disabled:opacity-50",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-3",children:"üë•"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-green-800",children:"Spieler-Statistiken"}),e.jsx("div",{className:"text-sm text-green-600",children:"Detaillierte CSV-Datei"})]})]}),l&&e.jsx("div",{className:"spinner w-4 h-4"})]}),e.jsxs("button",{onClick:f,disabled:l,className:"w-full flex items-center justify-between p-3 bg-yellow-50 hover:bg-yellow-100 border border-yellow-200 rounded-lg transition-colors disabled:opacity-50",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-3",children:"üí∞"}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium text-yellow-800",children:"Finanzdaten"}),e.jsx("div",{className:"text-sm text-yellow-600",children:"Alle Transaktionen"})]})]}),l&&e.jsx("div",{className:"spinner w-4 h-4"})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-lg font-medium text-text-primary mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"üì•"}),"Daten importieren"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-primary mb-2",children:"Backup-Datei ausw√§hlen"}),e.jsx("input",{type:"file",accept:".json",onChange:b,className:"w-full px-3 py-2 border border-border-medium rounded-lg text-sm bg-bg-secondary text-text-primary file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-medium file:bg-primary-green file:text-white hover:file:bg-primary-green-dark",disabled:c}),n&&e.jsxs("p",{className:"text-sm text-text-muted mt-1",children:["Ausgew√§hlt: ",n.name]})]}),e.jsx("button",{onClick:g,disabled:!n||c,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:c?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"spinner w-4 h-4 mr-2"}),"Importiere..."]}):"üì• Daten importieren"})]})]}),e.jsx("div",{className:"mt-6 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-orange-500 mr-2",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"Hinweis:"})," Der Import √ºberschreibt bestehende Daten. Erstellen Sie vor dem Import eine Backup-Datei!"]})]})})]})})})}export{y as E};
